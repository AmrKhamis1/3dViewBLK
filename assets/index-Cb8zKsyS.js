function _mergeNamespaces(ne,_){for(var K=0;K<_.length;K++){const Z=_[K];if(typeof Z!="string"&&!Array.isArray(Z)){for(const te in Z)if(te!=="default"&&!(te in ne)){const ie=Object.getOwnPropertyDescriptor(Z,te);ie&&Object.defineProperty(ne,te,ie.get?ie:{enumerable:!0,get:()=>Z[te]})}}}return Object.freeze(Object.defineProperty(ne,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const te of document.querySelectorAll('link[rel="modulepreload"]'))Z(te);new MutationObserver(te=>{for(const ie of te)if(ie.type==="childList")for(const se of ie.addedNodes)se.tagName==="LINK"&&se.rel==="modulepreload"&&Z(se)}).observe(document,{childList:!0,subtree:!0});function K(te){const ie={};return te.integrity&&(ie.integrity=te.integrity),te.referrerPolicy&&(ie.referrerPolicy=te.referrerPolicy),te.crossOrigin==="use-credentials"?ie.credentials="include":te.crossOrigin==="anonymous"?ie.credentials="omit":ie.credentials="same-origin",ie}function Z(te){if(te.ep)return;te.ep=!0;const ie=K(te);fetch(te.href,ie)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(ne){return ne&&ne.__esModule&&Object.prototype.hasOwnProperty.call(ne,"default")?ne.default:ne}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var ne=Symbol.for("react.element"),_=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),se=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),fe=Symbol.iterator;function he(qe){return qe===null||typeof qe!="object"?null:(qe=fe&&qe[fe]||qe["@@iterator"],typeof qe=="function"?qe:null)}var ge={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_e=Object.assign,Se={};function Ee(qe,lt,Pt){this.props=qe,this.context=lt,this.refs=Se,this.updater=Pt||ge}Ee.prototype.isReactComponent={},Ee.prototype.setState=function(qe,lt){if(typeof qe!="object"&&typeof qe!="function"&&qe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,qe,lt,"setState")},Ee.prototype.forceUpdate=function(qe){this.updater.enqueueForceUpdate(this,qe,"forceUpdate")};function ye(){}ye.prototype=Ee.prototype;function be(qe,lt,Pt){this.props=qe,this.context=lt,this.refs=Se,this.updater=Pt||ge}var we=be.prototype=new ye;we.constructor=be,_e(we,Ee.prototype),we.isPureReactComponent=!0;var Pe=Array.isArray,Oe=Object.prototype.hasOwnProperty,Be={current:null},Ue={key:!0,ref:!0,__self:!0,__source:!0};function $e(qe,lt,Pt){var Gt,pt={},yt=null,Bt=null;if(lt!=null)for(Gt in lt.ref!==void 0&&(Bt=lt.ref),lt.key!==void 0&&(yt=""+lt.key),lt)Oe.call(lt,Gt)&&!Ue.hasOwnProperty(Gt)&&(pt[Gt]=lt[Gt]);var Wt=arguments.length-2;if(Wt===1)pt.children=Pt;else if(1<Wt){for(var jt=Array(Wt),nn=0;nn<Wt;nn++)jt[nn]=arguments[nn+2];pt.children=jt}if(qe&&qe.defaultProps)for(Gt in Wt=qe.defaultProps,Wt)pt[Gt]===void 0&&(pt[Gt]=Wt[Gt]);return{$$typeof:ne,type:qe,key:yt,ref:Bt,props:pt,_owner:Be.current}}function De(qe,lt){return{$$typeof:ne,type:qe.type,key:lt,ref:qe.ref,props:qe.props,_owner:qe._owner}}function ke(qe){return typeof qe=="object"&&qe!==null&&qe.$$typeof===ne}function Ge(qe){var lt={"=":"=0",":":"=2"};return"$"+qe.replace(/[=:]/g,function(Pt){return lt[Pt]})}var Je=/\/+/g;function Ye(qe,lt){return typeof qe=="object"&&qe!==null&&qe.key!=null?Ge(""+qe.key):lt.toString(36)}function Qe(qe,lt,Pt,Gt,pt){var yt=typeof qe;(yt==="undefined"||yt==="boolean")&&(qe=null);var Bt=!1;if(qe===null)Bt=!0;else switch(yt){case"string":case"number":Bt=!0;break;case"object":switch(qe.$$typeof){case ne:case _:Bt=!0}}if(Bt)return Bt=qe,pt=pt(Bt),qe=Gt===""?"."+Ye(Bt,0):Gt,Pe(pt)?(Pt="",qe!=null&&(Pt=qe.replace(Je,"$&/")+"/"),Qe(pt,lt,Pt,"",function(nn){return nn})):pt!=null&&(ke(pt)&&(pt=De(pt,Pt+(!pt.key||Bt&&Bt.key===pt.key?"":(""+pt.key).replace(Je,"$&/")+"/")+qe)),lt.push(pt)),1;if(Bt=0,Gt=Gt===""?".":Gt+":",Pe(qe))for(var Wt=0;Wt<qe.length;Wt++){yt=qe[Wt];var jt=Gt+Ye(yt,Wt);Bt+=Qe(yt,lt,Pt,jt,pt)}else if(jt=he(qe),typeof jt=="function")for(qe=jt.call(qe),Wt=0;!(yt=qe.next()).done;)yt=yt.value,jt=Gt+Ye(yt,Wt++),Bt+=Qe(yt,lt,Pt,jt,pt);else if(yt==="object")throw lt=String(qe),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(qe).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.");return Bt}function rt(qe,lt,Pt){if(qe==null)return qe;var Gt=[],pt=0;return Qe(qe,Gt,"","",function(yt){return lt.call(Pt,yt,pt++)}),Gt}function ot(qe){if(qe._status===-1){var lt=qe._result;lt=lt(),lt.then(function(Pt){(qe._status===0||qe._status===-1)&&(qe._status=1,qe._result=Pt)},function(Pt){(qe._status===0||qe._status===-1)&&(qe._status=2,qe._result=Pt)}),qe._status===-1&&(qe._status=0,qe._result=lt)}if(qe._status===1)return qe._result.default;throw qe._result}var ct={current:null},je={transition:null},st={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:je,ReactCurrentOwner:Be};function nt(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:rt,forEach:function(qe,lt,Pt){rt(qe,function(){lt.apply(this,arguments)},Pt)},count:function(qe){var lt=0;return rt(qe,function(){lt++}),lt},toArray:function(qe){return rt(qe,function(lt){return lt})||[]},only:function(qe){if(!ke(qe))throw Error("React.Children.only expected to receive a single React element child.");return qe}},react_production_min.Component=Ee,react_production_min.Fragment=K,react_production_min.Profiler=te,react_production_min.PureComponent=be,react_production_min.StrictMode=Z,react_production_min.Suspense=ae,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=st,react_production_min.act=nt,react_production_min.cloneElement=function(qe,lt,Pt){if(qe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+qe+".");var Gt=_e({},qe.props),pt=qe.key,yt=qe.ref,Bt=qe._owner;if(lt!=null){if(lt.ref!==void 0&&(yt=lt.ref,Bt=Be.current),lt.key!==void 0&&(pt=""+lt.key),qe.type&&qe.type.defaultProps)var Wt=qe.type.defaultProps;for(jt in lt)Oe.call(lt,jt)&&!Ue.hasOwnProperty(jt)&&(Gt[jt]=lt[jt]===void 0&&Wt!==void 0?Wt[jt]:lt[jt])}var jt=arguments.length-2;if(jt===1)Gt.children=Pt;else if(1<jt){Wt=Array(jt);for(var nn=0;nn<jt;nn++)Wt[nn]=arguments[nn+2];Gt.children=Wt}return{$$typeof:ne,type:qe.type,key:pt,ref:yt,props:Gt,_owner:Bt}},react_production_min.createContext=function(qe){return qe={$$typeof:se,_currentValue:qe,_currentValue2:qe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},qe.Provider={$$typeof:ie,_context:qe},qe.Consumer=qe},react_production_min.createElement=$e,react_production_min.createFactory=function(qe){var lt=$e.bind(null,qe);return lt.type=qe,lt},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(qe){return{$$typeof:oe,render:qe}},react_production_min.isValidElement=ke,react_production_min.lazy=function(qe){return{$$typeof:ue,_payload:{_status:-1,_result:qe},_init:ot}},react_production_min.memo=function(qe,lt){return{$$typeof:le,type:qe,compare:lt===void 0?null:lt}},react_production_min.startTransition=function(qe){var lt=je.transition;je.transition={};try{qe()}finally{je.transition=lt}},react_production_min.unstable_act=nt,react_production_min.useCallback=function(qe,lt){return ct.current.useCallback(qe,lt)},react_production_min.useContext=function(qe){return ct.current.useContext(qe)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(qe){return ct.current.useDeferredValue(qe)},react_production_min.useEffect=function(qe,lt){return ct.current.useEffect(qe,lt)},react_production_min.useId=function(){return ct.current.useId()},react_production_min.useImperativeHandle=function(qe,lt,Pt){return ct.current.useImperativeHandle(qe,lt,Pt)},react_production_min.useInsertionEffect=function(qe,lt){return ct.current.useInsertionEffect(qe,lt)},react_production_min.useLayoutEffect=function(qe,lt){return ct.current.useLayoutEffect(qe,lt)},react_production_min.useMemo=function(qe,lt){return ct.current.useMemo(qe,lt)},react_production_min.useReducer=function(qe,lt,Pt){return ct.current.useReducer(qe,lt,Pt)},react_production_min.useRef=function(qe){return ct.current.useRef(qe)},react_production_min.useState=function(qe){return ct.current.useState(qe)},react_production_min.useSyncExternalStore=function(qe,lt,Pt){return ct.current.useSyncExternalStore(qe,lt,Pt)},react_production_min.useTransition=function(){return ct.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var ne=requireReact(),_=Symbol.for("react.element"),K=Symbol.for("react.fragment"),Z=Object.prototype.hasOwnProperty,te=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ie={key:!0,ref:!0,__self:!0,__source:!0};function se(oe,ae,le){var ue,fe={},he=null,ge=null;le!==void 0&&(he=""+le),ae.key!==void 0&&(he=""+ae.key),ae.ref!==void 0&&(ge=ae.ref);for(ue in ae)Z.call(ae,ue)&&!ie.hasOwnProperty(ue)&&(fe[ue]=ae[ue]);if(oe&&oe.defaultProps)for(ue in ae=oe.defaultProps,ae)fe[ue]===void 0&&(fe[ue]=ae[ue]);return{$$typeof:_,type:oe,key:he,ref:ge,props:fe,_owner:te.current}}return reactJsxRuntime_production_min.Fragment=K,reactJsxRuntime_production_min.jsx=se,reactJsxRuntime_production_min.jsxs=se,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min$1;function requireScheduler_production_min$1(){return hasRequiredScheduler_production_min$1||(hasRequiredScheduler_production_min$1=1,(function(ne){function _(je,st){var nt=je.length;je.push(st);e:for(;0<nt;){var qe=nt-1>>>1,lt=je[qe];if(0<te(lt,st))je[qe]=st,je[nt]=lt,nt=qe;else break e}}function K(je){return je.length===0?null:je[0]}function Z(je){if(je.length===0)return null;var st=je[0],nt=je.pop();if(nt!==st){je[0]=nt;e:for(var qe=0,lt=je.length,Pt=lt>>>1;qe<Pt;){var Gt=2*(qe+1)-1,pt=je[Gt],yt=Gt+1,Bt=je[yt];if(0>te(pt,nt))yt<lt&&0>te(Bt,pt)?(je[qe]=Bt,je[yt]=nt,qe=yt):(je[qe]=pt,je[Gt]=nt,qe=Gt);else if(yt<lt&&0>te(Bt,nt))je[qe]=Bt,je[yt]=nt,qe=yt;else break e}}return st}function te(je,st){var nt=je.sortIndex-st.sortIndex;return nt!==0?nt:je.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ie=performance;ne.unstable_now=function(){return ie.now()}}else{var se=Date,oe=se.now();ne.unstable_now=function(){return se.now()-oe}}var ae=[],le=[],ue=1,fe=null,he=3,ge=!1,_e=!1,Se=!1,Ee=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function we(je){for(var st=K(le);st!==null;){if(st.callback===null)Z(le);else if(st.startTime<=je)Z(le),st.sortIndex=st.expirationTime,_(ae,st);else break;st=K(le)}}function Pe(je){if(Se=!1,we(je),!_e)if(K(ae)!==null)_e=!0,ot(Oe);else{var st=K(le);st!==null&&ct(Pe,st.startTime-je)}}function Oe(je,st){_e=!1,Se&&(Se=!1,ye($e),$e=-1),ge=!0;var nt=he;try{for(we(st),fe=K(ae);fe!==null&&(!(fe.expirationTime>st)||je&&!Ge());){var qe=fe.callback;if(typeof qe=="function"){fe.callback=null,he=fe.priorityLevel;var lt=qe(fe.expirationTime<=st);st=ne.unstable_now(),typeof lt=="function"?fe.callback=lt:fe===K(ae)&&Z(ae),we(st)}else Z(ae);fe=K(ae)}if(fe!==null)var Pt=!0;else{var Gt=K(le);Gt!==null&&ct(Pe,Gt.startTime-st),Pt=!1}return Pt}finally{fe=null,he=nt,ge=!1}}var Be=!1,Ue=null,$e=-1,De=5,ke=-1;function Ge(){return!(ne.unstable_now()-ke<De)}function Je(){if(Ue!==null){var je=ne.unstable_now();ke=je;var st=!0;try{st=Ue(!0,je)}finally{st?Ye():(Be=!1,Ue=null)}}else Be=!1}var Ye;if(typeof be=="function")Ye=function(){be(Je)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,rt=Qe.port2;Qe.port1.onmessage=Je,Ye=function(){rt.postMessage(null)}}else Ye=function(){Ee(Je,0)};function ot(je){Ue=je,Be||(Be=!0,Ye())}function ct(je,st){$e=Ee(function(){je(ne.unstable_now())},st)}ne.unstable_IdlePriority=5,ne.unstable_ImmediatePriority=1,ne.unstable_LowPriority=4,ne.unstable_NormalPriority=3,ne.unstable_Profiling=null,ne.unstable_UserBlockingPriority=2,ne.unstable_cancelCallback=function(je){je.callback=null},ne.unstable_continueExecution=function(){_e||ge||(_e=!0,ot(Oe))},ne.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<je?Math.floor(1e3/je):5},ne.unstable_getCurrentPriorityLevel=function(){return he},ne.unstable_getFirstCallbackNode=function(){return K(ae)},ne.unstable_next=function(je){switch(he){case 1:case 2:case 3:var st=3;break;default:st=he}var nt=he;he=st;try{return je()}finally{he=nt}},ne.unstable_pauseExecution=function(){},ne.unstable_requestPaint=function(){},ne.unstable_runWithPriority=function(je,st){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var nt=he;he=je;try{return st()}finally{he=nt}},ne.unstable_scheduleCallback=function(je,st,nt){var qe=ne.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?qe+nt:qe):nt=qe,je){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=nt+lt,je={id:ue++,callback:st,priorityLevel:je,startTime:nt,expirationTime:lt,sortIndex:-1},nt>qe?(je.sortIndex=nt,_(le,je),K(ae)===null&&je===K(le)&&(Se?(ye($e),$e=-1):Se=!0,ct(Pe,nt-qe))):(je.sortIndex=lt,_(ae,je),_e||ge||(_e=!0,ot(Oe))),je},ne.unstable_shouldYield=Ge,ne.unstable_wrapCallback=function(je){var st=he;return function(){var nt=he;he=st;try{return je.apply(this,arguments)}finally{he=nt}}}})(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler$1;function requireScheduler$1(){return hasRequiredScheduler$1||(hasRequiredScheduler$1=1,scheduler$1.exports=requireScheduler_production_min$1()),scheduler$1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var ne=requireReact(),_=requireScheduler$1();function K(ce){for(var de="https://reactjs.org/docs/error-decoder.html?invariant="+ce,ve=1;ve<arguments.length;ve++)de+="&args[]="+encodeURIComponent(arguments[ve]);return"Minified React error #"+ce+"; visit "+de+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z=new Set,te={};function ie(ce,de){se(ce,de),se(ce+"Capture",de)}function se(ce,de){for(te[ce]=de,ce=0;ce<de.length;ce++)Z.add(de[ce])}var oe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ae=Object.prototype.hasOwnProperty,le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ue={},fe={};function he(ce){return ae.call(fe,ce)?!0:ae.call(ue,ce)?!1:le.test(ce)?fe[ce]=!0:(ue[ce]=!0,!1)}function ge(ce,de,ve,Te){if(ve!==null&&ve.type===0)return!1;switch(typeof de){case"function":case"symbol":return!0;case"boolean":return Te?!1:ve!==null?!ve.acceptsBooleans:(ce=ce.toLowerCase().slice(0,5),ce!=="data-"&&ce!=="aria-");default:return!1}}function _e(ce,de,ve,Te){if(de===null||typeof de>"u"||ge(ce,de,ve,Te))return!0;if(Te)return!1;if(ve!==null)switch(ve.type){case 3:return!de;case 4:return de===!1;case 5:return isNaN(de);case 6:return isNaN(de)||1>de}return!1}function Se(ce,de,ve,Te,Ie,Fe,He){this.acceptsBooleans=de===2||de===3||de===4,this.attributeName=Te,this.attributeNamespace=Ie,this.mustUseProperty=ve,this.propertyName=ce,this.type=de,this.sanitizeURL=Fe,this.removeEmptyString=He}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ce){Ee[ce]=new Se(ce,0,!1,ce,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ce){var de=ce[0];Ee[de]=new Se(de,1,!1,ce[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(ce){Ee[ce]=new Se(ce,2,!1,ce.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ce){Ee[ce]=new Se(ce,2,!1,ce,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ce){Ee[ce]=new Se(ce,3,!1,ce.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(ce){Ee[ce]=new Se(ce,3,!0,ce,null,!1,!1)}),["capture","download"].forEach(function(ce){Ee[ce]=new Se(ce,4,!1,ce,null,!1,!1)}),["cols","rows","size","span"].forEach(function(ce){Ee[ce]=new Se(ce,6,!1,ce,null,!1,!1)}),["rowSpan","start"].forEach(function(ce){Ee[ce]=new Se(ce,5,!1,ce.toLowerCase(),null,!1,!1)});var ye=/[\-:]([a-z])/g;function be(ce){return ce[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ce){var de=ce.replace(ye,be);Ee[de]=new Se(de,1,!1,ce,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ce){var de=ce.replace(ye,be);Ee[de]=new Se(de,1,!1,ce,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(ce){var de=ce.replace(ye,be);Ee[de]=new Se(de,1,!1,ce,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(ce){Ee[ce]=new Se(ce,1,!1,ce.toLowerCase(),null,!1,!1)}),Ee.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(ce){Ee[ce]=new Se(ce,1,!1,ce.toLowerCase(),null,!0,!0)});function we(ce,de,ve,Te){var Ie=Ee.hasOwnProperty(de)?Ee[de]:null;(Ie!==null?Ie.type!==0:Te||!(2<de.length)||de[0]!=="o"&&de[0]!=="O"||de[1]!=="n"&&de[1]!=="N")&&(_e(de,ve,Ie,Te)&&(ve=null),Te||Ie===null?he(de)&&(ve===null?ce.removeAttribute(de):ce.setAttribute(de,""+ve)):Ie.mustUseProperty?ce[Ie.propertyName]=ve===null?Ie.type===3?!1:"":ve:(de=Ie.attributeName,Te=Ie.attributeNamespace,ve===null?ce.removeAttribute(de):(Ie=Ie.type,ve=Ie===3||Ie===4&&ve===!0?"":""+ve,Te?ce.setAttributeNS(Te,de,ve):ce.setAttribute(de,ve))))}var Pe=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oe=Symbol.for("react.element"),Be=Symbol.for("react.portal"),Ue=Symbol.for("react.fragment"),$e=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),Je=Symbol.for("react.forward_ref"),Ye=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),ct=Symbol.for("react.offscreen"),je=Symbol.iterator;function st(ce){return ce===null||typeof ce!="object"?null:(ce=je&&ce[je]||ce["@@iterator"],typeof ce=="function"?ce:null)}var nt=Object.assign,qe;function lt(ce){if(qe===void 0)try{throw Error()}catch(ve){var de=ve.stack.trim().match(/\n( *(at )?)/);qe=de&&de[1]||""}return`
`+qe+ce}var Pt=!1;function Gt(ce,de){if(!ce||Pt)return"";Pt=!0;var ve=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(de)if(de=function(){throw Error()},Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(wt){var Te=wt}Reflect.construct(ce,[],de)}else{try{de.call()}catch(wt){Te=wt}ce.call(de.prototype)}else{try{throw Error()}catch(wt){Te=wt}ce()}}catch(wt){if(wt&&Te&&typeof wt.stack=="string"){for(var Ie=wt.stack.split(`
`),Fe=Te.stack.split(`
`),He=Ie.length-1,it=Fe.length-1;1<=He&&0<=it&&Ie[He]!==Fe[it];)it--;for(;1<=He&&0<=it;He--,it--)if(Ie[He]!==Fe[it]){if(He!==1||it!==1)do if(He--,it--,0>it||Ie[He]!==Fe[it]){var ut=`
`+Ie[He].replace(" at new "," at ");return ce.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",ce.displayName)),ut}while(1<=He&&0<=it);break}}}finally{Pt=!1,Error.prepareStackTrace=ve}return(ce=ce?ce.displayName||ce.name:"")?lt(ce):""}function pt(ce){switch(ce.tag){case 5:return lt(ce.type);case 16:return lt("Lazy");case 13:return lt("Suspense");case 19:return lt("SuspenseList");case 0:case 2:case 15:return ce=Gt(ce.type,!1),ce;case 11:return ce=Gt(ce.type.render,!1),ce;case 1:return ce=Gt(ce.type,!0),ce;default:return""}}function yt(ce){if(ce==null)return null;if(typeof ce=="function")return ce.displayName||ce.name||null;if(typeof ce=="string")return ce;switch(ce){case Ue:return"Fragment";case Be:return"Portal";case De:return"Profiler";case $e:return"StrictMode";case Ye:return"Suspense";case Qe:return"SuspenseList"}if(typeof ce=="object")switch(ce.$$typeof){case Ge:return(ce.displayName||"Context")+".Consumer";case ke:return(ce._context.displayName||"Context")+".Provider";case Je:var de=ce.render;return ce=ce.displayName,ce||(ce=de.displayName||de.name||"",ce=ce!==""?"ForwardRef("+ce+")":"ForwardRef"),ce;case rt:return de=ce.displayName||null,de!==null?de:yt(ce.type)||"Memo";case ot:de=ce._payload,ce=ce._init;try{return yt(ce(de))}catch{}}return null}function Bt(ce){var de=ce.type;switch(ce.tag){case 24:return"Cache";case 9:return(de.displayName||"Context")+".Consumer";case 10:return(de._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ce=de.render,ce=ce.displayName||ce.name||"",de.displayName||(ce!==""?"ForwardRef("+ce+")":"ForwardRef");case 7:return"Fragment";case 5:return de;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yt(de);case 8:return de===$e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof de=="function")return de.displayName||de.name||null;if(typeof de=="string")return de}return null}function Wt(ce){switch(typeof ce){case"boolean":case"number":case"string":case"undefined":return ce;case"object":return ce;default:return""}}function jt(ce){var de=ce.type;return(ce=ce.nodeName)&&ce.toLowerCase()==="input"&&(de==="checkbox"||de==="radio")}function nn(ce){var de=jt(ce)?"checked":"value",ve=Object.getOwnPropertyDescriptor(ce.constructor.prototype,de),Te=""+ce[de];if(!ce.hasOwnProperty(de)&&typeof ve<"u"&&typeof ve.get=="function"&&typeof ve.set=="function"){var Ie=ve.get,Fe=ve.set;return Object.defineProperty(ce,de,{configurable:!0,get:function(){return Ie.call(this)},set:function(He){Te=""+He,Fe.call(this,He)}}),Object.defineProperty(ce,de,{enumerable:ve.enumerable}),{getValue:function(){return Te},setValue:function(He){Te=""+He},stopTracking:function(){ce._valueTracker=null,delete ce[de]}}}}function an(ce){ce._valueTracker||(ce._valueTracker=nn(ce))}function mn(ce){if(!ce)return!1;var de=ce._valueTracker;if(!de)return!0;var ve=de.getValue(),Te="";return ce&&(Te=jt(ce)?ce.checked?"true":"false":ce.value),ce=Te,ce!==ve?(de.setValue(ce),!0):!1}function tt(ce){if(ce=ce||(typeof document<"u"?document:void 0),typeof ce>"u")return null;try{return ce.activeElement||ce.body}catch{return ce.body}}function Ut(ce,de){var ve=de.checked;return nt({},de,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ve??ce._wrapperState.initialChecked})}function Dt(ce,de){var ve=de.defaultValue==null?"":de.defaultValue,Te=de.checked!=null?de.checked:de.defaultChecked;ve=Wt(de.value!=null?de.value:ve),ce._wrapperState={initialChecked:Te,initialValue:ve,controlled:de.type==="checkbox"||de.type==="radio"?de.checked!=null:de.value!=null}}function Vt(ce,de){de=de.checked,de!=null&&we(ce,"checked",de,!1)}function It(ce,de){Vt(ce,de);var ve=Wt(de.value),Te=de.type;if(ve!=null)Te==="number"?(ve===0&&ce.value===""||ce.value!=ve)&&(ce.value=""+ve):ce.value!==""+ve&&(ce.value=""+ve);else if(Te==="submit"||Te==="reset"){ce.removeAttribute("value");return}de.hasOwnProperty("value")?kt(ce,de.type,ve):de.hasOwnProperty("defaultValue")&&kt(ce,de.type,Wt(de.defaultValue)),de.checked==null&&de.defaultChecked!=null&&(ce.defaultChecked=!!de.defaultChecked)}function Qt(ce,de,ve){if(de.hasOwnProperty("value")||de.hasOwnProperty("defaultValue")){var Te=de.type;if(!(Te!=="submit"&&Te!=="reset"||de.value!==void 0&&de.value!==null))return;de=""+ce._wrapperState.initialValue,ve||de===ce.value||(ce.value=de),ce.defaultValue=de}ve=ce.name,ve!==""&&(ce.name=""),ce.defaultChecked=!!ce._wrapperState.initialChecked,ve!==""&&(ce.name=ve)}function kt(ce,de,ve){(de!=="number"||tt(ce.ownerDocument)!==ce)&&(ve==null?ce.defaultValue=""+ce._wrapperState.initialValue:ce.defaultValue!==""+ve&&(ce.defaultValue=""+ve))}var qt=Array.isArray;function Tn(ce,de,ve,Te){if(ce=ce.options,de){de={};for(var Ie=0;Ie<ve.length;Ie++)de["$"+ve[Ie]]=!0;for(ve=0;ve<ce.length;ve++)Ie=de.hasOwnProperty("$"+ce[ve].value),ce[ve].selected!==Ie&&(ce[ve].selected=Ie),Ie&&Te&&(ce[ve].defaultSelected=!0)}else{for(ve=""+Wt(ve),de=null,Ie=0;Ie<ce.length;Ie++){if(ce[Ie].value===ve){ce[Ie].selected=!0,Te&&(ce[Ie].defaultSelected=!0);return}de!==null||ce[Ie].disabled||(de=ce[Ie])}de!==null&&(de.selected=!0)}}function Sn(ce,de){if(de.dangerouslySetInnerHTML!=null)throw Error(K(91));return nt({},de,{value:void 0,defaultValue:void 0,children:""+ce._wrapperState.initialValue})}function We(ce,de){var ve=de.value;if(ve==null){if(ve=de.children,de=de.defaultValue,ve!=null){if(de!=null)throw Error(K(92));if(qt(ve)){if(1<ve.length)throw Error(K(93));ve=ve[0]}de=ve}de==null&&(de=""),ve=de}ce._wrapperState={initialValue:Wt(ve)}}function Ve(ce,de){var ve=Wt(de.value),Te=Wt(de.defaultValue);ve!=null&&(ve=""+ve,ve!==ce.value&&(ce.value=ve),de.defaultValue==null&&ce.defaultValue!==ve&&(ce.defaultValue=ve)),Te!=null&&(ce.defaultValue=""+Te)}function ft(ce){var de=ce.textContent;de===ce._wrapperState.initialValue&&de!==""&&de!==null&&(ce.value=de)}function Et(ce){switch(ce){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(ce,de){return ce==null||ce==="http://www.w3.org/1999/xhtml"?Et(de):ce==="http://www.w3.org/2000/svg"&&de==="foreignObject"?"http://www.w3.org/1999/xhtml":ce}var Ct,un=(function(ce){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(de,ve,Te,Ie){MSApp.execUnsafeLocalFunction(function(){return ce(de,ve,Te,Ie)})}:ce})(function(ce,de){if(ce.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ce)ce.innerHTML=de;else{for(Ct=Ct||document.createElement("div"),Ct.innerHTML="<svg>"+de.valueOf().toString()+"</svg>",de=Ct.firstChild;ce.firstChild;)ce.removeChild(ce.firstChild);for(;de.firstChild;)ce.appendChild(de.firstChild)}});function Yt(ce,de){if(de){var ve=ce.firstChild;if(ve&&ve===ce.lastChild&&ve.nodeType===3){ve.nodeValue=de;return}}ce.textContent=de}var fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gn=["Webkit","ms","Moz","O"];Object.keys(fn).forEach(function(ce){gn.forEach(function(de){de=de+ce.charAt(0).toUpperCase()+ce.substring(1),fn[de]=fn[ce]})});function $t(ce,de,ve){return de==null||typeof de=="boolean"||de===""?"":ve||typeof de!="number"||de===0||fn.hasOwnProperty(ce)&&fn[ce]?(""+de).trim():de+"px"}function mt(ce,de){ce=ce.style;for(var ve in de)if(de.hasOwnProperty(ve)){var Te=ve.indexOf("--")===0,Ie=$t(ve,de[ve],Te);ve==="float"&&(ve="cssFloat"),Te?ce.setProperty(ve,Ie):ce[ve]=Ie}}var xt=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xe(ce,de){if(de){if(xt[ce]&&(de.children!=null||de.dangerouslySetInnerHTML!=null))throw Error(K(137,ce));if(de.dangerouslySetInnerHTML!=null){if(de.children!=null)throw Error(K(60));if(typeof de.dangerouslySetInnerHTML!="object"||!("__html"in de.dangerouslySetInnerHTML))throw Error(K(61))}if(de.style!=null&&typeof de.style!="object")throw Error(K(62))}}function at(ce,de){if(ce.indexOf("-")===-1)return typeof de.is=="string";switch(ce){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=null;function Ze(ce){return ce=ce.target||ce.srcElement||window,ce.correspondingUseElement&&(ce=ce.correspondingUseElement),ce.nodeType===3?ce.parentNode:ce}var Ot=null,Ht=null,en=null;function Kt(ce){if(ce=xs(ce)){if(typeof Ot!="function")throw Error(K(280));var de=ce.stateNode;de&&(de=Dl(de),Ot(ce.stateNode,ce.type,de))}}function zt(ce){Ht?en?en.push(ce):en=[ce]:Ht=ce}function ln(){if(Ht){var ce=Ht,de=en;if(en=Ht=null,Kt(ce),de)for(ce=0;ce<de.length;ce++)Kt(de[ce])}}function Pn(ce,de){return ce(de)}function Jn(){}var Hn=!1;function Rr(ce,de,ve){if(Hn)return ce(de,ve);Hn=!0;try{return Pn(ce,de,ve)}finally{Hn=!1,(Ht!==null||en!==null)&&(Jn(),ln())}}function Er(ce,de){var ve=ce.stateNode;if(ve===null)return null;var Te=Dl(ve);if(Te===null)return null;ve=Te[de];e:switch(de){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Te=!Te.disabled)||(ce=ce.type,Te=!(ce==="button"||ce==="input"||ce==="select"||ce==="textarea")),ce=!Te;break e;default:ce=!1}if(ce)return null;if(ve&&typeof ve!="function")throw Error(K(231,de,typeof ve));return ve}var Co=!1;if(oe)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){Co=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{Co=!1}function Ro(ce,de,ve,Te,Ie,Fe,He,it,ut){var wt=Array.prototype.slice.call(arguments,3);try{de.apply(ve,wt)}catch(Jt){this.onError(Jt)}}var Ji=!1,Xs=null,_i=!1,Po=null,Io={onError:function(ce){Ji=!0,Xs=ce}};function Ka(ce,de,ve,Te,Ie,Fe,He,it,ut){Ji=!1,Xs=null,Ro.apply(Io,arguments)}function Ja(ce,de,ve,Te,Ie,Fe,He,it,ut){if(Ka.apply(this,arguments),Ji){if(Ji){var wt=Xs;Ji=!1,Xs=null}else throw Error(K(198));_i||(_i=!0,Po=wt)}}function fs(ce){var de=ce,ve=ce;if(ce.alternate)for(;de.return;)de=de.return;else{ce=de;do de=ce,(de.flags&4098)!==0&&(ve=de.return),ce=de.return;while(ce)}return de.tag===3?ve:null}function Ya(ce){if(ce.tag===13){var de=ce.memoizedState;if(de===null&&(ce=ce.alternate,ce!==null&&(de=ce.memoizedState)),de!==null)return de.dehydrated}return null}function Qa(ce){if(fs(ce)!==ce)throw Error(K(188))}function Za(ce){var de=ce.alternate;if(!de){if(de=fs(ce),de===null)throw Error(K(188));return de!==ce?null:ce}for(var ve=ce,Te=de;;){var Ie=ve.return;if(Ie===null)break;var Fe=Ie.alternate;if(Fe===null){if(Te=Ie.return,Te!==null){ve=Te;continue}break}if(Ie.child===Fe.child){for(Fe=Ie.child;Fe;){if(Fe===ve)return Qa(Ie),ce;if(Fe===Te)return Qa(Ie),de;Fe=Fe.sibling}throw Error(K(188))}if(ve.return!==Te.return)ve=Ie,Te=Fe;else{for(var He=!1,it=Ie.child;it;){if(it===ve){He=!0,ve=Ie,Te=Fe;break}if(it===Te){He=!0,Te=Ie,ve=Fe;break}it=it.sibling}if(!He){for(it=Fe.child;it;){if(it===ve){He=!0,ve=Fe,Te=Ie;break}if(it===Te){He=!0,Te=Fe,ve=Ie;break}it=it.sibling}if(!He)throw Error(K(189))}}if(ve.alternate!==Te)throw Error(K(190))}if(ve.tag!==3)throw Error(K(188));return ve.stateNode.current===ve?ce:de}function el(ce){return ce=Za(ce),ce!==null?tl(ce):null}function tl(ce){if(ce.tag===5||ce.tag===6)return ce;for(ce=ce.child;ce!==null;){var de=tl(ce);if(de!==null)return de;ce=ce.sibling}return null}var Ke=_.unstable_scheduleCallback,vt=_.unstable_cancelCallback,Mt=_.unstable_shouldYield,Rt=_.unstable_requestPaint,dt=_.unstable_now,Zt=_.unstable_getCurrentPriorityLevel,cn=_.unstable_ImmediatePriority,yn=_.unstable_UserBlockingPriority,_n=_.unstable_NormalPriority,Ln=_.unstable_LowPriority,In=_.unstable_IdlePriority,En=null,hn=null;function Bn(ce){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(En,ce,void 0,(ce.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:wn,Gn=Math.log,zn=Math.LN2;function wn(ce){return ce>>>=0,ce===0?32:31-(Gn(ce)/zn|0)|0}var Qn=64,On=4194304;function vr(ce){switch(ce&-ce){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ce&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ce&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ce}}function Ci(ce,de){var ve=ce.pendingLanes;if(ve===0)return 0;var Te=0,Ie=ce.suspendedLanes,Fe=ce.pingedLanes,He=ve&268435455;if(He!==0){var it=He&~Ie;it!==0?Te=vr(it):(Fe&=He,Fe!==0&&(Te=vr(Fe)))}else He=ve&~Ie,He!==0?Te=vr(He):Fe!==0&&(Te=vr(Fe));if(Te===0)return 0;if(de!==0&&de!==Te&&(de&Ie)===0&&(Ie=Te&-Te,Fe=de&-de,Ie>=Fe||Ie===16&&(Fe&4194240)!==0))return de;if((Te&4)!==0&&(Te|=ve&16),de=ce.entangledLanes,de!==0)for(ce=ce.entanglements,de&=Te;0<de;)ve=31-Wn(de),Ie=1<<ve,Te|=ce[ve],de&=~Ie;return Te}function jr(ce,de){switch(ce){case 1:case 2:case 4:return de+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return de+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(ce,de){for(var ve=ce.suspendedLanes,Te=ce.pingedLanes,Ie=ce.expirationTimes,Fe=ce.pendingLanes;0<Fe;){var He=31-Wn(Fe),it=1<<He,ut=Ie[He];ut===-1?((it&ve)===0||(it&Te)!==0)&&(Ie[He]=jr(it,de)):ut<=de&&(ce.expiredLanes|=it),Fe&=~it}}function rr(ce){return ce=ce.pendingLanes&-1073741825,ce!==0?ce:ce&1073741824?1073741824:0}function ur(){var ce=Qn;return Qn<<=1,(Qn&4194240)===0&&(Qn=64),ce}function qr(ce){for(var de=[],ve=0;31>ve;ve++)de.push(ce);return de}function Ar(ce,de,ve){ce.pendingLanes|=de,de!==536870912&&(ce.suspendedLanes=0,ce.pingedLanes=0),ce=ce.eventTimes,de=31-Wn(de),ce[de]=ve}function Xr(ce,de){var ve=ce.pendingLanes&~de;ce.pendingLanes=de,ce.suspendedLanes=0,ce.pingedLanes=0,ce.expiredLanes&=de,ce.mutableReadLanes&=de,ce.entangledLanes&=de,de=ce.entanglements;var Te=ce.eventTimes;for(ce=ce.expirationTimes;0<ve;){var Ie=31-Wn(ve),Fe=1<<Ie;de[Ie]=0,Te[Ie]=-1,ce[Ie]=-1,ve&=~Fe}}function Qi(ce,de){var ve=ce.entangledLanes|=de;for(ce=ce.entanglements;ve;){var Te=31-Wn(ve),Ie=1<<Te;Ie&de|ce[Te]&de&&(ce[Te]|=de),ve&=~Ie}}var qn=0;function Bo(ce){return ce&=-ce,1<ce?4<ce?(ce&268435455)!==0?16:536870912:4:1}var ca,Zl,qc,nl,rl,Ks=!1,il=[],Zi=null,Kn=null,ds=null,Js=new Map,Lo=new Map,Os=[],Uu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pr(ce,de){switch(ce){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Js.delete(de.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(de.pointerId)}}function Ys(ce,de,ve,Te,Ie,Fe){return ce===null||ce.nativeEvent!==Fe?(ce={blockedOn:de,domEventName:ve,eventSystemFlags:Te,nativeEvent:Fe,targetContainers:[Ie]},de!==null&&(de=xs(de),de!==null&&Zl(de)),ce):(ce.eventSystemFlags|=Te,de=ce.targetContainers,Ie!==null&&de.indexOf(Ie)===-1&&de.push(Ie),ce)}function $u(ce,de,ve,Te,Ie){switch(de){case"focusin":return Zi=Ys(Zi,ce,de,ve,Te,Ie),!0;case"dragenter":return Kn=Ys(Kn,ce,de,ve,Te,Ie),!0;case"mouseover":return ds=Ys(ds,ce,de,ve,Te,Ie),!0;case"pointerover":var Fe=Ie.pointerId;return Js.set(Fe,Ys(Js.get(Fe)||null,ce,de,ve,Te,Ie)),!0;case"gotpointercapture":return Fe=Ie.pointerId,Lo.set(Fe,Ys(Lo.get(Fe)||null,ce,de,ve,Te,Ie)),!0}return!1}function sl(ce){var de=zs(ce.target);if(de!==null){var ve=fs(de);if(ve!==null){if(de=ve.tag,de===13){if(de=Ya(ve),de!==null){ce.blockedOn=de,rl(ce.priority,function(){qc(ve)});return}}else if(de===3&&ve.stateNode.current.memoizedState.isDehydrated){ce.blockedOn=ve.tag===3?ve.stateNode.containerInfo:null;return}}}ce.blockedOn=null}function ol(ce){if(ce.blockedOn!==null)return!1;for(var de=ce.targetContainers;0<de.length;){var ve=Pi(ce.domEventName,ce.eventSystemFlags,de[0],ce.nativeEvent);if(ve===null){ve=ce.nativeEvent;var Te=new ve.constructor(ve.type,ve);At=Te,ve.target.dispatchEvent(Te),At=null}else return de=xs(ve),de!==null&&Zl(de),ce.blockedOn=ve,!1;de.shift()}return!0}function ua(ce,de,ve){ol(ce)&&ve.delete(de)}function ts(){Ks=!1,Zi!==null&&ol(Zi)&&(Zi=null),Kn!==null&&ol(Kn)&&(Kn=null),ds!==null&&ol(ds)&&(ds=null),Js.forEach(ua),Lo.forEach(ua)}function fa(ce,de){ce.blockedOn===de&&(ce.blockedOn=null,Ks||(Ks=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,ts)))}function da(ce){function de(Ie){return fa(Ie,ce)}if(0<il.length){fa(il[0],ce);for(var ve=1;ve<il.length;ve++){var Te=il[ve];Te.blockedOn===ce&&(Te.blockedOn=null)}}for(Zi!==null&&fa(Zi,ce),Kn!==null&&fa(Kn,ce),ds!==null&&fa(ds,ce),Js.forEach(de),Lo.forEach(de),ve=0;ve<Os.length;ve++)Te=Os[ve],Te.blockedOn===ce&&(Te.blockedOn=null);for(;0<Os.length&&(ve=Os[0],ve.blockedOn===null);)sl(ve),ve.blockedOn===null&&Os.shift()}var ei=Pe.ReactCurrentBatchConfig,Ri=!0;function al(ce,de,ve,Te){var Ie=qn,Fe=ei.transition;ei.transition=null;try{qn=1,ll(ce,de,ve,Te)}finally{qn=Ie,ei.transition=Fe}}function ec(ce,de,ve,Te){var Ie=qn,Fe=ei.transition;ei.transition=null;try{qn=4,ll(ce,de,ve,Te)}finally{qn=Ie,ei.transition=Fe}}function ll(ce,de,ve,Te){if(Ri){var Ie=Pi(ce,de,ve,Te);if(Ie===null)Cl(ce,de,Te,cl,ve),Pr(ce,Te);else if($u(Ie,ce,de,ve,Te))Te.stopPropagation();else if(Pr(ce,Te),de&4&&-1<Uu.indexOf(ce)){for(;Ie!==null;){var Fe=xs(Ie);if(Fe!==null&&ca(Fe),Fe=Pi(ce,de,ve,Te),Fe===null&&Cl(ce,de,Te,cl,ve),Fe===Ie)break;Ie=Fe}Ie!==null&&Te.stopPropagation()}else Cl(ce,de,Te,null,ve)}}var cl=null;function Pi(ce,de,ve,Te){if(cl=null,ce=Ze(Te),ce=zs(ce),ce!==null)if(de=fs(ce),de===null)ce=null;else if(ve=de.tag,ve===13){if(ce=Ya(de),ce!==null)return ce;ce=null}else if(ve===3){if(de.stateNode.current.memoizedState.isDehydrated)return de.tag===3?de.stateNode.containerInfo:null;ce=null}else de!==ce&&(ce=null);return cl=ce,null}function Xc(ce){switch(ce){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case cn:return 1;case yn:return 4;case _n:case Ln:return 16;case In:return 536870912;default:return 16}default:return 16}}var $i=null,tc=null,ci=null;function ha(){if(ci)return ci;var ce,de=tc,ve=de.length,Te,Ie="value"in $i?$i.value:$i.textContent,Fe=Ie.length;for(ce=0;ce<ve&&de[ce]===Ie[ce];ce++);var He=ve-ce;for(Te=1;Te<=He&&de[ve-Te]===Ie[Fe-Te];Te++);return ci=Ie.slice(ce,1<Te?1-Te:void 0)}function Qs(ce){var de=ce.keyCode;return"charCode"in ce?(ce=ce.charCode,ce===0&&de===13&&(ce=13)):ce=de,ce===10&&(ce=13),32<=ce||ce===13?ce:0}function hs(){return!0}function ul(){return!1}function ti(ce){function de(ve,Te,Ie,Fe,He){this._reactName=ve,this._targetInst=Ie,this.type=Te,this.nativeEvent=Fe,this.target=He,this.currentTarget=null;for(var it in ce)ce.hasOwnProperty(it)&&(ve=ce[it],this[it]=ve?ve(Fe):Fe[it]);return this.isDefaultPrevented=(Fe.defaultPrevented!=null?Fe.defaultPrevented:Fe.returnValue===!1)?hs:ul,this.isPropagationStopped=ul,this}return nt(de.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ve=this.nativeEvent;ve&&(ve.preventDefault?ve.preventDefault():typeof ve.returnValue!="unknown"&&(ve.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var ve=this.nativeEvent;ve&&(ve.stopPropagation?ve.stopPropagation():typeof ve.cancelBubble!="unknown"&&(ve.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),de}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ce){return ce.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=ti(Zs),eo=nt({},Zs,{view:0,detail:0}),Do=ti(eo),ui,Ii,Bi,Oo=nt({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(ce){return ce.relatedTarget===void 0?ce.fromElement===ce.srcElement?ce.toElement:ce.fromElement:ce.relatedTarget},movementX:function(ce){return"movementX"in ce?ce.movementX:(ce!==Bi&&(Bi&&ce.type==="mousemove"?(ui=ce.screenX-Bi.screenX,Ii=ce.screenY-Bi.screenY):Ii=ui=0,Bi=ce),ui)},movementY:function(ce){return"movementY"in ce?ce.movementY:Ii}}),nc=ti(Oo),ps=nt({},Oo,{dataTransfer:0}),Fs=ti(ps),fl=nt({},eo,{relatedTarget:0}),dl=ti(fl),hl=nt({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kc=ti(hl),Jc=nt({},Zs,{clipboardData:function(ce){return"clipboardData"in ce?ce.clipboardData:window.clipboardData}}),rc=ti(Jc),pl=nt({},Zs,{data:0}),ic=ti(pl),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(ce){var de=this.nativeEvent;return de.getModifierState?de.getModifierState(ce):(ce=sc[ce])?!!de[ce]:!1}function Ns(){return Fo}var ml=nt({},eo,{key:function(ce){if(ce.key){var de=Yc[ce.key]||ce.key;if(de!=="Unidentified")return de}return ce.type==="keypress"?(ce=Qs(ce),ce===13?"Enter":String.fromCharCode(ce)):ce.type==="keydown"||ce.type==="keyup"?Qc[ce.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(ce){return ce.type==="keypress"?Qs(ce):0},keyCode:function(ce){return ce.type==="keydown"||ce.type==="keyup"?ce.keyCode:0},which:function(ce){return ce.type==="keypress"?Qs(ce):ce.type==="keydown"||ce.type==="keyup"?ce.keyCode:0}}),gl=ti(ml),Li=nt({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vi=ti(Li),to=nt({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),ms=ti(to),gs=nt({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),no=ti(gs),Zc=nt({},Oo,{deltaX:function(ce){return"deltaX"in ce?ce.deltaX:"wheelDeltaX"in ce?-ce.wheelDeltaX:0},deltaY:function(ce){return"deltaY"in ce?ce.deltaY:"wheelDeltaY"in ce?-ce.wheelDeltaY:"wheelDelta"in ce?-ce.wheelDelta:0},deltaZ:0,deltaMode:0}),oc=ti(Zc),ac=[9,13,27,32],ni=oe&&"CompositionEvent"in window,Ur=null;oe&&"documentMode"in document&&(Ur=document.documentMode);var hr=oe&&"TextEvent"in window&&!Ur,No=oe&&(!ni||Ur&&8<Ur&&11>=Ur),Di=" ",lc=!1;function cc(ce,de){switch(ce){case"keyup":return ac.indexOf(de.keyCode)!==-1;case"keydown":return de.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _l(ce){return ce=ce.detail,typeof ce=="object"&&"data"in ce?ce.data:null}var ks=!1;function eu(ce,de){switch(ce){case"compositionend":return _l(de);case"keypress":return de.which!==32?null:(lc=!0,Di);case"textInput":return ce=de.data,ce===Di&&lc?null:ce;default:return null}}function ma(ce,de){if(ks)return ce==="compositionend"||!ni&&cc(ce,de)?(ce=ha(),ci=tc=$i=null,ks=!1,ce):null;switch(ce){case"paste":return null;case"keypress":if(!(de.ctrlKey||de.altKey||de.metaKey)||de.ctrlKey&&de.altKey){if(de.char&&1<de.char.length)return de.char;if(de.which)return String.fromCharCode(de.which)}return null;case"compositionend":return No&&de.locale!=="ko"?null:de.data;default:return null}}var ko={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(ce){var de=ce&&ce.nodeName&&ce.nodeName.toLowerCase();return de==="input"?!!ko[ce.type]:de==="textarea"}function Uo(ce,de,ve,Te){zt(Te),de=Rl(de,"onChange"),0<de.length&&(ve=new pa("onChange","change",null,ve,Te),ce.push({event:ve,listeners:de}))}var Us=null,$o=null;function tu(ce){Ho(ce,0)}function _s(ce){var de=Tr(ce);if(mn(de))return ce}function nu(ce,de){if(ce==="change")return de}var Go=!1;if(oe){var fi;if(oe){var ro="oninput"in document;if(!ro){var io=document.createElement("div");io.setAttribute("oninput","return;"),ro=typeof io.oninput=="function"}fi=ro}else fi=!1;Go=fi&&(!document.documentMode||9<document.documentMode)}function Gi(){Us&&(Us.detachEvent("onpropertychange",yl),$o=Us=null)}function yl(ce){if(ce.propertyName==="value"&&_s($o)){var de=[];Uo(de,$o,ce,Ze(ce)),Rr(tu,de)}}function zo(ce,de,ve){ce==="focusin"?(Gi(),Us=de,$o=ve,Us.attachEvent("onpropertychange",yl)):ce==="focusout"&&Gi()}function ru(ce){if(ce==="selectionchange"||ce==="keyup"||ce==="keydown")return _s($o)}function uc(ce,de){if(ce==="click")return _s(de)}function mr(ce,de){if(ce==="input"||ce==="change")return _s(de)}function xl(ce,de){return ce===de&&(ce!==0||1/ce===1/de)||ce!==ce&&de!==de}var yi=typeof Object.is=="function"?Object.is:xl;function so(ce,de){if(yi(ce,de))return!0;if(typeof ce!="object"||ce===null||typeof de!="object"||de===null)return!1;var ve=Object.keys(ce),Te=Object.keys(de);if(ve.length!==Te.length)return!1;for(Te=0;Te<ve.length;Te++){var Ie=ve[Te];if(!ae.call(de,Ie)||!yi(ce[Ie],de[Ie]))return!1}return!0}function ga(ce){for(;ce&&ce.firstChild;)ce=ce.firstChild;return ce}function xi(ce,de){var ve=ga(ce);ce=0;for(var Te;ve;){if(ve.nodeType===3){if(Te=ce+ve.textContent.length,ce<=de&&Te>=de)return{node:ve,offset:de-ce};ce=Te}e:{for(;ve;){if(ve.nextSibling){ve=ve.nextSibling;break e}ve=ve.parentNode}ve=void 0}ve=ga(ve)}}function oo(ce,de){return ce&&de?ce===de?!0:ce&&ce.nodeType===3?!1:de&&de.nodeType===3?oo(ce,de.parentNode):"contains"in ce?ce.contains(de):ce.compareDocumentPosition?!!(ce.compareDocumentPosition(de)&16):!1:!1}function gr(){for(var ce=window,de=tt();de instanceof ce.HTMLIFrameElement;){try{var ve=typeof de.contentWindow.location.href=="string"}catch{ve=!1}if(ve)ce=de.contentWindow;else break;de=tt(ce.document)}return de}function Lr(ce){var de=ce&&ce.nodeName&&ce.nodeName.toLowerCase();return de&&(de==="input"&&(ce.type==="text"||ce.type==="search"||ce.type==="tel"||ce.type==="url"||ce.type==="password")||de==="textarea"||ce.contentEditable==="true")}function Dr(ce){var de=gr(),ve=ce.focusedElem,Te=ce.selectionRange;if(de!==ve&&ve&&ve.ownerDocument&&oo(ve.ownerDocument.documentElement,ve)){if(Te!==null&&Lr(ve)){if(de=Te.start,ce=Te.end,ce===void 0&&(ce=de),"selectionStart"in ve)ve.selectionStart=de,ve.selectionEnd=Math.min(ce,ve.value.length);else if(ce=(de=ve.ownerDocument||document)&&de.defaultView||window,ce.getSelection){ce=ce.getSelection();var Ie=ve.textContent.length,Fe=Math.min(Te.start,Ie);Te=Te.end===void 0?Fe:Math.min(Te.end,Ie),!ce.extend&&Fe>Te&&(Ie=Te,Te=Fe,Fe=Ie),Ie=xi(ve,Fe);var He=xi(ve,Te);Ie&&He&&(ce.rangeCount!==1||ce.anchorNode!==Ie.node||ce.anchorOffset!==Ie.offset||ce.focusNode!==He.node||ce.focusOffset!==He.offset)&&(de=de.createRange(),de.setStart(Ie.node,Ie.offset),ce.removeAllRanges(),Fe>Te?(ce.addRange(de),ce.extend(He.node,He.offset)):(de.setEnd(He.node,He.offset),ce.addRange(de)))}}for(de=[],ce=ve;ce=ce.parentNode;)ce.nodeType===1&&de.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof ve.focus=="function"&&ve.focus(),ve=0;ve<de.length;ve++)ce=de[ve],ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}var Sl=oe&&"documentMode"in document&&11>=document.documentMode,ns=null,ao=null,va=null,Or=!1;function El(ce,de,ve){var Te=ve.window===ve?ve.document:ve.nodeType===9?ve:ve.ownerDocument;Or||ns==null||ns!==tt(Te)||(Te=ns,"selectionStart"in Te&&Lr(Te)?Te={start:Te.selectionStart,end:Te.selectionEnd}:(Te=(Te.ownerDocument&&Te.ownerDocument.defaultView||window).getSelection(),Te={anchorNode:Te.anchorNode,anchorOffset:Te.anchorOffset,focusNode:Te.focusNode,focusOffset:Te.focusOffset}),va&&so(va,Te)||(va=Te,Te=Rl(ao,"onSelect"),0<Te.length&&(de=new pa("onSelect","select",null,de,ve),ce.push({event:de,listeners:Te}),de.target=ns)))}function Vo(ce,de){var ve={};return ve[ce.toLowerCase()]=de.toLowerCase(),ve["Webkit"+ce]="webkit"+de,ve["Moz"+ce]="moz"+de,ve}var $s={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionend:Vo("Transition","TransitionEnd")},zi={},Vi={};oe&&(Vi=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function rs(ce){if(zi[ce])return zi[ce];if(!$s[ce])return ce;var de=$s[ce],ve;for(ve in de)if(de.hasOwnProperty(ve)&&ve in Vi)return zi[ce]=de[ve];return ce}var ya=rs("animationend"),xa=rs("animationiteration"),fc=rs("animationstart"),dc=rs("transitionend"),hc=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(ce,de){hc.set(ce,de),ie(de,[ce])}for(var Al=0;Al<pc.length;Al++){var Sa=pc[Al],Ea=Sa.toLowerCase(),iu=Sa[0].toUpperCase()+Sa.slice(1);vs(Ea,"on"+iu)}vs(ya,"onAnimationEnd"),vs(xa,"onAnimationIteration"),vs(fc,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(dc,"onTransitionEnd"),se("onMouseEnter",["mouseout","mouseover"]),se("onMouseLeave",["mouseout","mouseover"]),se("onPointerEnter",["pointerout","pointerover"]),se("onPointerLeave",["pointerout","pointerover"]),ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tl=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function bl(ce,de,ve){var Te=ce.type||"unknown-event";ce.currentTarget=ve,Ja(Te,de,void 0,ce),ce.currentTarget=null}function Ho(ce,de){de=(de&4)!==0;for(var ve=0;ve<ce.length;ve++){var Te=ce[ve],Ie=Te.event;Te=Te.listeners;e:{var Fe=void 0;if(de)for(var He=Te.length-1;0<=He;He--){var it=Te[He],ut=it.instance,wt=it.currentTarget;if(it=it.listener,ut!==Fe&&Ie.isPropagationStopped())break e;bl(Ie,it,wt),Fe=ut}else for(He=0;He<Te.length;He++){if(it=Te[He],ut=it.instance,wt=it.currentTarget,it=it.listener,ut!==Fe&&Ie.isPropagationStopped())break e;bl(Ie,it,wt),Fe=ut}}}if(_i)throw ce=Po,_i=!1,Po=null,ce}function ar(ce,de){var ve=de[uo];ve===void 0&&(ve=de[uo]=new Set);var Te=ce+"__bubble";ve.has(Te)||(wl(de,ce,2,!1),ve.add(Te))}function Ml(ce,de,ve){var Te=0;de&&(Te|=4),wl(ve,ce,Te,de)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function Wo(ce){if(!ce[Aa]){ce[Aa]=!0,Z.forEach(function(ve){ve!=="selectionchange"&&(Tl.has(ve)||Ml(ve,!1,ce),Ml(ve,!0,ce))});var de=ce.nodeType===9?ce:ce.ownerDocument;de===null||de[Aa]||(de[Aa]=!0,Ml("selectionchange",!1,de))}}function wl(ce,de,ve,Te){switch(Xc(de)){case 1:var Ie=al;break;case 4:Ie=ec;break;default:Ie=ll}ve=Ie.bind(null,de,ve,ce),Ie=void 0,!Co||de!=="touchstart"&&de!=="touchmove"&&de!=="wheel"||(Ie=!0),Te?Ie!==void 0?ce.addEventListener(de,ve,{capture:!0,passive:Ie}):ce.addEventListener(de,ve,!0):Ie!==void 0?ce.addEventListener(de,ve,{passive:Ie}):ce.addEventListener(de,ve,!1)}function Cl(ce,de,ve,Te,Ie){var Fe=Te;if((de&1)===0&&(de&2)===0&&Te!==null)e:for(;;){if(Te===null)return;var He=Te.tag;if(He===3||He===4){var it=Te.stateNode.containerInfo;if(it===Ie||it.nodeType===8&&it.parentNode===Ie)break;if(He===4)for(He=Te.return;He!==null;){var ut=He.tag;if((ut===3||ut===4)&&(ut=He.stateNode.containerInfo,ut===Ie||ut.nodeType===8&&ut.parentNode===Ie))return;He=He.return}for(;it!==null;){if(He=zs(it),He===null)return;if(ut=He.tag,ut===5||ut===6){Te=Fe=He;continue e}it=it.parentNode}}Te=Te.return}Rr(function(){var wt=Fe,Jt=Ze(ve),tn=[];e:{var Xt=hc.get(ce);if(Xt!==void 0){var vn=pa,bn=ce;switch(ce){case"keypress":if(Qs(ve)===0)break e;case"keydown":case"keyup":vn=gl;break;case"focusin":bn="focus",vn=dl;break;case"focusout":bn="blur",vn=dl;break;case"beforeblur":case"afterblur":vn=dl;break;case"click":if(ve.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vn=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vn=Fs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vn=ms;break;case ya:case xa:case fc:vn=Kc;break;case dc:vn=no;break;case"scroll":vn=Do;break;case"wheel":vn=oc;break;case"copy":case"cut":case"paste":vn=rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vn=vi}var Mn=(de&4)!==0,Br=!Mn&&ce==="scroll",St=Mn?Xt!==null?Xt+"Capture":null:Xt;Mn=[];for(var ht=wt,Tt;ht!==null;){Tt=ht;var sn=Tt.stateNode;if(Tt.tag===5&&sn!==null&&(Tt=sn,St!==null&&(sn=Er(ht,St),sn!=null&&Mn.push(jo(ht,sn,Tt)))),Br)break;ht=ht.return}0<Mn.length&&(Xt=new vn(Xt,bn,null,ve,Jt),tn.push({event:Xt,listeners:Mn}))}}if((de&7)===0){e:{if(Xt=ce==="mouseover"||ce==="pointerover",vn=ce==="mouseout"||ce==="pointerout",Xt&&ve!==At&&(bn=ve.relatedTarget||ve.fromElement)&&(zs(bn)||bn[Si]))break e;if((vn||Xt)&&(Xt=Jt.window===Jt?Jt:(Xt=Jt.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,vn?(bn=ve.relatedTarget||ve.toElement,vn=wt,bn=bn?zs(bn):null,bn!==null&&(Br=fs(bn),bn!==Br||bn.tag!==5&&bn.tag!==6)&&(bn=null)):(vn=null,bn=wt),vn!==bn)){if(Mn=nc,sn="onMouseLeave",St="onMouseEnter",ht="mouse",(ce==="pointerout"||ce==="pointerover")&&(Mn=vi,sn="onPointerLeave",St="onPointerEnter",ht="pointer"),Br=vn==null?Xt:Tr(vn),Tt=bn==null?Xt:Tr(bn),Xt=new Mn(sn,ht+"leave",vn,ve,Jt),Xt.target=Br,Xt.relatedTarget=Tt,sn=null,zs(Jt)===wt&&(Mn=new Mn(St,ht+"enter",bn,ve,Jt),Mn.target=Tt,Mn.relatedTarget=Br,sn=Mn),Br=sn,vn&&bn)t:{for(Mn=vn,St=bn,ht=0,Tt=Mn;Tt;Tt=lo(Tt))ht++;for(Tt=0,sn=St;sn;sn=lo(sn))Tt++;for(;0<ht-Tt;)Mn=lo(Mn),ht--;for(;0<Tt-ht;)St=lo(St),Tt--;for(;ht--;){if(Mn===St||St!==null&&Mn===St.alternate)break t;Mn=lo(Mn),St=lo(St)}Mn=null}else Mn=null;vn!==null&&su(tn,Xt,vn,Mn,!1),bn!==null&&Br!==null&&su(tn,Br,bn,Mn,!0)}}e:{if(Xt=wt?Tr(wt):window,vn=Xt.nodeName&&Xt.nodeName.toLowerCase(),vn==="select"||vn==="input"&&Xt.type==="file")var Rn=nu;else if(vl(Xt))if(Go)Rn=mr;else{Rn=ru;var Fn=zo}else(vn=Xt.nodeName)&&vn.toLowerCase()==="input"&&(Xt.type==="checkbox"||Xt.type==="radio")&&(Rn=uc);if(Rn&&(Rn=Rn(ce,wt))){Uo(tn,Rn,ve,Jt);break e}Fn&&Fn(ce,Xt,wt),ce==="focusout"&&(Fn=Xt._wrapperState)&&Fn.controlled&&Xt.type==="number"&&kt(Xt,"number",Xt.value)}switch(Fn=wt?Tr(wt):window,ce){case"focusin":(vl(Fn)||Fn.contentEditable==="true")&&(ns=Fn,ao=wt,va=null);break;case"focusout":va=ao=ns=null;break;case"mousedown":Or=!0;break;case"contextmenu":case"mouseup":case"dragend":Or=!1,El(tn,ve,Jt);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":El(tn,ve,Jt)}var Nn;if(ni)e:{switch(ce){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else ks?cc(ce,ve)&&(kn="onCompositionEnd"):ce==="keydown"&&ve.keyCode===229&&(kn="onCompositionStart");kn&&(No&&ve.locale!=="ko"&&(ks||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&ks&&(Nn=ha()):($i=Jt,tc="value"in $i?$i.value:$i.textContent,ks=!0)),Fn=Rl(wt,kn),0<Fn.length&&(kn=new ic(kn,ce,null,ve,Jt),tn.push({event:kn,listeners:Fn}),Nn?kn.data=Nn:(Nn=_l(ve),Nn!==null&&(kn.data=Nn)))),(Nn=hr?eu(ce,ve):ma(ce,ve))&&(wt=Rl(wt,"onBeforeInput"),0<wt.length&&(Jt=new ic("onBeforeInput","beforeinput",null,ve,Jt),tn.push({event:Jt,listeners:wt}),Jt.data=Nn))}Ho(tn,de)})}function jo(ce,de,ve){return{instance:ce,listener:de,currentTarget:ve}}function Rl(ce,de){for(var ve=de+"Capture",Te=[];ce!==null;){var Ie=ce,Fe=Ie.stateNode;Ie.tag===5&&Fe!==null&&(Ie=Fe,Fe=Er(ce,ve),Fe!=null&&Te.unshift(jo(ce,Fe,Ie)),Fe=Er(ce,de),Fe!=null&&Te.push(jo(ce,Fe,Ie))),ce=ce.return}return Te}function lo(ce){if(ce===null)return null;do ce=ce.return;while(ce&&ce.tag!==5);return ce||null}function su(ce,de,ve,Te,Ie){for(var Fe=de._reactName,He=[];ve!==null&&ve!==Te;){var it=ve,ut=it.alternate,wt=it.stateNode;if(ut!==null&&ut===Te)break;it.tag===5&&wt!==null&&(it=wt,Ie?(ut=Er(ve,Fe),ut!=null&&He.unshift(jo(ve,ut,it))):Ie||(ut=Er(ve,Fe),ut!=null&&He.push(jo(ve,ut,it)))),ve=ve.return}He.length!==0&&ce.push({event:de,listeners:He})}var Gu=/\r\n?/g,ou=/\u0000|\uFFFD/g;function mc(ce){return(typeof ce=="string"?ce:""+ce).replace(Gu,`
`).replace(ou,"")}function Ta(ce,de,ve){if(de=mc(de),mc(ce)!==de&&ve)throw Error(K(425))}function ba(){}var qo=null,gc=null;function _c(ce,de){return ce==="textarea"||ce==="noscript"||typeof de.children=="string"||typeof de.children=="number"||typeof de.dangerouslySetInnerHTML=="object"&&de.dangerouslySetInnerHTML!==null&&de.dangerouslySetInnerHTML.__html!=null}var vc=typeof setTimeout=="function"?setTimeout:void 0,yc=typeof clearTimeout=="function"?clearTimeout:void 0,Pl=typeof Promise=="function"?Promise:void 0,zu=typeof queueMicrotask=="function"?queueMicrotask:typeof Pl<"u"?function(ce){return Pl.resolve(null).then(ce).catch(au)}:vc;function au(ce){setTimeout(function(){throw ce})}function Il(ce,de){var ve=de,Te=0;do{var Ie=ve.nextSibling;if(ce.removeChild(ve),Ie&&Ie.nodeType===8)if(ve=Ie.data,ve==="/$"){if(Te===0){ce.removeChild(Ie),da(de);return}Te--}else ve!=="$"&&ve!=="$?"&&ve!=="$!"||Te++;ve=Ie}while(ve);da(de)}function ys(ce){for(;ce!=null;ce=ce.nextSibling){var de=ce.nodeType;if(de===1||de===3)break;if(de===8){if(de=ce.data,de==="$"||de==="$!"||de==="$?")break;if(de==="/$")return null}}return ce}function xc(ce){ce=ce.previousSibling;for(var de=0;ce;){if(ce.nodeType===8){var ve=ce.data;if(ve==="$"||ve==="$!"||ve==="$?"){if(de===0)return ce;de--}else ve==="/$"&&de++}ce=ce.previousSibling}return null}var co=Math.random().toString(36).slice(2),Ir="__reactFiber$"+co,Xo="__reactProps$"+co,Si="__reactContainer$"+co,uo="__reactEvents$"+co,Bl="__reactListeners$"+co,Ll="__reactHandles$"+co;function zs(ce){var de=ce[Ir];if(de)return de;for(var ve=ce.parentNode;ve;){if(de=ve[Si]||ve[Ir]){if(ve=de.alternate,de.child!==null||ve!==null&&ve.child!==null)for(ce=xc(ce);ce!==null;){if(ve=ce[Ir])return ve;ce=xc(ce)}return de}ce=ve,ve=ce.parentNode}return null}function xs(ce){return ce=ce[Ir]||ce[Si],!ce||ce.tag!==5&&ce.tag!==6&&ce.tag!==13&&ce.tag!==3?null:ce}function Tr(ce){if(ce.tag===5||ce.tag===6)return ce.stateNode;throw Error(K(33))}function Dl(ce){return ce[Xo]||null}var Sc=[],Fr=-1;function yr(ce){return{current:ce}}function lr(ce){0>Fr||(ce.current=Sc[Fr],Sc[Fr]=null,Fr--)}function or(ce,de){Fr++,Sc[Fr]=ce.current,ce.current=de}var Ss={},$r=yr(Ss),ri=yr(!1),Es=Ss;function fo(ce,de){var ve=ce.type.contextTypes;if(!ve)return Ss;var Te=ce.stateNode;if(Te&&Te.__reactInternalMemoizedUnmaskedChildContext===de)return Te.__reactInternalMemoizedMaskedChildContext;var Ie={},Fe;for(Fe in ve)Ie[Fe]=de[Fe];return Te&&(ce=ce.stateNode,ce.__reactInternalMemoizedUnmaskedChildContext=de,ce.__reactInternalMemoizedMaskedChildContext=Ie),Ie}function Kr(ce){return ce=ce.childContextTypes,ce!=null}function Ma(){lr(ri),lr($r)}function Ec(ce,de,ve){if($r.current!==Ss)throw Error(K(168));or($r,de),or(ri,ve)}function wa(ce,de,ve){var Te=ce.stateNode;if(de=de.childContextTypes,typeof Te.getChildContext!="function")return ve;Te=Te.getChildContext();for(var Ie in Te)if(!(Ie in de))throw Error(K(108,Bt(ce)||"Unknown",Ie));return nt({},ve,Te)}function ho(ce){return ce=(ce=ce.stateNode)&&ce.__reactInternalMemoizedMergedChildContext||Ss,Es=$r.current,or($r,ce),or(ri,ri.current),!0}function Ac(ce,de,ve){var Te=ce.stateNode;if(!Te)throw Error(K(169));ve?(ce=wa(ce,de,Es),Te.__reactInternalMemoizedMergedChildContext=ce,lr(ri),lr($r),or($r,ce)):lr(ri),or(ri,ve)}var Hi=null,Ca=!1,Ol=!1;function Ra(ce){Hi===null?Hi=[ce]:Hi.push(ce)}function lu(ce){Ca=!0,Ra(ce)}function ss(){if(!Ol&&Hi!==null){Ol=!0;var ce=0,de=qn;try{var ve=Hi;for(qn=1;ce<ve.length;ce++){var Te=ve[ce];do Te=Te(!0);while(Te!==null)}Hi=null,Ca=!1}catch(Ie){throw Hi!==null&&(Hi=Hi.slice(ce+1)),Ke(cn,ss),Ie}finally{qn=de,Ol=!1}}return null}var po=[],di=0,Fl=null,Nl=0,ii=[],Nr=0,mo=null,on=1,Oi="";function As(ce,de){po[di++]=Nl,po[di++]=Fl,Fl=ce,Nl=de}function Tc(ce,de,ve){ii[Nr++]=on,ii[Nr++]=Oi,ii[Nr++]=mo,mo=ce;var Te=on;ce=Oi;var Ie=32-Wn(Te)-1;Te&=~(1<<Ie),ve+=1;var Fe=32-Wn(de)+Ie;if(30<Fe){var He=Ie-Ie%5;Fe=(Te&(1<<He)-1).toString(32),Te>>=He,Ie-=He,on=1<<32-Wn(de)+Ie|ve<<Ie|Te,Oi=Fe+ce}else on=1<<Fe|ve<<Ie|Te,Oi=ce}function bc(ce){ce.return!==null&&(As(ce,1),Tc(ce,1,0))}function Ts(ce){for(;ce===Fl;)Fl=po[--di],po[di]=null,Nl=po[--di],po[di]=null;for(;ce===mo;)mo=ii[--Nr],ii[Nr]=null,Oi=ii[--Nr],ii[Nr]=null,on=ii[--Nr],ii[Nr]=null}var Gr=null,si=null,fr=!1,Fi=null;function Mc(ce,de){var ve=us(5,null,null,0);ve.elementType="DELETED",ve.stateNode=de,ve.return=ce,de=ce.deletions,de===null?(ce.deletions=[ve],ce.flags|=16):de.push(ve)}function wc(ce,de){switch(ce.tag){case 5:var ve=ce.type;return de=de.nodeType!==1||ve.toLowerCase()!==de.nodeName.toLowerCase()?null:de,de!==null?(ce.stateNode=de,Gr=ce,si=ys(de.firstChild),!0):!1;case 6:return de=ce.pendingProps===""||de.nodeType!==3?null:de,de!==null?(ce.stateNode=de,Gr=ce,si=null,!0):!1;case 13:return de=de.nodeType!==8?null:de,de!==null?(ve=mo!==null?{id:on,overflow:Oi}:null,ce.memoizedState={dehydrated:de,treeContext:ve,retryLane:1073741824},ve=us(18,null,null,0),ve.stateNode=de,ve.return=ce,ce.child=ve,Gr=ce,si=null,!0):!1;default:return!1}}function kl(ce){return(ce.mode&1)!==0&&(ce.flags&128)===0}function Ul(ce){if(fr){var de=si;if(de){var ve=de;if(!wc(ce,de)){if(kl(ce))throw Error(K(418));de=ys(ve.nextSibling);var Te=Gr;de&&wc(ce,de)?Mc(Te,ve):(ce.flags=ce.flags&-4097|2,fr=!1,Gr=ce)}}else{if(kl(ce))throw Error(K(418));ce.flags=ce.flags&-4097|2,fr=!1,Gr=ce}}}function $l(ce){for(ce=ce.return;ce!==null&&ce.tag!==5&&ce.tag!==3&&ce.tag!==13;)ce=ce.return;Gr=ce}function Ko(ce){if(ce!==Gr)return!1;if(!fr)return $l(ce),fr=!0,!1;var de;if((de=ce.tag!==3)&&!(de=ce.tag!==5)&&(de=ce.type,de=de!=="head"&&de!=="body"&&!_c(ce.type,ce.memoizedProps)),de&&(de=si)){if(kl(ce))throw Cc(),Error(K(418));for(;de;)Mc(ce,de),de=ys(de.nextSibling)}if($l(ce),ce.tag===13){if(ce=ce.memoizedState,ce=ce!==null?ce.dehydrated:null,!ce)throw Error(K(317));e:{for(ce=ce.nextSibling,de=0;ce;){if(ce.nodeType===8){var ve=ce.data;if(ve==="/$"){if(de===0){si=ys(ce.nextSibling);break e}de--}else ve!=="$"&&ve!=="$!"&&ve!=="$?"||de++}ce=ce.nextSibling}si=null}}else si=Gr?ys(ce.stateNode.nextSibling):null;return!0}function Cc(){for(var ce=si;ce;)ce=ys(ce.nextSibling)}function Vs(){si=Gr=null,fr=!1}function Jo(ce){Fi===null?Fi=[ce]:Fi.push(ce)}var Vu=Pe.ReactCurrentBatchConfig;function Pa(ce,de,ve){if(ce=ve.ref,ce!==null&&typeof ce!="function"&&typeof ce!="object"){if(ve._owner){if(ve=ve._owner,ve){if(ve.tag!==1)throw Error(K(309));var Te=ve.stateNode}if(!Te)throw Error(K(147,ce));var Ie=Te,Fe=""+ce;return de!==null&&de.ref!==null&&typeof de.ref=="function"&&de.ref._stringRef===Fe?de.ref:(de=function(He){var it=Ie.refs;He===null?delete it[Fe]:it[Fe]=He},de._stringRef=Fe,de)}if(typeof ce!="string")throw Error(K(284));if(!ve._owner)throw Error(K(290,ce))}return ce}function Ia(ce,de){throw ce=Object.prototype.toString.call(de),Error(K(31,ce==="[object Object]"?"object with keys {"+Object.keys(de).join(", ")+"}":ce))}function Rc(ce){var de=ce._init;return de(ce._payload)}function Pc(ce){function de(St,ht){if(ce){var Tt=St.deletions;Tt===null?(St.deletions=[ht],St.flags|=16):Tt.push(ht)}}function ve(St,ht){if(!ce)return null;for(;ht!==null;)de(St,ht),ht=ht.sibling;return null}function Te(St,ht){for(St=new Map;ht!==null;)ht.key!==null?St.set(ht.key,ht):St.set(ht.index,ht),ht=ht.sibling;return St}function Ie(St,ht){return St=aa(St,ht),St.index=0,St.sibling=null,St}function Fe(St,ht,Tt){return St.index=Tt,ce?(Tt=St.alternate,Tt!==null?(Tt=Tt.index,Tt<ht?(St.flags|=2,ht):Tt):(St.flags|=2,ht)):(St.flags|=1048576,ht)}function He(St){return ce&&St.alternate===null&&(St.flags|=2),St}function it(St,ht,Tt,sn){return ht===null||ht.tag!==6?(ht=cf(Tt,St.mode,sn),ht.return=St,ht):(ht=Ie(ht,Tt),ht.return=St,ht)}function ut(St,ht,Tt,sn){var Rn=Tt.type;return Rn===Ue?Jt(St,ht,Tt.props.children,sn,Tt.key):ht!==null&&(ht.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===ot&&Rc(Rn)===ht.type)?(sn=Ie(ht,Tt.props),sn.ref=Pa(St,ht,Tt),sn.return=St,sn):(sn=Iu(Tt.type,Tt.key,Tt.props,null,St.mode,sn),sn.ref=Pa(St,ht,Tt),sn.return=St,sn)}function wt(St,ht,Tt,sn){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Tt.containerInfo||ht.stateNode.implementation!==Tt.implementation?(ht=uf(Tt,St.mode,sn),ht.return=St,ht):(ht=Ie(ht,Tt.children||[]),ht.return=St,ht)}function Jt(St,ht,Tt,sn,Rn){return ht===null||ht.tag!==7?(ht=Xa(Tt,St.mode,sn,Rn),ht.return=St,ht):(ht=Ie(ht,Tt),ht.return=St,ht)}function tn(St,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=cf(""+ht,St.mode,Tt),ht.return=St,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case Oe:return Tt=Iu(ht.type,ht.key,ht.props,null,St.mode,Tt),Tt.ref=Pa(St,null,ht),Tt.return=St,Tt;case Be:return ht=uf(ht,St.mode,Tt),ht.return=St,ht;case ot:var sn=ht._init;return tn(St,sn(ht._payload),Tt)}if(qt(ht)||st(ht))return ht=Xa(ht,St.mode,Tt,null),ht.return=St,ht;Ia(St,ht)}return null}function Xt(St,ht,Tt,sn){var Rn=ht!==null?ht.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Rn!==null?null:it(St,ht,""+Tt,sn);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case Oe:return Tt.key===Rn?ut(St,ht,Tt,sn):null;case Be:return Tt.key===Rn?wt(St,ht,Tt,sn):null;case ot:return Rn=Tt._init,Xt(St,ht,Rn(Tt._payload),sn)}if(qt(Tt)||st(Tt))return Rn!==null?null:Jt(St,ht,Tt,sn,null);Ia(St,Tt)}return null}function vn(St,ht,Tt,sn,Rn){if(typeof sn=="string"&&sn!==""||typeof sn=="number")return St=St.get(Tt)||null,it(ht,St,""+sn,Rn);if(typeof sn=="object"&&sn!==null){switch(sn.$$typeof){case Oe:return St=St.get(sn.key===null?Tt:sn.key)||null,ut(ht,St,sn,Rn);case Be:return St=St.get(sn.key===null?Tt:sn.key)||null,wt(ht,St,sn,Rn);case ot:var Fn=sn._init;return vn(St,ht,Tt,Fn(sn._payload),Rn)}if(qt(sn)||st(sn))return St=St.get(Tt)||null,Jt(ht,St,sn,Rn,null);Ia(ht,sn)}return null}function bn(St,ht,Tt,sn){for(var Rn=null,Fn=null,Nn=ht,kn=ht=0,Zr=null;Nn!==null&&kn<Tt.length;kn++){Nn.index>kn?(Zr=Nn,Nn=null):Zr=Nn.sibling;var nr=Xt(St,Nn,Tt[kn],sn);if(nr===null){Nn===null&&(Nn=Zr);break}ce&&Nn&&nr.alternate===null&&de(St,Nn),ht=Fe(nr,ht,kn),Fn===null?Rn=nr:Fn.sibling=nr,Fn=nr,Nn=Zr}if(kn===Tt.length)return ve(St,Nn),fr&&As(St,kn),Rn;if(Nn===null){for(;kn<Tt.length;kn++)Nn=tn(St,Tt[kn],sn),Nn!==null&&(ht=Fe(Nn,ht,kn),Fn===null?Rn=Nn:Fn.sibling=Nn,Fn=Nn);return fr&&As(St,kn),Rn}for(Nn=Te(St,Nn);kn<Tt.length;kn++)Zr=vn(Nn,St,kn,Tt[kn],sn),Zr!==null&&(ce&&Zr.alternate!==null&&Nn.delete(Zr.key===null?kn:Zr.key),ht=Fe(Zr,ht,kn),Fn===null?Rn=Zr:Fn.sibling=Zr,Fn=Zr);return ce&&Nn.forEach(function(la){return de(St,la)}),fr&&As(St,kn),Rn}function Mn(St,ht,Tt,sn){var Rn=st(Tt);if(typeof Rn!="function")throw Error(K(150));if(Tt=Rn.call(Tt),Tt==null)throw Error(K(151));for(var Fn=Rn=null,Nn=ht,kn=ht=0,Zr=null,nr=Tt.next();Nn!==null&&!nr.done;kn++,nr=Tt.next()){Nn.index>kn?(Zr=Nn,Nn=null):Zr=Nn.sibling;var la=Xt(St,Nn,nr.value,sn);if(la===null){Nn===null&&(Nn=Zr);break}ce&&Nn&&la.alternate===null&&de(St,Nn),ht=Fe(la,ht,kn),Fn===null?Rn=la:Fn.sibling=la,Fn=la,Nn=Zr}if(nr.done)return ve(St,Nn),fr&&As(St,kn),Rn;if(Nn===null){for(;!nr.done;kn++,nr=Tt.next())nr=tn(St,nr.value,sn),nr!==null&&(ht=Fe(nr,ht,kn),Fn===null?Rn=nr:Fn.sibling=nr,Fn=nr);return fr&&As(St,kn),Rn}for(Nn=Te(St,Nn);!nr.done;kn++,nr=Tt.next())nr=vn(Nn,St,kn,nr.value,sn),nr!==null&&(ce&&nr.alternate!==null&&Nn.delete(nr.key===null?kn:nr.key),ht=Fe(nr,ht,kn),Fn===null?Rn=nr:Fn.sibling=nr,Fn=nr);return ce&&Nn.forEach(function(md){return de(St,md)}),fr&&As(St,kn),Rn}function Br(St,ht,Tt,sn){if(typeof Tt=="object"&&Tt!==null&&Tt.type===Ue&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case Oe:e:{for(var Rn=Tt.key,Fn=ht;Fn!==null;){if(Fn.key===Rn){if(Rn=Tt.type,Rn===Ue){if(Fn.tag===7){ve(St,Fn.sibling),ht=Ie(Fn,Tt.props.children),ht.return=St,St=ht;break e}}else if(Fn.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===ot&&Rc(Rn)===Fn.type){ve(St,Fn.sibling),ht=Ie(Fn,Tt.props),ht.ref=Pa(St,Fn,Tt),ht.return=St,St=ht;break e}ve(St,Fn);break}else de(St,Fn);Fn=Fn.sibling}Tt.type===Ue?(ht=Xa(Tt.props.children,St.mode,sn,Tt.key),ht.return=St,St=ht):(sn=Iu(Tt.type,Tt.key,Tt.props,null,St.mode,sn),sn.ref=Pa(St,ht,Tt),sn.return=St,St=sn)}return He(St);case Be:e:{for(Fn=Tt.key;ht!==null;){if(ht.key===Fn)if(ht.tag===4&&ht.stateNode.containerInfo===Tt.containerInfo&&ht.stateNode.implementation===Tt.implementation){ve(St,ht.sibling),ht=Ie(ht,Tt.children||[]),ht.return=St,St=ht;break e}else{ve(St,ht);break}else de(St,ht);ht=ht.sibling}ht=uf(Tt,St.mode,sn),ht.return=St,St=ht}return He(St);case ot:return Fn=Tt._init,Br(St,ht,Fn(Tt._payload),sn)}if(qt(Tt))return bn(St,ht,Tt,sn);if(st(Tt))return Mn(St,ht,Tt,sn);Ia(St,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"?(Tt=""+Tt,ht!==null&&ht.tag===6?(ve(St,ht.sibling),ht=Ie(ht,Tt),ht.return=St,St=ht):(ve(St,ht),ht=cf(Tt,St.mode,sn),ht.return=St,St=ht),He(St)):ve(St,ht)}return Br}var go=Pc(!0),Ba=Pc(!1),_o=yr(null),vo=null,bs=null,Yo=null;function yo(){Yo=bs=vo=null}function La(ce){var de=_o.current;lr(_o),ce._currentValue=de}function Da(ce,de,ve){for(;ce!==null;){var Te=ce.alternate;if((ce.childLanes&de)!==de?(ce.childLanes|=de,Te!==null&&(Te.childLanes|=de)):Te!==null&&(Te.childLanes&de)!==de&&(Te.childLanes|=de),ce===ve)break;ce=ce.return}}function Hs(ce,de){vo=ce,Yo=bs=null,ce=ce.dependencies,ce!==null&&ce.firstContext!==null&&((ce.lanes&de)!==0&&(Xn=!0),ce.firstContext=null)}function Ei(ce){var de=ce._currentValue;if(Yo!==ce)if(ce={context:ce,memoizedValue:de,next:null},bs===null){if(vo===null)throw Error(K(308));bs=ce,vo.dependencies={lanes:0,firstContext:ce}}else bs=bs.next=ce;return de}var Ms=null;function Ic(ce){Ms===null?Ms=[ce]:Ms.push(ce)}function Oa(ce,de,ve,Te){var Ie=de.interleaved;return Ie===null?(ve.next=ve,Ic(de)):(ve.next=Ie.next,Ie.next=ve),de.interleaved=ve,Wi(ce,Te)}function Wi(ce,de){ce.lanes|=de;var ve=ce.alternate;for(ve!==null&&(ve.lanes|=de),ve=ce,ce=ce.return;ce!==null;)ce.childLanes|=de,ve=ce.alternate,ve!==null&&(ve.childLanes|=de),ve=ce,ce=ce.return;return ve.tag===3?ve.stateNode:null}var ir=!1;function jn(ce){ce.updateQueue={baseState:ce.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function br(ce,de){ce=ce.updateQueue,de.updateQueue===ce&&(de.updateQueue={baseState:ce.baseState,firstBaseUpdate:ce.firstBaseUpdate,lastBaseUpdate:ce.lastBaseUpdate,shared:ce.shared,effects:ce.effects})}function sr(ce,de){return{eventTime:ce,lane:de,tag:0,payload:null,callback:null,next:null}}function pr(ce,de,ve){var Te=ce.updateQueue;if(Te===null)return null;if(Te=Te.shared,(tr&2)!==0){var Ie=Te.pending;return Ie===null?de.next=de:(de.next=Ie.next,Ie.next=de),Te.pending=de,Wi(ce,ve)}return Ie=Te.interleaved,Ie===null?(de.next=de,Ic(Te)):(de.next=Ie.next,Ie.next=de),Te.interleaved=de,Wi(ce,ve)}function Jr(ce,de,ve){if(de=de.updateQueue,de!==null&&(de=de.shared,(ve&4194240)!==0)){var Te=de.lanes;Te&=ce.pendingLanes,ve|=Te,de.lanes=ve,Qi(ce,ve)}}function xo(ce,de){var ve=ce.updateQueue,Te=ce.alternate;if(Te!==null&&(Te=Te.updateQueue,ve===Te)){var Ie=null,Fe=null;if(ve=ve.firstBaseUpdate,ve!==null){do{var He={eventTime:ve.eventTime,lane:ve.lane,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null};Fe===null?Ie=Fe=He:Fe=Fe.next=He,ve=ve.next}while(ve!==null);Fe===null?Ie=Fe=de:Fe=Fe.next=de}else Ie=Fe=de;ve={baseState:Te.baseState,firstBaseUpdate:Ie,lastBaseUpdate:Fe,shared:Te.shared,effects:Te.effects},ce.updateQueue=ve;return}ce=ve.lastBaseUpdate,ce===null?ve.firstBaseUpdate=de:ce.next=de,ve.lastBaseUpdate=de}function xr(ce,de,ve,Te){var Ie=ce.updateQueue;ir=!1;var Fe=Ie.firstBaseUpdate,He=Ie.lastBaseUpdate,it=Ie.shared.pending;if(it!==null){Ie.shared.pending=null;var ut=it,wt=ut.next;ut.next=null,He===null?Fe=wt:He.next=wt,He=ut;var Jt=ce.alternate;Jt!==null&&(Jt=Jt.updateQueue,it=Jt.lastBaseUpdate,it!==He&&(it===null?Jt.firstBaseUpdate=wt:it.next=wt,Jt.lastBaseUpdate=ut))}if(Fe!==null){var tn=Ie.baseState;He=0,Jt=wt=ut=null,it=Fe;do{var Xt=it.lane,vn=it.eventTime;if((Te&Xt)===Xt){Jt!==null&&(Jt=Jt.next={eventTime:vn,lane:0,tag:it.tag,payload:it.payload,callback:it.callback,next:null});e:{var bn=ce,Mn=it;switch(Xt=de,vn=ve,Mn.tag){case 1:if(bn=Mn.payload,typeof bn=="function"){tn=bn.call(vn,tn,Xt);break e}tn=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=Mn.payload,Xt=typeof bn=="function"?bn.call(vn,tn,Xt):bn,Xt==null)break e;tn=nt({},tn,Xt);break e;case 2:ir=!0}}it.callback!==null&&it.lane!==0&&(ce.flags|=64,Xt=Ie.effects,Xt===null?Ie.effects=[it]:Xt.push(it))}else vn={eventTime:vn,lane:Xt,tag:it.tag,payload:it.payload,callback:it.callback,next:null},Jt===null?(wt=Jt=vn,ut=tn):Jt=Jt.next=vn,He|=Xt;if(it=it.next,it===null){if(it=Ie.shared.pending,it===null)break;Xt=it,it=Xt.next,Xt.next=null,Ie.lastBaseUpdate=Xt,Ie.shared.pending=null}}while(!0);if(Jt===null&&(ut=tn),Ie.baseState=ut,Ie.firstBaseUpdate=wt,Ie.lastBaseUpdate=Jt,de=Ie.shared.interleaved,de!==null){Ie=de;do He|=Ie.lane,Ie=Ie.next;while(Ie!==de)}else Fe===null&&(Ie.shared.lanes=0);Ha|=He,ce.lanes=He,ce.memoizedState=tn}}function Qo(ce,de,ve){if(ce=de.effects,de.effects=null,ce!==null)for(de=0;de<ce.length;de++){var Te=ce[de],Ie=Te.callback;if(Ie!==null){if(Te.callback=null,Te=ve,typeof Ie!="function")throw Error(K(191,Ie));Ie.call(Te)}}}var os={},Ai=yr(os),So=yr(os),ws=yr(os);function Mr(ce){if(ce===os)throw Error(K(174));return ce}function Fa(ce,de){switch(or(ws,de),or(So,ce),or(Ai,os),ce=de.nodeType,ce){case 9:case 11:de=(de=de.documentElement)?de.namespaceURI:Ft(null,"");break;default:ce=ce===8?de.parentNode:de,de=ce.namespaceURI||null,ce=ce.tagName,de=Ft(de,ce)}lr(Ai),or(Ai,de)}function Ws(){lr(Ai),lr(So),lr(ws)}function Eo(ce){Mr(ws.current);var de=Mr(Ai.current),ve=Ft(de,ce.type);de!==ve&&(or(So,ce),or(Ai,ve))}function Zo(ce){So.current===ce&&(lr(Ai),lr(So))}var dr=yr(0);function ji(ce){for(var de=ce;de!==null;){if(de.tag===13){var ve=de.memoizedState;if(ve!==null&&(ve=ve.dehydrated,ve===null||ve.data==="$?"||ve.data==="$!"))return de}else if(de.tag===19&&de.memoizedProps.revealOrder!==void 0){if((de.flags&128)!==0)return de}else if(de.child!==null){de.child.return=de,de=de.child;continue}if(de===ce)break;for(;de.sibling===null;){if(de.return===null||de.return===ce)return null;de=de.return}de.sibling.return=de.return,de=de.sibling}return null}var ea=[];function as(){for(var ce=0;ce<ea.length;ce++)ea[ce]._workInProgressVersionPrimary=null;ea.length=0}var Ao=Pe.ReactCurrentDispatcher,To=Pe.ReactCurrentBatchConfig,Cs=0,cr=null,Sr=null,er=null,qi=!1,Yr=!1,js=0,hi=0;function zr(){throw Error(K(321))}function Na(ce,de){if(de===null)return!1;for(var ve=0;ve<de.length&&ve<ce.length;ve++)if(!yi(ce[ve],de[ve]))return!1;return!0}function ka(ce,de,ve,Te,Ie,Fe){if(Cs=Fe,cr=de,de.memoizedState=null,de.updateQueue=null,de.lanes=0,Ao.current=ce===null||ce.memoizedState===null?mu:gu,ce=ve(Te,Ie),Yr){Fe=0;do{if(Yr=!1,js=0,25<=Fe)throw Error(K(301));Fe+=1,er=Sr=null,de.updateQueue=null,Ao.current=_u,ce=ve(Te,Ie)}while(Yr)}if(Ao.current=ql,de=Sr!==null&&Sr.next!==null,Cs=0,er=Sr=cr=null,qi=!1,de)throw Error(K(300));return ce}function Bc(){var ce=js!==0;return js=0,ce}function Vr(){var ce={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?cr.memoizedState=er=ce:er=er.next=ce,er}function Ti(){if(Sr===null){var ce=cr.alternate;ce=ce!==null?ce.memoizedState:null}else ce=Sr.next;var de=er===null?cr.memoizedState:er.next;if(de!==null)er=de,Sr=ce;else{if(ce===null)throw Error(K(310));Sr=ce,ce={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},er===null?cr.memoizedState=er=ce:er=er.next=ce}return er}function ta(ce,de){return typeof de=="function"?de(ce):de}function Ua(ce){var de=Ti(),ve=de.queue;if(ve===null)throw Error(K(311));ve.lastRenderedReducer=ce;var Te=Sr,Ie=Te.baseQueue,Fe=ve.pending;if(Fe!==null){if(Ie!==null){var He=Ie.next;Ie.next=Fe.next,Fe.next=He}Te.baseQueue=Ie=Fe,ve.pending=null}if(Ie!==null){Fe=Ie.next,Te=Te.baseState;var it=He=null,ut=null,wt=Fe;do{var Jt=wt.lane;if((Cs&Jt)===Jt)ut!==null&&(ut=ut.next={lane:0,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),Te=wt.hasEagerState?wt.eagerState:ce(Te,wt.action);else{var tn={lane:Jt,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null};ut===null?(it=ut=tn,He=Te):ut=ut.next=tn,cr.lanes|=Jt,Ha|=Jt}wt=wt.next}while(wt!==null&&wt!==Fe);ut===null?He=Te:ut.next=it,yi(Te,de.memoizedState)||(Xn=!0),de.memoizedState=Te,de.baseState=He,de.baseQueue=ut,ve.lastRenderedState=Te}if(ce=ve.interleaved,ce!==null){Ie=ce;do Fe=Ie.lane,cr.lanes|=Fe,Ha|=Fe,Ie=Ie.next;while(Ie!==ce)}else Ie===null&&(ve.lanes=0);return[de.memoizedState,ve.dispatch]}function Rs(ce){var de=Ti(),ve=de.queue;if(ve===null)throw Error(K(311));ve.lastRenderedReducer=ce;var Te=ve.dispatch,Ie=ve.pending,Fe=de.memoizedState;if(Ie!==null){ve.pending=null;var He=Ie=Ie.next;do Fe=ce(Fe,He.action),He=He.next;while(He!==Ie);yi(Fe,de.memoizedState)||(Xn=!0),de.memoizedState=Fe,de.baseQueue===null&&(de.baseState=Fe),ve.lastRenderedState=Fe}return[Fe,Te]}function Lc(){}function Dc(ce,de){var ve=cr,Te=Ti(),Ie=de(),Fe=!yi(Te.memoizedState,Ie);if(Fe&&(Te.memoizedState=Ie,Xn=!0),Te=Te.queue,Nc(cu.bind(null,ve,Te,ce),[ce]),Te.getSnapshot!==de||Fe||er!==null&&er.memoizedState.tag&1){if(ve.flags|=2048,Xi(9,$a.bind(null,ve,Te,Ie,de),void 0,null),Qr===null)throw Error(K(349));(Cs&30)!==0||Gl(ve,de,Ie)}return Ie}function Gl(ce,de,ve){ce.flags|=16384,ce={getSnapshot:de,value:ve},de=cr.updateQueue,de===null?(de={lastEffect:null,stores:null},cr.updateQueue=de,de.stores=[ce]):(ve=de.stores,ve===null?de.stores=[ce]:ve.push(ce))}function $a(ce,de,ve,Te){de.value=ve,de.getSnapshot=Te,uu(de)&&Oc(ce)}function cu(ce,de,ve){return ve(function(){uu(de)&&Oc(ce)})}function uu(ce){var de=ce.getSnapshot;ce=ce.value;try{var ve=de();return!yi(ce,ve)}catch{return!0}}function Oc(ce){var de=Wi(ce,1);de!==null&&Ds(de,ce,1,-1)}function Fc(ce){var de=Vr();return typeof ce=="function"&&(ce=ce()),de.memoizedState=de.baseState=ce,ce={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:ce},de.queue=ce,ce=ce.dispatch=bo.bind(null,cr,ce),[de.memoizedState,ce]}function Xi(ce,de,ve,Te){return ce={tag:ce,create:de,destroy:ve,deps:Te,next:null},de=cr.updateQueue,de===null?(de={lastEffect:null,stores:null},cr.updateQueue=de,de.lastEffect=ce.next=ce):(ve=de.lastEffect,ve===null?de.lastEffect=ce.next=ce:(Te=ve.next,ve.next=ce,ce.next=Te,de.lastEffect=ce)),ce}function fu(){return Ti().memoizedState}function ls(ce,de,ve,Te){var Ie=Vr();cr.flags|=ce,Ie.memoizedState=Xi(1|de,ve,void 0,Te===void 0?null:Te)}function Ga(ce,de,ve,Te){var Ie=Ti();Te=Te===void 0?null:Te;var Fe=void 0;if(Sr!==null){var He=Sr.memoizedState;if(Fe=He.destroy,Te!==null&&Na(Te,He.deps)){Ie.memoizedState=Xi(de,ve,Fe,Te);return}}cr.flags|=ce,Ie.memoizedState=Xi(1|de,ve,Fe,Te)}function oi(ce,de){return ls(8390656,8,ce,de)}function Nc(ce,de){return Ga(2048,8,ce,de)}function kc(ce,de){return Ga(4,2,ce,de)}function du(ce,de){return Ga(4,4,ce,de)}function hu(ce,de){if(typeof de=="function")return ce=ce(),de(ce),function(){de(null)};if(de!=null)return ce=ce(),de.current=ce,function(){de.current=null}}function Uc(ce,de,ve){return ve=ve!=null?ve.concat([ce]):null,Ga(4,4,hu.bind(null,de,ce),ve)}function zl(){}function pu(ce,de){var ve=Ti();de=de===void 0?null:de;var Te=ve.memoizedState;return Te!==null&&de!==null&&Na(de,Te[1])?Te[0]:(ve.memoizedState=[ce,de],ce)}function bi(ce,de){var ve=Ti();de=de===void 0?null:de;var Te=ve.memoizedState;return Te!==null&&de!==null&&Na(de,Te[1])?Te[0]:(ce=ce(),ve.memoizedState=[ce,de],ce)}function Vl(ce,de,ve){return(Cs&21)===0?(ce.baseState&&(ce.baseState=!1,Xn=!0),ce.memoizedState=ve):(yi(ve,de)||(ve=ur(),cr.lanes|=ve,Ha|=ve,ce.baseState=!0),de)}function Hu(ce,de){var ve=qn;qn=ve!==0&&4>ve?ve:4,ce(!0);var Te=To.transition;To.transition={};try{ce(!1),de()}finally{qn=ve,To.transition=Te}}function Ps(){return Ti().memoizedState}function Hl(ce,de,ve){var Te=sa(ce);if(ve={lane:Te,action:ve,hasEagerState:!1,eagerState:null,next:null},za(ce))Wl(de,ve);else if(ve=Oa(ce,de,ve,Te),ve!==null){var Ie=wi();Ds(ve,ce,Te,Ie),jl(ve,de,Te)}}function bo(ce,de,ve){var Te=sa(ce),Ie={lane:Te,action:ve,hasEagerState:!1,eagerState:null,next:null};if(za(ce))Wl(de,Ie);else{var Fe=ce.alternate;if(ce.lanes===0&&(Fe===null||Fe.lanes===0)&&(Fe=de.lastRenderedReducer,Fe!==null))try{var He=de.lastRenderedState,it=Fe(He,ve);if(Ie.hasEagerState=!0,Ie.eagerState=it,yi(it,He)){var ut=de.interleaved;ut===null?(Ie.next=Ie,Ic(de)):(Ie.next=ut.next,ut.next=Ie),de.interleaved=Ie;return}}catch{}finally{}ve=Oa(ce,de,Ie,Te),ve!==null&&(Ie=wi(),Ds(ve,ce,Te,Ie),jl(ve,de,Te))}}function za(ce){var de=ce.alternate;return ce===cr||de!==null&&de===cr}function Wl(ce,de){Yr=qi=!0;var ve=ce.pending;ve===null?de.next=de:(de.next=ve.next,ve.next=de),ce.pending=de}function jl(ce,de,ve){if((ve&4194240)!==0){var Te=de.lanes;Te&=ce.pendingLanes,ve|=Te,de.lanes=ve,Qi(ce,ve)}}var ql={readContext:Ei,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},mu={readContext:Ei,useCallback:function(ce,de){return Vr().memoizedState=[ce,de===void 0?null:de],ce},useContext:Ei,useEffect:oi,useImperativeHandle:function(ce,de,ve){return ve=ve!=null?ve.concat([ce]):null,ls(4194308,4,hu.bind(null,de,ce),ve)},useLayoutEffect:function(ce,de){return ls(4194308,4,ce,de)},useInsertionEffect:function(ce,de){return ls(4,2,ce,de)},useMemo:function(ce,de){var ve=Vr();return de=de===void 0?null:de,ce=ce(),ve.memoizedState=[ce,de],ce},useReducer:function(ce,de,ve){var Te=Vr();return de=ve!==void 0?ve(de):de,Te.memoizedState=Te.baseState=de,ce={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:de},Te.queue=ce,ce=ce.dispatch=Hl.bind(null,cr,ce),[Te.memoizedState,ce]},useRef:function(ce){var de=Vr();return ce={current:ce},de.memoizedState=ce},useState:Fc,useDebugValue:zl,useDeferredValue:function(ce){return Vr().memoizedState=ce},useTransition:function(){var ce=Fc(!1),de=ce[0];return ce=Hu.bind(null,ce[1]),Vr().memoizedState=ce,[de,ce]},useMutableSource:function(){},useSyncExternalStore:function(ce,de,ve){var Te=cr,Ie=Vr();if(fr){if(ve===void 0)throw Error(K(407));ve=ve()}else{if(ve=de(),Qr===null)throw Error(K(349));(Cs&30)!==0||Gl(Te,de,ve)}Ie.memoizedState=ve;var Fe={value:ve,getSnapshot:de};return Ie.queue=Fe,oi(cu.bind(null,Te,Fe,ce),[ce]),Te.flags|=2048,Xi(9,$a.bind(null,Te,Fe,ve,de),void 0,null),ve},useId:function(){var ce=Vr(),de=Qr.identifierPrefix;if(fr){var ve=Oi,Te=on;ve=(Te&~(1<<32-Wn(Te)-1)).toString(32)+ve,de=":"+de+"R"+ve,ve=js++,0<ve&&(de+="H"+ve.toString(32)),de+=":"}else ve=hi++,de=":"+de+"r"+ve.toString(32)+":";return ce.memoizedState=de},unstable_isNewReconciler:!1},gu={readContext:Ei,useCallback:pu,useContext:Ei,useEffect:Nc,useImperativeHandle:Uc,useInsertionEffect:kc,useLayoutEffect:du,useMemo:bi,useReducer:Ua,useRef:fu,useState:function(){return Ua(ta)},useDebugValue:zl,useDeferredValue:function(ce){var de=Ti();return Vl(de,Sr.memoizedState,ce)},useTransition:function(){var ce=Ua(ta)[0],de=Ti().memoizedState;return[ce,de]},useMutableSource:Lc,useSyncExternalStore:Dc,useId:Ps,unstable_isNewReconciler:!1},_u={readContext:Ei,useCallback:pu,useContext:Ei,useEffect:Nc,useImperativeHandle:Uc,useInsertionEffect:kc,useLayoutEffect:du,useMemo:bi,useReducer:Rs,useRef:fu,useState:function(){return Rs(ta)},useDebugValue:zl,useDeferredValue:function(ce){var de=Ti();return Sr===null?de.memoizedState=ce:Vl(de,Sr.memoizedState,ce)},useTransition:function(){var ce=Rs(ta)[0],de=Ti().memoizedState;return[ce,de]},useMutableSource:Lc,useSyncExternalStore:Dc,useId:Ps,unstable_isNewReconciler:!1};function Ni(ce,de){if(ce&&ce.defaultProps){de=nt({},de),ce=ce.defaultProps;for(var ve in ce)de[ve]===void 0&&(de[ve]=ce[ve]);return de}return de}function Va(ce,de,ve,Te){de=ce.memoizedState,ve=ve(Te,de),ve=ve==null?de:nt({},de,ve),ce.memoizedState=ve,ce.lanes===0&&(ce.updateQueue.baseState=ve)}var Xl={isMounted:function(ce){return(ce=ce._reactInternals)?fs(ce)===ce:!1},enqueueSetState:function(ce,de,ve){ce=ce._reactInternals;var Te=wi(),Ie=sa(ce),Fe=sr(Te,Ie);Fe.payload=de,ve!=null&&(Fe.callback=ve),de=pr(ce,Fe,Ie),de!==null&&(Ds(de,ce,Ie,Te),Jr(de,ce,Ie))},enqueueReplaceState:function(ce,de,ve){ce=ce._reactInternals;var Te=wi(),Ie=sa(ce),Fe=sr(Te,Ie);Fe.tag=1,Fe.payload=de,ve!=null&&(Fe.callback=ve),de=pr(ce,Fe,Ie),de!==null&&(Ds(de,ce,Ie,Te),Jr(de,ce,Ie))},enqueueForceUpdate:function(ce,de){ce=ce._reactInternals;var ve=wi(),Te=sa(ce),Ie=sr(ve,Te);Ie.tag=2,de!=null&&(Ie.callback=de),de=pr(ce,Ie,Te),de!==null&&(Ds(de,ce,Te,ve),Jr(de,ce,Te))}};function vu(ce,de,ve,Te,Ie,Fe,He){return ce=ce.stateNode,typeof ce.shouldComponentUpdate=="function"?ce.shouldComponentUpdate(Te,Fe,He):de.prototype&&de.prototype.isPureReactComponent?!so(ve,Te)||!so(Ie,Fe):!0}function pe(ce,de,ve){var Te=!1,Ie=Ss,Fe=de.contextType;return typeof Fe=="object"&&Fe!==null?Fe=Ei(Fe):(Ie=Kr(de)?Es:$r.current,Te=de.contextTypes,Fe=(Te=Te!=null)?fo(ce,Ie):Ss),de=new de(ve,Fe),ce.memoizedState=de.state!==null&&de.state!==void 0?de.state:null,de.updater=Xl,ce.stateNode=de,de._reactInternals=ce,Te&&(ce=ce.stateNode,ce.__reactInternalMemoizedUnmaskedChildContext=Ie,ce.__reactInternalMemoizedMaskedChildContext=Fe),de}function me(ce,de,ve,Te){ce=de.state,typeof de.componentWillReceiveProps=="function"&&de.componentWillReceiveProps(ve,Te),typeof de.UNSAFE_componentWillReceiveProps=="function"&&de.UNSAFE_componentWillReceiveProps(ve,Te),de.state!==ce&&Xl.enqueueReplaceState(de,de.state,null)}function Ae(ce,de,ve,Te){var Ie=ce.stateNode;Ie.props=ve,Ie.state=ce.memoizedState,Ie.refs={},jn(ce);var Fe=de.contextType;typeof Fe=="object"&&Fe!==null?Ie.context=Ei(Fe):(Fe=Kr(de)?Es:$r.current,Ie.context=fo(ce,Fe)),Ie.state=ce.memoizedState,Fe=de.getDerivedStateFromProps,typeof Fe=="function"&&(Va(ce,de,Fe,ve),Ie.state=ce.memoizedState),typeof de.getDerivedStateFromProps=="function"||typeof Ie.getSnapshotBeforeUpdate=="function"||typeof Ie.UNSAFE_componentWillMount!="function"&&typeof Ie.componentWillMount!="function"||(de=Ie.state,typeof Ie.componentWillMount=="function"&&Ie.componentWillMount(),typeof Ie.UNSAFE_componentWillMount=="function"&&Ie.UNSAFE_componentWillMount(),de!==Ie.state&&Xl.enqueueReplaceState(Ie,Ie.state,null),xr(ce,ve,Ie,Te),Ie.state=ce.memoizedState),typeof Ie.componentDidMount=="function"&&(ce.flags|=4194308)}function Re(ce,de){try{var ve="",Te=de;do ve+=pt(Te),Te=Te.return;while(Te);var Ie=ve}catch(Fe){Ie=`
Error generating stack: `+Fe.message+`
`+Fe.stack}return{value:ce,source:de,stack:Ie,digest:null}}function Le(ce,de,ve){return{value:ce,source:null,stack:ve??null,digest:de??null}}function ze(ce,de){try{console.error(de.value)}catch(ve){setTimeout(function(){throw ve})}}var et=typeof WeakMap=="function"?WeakMap:Map;function gt(ce,de,ve){ve=sr(-1,ve),ve.tag=3,ve.payload={element:null};var Te=de.value;return ve.callback=function(){bu||(bu=!0,ef=Te),ze(ce,de)},ve}function Nt(ce,de,ve){ve=sr(-1,ve),ve.tag=3;var Te=ce.type.getDerivedStateFromError;if(typeof Te=="function"){var Ie=de.value;ve.payload=function(){return Te(Ie)},ve.callback=function(){ze(ce,de)}}var Fe=ce.stateNode;return Fe!==null&&typeof Fe.componentDidCatch=="function"&&(ve.callback=function(){ze(ce,de),typeof Te!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var He=de.stack;this.componentDidCatch(de.value,{componentStack:He!==null?He:""})}),ve}function rn(ce,de,ve){var Te=ce.pingCache;if(Te===null){Te=ce.pingCache=new et;var Ie=new Set;Te.set(de,Ie)}else Ie=Te.get(de),Ie===void 0&&(Ie=new Set,Te.set(de,Ie));Ie.has(ve)||(Ie.add(ve),ce=id.bind(null,ce,de,ve),de.then(ce,ce))}function xn(ce){do{var de;if((de=ce.tag===13)&&(de=ce.memoizedState,de=de!==null?de.dehydrated!==null:!0),de)return ce;ce=ce.return}while(ce!==null);return null}function Un(ce,de,ve,Te,Ie){return(ce.mode&1)===0?(ce===de?ce.flags|=65536:(ce.flags|=128,ve.flags|=131072,ve.flags&=-52805,ve.tag===1&&(ve.alternate===null?ve.tag=17:(de=sr(-1,1),de.tag=2,pr(ve,de,1))),ve.lanes|=1),ce):(ce.flags|=65536,ce.lanes=Ie,ce)}var Dn=Pe.ReactCurrentOwner,Xn=!1;function pn(ce,de,ve,Te){de.child=ce===null?Ba(de,null,ve,Te):go(de,ce.child,ve,Te)}function Hr(ce,de,ve,Te,Ie){ve=ve.render;var Fe=de.ref;return Hs(de,Ie),Te=ka(ce,de,ve,Te,Fe,Ie),ve=Bc(),ce!==null&&!Xn?(de.updateQueue=ce.updateQueue,de.flags&=-2053,ce.lanes&=~Ie,Mo(ce,de,Ie)):(fr&&ve&&bc(de),de.flags|=1,pn(ce,de,Te,Ie),de.child)}function Mi(ce,de,ve,Te,Ie){if(ce===null){var Fe=ve.type;return typeof Fe=="function"&&!lf(Fe)&&Fe.defaultProps===void 0&&ve.compare===null&&ve.defaultProps===void 0?(de.tag=15,de.type=Fe,bt(ce,de,Fe,Te,Ie)):(ce=Iu(ve.type,null,Te,de,de.mode,Ie),ce.ref=de.ref,ce.return=de,de.child=ce)}if(Fe=ce.child,(ce.lanes&Ie)===0){var He=Fe.memoizedProps;if(ve=ve.compare,ve=ve!==null?ve:so,ve(He,Te)&&ce.ref===de.ref)return Mo(ce,de,Ie)}return de.flags|=1,ce=aa(Fe,Te),ce.ref=de.ref,ce.return=de,de.child=ce}function bt(ce,de,ve,Te,Ie){if(ce!==null){var Fe=ce.memoizedProps;if(so(Fe,Te)&&ce.ref===de.ref)if(Xn=!1,de.pendingProps=Te=Fe,(ce.lanes&Ie)!==0)(ce.flags&131072)!==0&&(Xn=!0);else return de.lanes=ce.lanes,Mo(ce,de,Ie)}return dn(ce,de,ve,Te,Ie)}function _t(ce,de,ve){var Te=de.pendingProps,Ie=Te.children,Fe=ce!==null?ce.memoizedState:null;if(Te.mode==="hidden")if((de.mode&1)===0)de.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Jl,Ki),Ki|=ve;else{if((ve&1073741824)===0)return ce=Fe!==null?Fe.baseLanes|ve:ve,de.lanes=de.childLanes=1073741824,de.memoizedState={baseLanes:ce,cachePool:null,transitions:null},de.updateQueue=null,or(Jl,Ki),Ki|=ce,null;de.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te=Fe!==null?Fe.baseLanes:ve,or(Jl,Ki),Ki|=Te}else Fe!==null?(Te=Fe.baseLanes|ve,de.memoizedState=null):Te=ve,or(Jl,Ki),Ki|=Te;return pn(ce,de,Ie,ve),de.child}function Lt(ce,de){var ve=de.ref;(ce===null&&ve!==null||ce!==null&&ce.ref!==ve)&&(de.flags|=512,de.flags|=2097152)}function dn(ce,de,ve,Te,Ie){var Fe=Kr(ve)?Es:$r.current;return Fe=fo(de,Fe),Hs(de,Ie),ve=ka(ce,de,ve,Te,Fe,Ie),Te=Bc(),ce!==null&&!Xn?(de.updateQueue=ce.updateQueue,de.flags&=-2053,ce.lanes&=~Ie,Mo(ce,de,Ie)):(fr&&Te&&bc(de),de.flags|=1,pn(ce,de,ve,Ie),de.child)}function Cn(ce,de,ve,Te,Ie){if(Kr(ve)){var Fe=!0;ho(de)}else Fe=!1;if(Hs(de,Ie),de.stateNode===null)xu(ce,de),pe(de,ve,Te),Ae(de,ve,Te,Ie),Te=!0;else if(ce===null){var He=de.stateNode,it=de.memoizedProps;He.props=it;var ut=He.context,wt=ve.contextType;typeof wt=="object"&&wt!==null?wt=Ei(wt):(wt=Kr(ve)?Es:$r.current,wt=fo(de,wt));var Jt=ve.getDerivedStateFromProps,tn=typeof Jt=="function"||typeof He.getSnapshotBeforeUpdate=="function";tn||typeof He.UNSAFE_componentWillReceiveProps!="function"&&typeof He.componentWillReceiveProps!="function"||(it!==Te||ut!==wt)&&me(de,He,Te,wt),ir=!1;var Xt=de.memoizedState;He.state=Xt,xr(de,Te,He,Ie),ut=de.memoizedState,it!==Te||Xt!==ut||ri.current||ir?(typeof Jt=="function"&&(Va(de,ve,Jt,Te),ut=de.memoizedState),(it=ir||vu(de,ve,it,Te,Xt,ut,wt))?(tn||typeof He.UNSAFE_componentWillMount!="function"&&typeof He.componentWillMount!="function"||(typeof He.componentWillMount=="function"&&He.componentWillMount(),typeof He.UNSAFE_componentWillMount=="function"&&He.UNSAFE_componentWillMount()),typeof He.componentDidMount=="function"&&(de.flags|=4194308)):(typeof He.componentDidMount=="function"&&(de.flags|=4194308),de.memoizedProps=Te,de.memoizedState=ut),He.props=Te,He.state=ut,He.context=wt,Te=it):(typeof He.componentDidMount=="function"&&(de.flags|=4194308),Te=!1)}else{He=de.stateNode,br(ce,de),it=de.memoizedProps,wt=de.type===de.elementType?it:Ni(de.type,it),He.props=wt,tn=de.pendingProps,Xt=He.context,ut=ve.contextType,typeof ut=="object"&&ut!==null?ut=Ei(ut):(ut=Kr(ve)?Es:$r.current,ut=fo(de,ut));var vn=ve.getDerivedStateFromProps;(Jt=typeof vn=="function"||typeof He.getSnapshotBeforeUpdate=="function")||typeof He.UNSAFE_componentWillReceiveProps!="function"&&typeof He.componentWillReceiveProps!="function"||(it!==tn||Xt!==ut)&&me(de,He,Te,ut),ir=!1,Xt=de.memoizedState,He.state=Xt,xr(de,Te,He,Ie);var bn=de.memoizedState;it!==tn||Xt!==bn||ri.current||ir?(typeof vn=="function"&&(Va(de,ve,vn,Te),bn=de.memoizedState),(wt=ir||vu(de,ve,wt,Te,Xt,bn,ut)||!1)?(Jt||typeof He.UNSAFE_componentWillUpdate!="function"&&typeof He.componentWillUpdate!="function"||(typeof He.componentWillUpdate=="function"&&He.componentWillUpdate(Te,bn,ut),typeof He.UNSAFE_componentWillUpdate=="function"&&He.UNSAFE_componentWillUpdate(Te,bn,ut)),typeof He.componentDidUpdate=="function"&&(de.flags|=4),typeof He.getSnapshotBeforeUpdate=="function"&&(de.flags|=1024)):(typeof He.componentDidUpdate!="function"||it===ce.memoizedProps&&Xt===ce.memoizedState||(de.flags|=4),typeof He.getSnapshotBeforeUpdate!="function"||it===ce.memoizedProps&&Xt===ce.memoizedState||(de.flags|=1024),de.memoizedProps=Te,de.memoizedState=bn),He.props=Te,He.state=bn,He.context=ut,Te=wt):(typeof He.componentDidUpdate!="function"||it===ce.memoizedProps&&Xt===ce.memoizedState||(de.flags|=4),typeof He.getSnapshotBeforeUpdate!="function"||it===ce.memoizedProps&&Xt===ce.memoizedState||(de.flags|=1024),Te=!1)}return Vn(ce,de,ve,Te,Fe,Ie)}function Vn(ce,de,ve,Te,Ie,Fe){Lt(ce,de);var He=(de.flags&128)!==0;if(!Te&&!He)return Ie&&Ac(de,ve,!1),Mo(ce,de,Fe);Te=de.stateNode,Dn.current=de;var it=He&&typeof ve.getDerivedStateFromError!="function"?null:Te.render();return de.flags|=1,ce!==null&&He?(de.child=go(de,ce.child,null,Fe),de.child=go(de,null,it,Fe)):pn(ce,de,it,Fe),de.memoizedState=Te.state,Ie&&Ac(de,ve,!0),de.child}function $n(ce){var de=ce.stateNode;de.pendingContext?Ec(ce,de.pendingContext,de.pendingContext!==de.context):de.context&&Ec(ce,de.context,!1),Fa(ce,de.containerInfo)}function Zn(ce,de,ve,Te,Ie){return Vs(),Jo(Ie),de.flags|=256,pn(ce,de,ve,Te),de.child}var wr={dehydrated:null,treeContext:null,retryLane:0};function Yn(ce){return{baseLanes:ce,cachePool:null,transitions:null}}function Is(ce,de,ve){var Te=de.pendingProps,Ie=dr.current,Fe=!1,He=(de.flags&128)!==0,it;if((it=He)||(it=ce!==null&&ce.memoizedState===null?!1:(Ie&2)!==0),it?(Fe=!0,de.flags&=-129):(ce===null||ce.memoizedState!==null)&&(Ie|=1),or(dr,Ie&1),ce===null)return Ul(de),ce=de.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null)?((de.mode&1)===0?de.lanes=1:ce.data==="$!"?de.lanes=8:de.lanes=1073741824,null):(He=Te.children,ce=Te.fallback,Fe?(Te=de.mode,Fe=de.child,He={mode:"hidden",children:He},(Te&1)===0&&Fe!==null?(Fe.childLanes=0,Fe.pendingProps=He):Fe=Bu(He,Te,0,null),ce=Xa(ce,Te,ve,null),Fe.return=de,ce.return=de,Fe.sibling=ce,de.child=Fe,de.child.memoizedState=Yn(ve),de.memoizedState=wr,ce):$c(de,He));if(Ie=ce.memoizedState,Ie!==null&&(it=Ie.dehydrated,it!==null))return jf(ce,de,He,Te,it,Ie,ve);if(Fe){Fe=Te.fallback,He=de.mode,Ie=ce.child,it=Ie.sibling;var ut={mode:"hidden",children:Te.children};return(He&1)===0&&de.child!==Ie?(Te=de.child,Te.childLanes=0,Te.pendingProps=ut,de.deletions=null):(Te=aa(Ie,ut),Te.subtreeFlags=Ie.subtreeFlags&14680064),it!==null?Fe=aa(it,Fe):(Fe=Xa(Fe,He,ve,null),Fe.flags|=2),Fe.return=de,Te.return=de,Te.sibling=Fe,de.child=Te,Te=Fe,Fe=de.child,He=ce.child.memoizedState,He=He===null?Yn(ve):{baseLanes:He.baseLanes|ve,cachePool:null,transitions:He.transitions},Fe.memoizedState=He,Fe.childLanes=ce.childLanes&~ve,de.memoizedState=wr,Te}return Fe=ce.child,ce=Fe.sibling,Te=aa(Fe,{mode:"visible",children:Te.children}),(de.mode&1)===0&&(Te.lanes=ve),Te.return=de,Te.sibling=null,ce!==null&&(ve=de.deletions,ve===null?(de.deletions=[ce],de.flags|=16):ve.push(ce)),de.child=Te,de.memoizedState=null,Te}function $c(ce,de){return de=Bu({mode:"visible",children:de},ce.mode,0,null),de.return=ce,ce.child=de}function yu(ce,de,ve,Te){return Te!==null&&Jo(Te),go(de,ce.child,null,ve),ce=$c(de,de.pendingProps.children),ce.flags|=2,de.memoizedState=null,ce}function jf(ce,de,ve,Te,Ie,Fe,He){if(ve)return de.flags&256?(de.flags&=-257,Te=Le(Error(K(422))),yu(ce,de,He,Te)):de.memoizedState!==null?(de.child=ce.child,de.flags|=128,null):(Fe=Te.fallback,Ie=de.mode,Te=Bu({mode:"visible",children:Te.children},Ie,0,null),Fe=Xa(Fe,Ie,He,null),Fe.flags|=2,Te.return=de,Fe.return=de,Te.sibling=Fe,de.child=Te,(de.mode&1)!==0&&go(de,ce.child,null,He),de.child.memoizedState=Yn(He),de.memoizedState=wr,Fe);if((de.mode&1)===0)return yu(ce,de,He,null);if(Ie.data==="$!"){if(Te=Ie.nextSibling&&Ie.nextSibling.dataset,Te)var it=Te.dgst;return Te=it,Fe=Error(K(419)),Te=Le(Fe,Te,void 0),yu(ce,de,He,Te)}if(it=(He&ce.childLanes)!==0,Xn||it){if(Te=Qr,Te!==null){switch(He&-He){case 4:Ie=2;break;case 16:Ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ie=32;break;case 536870912:Ie=268435456;break;default:Ie=0}Ie=(Ie&(Te.suspendedLanes|He))!==0?0:Ie,Ie!==0&&Ie!==Fe.retryLane&&(Fe.retryLane=Ie,Wi(ce,Ie),Ds(Te,ce,Ie,-1))}return af(),Te=Le(Error(K(421))),yu(ce,de,He,Te)}return Ie.data==="$?"?(de.flags|=128,de.child=ce.child,de=sd.bind(null,ce),Ie._reactRetry=de,null):(ce=Fe.treeContext,si=ys(Ie.nextSibling),Gr=de,fr=!0,Fi=null,ce!==null&&(ii[Nr++]=on,ii[Nr++]=Oi,ii[Nr++]=mo,on=ce.id,Oi=ce.overflow,mo=de),de=$c(de,Te.children),de.flags|=4096,de)}function mf(ce,de,ve){ce.lanes|=de;var Te=ce.alternate;Te!==null&&(Te.lanes|=de),Da(ce.return,de,ve)}function Wu(ce,de,ve,Te,Ie){var Fe=ce.memoizedState;Fe===null?ce.memoizedState={isBackwards:de,rendering:null,renderingStartTime:0,last:Te,tail:ve,tailMode:Ie}:(Fe.isBackwards=de,Fe.rendering=null,Fe.renderingStartTime=0,Fe.last=Te,Fe.tail=ve,Fe.tailMode=Ie)}function gf(ce,de,ve){var Te=de.pendingProps,Ie=Te.revealOrder,Fe=Te.tail;if(pn(ce,de,Te.children,ve),Te=dr.current,(Te&2)!==0)Te=Te&1|2,de.flags|=128;else{if(ce!==null&&(ce.flags&128)!==0)e:for(ce=de.child;ce!==null;){if(ce.tag===13)ce.memoizedState!==null&&mf(ce,ve,de);else if(ce.tag===19)mf(ce,ve,de);else if(ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===de)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===de)break e;ce=ce.return}ce.sibling.return=ce.return,ce=ce.sibling}Te&=1}if(or(dr,Te),(de.mode&1)===0)de.memoizedState=null;else switch(Ie){case"forwards":for(ve=de.child,Ie=null;ve!==null;)ce=ve.alternate,ce!==null&&ji(ce)===null&&(Ie=ve),ve=ve.sibling;ve=Ie,ve===null?(Ie=de.child,de.child=null):(Ie=ve.sibling,ve.sibling=null),Wu(de,!1,Ie,ve,Fe);break;case"backwards":for(ve=null,Ie=de.child,de.child=null;Ie!==null;){if(ce=Ie.alternate,ce!==null&&ji(ce)===null){de.child=Ie;break}ce=Ie.sibling,Ie.sibling=ve,ve=Ie,Ie=ce}Wu(de,!0,ve,null,Fe);break;case"together":Wu(de,!1,null,null,void 0);break;default:de.memoizedState=null}return de.child}function xu(ce,de){(de.mode&1)===0&&ce!==null&&(ce.alternate=null,de.alternate=null,de.flags|=2)}function Mo(ce,de,ve){if(ce!==null&&(de.dependencies=ce.dependencies),Ha|=de.lanes,(ve&de.childLanes)===0)return null;if(ce!==null&&de.child!==ce.child)throw Error(K(153));if(de.child!==null){for(ce=de.child,ve=aa(ce,ce.pendingProps),de.child=ve,ve.return=de;ce.sibling!==null;)ce=ce.sibling,ve=ve.sibling=aa(ce,ce.pendingProps),ve.return=de;ve.sibling=null}return de.child}function qf(ce,de,ve){switch(de.tag){case 3:$n(de),Vs();break;case 5:Eo(de);break;case 1:Kr(de.type)&&ho(de);break;case 4:Fa(de,de.stateNode.containerInfo);break;case 10:var Te=de.type._context,Ie=de.memoizedProps.value;or(_o,Te._currentValue),Te._currentValue=Ie;break;case 13:if(Te=de.memoizedState,Te!==null)return Te.dehydrated!==null?(or(dr,dr.current&1),de.flags|=128,null):(ve&de.child.childLanes)!==0?Is(ce,de,ve):(or(dr,dr.current&1),ce=Mo(ce,de,ve),ce!==null?ce.sibling:null);or(dr,dr.current&1);break;case 19:if(Te=(ve&de.childLanes)!==0,(ce.flags&128)!==0){if(Te)return gf(ce,de,ve);de.flags|=128}if(Ie=de.memoizedState,Ie!==null&&(Ie.rendering=null,Ie.tail=null,Ie.lastEffect=null),or(dr,dr.current),Te)break;return null;case 22:case 23:return de.lanes=0,_t(ce,de,ve)}return Mo(ce,de,ve)}var _f,ju,vf,yf;_f=function(ce,de){for(var ve=de.child;ve!==null;){if(ve.tag===5||ve.tag===6)ce.appendChild(ve.stateNode);else if(ve.tag!==4&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===de)break;for(;ve.sibling===null;){if(ve.return===null||ve.return===de)return;ve=ve.return}ve.sibling.return=ve.return,ve=ve.sibling}},ju=function(){},vf=function(ce,de,ve,Te){var Ie=ce.memoizedProps;if(Ie!==Te){ce=de.stateNode,Mr(Ai.current);var Fe=null;switch(ve){case"input":Ie=Ut(ce,Ie),Te=Ut(ce,Te),Fe=[];break;case"select":Ie=nt({},Ie,{value:void 0}),Te=nt({},Te,{value:void 0}),Fe=[];break;case"textarea":Ie=Sn(ce,Ie),Te=Sn(ce,Te),Fe=[];break;default:typeof Ie.onClick!="function"&&typeof Te.onClick=="function"&&(ce.onclick=ba)}Xe(ve,Te);var He;ve=null;for(wt in Ie)if(!Te.hasOwnProperty(wt)&&Ie.hasOwnProperty(wt)&&Ie[wt]!=null)if(wt==="style"){var it=Ie[wt];for(He in it)it.hasOwnProperty(He)&&(ve||(ve={}),ve[He]="")}else wt!=="dangerouslySetInnerHTML"&&wt!=="children"&&wt!=="suppressContentEditableWarning"&&wt!=="suppressHydrationWarning"&&wt!=="autoFocus"&&(te.hasOwnProperty(wt)?Fe||(Fe=[]):(Fe=Fe||[]).push(wt,null));for(wt in Te){var ut=Te[wt];if(it=Ie?.[wt],Te.hasOwnProperty(wt)&&ut!==it&&(ut!=null||it!=null))if(wt==="style")if(it){for(He in it)!it.hasOwnProperty(He)||ut&&ut.hasOwnProperty(He)||(ve||(ve={}),ve[He]="");for(He in ut)ut.hasOwnProperty(He)&&it[He]!==ut[He]&&(ve||(ve={}),ve[He]=ut[He])}else ve||(Fe||(Fe=[]),Fe.push(wt,ve)),ve=ut;else wt==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,it=it?it.__html:void 0,ut!=null&&it!==ut&&(Fe=Fe||[]).push(wt,ut)):wt==="children"?typeof ut!="string"&&typeof ut!="number"||(Fe=Fe||[]).push(wt,""+ut):wt!=="suppressContentEditableWarning"&&wt!=="suppressHydrationWarning"&&(te.hasOwnProperty(wt)?(ut!=null&&wt==="onScroll"&&ar("scroll",ce),Fe||it===ut||(Fe=[])):(Fe=Fe||[]).push(wt,ut))}ve&&(Fe=Fe||[]).push("style",ve);var wt=Fe;(de.updateQueue=wt)&&(de.flags|=4)}},yf=function(ce,de,ve,Te){ve!==Te&&(de.flags|=4)};function Gc(ce,de){if(!fr)switch(ce.tailMode){case"hidden":de=ce.tail;for(var ve=null;de!==null;)de.alternate!==null&&(ve=de),de=de.sibling;ve===null?ce.tail=null:ve.sibling=null;break;case"collapsed":ve=ce.tail;for(var Te=null;ve!==null;)ve.alternate!==null&&(Te=ve),ve=ve.sibling;Te===null?de||ce.tail===null?ce.tail=null:ce.tail.sibling=null:Te.sibling=null}}function pi(ce){var de=ce.alternate!==null&&ce.alternate.child===ce.child,ve=0,Te=0;if(de)for(var Ie=ce.child;Ie!==null;)ve|=Ie.lanes|Ie.childLanes,Te|=Ie.subtreeFlags&14680064,Te|=Ie.flags&14680064,Ie.return=ce,Ie=Ie.sibling;else for(Ie=ce.child;Ie!==null;)ve|=Ie.lanes|Ie.childLanes,Te|=Ie.subtreeFlags,Te|=Ie.flags,Ie.return=ce,Ie=Ie.sibling;return ce.subtreeFlags|=Te,ce.childLanes=ve,de}function Xf(ce,de,ve){var Te=de.pendingProps;switch(Ts(de),de.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(de),null;case 1:return Kr(de.type)&&Ma(),pi(de),null;case 3:return Te=de.stateNode,Ws(),lr(ri),lr($r),as(),Te.pendingContext&&(Te.context=Te.pendingContext,Te.pendingContext=null),(ce===null||ce.child===null)&&(Ko(de)?de.flags|=4:ce===null||ce.memoizedState.isDehydrated&&(de.flags&256)===0||(de.flags|=1024,Fi!==null&&(rf(Fi),Fi=null))),ju(ce,de),pi(de),null;case 5:Zo(de);var Ie=Mr(ws.current);if(ve=de.type,ce!==null&&de.stateNode!=null)vf(ce,de,ve,Te,Ie),ce.ref!==de.ref&&(de.flags|=512,de.flags|=2097152);else{if(!Te){if(de.stateNode===null)throw Error(K(166));return pi(de),null}if(ce=Mr(Ai.current),Ko(de)){Te=de.stateNode,ve=de.type;var Fe=de.memoizedProps;switch(Te[Ir]=de,Te[Xo]=Fe,ce=(de.mode&1)!==0,ve){case"dialog":ar("cancel",Te),ar("close",Te);break;case"iframe":case"object":case"embed":ar("load",Te);break;case"video":case"audio":for(Ie=0;Ie<Gs.length;Ie++)ar(Gs[Ie],Te);break;case"source":ar("error",Te);break;case"img":case"image":case"link":ar("error",Te),ar("load",Te);break;case"details":ar("toggle",Te);break;case"input":Dt(Te,Fe),ar("invalid",Te);break;case"select":Te._wrapperState={wasMultiple:!!Fe.multiple},ar("invalid",Te);break;case"textarea":We(Te,Fe),ar("invalid",Te)}Xe(ve,Fe),Ie=null;for(var He in Fe)if(Fe.hasOwnProperty(He)){var it=Fe[He];He==="children"?typeof it=="string"?Te.textContent!==it&&(Fe.suppressHydrationWarning!==!0&&Ta(Te.textContent,it,ce),Ie=["children",it]):typeof it=="number"&&Te.textContent!==""+it&&(Fe.suppressHydrationWarning!==!0&&Ta(Te.textContent,it,ce),Ie=["children",""+it]):te.hasOwnProperty(He)&&it!=null&&He==="onScroll"&&ar("scroll",Te)}switch(ve){case"input":an(Te),Qt(Te,Fe,!0);break;case"textarea":an(Te),ft(Te);break;case"select":case"option":break;default:typeof Fe.onClick=="function"&&(Te.onclick=ba)}Te=Ie,de.updateQueue=Te,Te!==null&&(de.flags|=4)}else{He=Ie.nodeType===9?Ie:Ie.ownerDocument,ce==="http://www.w3.org/1999/xhtml"&&(ce=Et(ve)),ce==="http://www.w3.org/1999/xhtml"?ve==="script"?(ce=He.createElement("div"),ce.innerHTML="<script><\/script>",ce=ce.removeChild(ce.firstChild)):typeof Te.is=="string"?ce=He.createElement(ve,{is:Te.is}):(ce=He.createElement(ve),ve==="select"&&(He=ce,Te.multiple?He.multiple=!0:Te.size&&(He.size=Te.size))):ce=He.createElementNS(ce,ve),ce[Ir]=de,ce[Xo]=Te,_f(ce,de,!1,!1),de.stateNode=ce;e:{switch(He=at(ve,Te),ve){case"dialog":ar("cancel",ce),ar("close",ce),Ie=Te;break;case"iframe":case"object":case"embed":ar("load",ce),Ie=Te;break;case"video":case"audio":for(Ie=0;Ie<Gs.length;Ie++)ar(Gs[Ie],ce);Ie=Te;break;case"source":ar("error",ce),Ie=Te;break;case"img":case"image":case"link":ar("error",ce),ar("load",ce),Ie=Te;break;case"details":ar("toggle",ce),Ie=Te;break;case"input":Dt(ce,Te),Ie=Ut(ce,Te),ar("invalid",ce);break;case"option":Ie=Te;break;case"select":ce._wrapperState={wasMultiple:!!Te.multiple},Ie=nt({},Te,{value:void 0}),ar("invalid",ce);break;case"textarea":We(ce,Te),Ie=Sn(ce,Te),ar("invalid",ce);break;default:Ie=Te}Xe(ve,Ie),it=Ie;for(Fe in it)if(it.hasOwnProperty(Fe)){var ut=it[Fe];Fe==="style"?mt(ce,ut):Fe==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,ut!=null&&un(ce,ut)):Fe==="children"?typeof ut=="string"?(ve!=="textarea"||ut!=="")&&Yt(ce,ut):typeof ut=="number"&&Yt(ce,""+ut):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(te.hasOwnProperty(Fe)?ut!=null&&Fe==="onScroll"&&ar("scroll",ce):ut!=null&&we(ce,Fe,ut,He))}switch(ve){case"input":an(ce),Qt(ce,Te,!1);break;case"textarea":an(ce),ft(ce);break;case"option":Te.value!=null&&ce.setAttribute("value",""+Wt(Te.value));break;case"select":ce.multiple=!!Te.multiple,Fe=Te.value,Fe!=null?Tn(ce,!!Te.multiple,Fe,!1):Te.defaultValue!=null&&Tn(ce,!!Te.multiple,Te.defaultValue,!0);break;default:typeof Ie.onClick=="function"&&(ce.onclick=ba)}switch(ve){case"button":case"input":case"select":case"textarea":Te=!!Te.autoFocus;break e;case"img":Te=!0;break e;default:Te=!1}}Te&&(de.flags|=4)}de.ref!==null&&(de.flags|=512,de.flags|=2097152)}return pi(de),null;case 6:if(ce&&de.stateNode!=null)yf(ce,de,ce.memoizedProps,Te);else{if(typeof Te!="string"&&de.stateNode===null)throw Error(K(166));if(ve=Mr(ws.current),Mr(Ai.current),Ko(de)){if(Te=de.stateNode,ve=de.memoizedProps,Te[Ir]=de,(Fe=Te.nodeValue!==ve)&&(ce=Gr,ce!==null))switch(ce.tag){case 3:Ta(Te.nodeValue,ve,(ce.mode&1)!==0);break;case 5:ce.memoizedProps.suppressHydrationWarning!==!0&&Ta(Te.nodeValue,ve,(ce.mode&1)!==0)}Fe&&(de.flags|=4)}else Te=(ve.nodeType===9?ve:ve.ownerDocument).createTextNode(Te),Te[Ir]=de,de.stateNode=Te}return pi(de),null;case 13:if(lr(dr),Te=de.memoizedState,ce===null||ce.memoizedState!==null&&ce.memoizedState.dehydrated!==null){if(fr&&si!==null&&(de.mode&1)!==0&&(de.flags&128)===0)Cc(),Vs(),de.flags|=98560,Fe=!1;else if(Fe=Ko(de),Te!==null&&Te.dehydrated!==null){if(ce===null){if(!Fe)throw Error(K(318));if(Fe=de.memoizedState,Fe=Fe!==null?Fe.dehydrated:null,!Fe)throw Error(K(317));Fe[Ir]=de}else Vs(),(de.flags&128)===0&&(de.memoizedState=null),de.flags|=4;pi(de),Fe=!1}else Fi!==null&&(rf(Fi),Fi=null),Fe=!0;if(!Fe)return de.flags&65536?de:null}return(de.flags&128)!==0?(de.lanes=ve,de):(Te=Te!==null,Te!==(ce!==null&&ce.memoizedState!==null)&&Te&&(de.child.flags|=8192,(de.mode&1)!==0&&(ce===null||(dr.current&1)!==0?Wr===0&&(Wr=3):af())),de.updateQueue!==null&&(de.flags|=4),pi(de),null);case 4:return Ws(),ju(ce,de),ce===null&&Wo(de.stateNode.containerInfo),pi(de),null;case 10:return La(de.type._context),pi(de),null;case 17:return Kr(de.type)&&Ma(),pi(de),null;case 19:if(lr(dr),Fe=de.memoizedState,Fe===null)return pi(de),null;if(Te=(de.flags&128)!==0,He=Fe.rendering,He===null)if(Te)Gc(Fe,!1);else{if(Wr!==0||ce!==null&&(ce.flags&128)!==0)for(ce=de.child;ce!==null;){if(He=ji(ce),He!==null){for(de.flags|=128,Gc(Fe,!1),Te=He.updateQueue,Te!==null&&(de.updateQueue=Te,de.flags|=4),de.subtreeFlags=0,Te=ve,ve=de.child;ve!==null;)Fe=ve,ce=Te,Fe.flags&=14680066,He=Fe.alternate,He===null?(Fe.childLanes=0,Fe.lanes=ce,Fe.child=null,Fe.subtreeFlags=0,Fe.memoizedProps=null,Fe.memoizedState=null,Fe.updateQueue=null,Fe.dependencies=null,Fe.stateNode=null):(Fe.childLanes=He.childLanes,Fe.lanes=He.lanes,Fe.child=He.child,Fe.subtreeFlags=0,Fe.deletions=null,Fe.memoizedProps=He.memoizedProps,Fe.memoizedState=He.memoizedState,Fe.updateQueue=He.updateQueue,Fe.type=He.type,ce=He.dependencies,Fe.dependencies=ce===null?null:{lanes:ce.lanes,firstContext:ce.firstContext}),ve=ve.sibling;return or(dr,dr.current&1|2),de.child}ce=ce.sibling}Fe.tail!==null&&dt()>Yl&&(de.flags|=128,Te=!0,Gc(Fe,!1),de.lanes=4194304)}else{if(!Te)if(ce=ji(He),ce!==null){if(de.flags|=128,Te=!0,ve=ce.updateQueue,ve!==null&&(de.updateQueue=ve,de.flags|=4),Gc(Fe,!0),Fe.tail===null&&Fe.tailMode==="hidden"&&!He.alternate&&!fr)return pi(de),null}else 2*dt()-Fe.renderingStartTime>Yl&&ve!==1073741824&&(de.flags|=128,Te=!0,Gc(Fe,!1),de.lanes=4194304);Fe.isBackwards?(He.sibling=de.child,de.child=He):(ve=Fe.last,ve!==null?ve.sibling=He:de.child=He,Fe.last=He)}return Fe.tail!==null?(de=Fe.tail,Fe.rendering=de,Fe.tail=de.sibling,Fe.renderingStartTime=dt(),de.sibling=null,ve=dr.current,or(dr,Te?ve&1|2:ve&1),de):(pi(de),null);case 22:case 23:return of(),Te=de.memoizedState!==null,ce!==null&&ce.memoizedState!==null!==Te&&(de.flags|=8192),Te&&(de.mode&1)!==0?(Ki&1073741824)!==0&&(pi(de),de.subtreeFlags&6&&(de.flags|=8192)):pi(de),null;case 24:return null;case 25:return null}throw Error(K(156,de.tag))}function Kf(ce,de){switch(Ts(de),de.tag){case 1:return Kr(de.type)&&Ma(),ce=de.flags,ce&65536?(de.flags=ce&-65537|128,de):null;case 3:return Ws(),lr(ri),lr($r),as(),ce=de.flags,(ce&65536)!==0&&(ce&128)===0?(de.flags=ce&-65537|128,de):null;case 5:return Zo(de),null;case 13:if(lr(dr),ce=de.memoizedState,ce!==null&&ce.dehydrated!==null){if(de.alternate===null)throw Error(K(340));Vs()}return ce=de.flags,ce&65536?(de.flags=ce&-65537|128,de):null;case 19:return lr(dr),null;case 4:return Ws(),null;case 10:return La(de.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Su=!1,mi=!1,Jf=typeof WeakSet=="function"?WeakSet:Set,An=null;function Kl(ce,de){var ve=ce.ref;if(ve!==null)if(typeof ve=="function")try{ve(null)}catch(Te){Cr(ce,de,Te)}else ve.current=null}function qu(ce,de,ve){try{ve()}catch(Te){Cr(ce,de,Te)}}var xf=!1;function Yf(ce,de){if(qo=Ri,ce=gr(),Lr(ce)){if("selectionStart"in ce)var ve={start:ce.selectionStart,end:ce.selectionEnd};else e:{ve=(ve=ce.ownerDocument)&&ve.defaultView||window;var Te=ve.getSelection&&ve.getSelection();if(Te&&Te.rangeCount!==0){ve=Te.anchorNode;var Ie=Te.anchorOffset,Fe=Te.focusNode;Te=Te.focusOffset;try{ve.nodeType,Fe.nodeType}catch{ve=null;break e}var He=0,it=-1,ut=-1,wt=0,Jt=0,tn=ce,Xt=null;t:for(;;){for(var vn;tn!==ve||Ie!==0&&tn.nodeType!==3||(it=He+Ie),tn!==Fe||Te!==0&&tn.nodeType!==3||(ut=He+Te),tn.nodeType===3&&(He+=tn.nodeValue.length),(vn=tn.firstChild)!==null;)Xt=tn,tn=vn;for(;;){if(tn===ce)break t;if(Xt===ve&&++wt===Ie&&(it=He),Xt===Fe&&++Jt===Te&&(ut=He),(vn=tn.nextSibling)!==null)break;tn=Xt,Xt=tn.parentNode}tn=vn}ve=it===-1||ut===-1?null:{start:it,end:ut}}else ve=null}ve=ve||{start:0,end:0}}else ve=null;for(gc={focusedElem:ce,selectionRange:ve},Ri=!1,An=de;An!==null;)if(de=An,ce=de.child,(de.subtreeFlags&1028)!==0&&ce!==null)ce.return=de,An=ce;else for(;An!==null;){de=An;try{var bn=de.alternate;if((de.flags&1024)!==0)switch(de.tag){case 0:case 11:case 15:break;case 1:if(bn!==null){var Mn=bn.memoizedProps,Br=bn.memoizedState,St=de.stateNode,ht=St.getSnapshotBeforeUpdate(de.elementType===de.type?Mn:Ni(de.type,Mn),Br);St.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var Tt=de.stateNode.containerInfo;Tt.nodeType===1?Tt.textContent="":Tt.nodeType===9&&Tt.documentElement&&Tt.removeChild(Tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(sn){Cr(de,de.return,sn)}if(ce=de.sibling,ce!==null){ce.return=de.return,An=ce;break}An=de.return}return bn=xf,xf=!1,bn}function zc(ce,de,ve){var Te=de.updateQueue;if(Te=Te!==null?Te.lastEffect:null,Te!==null){var Ie=Te=Te.next;do{if((Ie.tag&ce)===ce){var Fe=Ie.destroy;Ie.destroy=void 0,Fe!==void 0&&qu(de,ve,Fe)}Ie=Ie.next}while(Ie!==Te)}}function Eu(ce,de){if(de=de.updateQueue,de=de!==null?de.lastEffect:null,de!==null){var ve=de=de.next;do{if((ve.tag&ce)===ce){var Te=ve.create;ve.destroy=Te()}ve=ve.next}while(ve!==de)}}function Xu(ce){var de=ce.ref;if(de!==null){var ve=ce.stateNode;switch(ce.tag){case 5:ce=ve;break;default:ce=ve}typeof de=="function"?de(ce):de.current=ce}}function Sf(ce){var de=ce.alternate;de!==null&&(ce.alternate=null,Sf(de)),ce.child=null,ce.deletions=null,ce.sibling=null,ce.tag===5&&(de=ce.stateNode,de!==null&&(delete de[Ir],delete de[Xo],delete de[uo],delete de[Bl],delete de[Ll])),ce.stateNode=null,ce.return=null,ce.dependencies=null,ce.memoizedProps=null,ce.memoizedState=null,ce.pendingProps=null,ce.stateNode=null,ce.updateQueue=null}function Ef(ce){return ce.tag===5||ce.tag===3||ce.tag===4}function Af(ce){e:for(;;){for(;ce.sibling===null;){if(ce.return===null||Ef(ce.return))return null;ce=ce.return}for(ce.sibling.return=ce.return,ce=ce.sibling;ce.tag!==5&&ce.tag!==6&&ce.tag!==18;){if(ce.flags&2||ce.child===null||ce.tag===4)continue e;ce.child.return=ce,ce=ce.child}if(!(ce.flags&2))return ce.stateNode}}function Ku(ce,de,ve){var Te=ce.tag;if(Te===5||Te===6)ce=ce.stateNode,de?ve.nodeType===8?ve.parentNode.insertBefore(ce,de):ve.insertBefore(ce,de):(ve.nodeType===8?(de=ve.parentNode,de.insertBefore(ce,ve)):(de=ve,de.appendChild(ce)),ve=ve._reactRootContainer,ve!=null||de.onclick!==null||(de.onclick=ba));else if(Te!==4&&(ce=ce.child,ce!==null))for(Ku(ce,de,ve),ce=ce.sibling;ce!==null;)Ku(ce,de,ve),ce=ce.sibling}function Ju(ce,de,ve){var Te=ce.tag;if(Te===5||Te===6)ce=ce.stateNode,de?ve.insertBefore(ce,de):ve.appendChild(ce);else if(Te!==4&&(ce=ce.child,ce!==null))for(Ju(ce,de,ve),ce=ce.sibling;ce!==null;)Ju(ce,de,ve),ce=ce.sibling}var ai=null,Bs=!1;function na(ce,de,ve){for(ve=ve.child;ve!==null;)Tf(ce,de,ve),ve=ve.sibling}function Tf(ce,de,ve){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(En,ve)}catch{}switch(ve.tag){case 5:mi||Kl(ve,de);case 6:var Te=ai,Ie=Bs;ai=null,na(ce,de,ve),ai=Te,Bs=Ie,ai!==null&&(Bs?(ce=ai,ve=ve.stateNode,ce.nodeType===8?ce.parentNode.removeChild(ve):ce.removeChild(ve)):ai.removeChild(ve.stateNode));break;case 18:ai!==null&&(Bs?(ce=ai,ve=ve.stateNode,ce.nodeType===8?Il(ce.parentNode,ve):ce.nodeType===1&&Il(ce,ve),da(ce)):Il(ai,ve.stateNode));break;case 4:Te=ai,Ie=Bs,ai=ve.stateNode.containerInfo,Bs=!0,na(ce,de,ve),ai=Te,Bs=Ie;break;case 0:case 11:case 14:case 15:if(!mi&&(Te=ve.updateQueue,Te!==null&&(Te=Te.lastEffect,Te!==null))){Ie=Te=Te.next;do{var Fe=Ie,He=Fe.destroy;Fe=Fe.tag,He!==void 0&&((Fe&2)!==0||(Fe&4)!==0)&&qu(ve,de,He),Ie=Ie.next}while(Ie!==Te)}na(ce,de,ve);break;case 1:if(!mi&&(Kl(ve,de),Te=ve.stateNode,typeof Te.componentWillUnmount=="function"))try{Te.props=ve.memoizedProps,Te.state=ve.memoizedState,Te.componentWillUnmount()}catch(it){Cr(ve,de,it)}na(ce,de,ve);break;case 21:na(ce,de,ve);break;case 22:ve.mode&1?(mi=(Te=mi)||ve.memoizedState!==null,na(ce,de,ve),mi=Te):na(ce,de,ve);break;default:na(ce,de,ve)}}function bf(ce){var de=ce.updateQueue;if(de!==null){ce.updateQueue=null;var ve=ce.stateNode;ve===null&&(ve=ce.stateNode=new Jf),de.forEach(function(Te){var Ie=od.bind(null,ce,Te);ve.has(Te)||(ve.add(Te),Te.then(Ie,Ie))})}}function Ls(ce,de){var ve=de.deletions;if(ve!==null)for(var Te=0;Te<ve.length;Te++){var Ie=ve[Te];try{var Fe=ce,He=de,it=He;e:for(;it!==null;){switch(it.tag){case 5:ai=it.stateNode,Bs=!1;break e;case 3:ai=it.stateNode.containerInfo,Bs=!0;break e;case 4:ai=it.stateNode.containerInfo,Bs=!0;break e}it=it.return}if(ai===null)throw Error(K(160));Tf(Fe,He,Ie),ai=null,Bs=!1;var ut=Ie.alternate;ut!==null&&(ut.return=null),Ie.return=null}catch(wt){Cr(Ie,de,wt)}}if(de.subtreeFlags&12854)for(de=de.child;de!==null;)Mf(de,ce),de=de.sibling}function Mf(ce,de){var ve=ce.alternate,Te=ce.flags;switch(ce.tag){case 0:case 11:case 14:case 15:if(Ls(de,ce),qs(ce),Te&4){try{zc(3,ce,ce.return),Eu(3,ce)}catch(Mn){Cr(ce,ce.return,Mn)}try{zc(5,ce,ce.return)}catch(Mn){Cr(ce,ce.return,Mn)}}break;case 1:Ls(de,ce),qs(ce),Te&512&&ve!==null&&Kl(ve,ve.return);break;case 5:if(Ls(de,ce),qs(ce),Te&512&&ve!==null&&Kl(ve,ve.return),ce.flags&32){var Ie=ce.stateNode;try{Yt(Ie,"")}catch(Mn){Cr(ce,ce.return,Mn)}}if(Te&4&&(Ie=ce.stateNode,Ie!=null)){var Fe=ce.memoizedProps,He=ve!==null?ve.memoizedProps:Fe,it=ce.type,ut=ce.updateQueue;if(ce.updateQueue=null,ut!==null)try{it==="input"&&Fe.type==="radio"&&Fe.name!=null&&Vt(Ie,Fe),at(it,He);var wt=at(it,Fe);for(He=0;He<ut.length;He+=2){var Jt=ut[He],tn=ut[He+1];Jt==="style"?mt(Ie,tn):Jt==="dangerouslySetInnerHTML"?un(Ie,tn):Jt==="children"?Yt(Ie,tn):we(Ie,Jt,tn,wt)}switch(it){case"input":It(Ie,Fe);break;case"textarea":Ve(Ie,Fe);break;case"select":var Xt=Ie._wrapperState.wasMultiple;Ie._wrapperState.wasMultiple=!!Fe.multiple;var vn=Fe.value;vn!=null?Tn(Ie,!!Fe.multiple,vn,!1):Xt!==!!Fe.multiple&&(Fe.defaultValue!=null?Tn(Ie,!!Fe.multiple,Fe.defaultValue,!0):Tn(Ie,!!Fe.multiple,Fe.multiple?[]:"",!1))}Ie[Xo]=Fe}catch(Mn){Cr(ce,ce.return,Mn)}}break;case 6:if(Ls(de,ce),qs(ce),Te&4){if(ce.stateNode===null)throw Error(K(162));Ie=ce.stateNode,Fe=ce.memoizedProps;try{Ie.nodeValue=Fe}catch(Mn){Cr(ce,ce.return,Mn)}}break;case 3:if(Ls(de,ce),qs(ce),Te&4&&ve!==null&&ve.memoizedState.isDehydrated)try{da(de.containerInfo)}catch(Mn){Cr(ce,ce.return,Mn)}break;case 4:Ls(de,ce),qs(ce);break;case 13:Ls(de,ce),qs(ce),Ie=ce.child,Ie.flags&8192&&(Fe=Ie.memoizedState!==null,Ie.stateNode.isHidden=Fe,!Fe||Ie.alternate!==null&&Ie.alternate.memoizedState!==null||(Zu=dt())),Te&4&&bf(ce);break;case 22:if(Jt=ve!==null&&ve.memoizedState!==null,ce.mode&1?(mi=(wt=mi)||Jt,Ls(de,ce),mi=wt):Ls(de,ce),qs(ce),Te&8192){if(wt=ce.memoizedState!==null,(ce.stateNode.isHidden=wt)&&!Jt&&(ce.mode&1)!==0)for(An=ce,Jt=ce.child;Jt!==null;){for(tn=An=Jt;An!==null;){switch(Xt=An,vn=Xt.child,Xt.tag){case 0:case 11:case 14:case 15:zc(4,Xt,Xt.return);break;case 1:Kl(Xt,Xt.return);var bn=Xt.stateNode;if(typeof bn.componentWillUnmount=="function"){Te=Xt,ve=Xt.return;try{de=Te,bn.props=de.memoizedProps,bn.state=de.memoizedState,bn.componentWillUnmount()}catch(Mn){Cr(Te,ve,Mn)}}break;case 5:Kl(Xt,Xt.return);break;case 22:if(Xt.memoizedState!==null){Rf(tn);continue}}vn!==null?(vn.return=Xt,An=vn):Rf(tn)}Jt=Jt.sibling}e:for(Jt=null,tn=ce;;){if(tn.tag===5){if(Jt===null){Jt=tn;try{Ie=tn.stateNode,wt?(Fe=Ie.style,typeof Fe.setProperty=="function"?Fe.setProperty("display","none","important"):Fe.display="none"):(it=tn.stateNode,ut=tn.memoizedProps.style,He=ut!=null&&ut.hasOwnProperty("display")?ut.display:null,it.style.display=$t("display",He))}catch(Mn){Cr(ce,ce.return,Mn)}}}else if(tn.tag===6){if(Jt===null)try{tn.stateNode.nodeValue=wt?"":tn.memoizedProps}catch(Mn){Cr(ce,ce.return,Mn)}}else if((tn.tag!==22&&tn.tag!==23||tn.memoizedState===null||tn===ce)&&tn.child!==null){tn.child.return=tn,tn=tn.child;continue}if(tn===ce)break e;for(;tn.sibling===null;){if(tn.return===null||tn.return===ce)break e;Jt===tn&&(Jt=null),tn=tn.return}Jt===tn&&(Jt=null),tn.sibling.return=tn.return,tn=tn.sibling}}break;case 19:Ls(de,ce),qs(ce),Te&4&&bf(ce);break;case 21:break;default:Ls(de,ce),qs(ce)}}function qs(ce){var de=ce.flags;if(de&2){try{e:{for(var ve=ce.return;ve!==null;){if(Ef(ve)){var Te=ve;break e}ve=ve.return}throw Error(K(160))}switch(Te.tag){case 5:var Ie=Te.stateNode;Te.flags&32&&(Yt(Ie,""),Te.flags&=-33);var Fe=Af(ce);Ju(ce,Fe,Ie);break;case 3:case 4:var He=Te.stateNode.containerInfo,it=Af(ce);Ku(ce,it,He);break;default:throw Error(K(161))}}catch(ut){Cr(ce,ce.return,ut)}ce.flags&=-3}de&4096&&(ce.flags&=-4097)}function Qf(ce,de,ve){An=ce,wf(ce)}function wf(ce,de,ve){for(var Te=(ce.mode&1)!==0;An!==null;){var Ie=An,Fe=Ie.child;if(Ie.tag===22&&Te){var He=Ie.memoizedState!==null||Su;if(!He){var it=Ie.alternate,ut=it!==null&&it.memoizedState!==null||mi;it=Su;var wt=mi;if(Su=He,(mi=ut)&&!wt)for(An=Ie;An!==null;)He=An,ut=He.child,He.tag===22&&He.memoizedState!==null?Pf(Ie):ut!==null?(ut.return=He,An=ut):Pf(Ie);for(;Fe!==null;)An=Fe,wf(Fe),Fe=Fe.sibling;An=Ie,Su=it,mi=wt}Cf(ce)}else(Ie.subtreeFlags&8772)!==0&&Fe!==null?(Fe.return=Ie,An=Fe):Cf(ce)}}function Cf(ce){for(;An!==null;){var de=An;if((de.flags&8772)!==0){var ve=de.alternate;try{if((de.flags&8772)!==0)switch(de.tag){case 0:case 11:case 15:mi||Eu(5,de);break;case 1:var Te=de.stateNode;if(de.flags&4&&!mi)if(ve===null)Te.componentDidMount();else{var Ie=de.elementType===de.type?ve.memoizedProps:Ni(de.type,ve.memoizedProps);Te.componentDidUpdate(Ie,ve.memoizedState,Te.__reactInternalSnapshotBeforeUpdate)}var Fe=de.updateQueue;Fe!==null&&Qo(de,Fe,Te);break;case 3:var He=de.updateQueue;if(He!==null){if(ve=null,de.child!==null)switch(de.child.tag){case 5:ve=de.child.stateNode;break;case 1:ve=de.child.stateNode}Qo(de,He,ve)}break;case 5:var it=de.stateNode;if(ve===null&&de.flags&4){ve=it;var ut=de.memoizedProps;switch(de.type){case"button":case"input":case"select":case"textarea":ut.autoFocus&&ve.focus();break;case"img":ut.src&&(ve.src=ut.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(de.memoizedState===null){var wt=de.alternate;if(wt!==null){var Jt=wt.memoizedState;if(Jt!==null){var tn=Jt.dehydrated;tn!==null&&da(tn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}mi||de.flags&512&&Xu(de)}catch(Xt){Cr(de,de.return,Xt)}}if(de===ce){An=null;break}if(ve=de.sibling,ve!==null){ve.return=de.return,An=ve;break}An=de.return}}function Rf(ce){for(;An!==null;){var de=An;if(de===ce){An=null;break}var ve=de.sibling;if(ve!==null){ve.return=de.return,An=ve;break}An=de.return}}function Pf(ce){for(;An!==null;){var de=An;try{switch(de.tag){case 0:case 11:case 15:var ve=de.return;try{Eu(4,de)}catch(ut){Cr(de,ve,ut)}break;case 1:var Te=de.stateNode;if(typeof Te.componentDidMount=="function"){var Ie=de.return;try{Te.componentDidMount()}catch(ut){Cr(de,Ie,ut)}}var Fe=de.return;try{Xu(de)}catch(ut){Cr(de,Fe,ut)}break;case 5:var He=de.return;try{Xu(de)}catch(ut){Cr(de,He,ut)}}}catch(ut){Cr(de,de.return,ut)}if(de===ce){An=null;break}var it=de.sibling;if(it!==null){it.return=de.return,An=it;break}An=de.return}}var Zf=Math.ceil,Au=Pe.ReactCurrentDispatcher,Yu=Pe.ReactCurrentOwner,cs=Pe.ReactCurrentBatchConfig,tr=0,Qr=null,kr=null,li=0,Ki=0,Jl=yr(0),Wr=0,Vc=null,Ha=0,Tu=0,Qu=0,Hc=null,ki=null,Zu=0,Yl=1/0,wo=null,bu=!1,ef=null,ra=null,Mu=!1,ia=null,wu=0,Wc=0,tf=null,Cu=-1,Ru=0;function wi(){return(tr&6)!==0?dt():Cu!==-1?Cu:Cu=dt()}function sa(ce){return(ce.mode&1)===0?1:(tr&2)!==0&&li!==0?li&-li:Vu.transition!==null?(Ru===0&&(Ru=ur()),Ru):(ce=qn,ce!==0||(ce=window.event,ce=ce===void 0?16:Xc(ce.type)),ce)}function Ds(ce,de,ve,Te){if(50<Wc)throw Wc=0,tf=null,Error(K(185));Ar(ce,ve,Te),((tr&2)===0||ce!==Qr)&&(ce===Qr&&((tr&2)===0&&(Tu|=ve),Wr===4&&oa(ce,li)),Ui(ce,Te),ve===1&&tr===0&&(de.mode&1)===0&&(Yl=dt()+500,Ca&&ss()))}function Ui(ce,de){var ve=ce.callbackNode;Yi(ce,de);var Te=Ci(ce,ce===Qr?li:0);if(Te===0)ve!==null&&vt(ve),ce.callbackNode=null,ce.callbackPriority=0;else if(de=Te&-Te,ce.callbackPriority!==de){if(ve!=null&&vt(ve),de===1)ce.tag===0?lu(Bf.bind(null,ce)):Ra(Bf.bind(null,ce)),zu(function(){(tr&6)===0&&ss()}),ve=null;else{switch(Bo(Te)){case 1:ve=cn;break;case 4:ve=yn;break;case 16:ve=_n;break;case 536870912:ve=In;break;default:ve=_n}ve=$f(ve,If.bind(null,ce))}ce.callbackPriority=de,ce.callbackNode=ve}}function If(ce,de){if(Cu=-1,Ru=0,(tr&6)!==0)throw Error(K(327));var ve=ce.callbackNode;if(Ql()&&ce.callbackNode!==ve)return null;var Te=Ci(ce,ce===Qr?li:0);if(Te===0)return null;if((Te&30)!==0||(Te&ce.expiredLanes)!==0||de)de=Pu(ce,Te);else{de=Te;var Ie=tr;tr|=2;var Fe=Df();(Qr!==ce||li!==de)&&(wo=null,Yl=dt()+500,ja(ce,de));do try{nd();break}catch(it){Lf(ce,it)}while(!0);yo(),Au.current=Fe,tr=Ie,kr!==null?de=0:(Qr=null,li=0,de=Wr)}if(de!==0){if(de===2&&(Ie=rr(ce),Ie!==0&&(Te=Ie,de=nf(ce,Ie))),de===1)throw ve=Vc,ja(ce,0),oa(ce,Te),Ui(ce,dt()),ve;if(de===6)oa(ce,Te);else{if(Ie=ce.current.alternate,(Te&30)===0&&!ed(Ie)&&(de=Pu(ce,Te),de===2&&(Fe=rr(ce),Fe!==0&&(Te=Fe,de=nf(ce,Fe))),de===1))throw ve=Vc,ja(ce,0),oa(ce,Te),Ui(ce,dt()),ve;switch(ce.finishedWork=Ie,ce.finishedLanes=Te,de){case 0:case 1:throw Error(K(345));case 2:qa(ce,ki,wo);break;case 3:if(oa(ce,Te),(Te&130023424)===Te&&(de=Zu+500-dt(),10<de)){if(Ci(ce,0)!==0)break;if(Ie=ce.suspendedLanes,(Ie&Te)!==Te){wi(),ce.pingedLanes|=ce.suspendedLanes&Ie;break}ce.timeoutHandle=vc(qa.bind(null,ce,ki,wo),de);break}qa(ce,ki,wo);break;case 4:if(oa(ce,Te),(Te&4194240)===Te)break;for(de=ce.eventTimes,Ie=-1;0<Te;){var He=31-Wn(Te);Fe=1<<He,He=de[He],He>Ie&&(Ie=He),Te&=~Fe}if(Te=Ie,Te=dt()-Te,Te=(120>Te?120:480>Te?480:1080>Te?1080:1920>Te?1920:3e3>Te?3e3:4320>Te?4320:1960*Zf(Te/1960))-Te,10<Te){ce.timeoutHandle=vc(qa.bind(null,ce,ki,wo),Te);break}qa(ce,ki,wo);break;case 5:qa(ce,ki,wo);break;default:throw Error(K(329))}}}return Ui(ce,dt()),ce.callbackNode===ve?If.bind(null,ce):null}function nf(ce,de){var ve=Hc;return ce.current.memoizedState.isDehydrated&&(ja(ce,de).flags|=256),ce=Pu(ce,de),ce!==2&&(de=ki,ki=ve,de!==null&&rf(de)),ce}function rf(ce){ki===null?ki=ce:ki.push.apply(ki,ce)}function ed(ce){for(var de=ce;;){if(de.flags&16384){var ve=de.updateQueue;if(ve!==null&&(ve=ve.stores,ve!==null))for(var Te=0;Te<ve.length;Te++){var Ie=ve[Te],Fe=Ie.getSnapshot;Ie=Ie.value;try{if(!yi(Fe(),Ie))return!1}catch{return!1}}}if(ve=de.child,de.subtreeFlags&16384&&ve!==null)ve.return=de,de=ve;else{if(de===ce)break;for(;de.sibling===null;){if(de.return===null||de.return===ce)return!0;de=de.return}de.sibling.return=de.return,de=de.sibling}}return!0}function oa(ce,de){for(de&=~Qu,de&=~Tu,ce.suspendedLanes|=de,ce.pingedLanes&=~de,ce=ce.expirationTimes;0<de;){var ve=31-Wn(de),Te=1<<ve;ce[ve]=-1,de&=~Te}}function Bf(ce){if((tr&6)!==0)throw Error(K(327));Ql();var de=Ci(ce,0);if((de&1)===0)return Ui(ce,dt()),null;var ve=Pu(ce,de);if(ce.tag!==0&&ve===2){var Te=rr(ce);Te!==0&&(de=Te,ve=nf(ce,Te))}if(ve===1)throw ve=Vc,ja(ce,0),oa(ce,de),Ui(ce,dt()),ve;if(ve===6)throw Error(K(345));return ce.finishedWork=ce.current.alternate,ce.finishedLanes=de,qa(ce,ki,wo),Ui(ce,dt()),null}function sf(ce,de){var ve=tr;tr|=1;try{return ce(de)}finally{tr=ve,tr===0&&(Yl=dt()+500,Ca&&ss())}}function Wa(ce){ia!==null&&ia.tag===0&&(tr&6)===0&&Ql();var de=tr;tr|=1;var ve=cs.transition,Te=qn;try{if(cs.transition=null,qn=1,ce)return ce()}finally{qn=Te,cs.transition=ve,tr=de,(tr&6)===0&&ss()}}function of(){Ki=Jl.current,lr(Jl)}function ja(ce,de){ce.finishedWork=null,ce.finishedLanes=0;var ve=ce.timeoutHandle;if(ve!==-1&&(ce.timeoutHandle=-1,yc(ve)),kr!==null)for(ve=kr.return;ve!==null;){var Te=ve;switch(Ts(Te),Te.tag){case 1:Te=Te.type.childContextTypes,Te!=null&&Ma();break;case 3:Ws(),lr(ri),lr($r),as();break;case 5:Zo(Te);break;case 4:Ws();break;case 13:lr(dr);break;case 19:lr(dr);break;case 10:La(Te.type._context);break;case 22:case 23:of()}ve=ve.return}if(Qr=ce,kr=ce=aa(ce.current,null),li=Ki=de,Wr=0,Vc=null,Qu=Tu=Ha=0,ki=Hc=null,Ms!==null){for(de=0;de<Ms.length;de++)if(ve=Ms[de],Te=ve.interleaved,Te!==null){ve.interleaved=null;var Ie=Te.next,Fe=ve.pending;if(Fe!==null){var He=Fe.next;Fe.next=Ie,Te.next=He}ve.pending=Te}Ms=null}return ce}function Lf(ce,de){do{var ve=kr;try{if(yo(),Ao.current=ql,qi){for(var Te=cr.memoizedState;Te!==null;){var Ie=Te.queue;Ie!==null&&(Ie.pending=null),Te=Te.next}qi=!1}if(Cs=0,er=Sr=cr=null,Yr=!1,js=0,Yu.current=null,ve===null||ve.return===null){Wr=1,Vc=de,kr=null;break}e:{var Fe=ce,He=ve.return,it=ve,ut=de;if(de=li,it.flags|=32768,ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var wt=ut,Jt=it,tn=Jt.tag;if((Jt.mode&1)===0&&(tn===0||tn===11||tn===15)){var Xt=Jt.alternate;Xt?(Jt.updateQueue=Xt.updateQueue,Jt.memoizedState=Xt.memoizedState,Jt.lanes=Xt.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var vn=xn(He);if(vn!==null){vn.flags&=-257,Un(vn,He,it,Fe,de),vn.mode&1&&rn(Fe,wt,de),de=vn,ut=wt;var bn=de.updateQueue;if(bn===null){var Mn=new Set;Mn.add(ut),de.updateQueue=Mn}else bn.add(ut);break e}else{if((de&1)===0){rn(Fe,wt,de),af();break e}ut=Error(K(426))}}else if(fr&&it.mode&1){var Br=xn(He);if(Br!==null){(Br.flags&65536)===0&&(Br.flags|=256),Un(Br,He,it,Fe,de),Jo(Re(ut,it));break e}}Fe=ut=Re(ut,it),Wr!==4&&(Wr=2),Hc===null?Hc=[Fe]:Hc.push(Fe),Fe=He;do{switch(Fe.tag){case 3:Fe.flags|=65536,de&=-de,Fe.lanes|=de;var St=gt(Fe,ut,de);xo(Fe,St);break e;case 1:it=ut;var ht=Fe.type,Tt=Fe.stateNode;if((Fe.flags&128)===0&&(typeof ht.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(ra===null||!ra.has(Tt)))){Fe.flags|=65536,de&=-de,Fe.lanes|=de;var sn=Nt(Fe,it,de);xo(Fe,sn);break e}}Fe=Fe.return}while(Fe!==null)}Ff(ve)}catch(Rn){de=Rn,kr===ve&&ve!==null&&(kr=ve=ve.return);continue}break}while(!0)}function Df(){var ce=Au.current;return Au.current=ql,ce===null?ql:ce}function af(){(Wr===0||Wr===3||Wr===2)&&(Wr=4),Qr===null||(Ha&268435455)===0&&(Tu&268435455)===0||oa(Qr,li)}function Pu(ce,de){var ve=tr;tr|=2;var Te=Df();(Qr!==ce||li!==de)&&(wo=null,ja(ce,de));do try{td();break}catch(Ie){Lf(ce,Ie)}while(!0);if(yo(),tr=ve,Au.current=Te,kr!==null)throw Error(K(261));return Qr=null,li=0,Wr}function td(){for(;kr!==null;)Of(kr)}function nd(){for(;kr!==null&&!Mt();)Of(kr)}function Of(ce){var de=Uf(ce.alternate,ce,Ki);ce.memoizedProps=ce.pendingProps,de===null?Ff(ce):kr=de,Yu.current=null}function Ff(ce){var de=ce;do{var ve=de.alternate;if(ce=de.return,(de.flags&32768)===0){if(ve=Xf(ve,de,Ki),ve!==null){kr=ve;return}}else{if(ve=Kf(ve,de),ve!==null){ve.flags&=32767,kr=ve;return}if(ce!==null)ce.flags|=32768,ce.subtreeFlags=0,ce.deletions=null;else{Wr=6,kr=null;return}}if(de=de.sibling,de!==null){kr=de;return}kr=de=ce}while(de!==null);Wr===0&&(Wr=5)}function qa(ce,de,ve){var Te=qn,Ie=cs.transition;try{cs.transition=null,qn=1,rd(ce,de,ve,Te)}finally{cs.transition=Ie,qn=Te}return null}function rd(ce,de,ve,Te){do Ql();while(ia!==null);if((tr&6)!==0)throw Error(K(327));ve=ce.finishedWork;var Ie=ce.finishedLanes;if(ve===null)return null;if(ce.finishedWork=null,ce.finishedLanes=0,ve===ce.current)throw Error(K(177));ce.callbackNode=null,ce.callbackPriority=0;var Fe=ve.lanes|ve.childLanes;if(Xr(ce,Fe),ce===Qr&&(kr=Qr=null,li=0),(ve.subtreeFlags&2064)===0&&(ve.flags&2064)===0||Mu||(Mu=!0,$f(_n,function(){return Ql(),null})),Fe=(ve.flags&15990)!==0,(ve.subtreeFlags&15990)!==0||Fe){Fe=cs.transition,cs.transition=null;var He=qn;qn=1;var it=tr;tr|=4,Yu.current=null,Yf(ce,ve),Mf(ve,ce),Dr(gc),Ri=!!qo,gc=qo=null,ce.current=ve,Qf(ve),Rt(),tr=it,qn=He,cs.transition=Fe}else ce.current=ve;if(Mu&&(Mu=!1,ia=ce,wu=Ie),Fe=ce.pendingLanes,Fe===0&&(ra=null),Bn(ve.stateNode),Ui(ce,dt()),de!==null)for(Te=ce.onRecoverableError,ve=0;ve<de.length;ve++)Ie=de[ve],Te(Ie.value,{componentStack:Ie.stack,digest:Ie.digest});if(bu)throw bu=!1,ce=ef,ef=null,ce;return(wu&1)!==0&&ce.tag!==0&&Ql(),Fe=ce.pendingLanes,(Fe&1)!==0?ce===tf?Wc++:(Wc=0,tf=ce):Wc=0,ss(),null}function Ql(){if(ia!==null){var ce=Bo(wu),de=cs.transition,ve=qn;try{if(cs.transition=null,qn=16>ce?16:ce,ia===null)var Te=!1;else{if(ce=ia,ia=null,wu=0,(tr&6)!==0)throw Error(K(331));var Ie=tr;for(tr|=4,An=ce.current;An!==null;){var Fe=An,He=Fe.child;if((An.flags&16)!==0){var it=Fe.deletions;if(it!==null){for(var ut=0;ut<it.length;ut++){var wt=it[ut];for(An=wt;An!==null;){var Jt=An;switch(Jt.tag){case 0:case 11:case 15:zc(8,Jt,Fe)}var tn=Jt.child;if(tn!==null)tn.return=Jt,An=tn;else for(;An!==null;){Jt=An;var Xt=Jt.sibling,vn=Jt.return;if(Sf(Jt),Jt===wt){An=null;break}if(Xt!==null){Xt.return=vn,An=Xt;break}An=vn}}}var bn=Fe.alternate;if(bn!==null){var Mn=bn.child;if(Mn!==null){bn.child=null;do{var Br=Mn.sibling;Mn.sibling=null,Mn=Br}while(Mn!==null)}}An=Fe}}if((Fe.subtreeFlags&2064)!==0&&He!==null)He.return=Fe,An=He;else e:for(;An!==null;){if(Fe=An,(Fe.flags&2048)!==0)switch(Fe.tag){case 0:case 11:case 15:zc(9,Fe,Fe.return)}var St=Fe.sibling;if(St!==null){St.return=Fe.return,An=St;break e}An=Fe.return}}var ht=ce.current;for(An=ht;An!==null;){He=An;var Tt=He.child;if((He.subtreeFlags&2064)!==0&&Tt!==null)Tt.return=He,An=Tt;else e:for(He=ht;An!==null;){if(it=An,(it.flags&2048)!==0)try{switch(it.tag){case 0:case 11:case 15:Eu(9,it)}}catch(Rn){Cr(it,it.return,Rn)}if(it===He){An=null;break e}var sn=it.sibling;if(sn!==null){sn.return=it.return,An=sn;break e}An=it.return}}if(tr=Ie,ss(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(En,ce)}catch{}Te=!0}return Te}finally{qn=ve,cs.transition=de}}return!1}function Nf(ce,de,ve){de=Re(ve,de),de=gt(ce,de,1),ce=pr(ce,de,1),de=wi(),ce!==null&&(Ar(ce,1,de),Ui(ce,de))}function Cr(ce,de,ve){if(ce.tag===3)Nf(ce,ce,ve);else for(;de!==null;){if(de.tag===3){Nf(de,ce,ve);break}else if(de.tag===1){var Te=de.stateNode;if(typeof de.type.getDerivedStateFromError=="function"||typeof Te.componentDidCatch=="function"&&(ra===null||!ra.has(Te))){ce=Re(ve,ce),ce=Nt(de,ce,1),de=pr(de,ce,1),ce=wi(),de!==null&&(Ar(de,1,ce),Ui(de,ce));break}}de=de.return}}function id(ce,de,ve){var Te=ce.pingCache;Te!==null&&Te.delete(de),de=wi(),ce.pingedLanes|=ce.suspendedLanes&ve,Qr===ce&&(li&ve)===ve&&(Wr===4||Wr===3&&(li&130023424)===li&&500>dt()-Zu?ja(ce,0):Qu|=ve),Ui(ce,de)}function kf(ce,de){de===0&&((ce.mode&1)===0?de=1:(de=On,On<<=1,(On&130023424)===0&&(On=4194304)));var ve=wi();ce=Wi(ce,de),ce!==null&&(Ar(ce,de,ve),Ui(ce,ve))}function sd(ce){var de=ce.memoizedState,ve=0;de!==null&&(ve=de.retryLane),kf(ce,ve)}function od(ce,de){var ve=0;switch(ce.tag){case 13:var Te=ce.stateNode,Ie=ce.memoizedState;Ie!==null&&(ve=Ie.retryLane);break;case 19:Te=ce.stateNode;break;default:throw Error(K(314))}Te!==null&&Te.delete(de),kf(ce,ve)}var Uf;Uf=function(ce,de,ve){if(ce!==null)if(ce.memoizedProps!==de.pendingProps||ri.current)Xn=!0;else{if((ce.lanes&ve)===0&&(de.flags&128)===0)return Xn=!1,qf(ce,de,ve);Xn=(ce.flags&131072)!==0}else Xn=!1,fr&&(de.flags&1048576)!==0&&Tc(de,Nl,de.index);switch(de.lanes=0,de.tag){case 2:var Te=de.type;xu(ce,de),ce=de.pendingProps;var Ie=fo(de,$r.current);Hs(de,ve),Ie=ka(null,de,Te,ce,Ie,ve);var Fe=Bc();return de.flags|=1,typeof Ie=="object"&&Ie!==null&&typeof Ie.render=="function"&&Ie.$$typeof===void 0?(de.tag=1,de.memoizedState=null,de.updateQueue=null,Kr(Te)?(Fe=!0,ho(de)):Fe=!1,de.memoizedState=Ie.state!==null&&Ie.state!==void 0?Ie.state:null,jn(de),Ie.updater=Xl,de.stateNode=Ie,Ie._reactInternals=de,Ae(de,Te,ce,ve),de=Vn(null,de,Te,!0,Fe,ve)):(de.tag=0,fr&&Fe&&bc(de),pn(null,de,Ie,ve),de=de.child),de;case 16:Te=de.elementType;e:{switch(xu(ce,de),ce=de.pendingProps,Ie=Te._init,Te=Ie(Te._payload),de.type=Te,Ie=de.tag=ld(Te),ce=Ni(Te,ce),Ie){case 0:de=dn(null,de,Te,ce,ve);break e;case 1:de=Cn(null,de,Te,ce,ve);break e;case 11:de=Hr(null,de,Te,ce,ve);break e;case 14:de=Mi(null,de,Te,Ni(Te.type,ce),ve);break e}throw Error(K(306,Te,""))}return de;case 0:return Te=de.type,Ie=de.pendingProps,Ie=de.elementType===Te?Ie:Ni(Te,Ie),dn(ce,de,Te,Ie,ve);case 1:return Te=de.type,Ie=de.pendingProps,Ie=de.elementType===Te?Ie:Ni(Te,Ie),Cn(ce,de,Te,Ie,ve);case 3:e:{if($n(de),ce===null)throw Error(K(387));Te=de.pendingProps,Fe=de.memoizedState,Ie=Fe.element,br(ce,de),xr(de,Te,null,ve);var He=de.memoizedState;if(Te=He.element,Fe.isDehydrated)if(Fe={element:Te,isDehydrated:!1,cache:He.cache,pendingSuspenseBoundaries:He.pendingSuspenseBoundaries,transitions:He.transitions},de.updateQueue.baseState=Fe,de.memoizedState=Fe,de.flags&256){Ie=Re(Error(K(423)),de),de=Zn(ce,de,Te,ve,Ie);break e}else if(Te!==Ie){Ie=Re(Error(K(424)),de),de=Zn(ce,de,Te,ve,Ie);break e}else for(si=ys(de.stateNode.containerInfo.firstChild),Gr=de,fr=!0,Fi=null,ve=Ba(de,null,Te,ve),de.child=ve;ve;)ve.flags=ve.flags&-3|4096,ve=ve.sibling;else{if(Vs(),Te===Ie){de=Mo(ce,de,ve);break e}pn(ce,de,Te,ve)}de=de.child}return de;case 5:return Eo(de),ce===null&&Ul(de),Te=de.type,Ie=de.pendingProps,Fe=ce!==null?ce.memoizedProps:null,He=Ie.children,_c(Te,Ie)?He=null:Fe!==null&&_c(Te,Fe)&&(de.flags|=32),Lt(ce,de),pn(ce,de,He,ve),de.child;case 6:return ce===null&&Ul(de),null;case 13:return Is(ce,de,ve);case 4:return Fa(de,de.stateNode.containerInfo),Te=de.pendingProps,ce===null?de.child=go(de,null,Te,ve):pn(ce,de,Te,ve),de.child;case 11:return Te=de.type,Ie=de.pendingProps,Ie=de.elementType===Te?Ie:Ni(Te,Ie),Hr(ce,de,Te,Ie,ve);case 7:return pn(ce,de,de.pendingProps,ve),de.child;case 8:return pn(ce,de,de.pendingProps.children,ve),de.child;case 12:return pn(ce,de,de.pendingProps.children,ve),de.child;case 10:e:{if(Te=de.type._context,Ie=de.pendingProps,Fe=de.memoizedProps,He=Ie.value,or(_o,Te._currentValue),Te._currentValue=He,Fe!==null)if(yi(Fe.value,He)){if(Fe.children===Ie.children&&!ri.current){de=Mo(ce,de,ve);break e}}else for(Fe=de.child,Fe!==null&&(Fe.return=de);Fe!==null;){var it=Fe.dependencies;if(it!==null){He=Fe.child;for(var ut=it.firstContext;ut!==null;){if(ut.context===Te){if(Fe.tag===1){ut=sr(-1,ve&-ve),ut.tag=2;var wt=Fe.updateQueue;if(wt!==null){wt=wt.shared;var Jt=wt.pending;Jt===null?ut.next=ut:(ut.next=Jt.next,Jt.next=ut),wt.pending=ut}}Fe.lanes|=ve,ut=Fe.alternate,ut!==null&&(ut.lanes|=ve),Da(Fe.return,ve,de),it.lanes|=ve;break}ut=ut.next}}else if(Fe.tag===10)He=Fe.type===de.type?null:Fe.child;else if(Fe.tag===18){if(He=Fe.return,He===null)throw Error(K(341));He.lanes|=ve,it=He.alternate,it!==null&&(it.lanes|=ve),Da(He,ve,de),He=Fe.sibling}else He=Fe.child;if(He!==null)He.return=Fe;else for(He=Fe;He!==null;){if(He===de){He=null;break}if(Fe=He.sibling,Fe!==null){Fe.return=He.return,He=Fe;break}He=He.return}Fe=He}pn(ce,de,Ie.children,ve),de=de.child}return de;case 9:return Ie=de.type,Te=de.pendingProps.children,Hs(de,ve),Ie=Ei(Ie),Te=Te(Ie),de.flags|=1,pn(ce,de,Te,ve),de.child;case 14:return Te=de.type,Ie=Ni(Te,de.pendingProps),Ie=Ni(Te.type,Ie),Mi(ce,de,Te,Ie,ve);case 15:return bt(ce,de,de.type,de.pendingProps,ve);case 17:return Te=de.type,Ie=de.pendingProps,Ie=de.elementType===Te?Ie:Ni(Te,Ie),xu(ce,de),de.tag=1,Kr(Te)?(ce=!0,ho(de)):ce=!1,Hs(de,ve),pe(de,Te,Ie),Ae(de,Te,Ie,ve),Vn(null,de,Te,!0,ce,ve);case 19:return gf(ce,de,ve);case 22:return _t(ce,de,ve)}throw Error(K(156,de.tag))};function $f(ce,de){return Ke(ce,de)}function ad(ce,de,ve,Te){this.tag=ce,this.key=ve,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=de,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Te,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(ce,de,ve,Te){return new ad(ce,de,ve,Te)}function lf(ce){return ce=ce.prototype,!(!ce||!ce.isReactComponent)}function ld(ce){if(typeof ce=="function")return lf(ce)?1:0;if(ce!=null){if(ce=ce.$$typeof,ce===Je)return 11;if(ce===rt)return 14}return 2}function aa(ce,de){var ve=ce.alternate;return ve===null?(ve=us(ce.tag,de,ce.key,ce.mode),ve.elementType=ce.elementType,ve.type=ce.type,ve.stateNode=ce.stateNode,ve.alternate=ce,ce.alternate=ve):(ve.pendingProps=de,ve.type=ce.type,ve.flags=0,ve.subtreeFlags=0,ve.deletions=null),ve.flags=ce.flags&14680064,ve.childLanes=ce.childLanes,ve.lanes=ce.lanes,ve.child=ce.child,ve.memoizedProps=ce.memoizedProps,ve.memoizedState=ce.memoizedState,ve.updateQueue=ce.updateQueue,de=ce.dependencies,ve.dependencies=de===null?null:{lanes:de.lanes,firstContext:de.firstContext},ve.sibling=ce.sibling,ve.index=ce.index,ve.ref=ce.ref,ve}function Iu(ce,de,ve,Te,Ie,Fe){var He=2;if(Te=ce,typeof ce=="function")lf(ce)&&(He=1);else if(typeof ce=="string")He=5;else e:switch(ce){case Ue:return Xa(ve.children,Ie,Fe,de);case $e:He=8,Ie|=8;break;case De:return ce=us(12,ve,de,Ie|2),ce.elementType=De,ce.lanes=Fe,ce;case Ye:return ce=us(13,ve,de,Ie),ce.elementType=Ye,ce.lanes=Fe,ce;case Qe:return ce=us(19,ve,de,Ie),ce.elementType=Qe,ce.lanes=Fe,ce;case ct:return Bu(ve,Ie,Fe,de);default:if(typeof ce=="object"&&ce!==null)switch(ce.$$typeof){case ke:He=10;break e;case Ge:He=9;break e;case Je:He=11;break e;case rt:He=14;break e;case ot:He=16,Te=null;break e}throw Error(K(130,ce==null?ce:typeof ce,""))}return de=us(He,ve,de,Ie),de.elementType=ce,de.type=Te,de.lanes=Fe,de}function Xa(ce,de,ve,Te){return ce=us(7,ce,Te,de),ce.lanes=ve,ce}function Bu(ce,de,ve,Te){return ce=us(22,ce,Te,de),ce.elementType=ct,ce.lanes=ve,ce.stateNode={isHidden:!1},ce}function cf(ce,de,ve){return ce=us(6,ce,null,de),ce.lanes=ve,ce}function uf(ce,de,ve){return de=us(4,ce.children!==null?ce.children:[],ce.key,de),de.lanes=ve,de.stateNode={containerInfo:ce.containerInfo,pendingChildren:null,implementation:ce.implementation},de}function cd(ce,de,ve,Te,Ie){this.tag=de,this.containerInfo=ce,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qr(0),this.expirationTimes=qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.identifierPrefix=Te,this.onRecoverableError=Ie,this.mutableSourceEagerHydrationData=null}function ff(ce,de,ve,Te,Ie,Fe,He,it,ut){return ce=new cd(ce,de,ve,it,ut),de===1?(de=1,Fe===!0&&(de|=8)):de=0,Fe=us(3,null,null,de),ce.current=Fe,Fe.stateNode=ce,Fe.memoizedState={element:Te,isDehydrated:ve,cache:null,transitions:null,pendingSuspenseBoundaries:null},jn(Fe),ce}function ud(ce,de,ve){var Te=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Be,key:Te==null?null:""+Te,children:ce,containerInfo:de,implementation:ve}}function Gf(ce){if(!ce)return Ss;ce=ce._reactInternals;e:{if(fs(ce)!==ce||ce.tag!==1)throw Error(K(170));var de=ce;do{switch(de.tag){case 3:de=de.stateNode.context;break e;case 1:if(Kr(de.type)){de=de.stateNode.__reactInternalMemoizedMergedChildContext;break e}}de=de.return}while(de!==null);throw Error(K(171))}if(ce.tag===1){var ve=ce.type;if(Kr(ve))return wa(ce,ve,de)}return de}function zf(ce,de,ve,Te,Ie,Fe,He,it,ut){return ce=ff(ve,Te,!0,ce,Ie,Fe,He,it,ut),ce.context=Gf(null),ve=ce.current,Te=wi(),Ie=sa(ve),Fe=sr(Te,Ie),Fe.callback=de??null,pr(ve,Fe,Ie),ce.current.lanes=Ie,Ar(ce,Ie,Te),Ui(ce,Te),ce}function Lu(ce,de,ve,Te){var Ie=de.current,Fe=wi(),He=sa(Ie);return ve=Gf(ve),de.context===null?de.context=ve:de.pendingContext=ve,de=sr(Fe,He),de.payload={element:ce},Te=Te===void 0?null:Te,Te!==null&&(de.callback=Te),ce=pr(Ie,de,He),ce!==null&&(Ds(ce,Ie,He,Fe),Jr(ce,Ie,He)),He}function Du(ce){if(ce=ce.current,!ce.child)return null;switch(ce.child.tag){case 5:return ce.child.stateNode;default:return ce.child.stateNode}}function Vf(ce,de){if(ce=ce.memoizedState,ce!==null&&ce.dehydrated!==null){var ve=ce.retryLane;ce.retryLane=ve!==0&&ve<de?ve:de}}function df(ce,de){Vf(ce,de),(ce=ce.alternate)&&Vf(ce,de)}function fd(){return null}var Hf=typeof reportError=="function"?reportError:function(ce){console.error(ce)};function hf(ce){this._internalRoot=ce}Ou.prototype.render=hf.prototype.render=function(ce){var de=this._internalRoot;if(de===null)throw Error(K(409));Lu(ce,de,null,null)},Ou.prototype.unmount=hf.prototype.unmount=function(){var ce=this._internalRoot;if(ce!==null){this._internalRoot=null;var de=ce.containerInfo;Wa(function(){Lu(null,ce,null,null)}),de[Si]=null}};function Ou(ce){this._internalRoot=ce}Ou.prototype.unstable_scheduleHydration=function(ce){if(ce){var de=nl();ce={blockedOn:null,target:ce,priority:de};for(var ve=0;ve<Os.length&&de!==0&&de<Os[ve].priority;ve++);Os.splice(ve,0,ce),ve===0&&sl(ce)}};function pf(ce){return!(!ce||ce.nodeType!==1&&ce.nodeType!==9&&ce.nodeType!==11)}function Fu(ce){return!(!ce||ce.nodeType!==1&&ce.nodeType!==9&&ce.nodeType!==11&&(ce.nodeType!==8||ce.nodeValue!==" react-mount-point-unstable "))}function Wf(){}function dd(ce,de,ve,Te,Ie){if(Ie){if(typeof Te=="function"){var Fe=Te;Te=function(){var wt=Du(He);Fe.call(wt)}}var He=zf(de,Te,ce,0,null,!1,!1,"",Wf);return ce._reactRootContainer=He,ce[Si]=He.current,Wo(ce.nodeType===8?ce.parentNode:ce),Wa(),He}for(;Ie=ce.lastChild;)ce.removeChild(Ie);if(typeof Te=="function"){var it=Te;Te=function(){var wt=Du(ut);it.call(wt)}}var ut=ff(ce,0,!1,null,null,!1,!1,"",Wf);return ce._reactRootContainer=ut,ce[Si]=ut.current,Wo(ce.nodeType===8?ce.parentNode:ce),Wa(function(){Lu(de,ut,ve,Te)}),ut}function Nu(ce,de,ve,Te,Ie){var Fe=ve._reactRootContainer;if(Fe){var He=Fe;if(typeof Ie=="function"){var it=Ie;Ie=function(){var ut=Du(He);it.call(ut)}}Lu(de,He,ce,Ie)}else He=dd(ve,de,ce,Ie,Te);return Du(He)}ca=function(ce){switch(ce.tag){case 3:var de=ce.stateNode;if(de.current.memoizedState.isDehydrated){var ve=vr(de.pendingLanes);ve!==0&&(Qi(de,ve|1),Ui(de,dt()),(tr&6)===0&&(Yl=dt()+500,ss()))}break;case 13:Wa(function(){var Te=Wi(ce,1);if(Te!==null){var Ie=wi();Ds(Te,ce,1,Ie)}}),df(ce,1)}},Zl=function(ce){if(ce.tag===13){var de=Wi(ce,134217728);if(de!==null){var ve=wi();Ds(de,ce,134217728,ve)}df(ce,134217728)}},qc=function(ce){if(ce.tag===13){var de=sa(ce),ve=Wi(ce,de);if(ve!==null){var Te=wi();Ds(ve,ce,de,Te)}df(ce,de)}},nl=function(){return qn},rl=function(ce,de){var ve=qn;try{return qn=ce,de()}finally{qn=ve}},Ot=function(ce,de,ve){switch(de){case"input":if(It(ce,ve),de=ve.name,ve.type==="radio"&&de!=null){for(ve=ce;ve.parentNode;)ve=ve.parentNode;for(ve=ve.querySelectorAll("input[name="+JSON.stringify(""+de)+'][type="radio"]'),de=0;de<ve.length;de++){var Te=ve[de];if(Te!==ce&&Te.form===ce.form){var Ie=Dl(Te);if(!Ie)throw Error(K(90));mn(Te),It(Te,Ie)}}}break;case"textarea":Ve(ce,ve);break;case"select":de=ve.value,de!=null&&Tn(ce,!!ve.multiple,de,!1)}},Pn=sf,Jn=Wa;var hd={usingClientEntryPoint:!1,Events:[xs,Tr,Dl,zt,ln,sf]},jc={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pd={bundleType:jc.bundleType,version:jc.version,rendererPackageName:jc.rendererPackageName,rendererConfig:jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(ce){return ce=el(ce),ce===null?null:ce.stateNode},findFiberByHostInstance:jc.findFiberByHostInstance||fd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{En=ku.inject(pd),hn=ku}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hd,reactDom_production_min.createPortal=function(ce,de){var ve=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(de))throw Error(K(200));return ud(ce,de,null,ve)},reactDom_production_min.createRoot=function(ce,de){if(!pf(ce))throw Error(K(299));var ve=!1,Te="",Ie=Hf;return de!=null&&(de.unstable_strictMode===!0&&(ve=!0),de.identifierPrefix!==void 0&&(Te=de.identifierPrefix),de.onRecoverableError!==void 0&&(Ie=de.onRecoverableError)),de=ff(ce,1,!1,null,null,ve,!1,Te,Ie),ce[Si]=de.current,Wo(ce.nodeType===8?ce.parentNode:ce),new hf(de)},reactDom_production_min.findDOMNode=function(ce){if(ce==null)return null;if(ce.nodeType===1)return ce;var de=ce._reactInternals;if(de===void 0)throw typeof ce.render=="function"?Error(K(188)):(ce=Object.keys(ce).join(","),Error(K(268,ce)));return ce=el(de),ce=ce===null?null:ce.stateNode,ce},reactDom_production_min.flushSync=function(ce){return Wa(ce)},reactDom_production_min.hydrate=function(ce,de,ve){if(!Fu(de))throw Error(K(200));return Nu(null,ce,de,!0,ve)},reactDom_production_min.hydrateRoot=function(ce,de,ve){if(!pf(ce))throw Error(K(405));var Te=ve!=null&&ve.hydratedSources||null,Ie=!1,Fe="",He=Hf;if(ve!=null&&(ve.unstable_strictMode===!0&&(Ie=!0),ve.identifierPrefix!==void 0&&(Fe=ve.identifierPrefix),ve.onRecoverableError!==void 0&&(He=ve.onRecoverableError)),de=zf(de,null,ce,1,ve??null,Ie,!1,Fe,He),ce[Si]=de.current,Wo(ce),Te)for(ce=0;ce<Te.length;ce++)ve=Te[ce],Ie=ve._getVersion,Ie=Ie(ve._source),de.mutableSourceEagerHydrationData==null?de.mutableSourceEagerHydrationData=[ve,Ie]:de.mutableSourceEagerHydrationData.push(ve,Ie);return new Ou(de)},reactDom_production_min.render=function(ce,de,ve){if(!Fu(de))throw Error(K(200));return Nu(null,ce,de,!1,ve)},reactDom_production_min.unmountComponentAtNode=function(ce){if(!Fu(ce))throw Error(K(40));return ce._reactRootContainer?(Wa(function(){Nu(null,null,ce,!1,function(){ce._reactRootContainer=null,ce[Si]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=sf,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ce,de,ve,Te){if(!Fu(ve))throw Error(K(200));if(ce==null||ce._reactInternals===void 0)throw Error(K(38));return Nu(ce,de,ve,!1,Te)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function ne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ne)}catch(_){console.error(_)}}return ne(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var ne=requireReactDom();return client.createRoot=ne.createRoot,client.hydrateRoot=ne.hydrateRoot,client}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:React},[reactExports]),__vite_import_meta_env__={};let cachedApiData=null,inFlightFetch=null;function resolveApiUrl(){const ne=typeof import.meta<"u"&&__vite_import_meta_env__?"./":"/";return`${ne.endsWith("/")?ne.slice(0,-1):ne}/apii.json`}async function fetchApiJson(ne={}){const _=resolveApiUrl(),K=await fetch(_,{cache:ne.cache||"default"});if(!K.ok)throw new Error(`Failed to fetch API data: ${K.status} ${K.statusText}`);return K.json()}async function getApiData({forceRefresh:ne=!1}={}){return cachedApiData&&!ne?cachedApiData:inFlightFetch||(inFlightFetch=(async()=>{try{const _=await fetchApiJson({cache:ne?"no-store":"default"});return cachedApiData=_,_}finally{inFlightFetch=null}})(),inFlightFetch)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="179",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace$1="srgb",LinearSRGBColorSpace$1="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"},InterpolationSamplingType={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InterpolationSamplingMode={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let EventDispatcher$1=class{addEventListener(_,K){this._listeners===void 0&&(this._listeners={});const Z=this._listeners;Z[_]===void 0&&(Z[_]=[]),Z[_].indexOf(K)===-1&&Z[_].push(K)}hasEventListener(_,K){const Z=this._listeners;return Z===void 0?!1:Z[_]!==void 0&&Z[_].indexOf(K)!==-1}removeEventListener(_,K){const Z=this._listeners;if(Z===void 0)return;const te=Z[_];if(te!==void 0){const ie=te.indexOf(K);ie!==-1&&te.splice(ie,1)}}dispatchEvent(_){const K=this._listeners;if(K===void 0)return;const Z=K[_.type];if(Z!==void 0){_.target=this;const te=Z.slice(0);for(let ie=0,se=te.length;ie<se;ie++)te[ie].call(this,_);_.target=null}}};const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const ne=Math.random()*4294967295|0,_=Math.random()*4294967295|0,K=Math.random()*4294967295|0,Z=Math.random()*4294967295|0;return(_lut[ne&255]+_lut[ne>>8&255]+_lut[ne>>16&255]+_lut[ne>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[K&63|128]+_lut[K>>8&255]+"-"+_lut[K>>16&255]+_lut[K>>24&255]+_lut[Z&255]+_lut[Z>>8&255]+_lut[Z>>16&255]+_lut[Z>>24&255]).toLowerCase()}function clamp$3(ne,_,K){return Math.max(_,Math.min(K,ne))}function euclideanModulo(ne,_){return(ne%_+_)%_}function mapLinear(ne,_,K,Z,te){return Z+(ne-_)*(te-Z)/(K-_)}function inverseLerp(ne,_,K){return ne!==_?(K-ne)/(_-ne):0}function lerp(ne,_,K){return(1-K)*ne+K*_}function damp(ne,_,K,Z){return lerp(ne,_,1-Math.exp(-K*Z))}function pingpong(ne,_=1){return _-Math.abs(euclideanModulo(ne,_*2)-_)}function smoothstep(ne,_,K){return ne<=_?0:ne>=K?1:(ne=(ne-_)/(K-_),ne*ne*(3-2*ne))}function smootherstep(ne,_,K){return ne<=_?0:ne>=K?1:(ne=(ne-_)/(K-_),ne*ne*ne*(ne*(ne*6-15)+10))}function randInt(ne,_){return ne+Math.floor(Math.random()*(_-ne+1))}function randFloat(ne,_){return ne+Math.random()*(_-ne)}function randFloatSpread(ne){return ne*(.5-Math.random())}function seededRandom(ne){ne!==void 0&&(_seed=ne);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(ne){return ne*DEG2RAD}function radToDeg(ne){return ne*RAD2DEG}function isPowerOfTwo(ne){return(ne&ne-1)===0&&ne!==0}function ceilPowerOfTwo(ne){return Math.pow(2,Math.ceil(Math.log(ne)/Math.LN2))}function floorPowerOfTwo(ne){return Math.pow(2,Math.floor(Math.log(ne)/Math.LN2))}function setQuaternionFromProperEuler(ne,_,K,Z,te){const ie=Math.cos,se=Math.sin,oe=ie(K/2),ae=se(K/2),le=ie((_+Z)/2),ue=se((_+Z)/2),fe=ie((_-Z)/2),he=se((_-Z)/2),ge=ie((Z-_)/2),_e=se((Z-_)/2);switch(te){case"XYX":ne.set(oe*ue,ae*fe,ae*he,oe*le);break;case"YZY":ne.set(ae*he,oe*ue,ae*fe,oe*le);break;case"ZXZ":ne.set(ae*fe,ae*he,oe*ue,oe*le);break;case"XZX":ne.set(oe*ue,ae*_e,ae*ge,oe*le);break;case"YXY":ne.set(ae*ge,oe*ue,ae*_e,oe*le);break;case"ZYZ":ne.set(ae*_e,ae*ge,oe*ue,oe*le);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+te)}}function denormalize(ne,_){switch(_.constructor){case Float32Array:return ne;case Uint32Array:return ne/4294967295;case Uint16Array:return ne/65535;case Uint8Array:return ne/255;case Int32Array:return Math.max(ne/2147483647,-1);case Int16Array:return Math.max(ne/32767,-1);case Int8Array:return Math.max(ne/127,-1);default:throw new Error("Invalid component type.")}}function normalize$6(ne,_){switch(_.constructor){case Float32Array:return ne;case Uint32Array:return Math.round(ne*4294967295);case Uint16Array:return Math.round(ne*65535);case Uint8Array:return Math.round(ne*255);case Int32Array:return Math.round(ne*2147483647);case Int16Array:return Math.round(ne*32767);case Int8Array:return Math.round(ne*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$3,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$6,denormalize};class Vector2{constructor(_=0,K=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=K}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,K){return this.x=_,this.y=K,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,K){switch(_){case 0:this.x=K;break;case 1:this.y=K;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,K){return this.x=_.x+K.x,this.y=_.y+K.y,this}addScaledVector(_,K){return this.x+=_.x*K,this.y+=_.y*K,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,K){return this.x=_.x-K.x,this.y=_.y-K.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const K=this.x,Z=this.y,te=_.elements;return this.x=te[0]*K+te[3]*Z+te[6],this.y=te[1]*K+te[4]*Z+te[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,K){return this.x=clamp$3(this.x,_.x,K.x),this.y=clamp$3(this.y,_.y,K.y),this}clampScalar(_,K){return this.x=clamp$3(this.x,_,K),this.y=clamp$3(this.y,_,K),this}clampLength(_,K){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp$3(Z,_,K))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(_){const K=Math.sqrt(this.lengthSq()*_.lengthSq());if(K===0)return Math.PI/2;const Z=this.dot(_)/K;return Math.acos(clamp$3(Z,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const K=this.x-_.x,Z=this.y-_.y;return K*K+Z*Z}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,K){return this.x+=(_.x-this.x)*K,this.y+=(_.y-this.y)*K,this}lerpVectors(_,K,Z){return this.x=_.x+(K.x-_.x)*Z,this.y=_.y+(K.y-_.y)*Z,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,K=0){return this.x=_[K],this.y=_[K+1],this}toArray(_=[],K=0){return _[K]=this.x,_[K+1]=this.y,_}fromBufferAttribute(_,K){return this.x=_.getX(K),this.y=_.getY(K),this}rotateAround(_,K){const Z=Math.cos(K),te=Math.sin(K),ie=this.x-_.x,se=this.y-_.y;return this.x=ie*Z-se*te+_.x,this.y=ie*te+se*Z+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(_=0,K=0,Z=0,te=1){this.isQuaternion=!0,this._x=_,this._y=K,this._z=Z,this._w=te}static slerpFlat(_,K,Z,te,ie,se,oe){let ae=Z[te+0],le=Z[te+1],ue=Z[te+2],fe=Z[te+3];const he=ie[se+0],ge=ie[se+1],_e=ie[se+2],Se=ie[se+3];if(oe===0){_[K+0]=ae,_[K+1]=le,_[K+2]=ue,_[K+3]=fe;return}if(oe===1){_[K+0]=he,_[K+1]=ge,_[K+2]=_e,_[K+3]=Se;return}if(fe!==Se||ae!==he||le!==ge||ue!==_e){let Ee=1-oe;const ye=ae*he+le*ge+ue*_e+fe*Se,be=ye>=0?1:-1,we=1-ye*ye;if(we>Number.EPSILON){const Oe=Math.sqrt(we),Be=Math.atan2(Oe,ye*be);Ee=Math.sin(Ee*Be)/Oe,oe=Math.sin(oe*Be)/Oe}const Pe=oe*be;if(ae=ae*Ee+he*Pe,le=le*Ee+ge*Pe,ue=ue*Ee+_e*Pe,fe=fe*Ee+Se*Pe,Ee===1-oe){const Oe=1/Math.sqrt(ae*ae+le*le+ue*ue+fe*fe);ae*=Oe,le*=Oe,ue*=Oe,fe*=Oe}}_[K]=ae,_[K+1]=le,_[K+2]=ue,_[K+3]=fe}static multiplyQuaternionsFlat(_,K,Z,te,ie,se){const oe=Z[te],ae=Z[te+1],le=Z[te+2],ue=Z[te+3],fe=ie[se],he=ie[se+1],ge=ie[se+2],_e=ie[se+3];return _[K]=oe*_e+ue*fe+ae*ge-le*he,_[K+1]=ae*_e+ue*he+le*fe-oe*ge,_[K+2]=le*_e+ue*ge+oe*he-ae*fe,_[K+3]=ue*_e-oe*fe-ae*he-le*ge,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,K,Z,te){return this._x=_,this._y=K,this._z=Z,this._w=te,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,K=!0){const Z=_._x,te=_._y,ie=_._z,se=_._order,oe=Math.cos,ae=Math.sin,le=oe(Z/2),ue=oe(te/2),fe=oe(ie/2),he=ae(Z/2),ge=ae(te/2),_e=ae(ie/2);switch(se){case"XYZ":this._x=he*ue*fe+le*ge*_e,this._y=le*ge*fe-he*ue*_e,this._z=le*ue*_e+he*ge*fe,this._w=le*ue*fe-he*ge*_e;break;case"YXZ":this._x=he*ue*fe+le*ge*_e,this._y=le*ge*fe-he*ue*_e,this._z=le*ue*_e-he*ge*fe,this._w=le*ue*fe+he*ge*_e;break;case"ZXY":this._x=he*ue*fe-le*ge*_e,this._y=le*ge*fe+he*ue*_e,this._z=le*ue*_e+he*ge*fe,this._w=le*ue*fe-he*ge*_e;break;case"ZYX":this._x=he*ue*fe-le*ge*_e,this._y=le*ge*fe+he*ue*_e,this._z=le*ue*_e-he*ge*fe,this._w=le*ue*fe+he*ge*_e;break;case"YZX":this._x=he*ue*fe+le*ge*_e,this._y=le*ge*fe+he*ue*_e,this._z=le*ue*_e-he*ge*fe,this._w=le*ue*fe-he*ge*_e;break;case"XZY":this._x=he*ue*fe-le*ge*_e,this._y=le*ge*fe-he*ue*_e,this._z=le*ue*_e+he*ge*fe,this._w=le*ue*fe+he*ge*_e;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+se)}return K===!0&&this._onChangeCallback(),this}setFromAxisAngle(_,K){const Z=K/2,te=Math.sin(Z);return this._x=_.x*te,this._y=_.y*te,this._z=_.z*te,this._w=Math.cos(Z),this._onChangeCallback(),this}setFromRotationMatrix(_){const K=_.elements,Z=K[0],te=K[4],ie=K[8],se=K[1],oe=K[5],ae=K[9],le=K[2],ue=K[6],fe=K[10],he=Z+oe+fe;if(he>0){const ge=.5/Math.sqrt(he+1);this._w=.25/ge,this._x=(ue-ae)*ge,this._y=(ie-le)*ge,this._z=(se-te)*ge}else if(Z>oe&&Z>fe){const ge=2*Math.sqrt(1+Z-oe-fe);this._w=(ue-ae)/ge,this._x=.25*ge,this._y=(te+se)/ge,this._z=(ie+le)/ge}else if(oe>fe){const ge=2*Math.sqrt(1+oe-Z-fe);this._w=(ie-le)/ge,this._x=(te+se)/ge,this._y=.25*ge,this._z=(ae+ue)/ge}else{const ge=2*Math.sqrt(1+fe-Z-oe);this._w=(se-te)/ge,this._x=(ie+le)/ge,this._y=(ae+ue)/ge,this._z=.25*ge}return this._onChangeCallback(),this}setFromUnitVectors(_,K){let Z=_.dot(K)+1;return Z<1e-8?(Z=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=Z):(this._x=0,this._y=-_.z,this._z=_.y,this._w=Z)):(this._x=_.y*K.z-_.z*K.y,this._y=_.z*K.x-_.x*K.z,this._z=_.x*K.y-_.y*K.x,this._w=Z),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp$3(this.dot(_),-1,1)))}rotateTowards(_,K){const Z=this.angleTo(_);if(Z===0)return this;const te=Math.min(1,K/Z);return this.slerp(_,te),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,K){const Z=_._x,te=_._y,ie=_._z,se=_._w,oe=K._x,ae=K._y,le=K._z,ue=K._w;return this._x=Z*ue+se*oe+te*le-ie*ae,this._y=te*ue+se*ae+ie*oe-Z*le,this._z=ie*ue+se*le+Z*ae-te*oe,this._w=se*ue-Z*oe-te*ae-ie*le,this._onChangeCallback(),this}slerp(_,K){if(K===0)return this;if(K===1)return this.copy(_);const Z=this._x,te=this._y,ie=this._z,se=this._w;let oe=se*_._w+Z*_._x+te*_._y+ie*_._z;if(oe<0?(this._w=-_._w,this._x=-_._x,this._y=-_._y,this._z=-_._z,oe=-oe):this.copy(_),oe>=1)return this._w=se,this._x=Z,this._y=te,this._z=ie,this;const ae=1-oe*oe;if(ae<=Number.EPSILON){const ge=1-K;return this._w=ge*se+K*this._w,this._x=ge*Z+K*this._x,this._y=ge*te+K*this._y,this._z=ge*ie+K*this._z,this.normalize(),this}const le=Math.sqrt(ae),ue=Math.atan2(le,oe),fe=Math.sin((1-K)*ue)/le,he=Math.sin(K*ue)/le;return this._w=se*fe+this._w*he,this._x=Z*fe+this._x*he,this._y=te*fe+this._y*he,this._z=ie*fe+this._z*he,this._onChangeCallback(),this}slerpQuaternions(_,K,Z){return this.copy(_).slerp(K,Z)}random(){const _=2*Math.PI*Math.random(),K=2*Math.PI*Math.random(),Z=Math.random(),te=Math.sqrt(1-Z),ie=Math.sqrt(Z);return this.set(te*Math.sin(_),te*Math.cos(_),ie*Math.sin(K),ie*Math.cos(K))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,K=0){return this._x=_[K],this._y=_[K+1],this._z=_[K+2],this._w=_[K+3],this._onChangeCallback(),this}toArray(_=[],K=0){return _[K]=this._x,_[K+1]=this._y,_[K+2]=this._z,_[K+3]=this._w,_}fromBufferAttribute(_,K){return this._x=_.getX(K),this._y=_.getY(K),this._z=_.getZ(K),this._w=_.getW(K),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(_=0,K=0,Z=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=K,this.z=Z}set(_,K,Z){return Z===void 0&&(Z=this.z),this.x=_,this.y=K,this.z=Z,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,K){switch(_){case 0:this.x=K;break;case 1:this.y=K;break;case 2:this.z=K;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,K){return this.x=_.x+K.x,this.y=_.y+K.y,this.z=_.z+K.z,this}addScaledVector(_,K){return this.x+=_.x*K,this.y+=_.y*K,this.z+=_.z*K,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,K){return this.x=_.x-K.x,this.y=_.y-K.y,this.z=_.z-K.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,K){return this.x=_.x*K.x,this.y=_.y*K.y,this.z=_.z*K.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,K){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,K))}applyMatrix3(_){const K=this.x,Z=this.y,te=this.z,ie=_.elements;return this.x=ie[0]*K+ie[3]*Z+ie[6]*te,this.y=ie[1]*K+ie[4]*Z+ie[7]*te,this.z=ie[2]*K+ie[5]*Z+ie[8]*te,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const K=this.x,Z=this.y,te=this.z,ie=_.elements,se=1/(ie[3]*K+ie[7]*Z+ie[11]*te+ie[15]);return this.x=(ie[0]*K+ie[4]*Z+ie[8]*te+ie[12])*se,this.y=(ie[1]*K+ie[5]*Z+ie[9]*te+ie[13])*se,this.z=(ie[2]*K+ie[6]*Z+ie[10]*te+ie[14])*se,this}applyQuaternion(_){const K=this.x,Z=this.y,te=this.z,ie=_.x,se=_.y,oe=_.z,ae=_.w,le=2*(se*te-oe*Z),ue=2*(oe*K-ie*te),fe=2*(ie*Z-se*K);return this.x=K+ae*le+se*fe-oe*ue,this.y=Z+ae*ue+oe*le-ie*fe,this.z=te+ae*fe+ie*ue-se*le,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const K=this.x,Z=this.y,te=this.z,ie=_.elements;return this.x=ie[0]*K+ie[4]*Z+ie[8]*te,this.y=ie[1]*K+ie[5]*Z+ie[9]*te,this.z=ie[2]*K+ie[6]*Z+ie[10]*te,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,K){return this.x=clamp$3(this.x,_.x,K.x),this.y=clamp$3(this.y,_.y,K.y),this.z=clamp$3(this.z,_.z,K.z),this}clampScalar(_,K){return this.x=clamp$3(this.x,_,K),this.y=clamp$3(this.y,_,K),this.z=clamp$3(this.z,_,K),this}clampLength(_,K){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp$3(Z,_,K))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,K){return this.x+=(_.x-this.x)*K,this.y+=(_.y-this.y)*K,this.z+=(_.z-this.z)*K,this}lerpVectors(_,K,Z){return this.x=_.x+(K.x-_.x)*Z,this.y=_.y+(K.y-_.y)*Z,this.z=_.z+(K.z-_.z)*Z,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,K){const Z=_.x,te=_.y,ie=_.z,se=K.x,oe=K.y,ae=K.z;return this.x=te*ae-ie*oe,this.y=ie*se-Z*ae,this.z=Z*oe-te*se,this}projectOnVector(_){const K=_.lengthSq();if(K===0)return this.set(0,0,0);const Z=_.dot(this)/K;return this.copy(_).multiplyScalar(Z)}projectOnPlane(_){return _vector$c.copy(this).projectOnVector(_),this.sub(_vector$c)}reflect(_){return this.sub(_vector$c.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const K=Math.sqrt(this.lengthSq()*_.lengthSq());if(K===0)return Math.PI/2;const Z=this.dot(_)/K;return Math.acos(clamp$3(Z,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const K=this.x-_.x,Z=this.y-_.y,te=this.z-_.z;return K*K+Z*Z+te*te}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,K,Z){const te=Math.sin(K)*_;return this.x=te*Math.sin(Z),this.y=Math.cos(K)*_,this.z=te*Math.cos(Z),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,K,Z){return this.x=_*Math.sin(K),this.y=Z,this.z=_*Math.cos(K),this}setFromMatrixPosition(_){const K=_.elements;return this.x=K[12],this.y=K[13],this.z=K[14],this}setFromMatrixScale(_){const K=this.setFromMatrixColumn(_,0).length(),Z=this.setFromMatrixColumn(_,1).length(),te=this.setFromMatrixColumn(_,2).length();return this.x=K,this.y=Z,this.z=te,this}setFromMatrixColumn(_,K){return this.fromArray(_.elements,K*4)}setFromMatrix3Column(_,K){return this.fromArray(_.elements,K*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}setFromColor(_){return this.x=_.r,this.y=_.g,this.z=_.b,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,K=0){return this.x=_[K],this.y=_[K+1],this.z=_[K+2],this}toArray(_=[],K=0){return _[K]=this.x,_[K+1]=this.y,_[K+2]=this.z,_}fromBufferAttribute(_,K){return this.x=_.getX(K),this.y=_.getY(K),this.z=_.getZ(K),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=Math.random()*Math.PI*2,K=Math.random()*2-1,Z=Math.sqrt(1-K*K);return this.x=Z*Math.cos(_),this.y=K,this.z=Z*Math.sin(_),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Matrix3{constructor(_,K,Z,te,ie,se,oe,ae,le){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],_!==void 0&&this.set(_,K,Z,te,ie,se,oe,ae,le)}set(_,K,Z,te,ie,se,oe,ae,le){const ue=this.elements;return ue[0]=_,ue[1]=te,ue[2]=oe,ue[3]=K,ue[4]=ie,ue[5]=ae,ue[6]=Z,ue[7]=se,ue[8]=le,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const K=this.elements,Z=_.elements;return K[0]=Z[0],K[1]=Z[1],K[2]=Z[2],K[3]=Z[3],K[4]=Z[4],K[5]=Z[5],K[6]=Z[6],K[7]=Z[7],K[8]=Z[8],this}extractBasis(_,K,Z){return _.setFromMatrix3Column(this,0),K.setFromMatrix3Column(this,1),Z.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const K=_.elements;return this.set(K[0],K[4],K[8],K[1],K[5],K[9],K[2],K[6],K[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,K){const Z=_.elements,te=K.elements,ie=this.elements,se=Z[0],oe=Z[3],ae=Z[6],le=Z[1],ue=Z[4],fe=Z[7],he=Z[2],ge=Z[5],_e=Z[8],Se=te[0],Ee=te[3],ye=te[6],be=te[1],we=te[4],Pe=te[7],Oe=te[2],Be=te[5],Ue=te[8];return ie[0]=se*Se+oe*be+ae*Oe,ie[3]=se*Ee+oe*we+ae*Be,ie[6]=se*ye+oe*Pe+ae*Ue,ie[1]=le*Se+ue*be+fe*Oe,ie[4]=le*Ee+ue*we+fe*Be,ie[7]=le*ye+ue*Pe+fe*Ue,ie[2]=he*Se+ge*be+_e*Oe,ie[5]=he*Ee+ge*we+_e*Be,ie[8]=he*ye+ge*Pe+_e*Ue,this}multiplyScalar(_){const K=this.elements;return K[0]*=_,K[3]*=_,K[6]*=_,K[1]*=_,K[4]*=_,K[7]*=_,K[2]*=_,K[5]*=_,K[8]*=_,this}determinant(){const _=this.elements,K=_[0],Z=_[1],te=_[2],ie=_[3],se=_[4],oe=_[5],ae=_[6],le=_[7],ue=_[8];return K*se*ue-K*oe*le-Z*ie*ue+Z*oe*ae+te*ie*le-te*se*ae}invert(){const _=this.elements,K=_[0],Z=_[1],te=_[2],ie=_[3],se=_[4],oe=_[5],ae=_[6],le=_[7],ue=_[8],fe=ue*se-oe*le,he=oe*ae-ue*ie,ge=le*ie-se*ae,_e=K*fe+Z*he+te*ge;if(_e===0)return this.set(0,0,0,0,0,0,0,0,0);const Se=1/_e;return _[0]=fe*Se,_[1]=(te*le-ue*Z)*Se,_[2]=(oe*Z-te*se)*Se,_[3]=he*Se,_[4]=(ue*K-te*ae)*Se,_[5]=(te*ie-oe*K)*Se,_[6]=ge*Se,_[7]=(Z*ae-le*K)*Se,_[8]=(se*K-Z*ie)*Se,this}transpose(){let _;const K=this.elements;return _=K[1],K[1]=K[3],K[3]=_,_=K[2],K[2]=K[6],K[6]=_,_=K[5],K[5]=K[7],K[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const K=this.elements;return _[0]=K[0],_[1]=K[3],_[2]=K[6],_[3]=K[1],_[4]=K[4],_[5]=K[7],_[6]=K[2],_[7]=K[5],_[8]=K[8],this}setUvTransform(_,K,Z,te,ie,se,oe){const ae=Math.cos(ie),le=Math.sin(ie);return this.set(Z*ae,Z*le,-Z*(ae*se+le*oe)+se+_,-te*le,te*ae,-te*(-le*se+ae*oe)+oe+K,0,0,1),this}scale(_,K){return this.premultiply(_m3.makeScale(_,K)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,K){return this.premultiply(_m3.makeTranslation(_,K)),this}makeTranslation(_,K){return _.isVector2?this.set(1,0,_.x,0,1,_.y,0,0,1):this.set(1,0,_,0,1,K,0,0,1),this}makeRotation(_){const K=Math.cos(_),Z=Math.sin(_);return this.set(K,-Z,0,Z,K,0,0,0,1),this}makeScale(_,K){return this.set(_,0,0,0,K,0,0,0,1),this}equals(_){const K=this.elements,Z=_.elements;for(let te=0;te<9;te++)if(K[te]!==Z[te])return!1;return!0}fromArray(_,K=0){for(let Z=0;Z<9;Z++)this.elements[Z]=_[Z+K];return this}toArray(_=[],K=0){const Z=this.elements;return _[K]=Z[0],_[K+1]=Z[1],_[K+2]=Z[2],_[K+3]=Z[3],_[K+4]=Z[4],_[K+5]=Z[5],_[K+6]=Z[6],_[K+7]=Z[7],_[K+8]=Z[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(ne){for(let _=ne.length-1;_>=0;--_)if(ne[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(ne,_){return new TYPED_ARRAYS[ne](_)}function createElementNS(ne){return document.createElementNS("http://www.w3.org/1999/xhtml",ne)}function createCanvasElement(){const ne=createElementNS("canvas");return ne.style.display="block",ne}const _cache={};function warnOnce(ne){ne in _cache||(_cache[ne]=!0,console.warn(ne))}function probeAsync(ne,_,K){return new Promise(function(Z,te){function ie(){switch(ne.clientWaitSync(_,ne.SYNC_FLUSH_COMMANDS_BIT,0)){case ne.WAIT_FAILED:te();break;case ne.TIMEOUT_EXPIRED:setTimeout(ie,K);break;default:Z()}}setTimeout(ie,K)})}const LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const ne={enabled:!0,workingColorSpace:LinearSRGBColorSpace$1,spaces:{},convert:function(te,ie,se){return this.enabled===!1||ie===se||!ie||!se||(this.spaces[ie].transfer===SRGBTransfer&&(te.r=SRGBToLinear(te.r),te.g=SRGBToLinear(te.g),te.b=SRGBToLinear(te.b)),this.spaces[ie].primaries!==this.spaces[se].primaries&&(te.applyMatrix3(this.spaces[ie].toXYZ),te.applyMatrix3(this.spaces[se].fromXYZ)),this.spaces[se].transfer===SRGBTransfer&&(te.r=LinearToSRGB(te.r),te.g=LinearToSRGB(te.g),te.b=LinearToSRGB(te.b))),te},workingToColorSpace:function(te,ie){return this.convert(te,this.workingColorSpace,ie)},colorSpaceToWorking:function(te,ie){return this.convert(te,ie,this.workingColorSpace)},getPrimaries:function(te){return this.spaces[te].primaries},getTransfer:function(te){return te===NoColorSpace?LinearTransfer:this.spaces[te].transfer},getLuminanceCoefficients:function(te,ie=this.workingColorSpace){return te.fromArray(this.spaces[ie].luminanceCoefficients)},define:function(te){Object.assign(this.spaces,te)},_getMatrix:function(te,ie,se){return te.copy(this.spaces[ie].toXYZ).multiply(this.spaces[se].fromXYZ)},_getDrawingBufferColorSpace:function(te){return this.spaces[te].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(te=this.workingColorSpace){return this.spaces[te].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(te,ie){return warnOnce("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),ne.workingToColorSpace(te,ie)},toWorkingColorSpace:function(te,ie){return warnOnce("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),ne.colorSpaceToWorking(te,ie)}},_=[.64,.33,.3,.6,.15,.06],K=[.2126,.7152,.0722],Z=[.3127,.329];return ne.define({[LinearSRGBColorSpace$1]:{primaries:_,whitePoint:Z,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:K,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace$1},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}},[SRGBColorSpace$1]:{primaries:_,whitePoint:Z,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:K,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}}}),ne}const ColorManagement=createColorManagement();function SRGBToLinear(ne){return ne<.04045?ne*.0773993808:Math.pow(ne*.9478672986+.0521327014,2.4)}function LinearToSRGB(ne){return ne<.0031308?ne*12.92:1.055*Math.pow(ne,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(_,K="image/png"){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let Z;if(_ instanceof HTMLCanvasElement)Z=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const te=_canvas.getContext("2d");_ instanceof ImageData?te.putImageData(_,0,0):te.drawImage(_,0,0,_.width,_.height),Z=_canvas}return Z.toDataURL(K)}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const K=createElementNS("canvas");K.width=_.width,K.height=_.height;const Z=K.getContext("2d");Z.drawImage(_,0,0,_.width,_.height);const te=Z.getImageData(0,0,_.width,_.height),ie=te.data;for(let se=0;se<ie.length;se++)ie[se]=SRGBToLinear(ie[se]/255)*255;return Z.putImageData(te,0,0),K}else if(_.data){const K=_.data.slice(0);for(let Z=0;Z<K.length;Z++)K instanceof Uint8Array||K instanceof Uint8ClampedArray?K[Z]=Math.floor(SRGBToLinear(K[Z]/255)*255):K[Z]=SRGBToLinear(K[Z]);return{data:K,width:_.width,height:_.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}let _sourceId=0;class Source{constructor(_=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=_,this.dataReady=!0,this.version=0}getSize(_){const K=this.data;return K instanceof HTMLVideoElement?_.set(K.videoWidth,K.videoHeight,0):K instanceof VideoFrame?_.set(K.displayHeight,K.displayWidth,0):K!==null?_.set(K.width,K.height,K.depth||0):_.set(0,0,0),_}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const K=_===void 0||typeof _=="string";if(!K&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const Z={uuid:this.uuid,url:""},te=this.data;if(te!==null){let ie;if(Array.isArray(te)){ie=[];for(let se=0,oe=te.length;se<oe;se++)te[se].isDataTexture?ie.push(serializeImage(te[se].image)):ie.push(serializeImage(te[se]))}else ie=serializeImage(te);Z.url=ie}return K||(_.images[this.uuid]=Z),Z}}function serializeImage(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap?ImageUtils.getDataURL(ne):ne.data?{data:Array.from(ne.data),width:ne.width,height:ne.height,type:ne.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;const _tempVec3=new Vector3;class Texture extends EventDispatcher$1{constructor(_=Texture.DEFAULT_IMAGE,K=Texture.DEFAULT_MAPPING,Z=ClampToEdgeWrapping,te=ClampToEdgeWrapping,ie=LinearFilter,se=LinearMipmapLinearFilter,oe=RGBAFormat,ae=UnsignedByteType,le=Texture.DEFAULT_ANISOTROPY,ue=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=K,this.channel=0,this.wrapS=Z,this.wrapT=te,this.magFilter=ie,this.minFilter=se,this.anisotropy=le,this.format=oe,this.internalFormat=null,this.type=ae,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=ue,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(_&&_.depth&&_.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_tempVec3).x}get height(){return this.source.getSize(_tempVec3).y}get depth(){return this.source.getSize(_tempVec3).z}get image(){return this.source.data}set image(_=null){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(_,K){this.updateRanges.push({start:_,count:K})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.channel=_.channel,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.colorSpace=_.colorSpace,this.renderTarget=_.renderTarget,this.isRenderTargetTexture=_.isRenderTargetTexture,this.isArrayTexture=_.isArrayTexture,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}setValues(_){for(const K in _){const Z=_[K];if(Z===void 0){console.warn(`THREE.Texture.setValues(): parameter '${K}' has value of undefined.`);continue}const te=this[K];if(te===void 0){console.warn(`THREE.Texture.setValues(): property '${K}' does not exist.`);continue}te&&Z&&te.isVector2&&Z.isVector2||te&&Z&&te.isVector3&&Z.isVector3||te&&Z&&te.isMatrix3&&Z.isMatrix3?te.copy(Z):this[K]=Z}}toJSON(_){const K=_===void 0||typeof _=="string";if(!K&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const Z={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(Z.userData=this.userData),K||(_.textures[this.uuid]=Z),Z}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(_){_===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,K=0,Z=0,te=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=K,this.z=Z,this.w=te}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,K,Z,te){return this.x=_,this.y=K,this.z=Z,this.w=te,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,K){switch(_){case 0:this.x=K;break;case 1:this.y=K;break;case 2:this.z=K;break;case 3:this.w=K;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,K){return this.x=_.x+K.x,this.y=_.y+K.y,this.z=_.z+K.z,this.w=_.w+K.w,this}addScaledVector(_,K){return this.x+=_.x*K,this.y+=_.y*K,this.z+=_.z*K,this.w+=_.w*K,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,K){return this.x=_.x-K.x,this.y=_.y-K.y,this.z=_.z-K.z,this.w=_.w-K.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const K=this.x,Z=this.y,te=this.z,ie=this.w,se=_.elements;return this.x=se[0]*K+se[4]*Z+se[8]*te+se[12]*ie,this.y=se[1]*K+se[5]*Z+se[9]*te+se[13]*ie,this.z=se[2]*K+se[6]*Z+se[10]*te+se[14]*ie,this.w=se[3]*K+se[7]*Z+se[11]*te+se[15]*ie,this}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this.w/=_.w,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const K=Math.sqrt(1-_.w*_.w);return K<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/K,this.y=_.y/K,this.z=_.z/K),this}setAxisAngleFromRotationMatrix(_){let K,Z,te,ie;const ae=_.elements,le=ae[0],ue=ae[4],fe=ae[8],he=ae[1],ge=ae[5],_e=ae[9],Se=ae[2],Ee=ae[6],ye=ae[10];if(Math.abs(ue-he)<.01&&Math.abs(fe-Se)<.01&&Math.abs(_e-Ee)<.01){if(Math.abs(ue+he)<.1&&Math.abs(fe+Se)<.1&&Math.abs(_e+Ee)<.1&&Math.abs(le+ge+ye-3)<.1)return this.set(1,0,0,0),this;K=Math.PI;const we=(le+1)/2,Pe=(ge+1)/2,Oe=(ye+1)/2,Be=(ue+he)/4,Ue=(fe+Se)/4,$e=(_e+Ee)/4;return we>Pe&&we>Oe?we<.01?(Z=0,te=.707106781,ie=.707106781):(Z=Math.sqrt(we),te=Be/Z,ie=Ue/Z):Pe>Oe?Pe<.01?(Z=.707106781,te=0,ie=.707106781):(te=Math.sqrt(Pe),Z=Be/te,ie=$e/te):Oe<.01?(Z=.707106781,te=.707106781,ie=0):(ie=Math.sqrt(Oe),Z=Ue/ie,te=$e/ie),this.set(Z,te,ie,K),this}let be=Math.sqrt((Ee-_e)*(Ee-_e)+(fe-Se)*(fe-Se)+(he-ue)*(he-ue));return Math.abs(be)<.001&&(be=1),this.x=(Ee-_e)/be,this.y=(fe-Se)/be,this.z=(he-ue)/be,this.w=Math.acos((le+ge+ye-1)/2),this}setFromMatrixPosition(_){const K=_.elements;return this.x=K[12],this.y=K[13],this.z=K[14],this.w=K[15],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,K){return this.x=clamp$3(this.x,_.x,K.x),this.y=clamp$3(this.y,_.y,K.y),this.z=clamp$3(this.z,_.z,K.z),this.w=clamp$3(this.w,_.w,K.w),this}clampScalar(_,K){return this.x=clamp$3(this.x,_,K),this.y=clamp$3(this.y,_,K),this.z=clamp$3(this.z,_,K),this.w=clamp$3(this.w,_,K),this}clampLength(_,K){const Z=this.length();return this.divideScalar(Z||1).multiplyScalar(clamp$3(Z,_,K))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,K){return this.x+=(_.x-this.x)*K,this.y+=(_.y-this.y)*K,this.z+=(_.z-this.z)*K,this.w+=(_.w-this.w)*K,this}lerpVectors(_,K,Z){return this.x=_.x+(K.x-_.x)*Z,this.y=_.y+(K.y-_.y)*Z,this.z=_.z+(K.z-_.z)*Z,this.w=_.w+(K.w-_.w)*Z,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,K=0){return this.x=_[K],this.y=_[K+1],this.z=_[K+2],this.w=_[K+3],this}toArray(_=[],K=0){return _[K]=this.x,_[K+1]=this.y,_[K+2]=this.z,_[K+3]=this.w,_}fromBufferAttribute(_,K){return this.x=_.getX(K),this.y=_.getY(K),this.z=_.getZ(K),this.w=_.getW(K),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher$1{constructor(_=1,K=1,Z={}){super(),Z=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},Z),this.isRenderTarget=!0,this.width=_,this.height=K,this.depth=Z.depth,this.scissor=new Vector4(0,0,_,K),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,K);const te={width:_,height:K,depth:Z.depth},ie=new Texture(te);this.textures=[];const se=Z.count;for(let oe=0;oe<se;oe++)this.textures[oe]=ie.clone(),this.textures[oe].isRenderTargetTexture=!0,this.textures[oe].renderTarget=this;this._setTextureOptions(Z),this.depthBuffer=Z.depthBuffer,this.stencilBuffer=Z.stencilBuffer,this.resolveDepthBuffer=Z.resolveDepthBuffer,this.resolveStencilBuffer=Z.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=Z.depthTexture,this.samples=Z.samples,this.multiview=Z.multiview}_setTextureOptions(_={}){const K={minFilter:LinearFilter,generateMipmaps:!1,flipY:!1,internalFormat:null};_.mapping!==void 0&&(K.mapping=_.mapping),_.wrapS!==void 0&&(K.wrapS=_.wrapS),_.wrapT!==void 0&&(K.wrapT=_.wrapT),_.wrapR!==void 0&&(K.wrapR=_.wrapR),_.magFilter!==void 0&&(K.magFilter=_.magFilter),_.minFilter!==void 0&&(K.minFilter=_.minFilter),_.format!==void 0&&(K.format=_.format),_.type!==void 0&&(K.type=_.type),_.anisotropy!==void 0&&(K.anisotropy=_.anisotropy),_.colorSpace!==void 0&&(K.colorSpace=_.colorSpace),_.flipY!==void 0&&(K.flipY=_.flipY),_.generateMipmaps!==void 0&&(K.generateMipmaps=_.generateMipmaps),_.internalFormat!==void 0&&(K.internalFormat=_.internalFormat);for(let Z=0;Z<this.textures.length;Z++)this.textures[Z].setValues(K)}get texture(){return this.textures[0]}set texture(_){this.textures[0]=_}set depthTexture(_){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),_!==null&&(_.renderTarget=this),this._depthTexture=_}get depthTexture(){return this._depthTexture}setSize(_,K,Z=1){if(this.width!==_||this.height!==K||this.depth!==Z){this.width=_,this.height=K,this.depth=Z;for(let te=0,ie=this.textures.length;te<ie;te++)this.textures[te].image.width=_,this.textures[te].image.height=K,this.textures[te].image.depth=Z,this.textures[te].isArrayTexture=this.textures[te].image.depth>1;this.dispose()}this.viewport.set(0,0,_,K),this.scissor.set(0,0,_,K)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.textures.length=0;for(let K=0,Z=_.textures.length;K<Z;K++){this.textures[K]=_.textures[K].clone(),this.textures[K].isRenderTargetTexture=!0,this.textures[K].renderTarget=this;const te=Object.assign({},_.textures[K].image);this.textures[K].source=new Source(te)}return this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,this.resolveDepthBuffer=_.resolveDepthBuffer,this.resolveStencilBuffer=_.resolveStencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(_=1,K=1,Z={}){super(_,K,Z),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(_=null,K=1,Z=1,te=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:K,height:Z,depth:te},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,K=1,Z=1,te={}){super(_,K,te),this.isWebGLArrayRenderTarget=!0,this.depth=Z,this.texture=new DataArrayTexture(null,_,K,Z),this._setTextureOptions(te),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(_=null,K=1,Z=1,te=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:K,height:Z,depth:te},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,K=1,Z=1,te={}){super(_,K,te),this.isWebGL3DRenderTarget=!0,this.depth=Z,this.texture=new Data3DTexture(null,_,K,Z),this._setTextureOptions(te),this.texture.isRenderTargetTexture=!0}}class Box3{constructor(_=new Vector3(1/0,1/0,1/0),K=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=K}set(_,K){return this.min.copy(_),this.max.copy(K),this}setFromArray(_){this.makeEmpty();for(let K=0,Z=_.length;K<Z;K+=3)this.expandByPoint(_vector$b.fromArray(_,K));return this}setFromBufferAttribute(_){this.makeEmpty();for(let K=0,Z=_.count;K<Z;K++)this.expandByPoint(_vector$b.fromBufferAttribute(_,K));return this}setFromPoints(_){this.makeEmpty();for(let K=0,Z=_.length;K<Z;K++)this.expandByPoint(_[K]);return this}setFromCenterAndSize(_,K){const Z=_vector$b.copy(K).multiplyScalar(.5);return this.min.copy(_).sub(Z),this.max.copy(_).add(Z),this}setFromObject(_,K=!1){return this.makeEmpty(),this.expandByObject(_,K)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,K=!1){_.updateWorldMatrix(!1,!1);const Z=_.geometry;if(Z!==void 0){const ie=Z.getAttribute("position");if(K===!0&&ie!==void 0&&_.isInstancedMesh!==!0)for(let se=0,oe=ie.count;se<oe;se++)_.isMesh===!0?_.getVertexPosition(se,_vector$b):_vector$b.fromBufferAttribute(ie,se),_vector$b.applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$b);else _.boundingBox!==void 0?(_.boundingBox===null&&_.computeBoundingBox(),_box$4.copy(_.boundingBox)):(Z.boundingBox===null&&Z.computeBoundingBox(),_box$4.copy(Z.boundingBox)),_box$4.applyMatrix4(_.matrixWorld),this.union(_box$4)}const te=_.children;for(let ie=0,se=te.length;ie<se;ie++)this.expandByObject(te[ie],K);return this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y&&_.z>=this.min.z&&_.z<=this.max.z}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,K){return K.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y&&_.max.z>=this.min.z&&_.min.z<=this.max.z}intersectsSphere(_){return this.clampPoint(_.center,_vector$b),_vector$b.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let K,Z;return _.normal.x>0?(K=_.normal.x*this.min.x,Z=_.normal.x*this.max.x):(K=_.normal.x*this.max.x,Z=_.normal.x*this.min.x),_.normal.y>0?(K+=_.normal.y*this.min.y,Z+=_.normal.y*this.max.y):(K+=_.normal.y*this.max.y,Z+=_.normal.y*this.min.y),_.normal.z>0?(K+=_.normal.z*this.min.z,Z+=_.normal.z*this.max.z):(K+=_.normal.z*this.max.z,Z+=_.normal.z*this.min.z),K<=-_.constant&&Z>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let K=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(K,_v0$2,_v1$7,_v2$4,_extents)||(K=[1,0,0,0,1,0,0,0,1],!satForAxes(K,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),K=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(K,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(_,K){return K.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$b).distanceTo(_)}getBoundingSphere(_){return this.isEmpty()?_.makeEmpty():(this.getCenter(_.center),_.radius=this.getSize(_vector$b).length()*.5),_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(_){return this.min.fromArray(_.min),this.max.fromArray(_.max),this}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(ne,_,K,Z,te){for(let ie=0,se=ne.length-3;ie<=se;ie+=3){_testAxis.fromArray(ne,ie);const oe=te.x*Math.abs(_testAxis.x)+te.y*Math.abs(_testAxis.y)+te.z*Math.abs(_testAxis.z),ae=_.dot(_testAxis),le=K.dot(_testAxis),ue=Z.dot(_testAxis);if(Math.max(-Math.max(ae,le,ue),Math.min(ae,le,ue))>oe)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(_=new Vector3,K=-1){this.isSphere=!0,this.center=_,this.radius=K}set(_,K){return this.center.copy(_),this.radius=K,this}setFromPoints(_,K){const Z=this.center;K!==void 0?Z.copy(K):_box$3.setFromPoints(_).getCenter(Z);let te=0;for(let ie=0,se=_.length;ie<se;ie++)te=Math.max(te,Z.distanceToSquared(_[ie]));return this.radius=Math.sqrt(te),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const K=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=K*K}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,K){const Z=this.center.distanceToSquared(_);return K.copy(_),Z>this.radius*this.radius&&(K.sub(this.center).normalize(),K.multiplyScalar(this.radius).add(this.center)),K}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const K=_v1$6.lengthSq();if(K>this.radius*this.radius){const Z=Math.sqrt(K),te=(Z-this.radius)*.5;this.center.addScaledVector(_v1$6,te/Z),this.radius+=te}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(_){return this.radius=_.radius,this.center.fromArray(_.center),this}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(_=new Vector3,K=new Vector3(0,0,-1)){this.origin=_,this.direction=K}set(_,K){return this.origin.copy(_),this.direction.copy(K),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,K){return K.copy(this.origin).addScaledVector(this.direction,_)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$a)),this}closestPointToPoint(_,K){K.subVectors(_,this.origin);const Z=K.dot(this.direction);return Z<0?K.copy(this.origin):K.copy(this.origin).addScaledVector(this.direction,Z)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const K=_vector$a.subVectors(_,this.origin).dot(this.direction);return K<0?this.origin.distanceToSquared(_):(_vector$a.copy(this.origin).addScaledVector(this.direction,K),_vector$a.distanceToSquared(_))}distanceSqToSegment(_,K,Z,te){_segCenter.copy(_).add(K).multiplyScalar(.5),_segDir.copy(K).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const ie=_.distanceTo(K)*.5,se=-this.direction.dot(_segDir),oe=_diff.dot(this.direction),ae=-_diff.dot(_segDir),le=_diff.lengthSq(),ue=Math.abs(1-se*se);let fe,he,ge,_e;if(ue>0)if(fe=se*ae-oe,he=se*oe-ae,_e=ie*ue,fe>=0)if(he>=-_e)if(he<=_e){const Se=1/ue;fe*=Se,he*=Se,ge=fe*(fe+se*he+2*oe)+he*(se*fe+he+2*ae)+le}else he=ie,fe=Math.max(0,-(se*he+oe)),ge=-fe*fe+he*(he+2*ae)+le;else he=-ie,fe=Math.max(0,-(se*he+oe)),ge=-fe*fe+he*(he+2*ae)+le;else he<=-_e?(fe=Math.max(0,-(-se*ie+oe)),he=fe>0?-ie:Math.min(Math.max(-ie,-ae),ie),ge=-fe*fe+he*(he+2*ae)+le):he<=_e?(fe=0,he=Math.min(Math.max(-ie,-ae),ie),ge=he*(he+2*ae)+le):(fe=Math.max(0,-(se*ie+oe)),he=fe>0?ie:Math.min(Math.max(-ie,-ae),ie),ge=-fe*fe+he*(he+2*ae)+le);else he=se>0?-ie:ie,fe=Math.max(0,-(se*he+oe)),ge=-fe*fe+he*(he+2*ae)+le;return Z&&Z.copy(this.origin).addScaledVector(this.direction,fe),te&&te.copy(_segCenter).addScaledVector(_segDir,he),ge}intersectSphere(_,K){_vector$a.subVectors(_.center,this.origin);const Z=_vector$a.dot(this.direction),te=_vector$a.dot(_vector$a)-Z*Z,ie=_.radius*_.radius;if(te>ie)return null;const se=Math.sqrt(ie-te),oe=Z-se,ae=Z+se;return ae<0?null:oe<0?this.at(ae,K):this.at(oe,K)}intersectsSphere(_){return _.radius<0?!1:this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const K=_.normal.dot(this.direction);if(K===0)return _.distanceToPoint(this.origin)===0?0:null;const Z=-(this.origin.dot(_.normal)+_.constant)/K;return Z>=0?Z:null}intersectPlane(_,K){const Z=this.distanceToPlane(_);return Z===null?null:this.at(Z,K)}intersectsPlane(_){const K=_.distanceToPoint(this.origin);return K===0||_.normal.dot(this.direction)*K<0}intersectBox(_,K){let Z,te,ie,se,oe,ae;const le=1/this.direction.x,ue=1/this.direction.y,fe=1/this.direction.z,he=this.origin;return le>=0?(Z=(_.min.x-he.x)*le,te=(_.max.x-he.x)*le):(Z=(_.max.x-he.x)*le,te=(_.min.x-he.x)*le),ue>=0?(ie=(_.min.y-he.y)*ue,se=(_.max.y-he.y)*ue):(ie=(_.max.y-he.y)*ue,se=(_.min.y-he.y)*ue),Z>se||ie>te||((ie>Z||isNaN(Z))&&(Z=ie),(se<te||isNaN(te))&&(te=se),fe>=0?(oe=(_.min.z-he.z)*fe,ae=(_.max.z-he.z)*fe):(oe=(_.max.z-he.z)*fe,ae=(_.min.z-he.z)*fe),Z>ae||oe>te)||((oe>Z||Z!==Z)&&(Z=oe),(ae<te||te!==te)&&(te=ae),te<0)?null:this.at(Z>=0?Z:te,K)}intersectsBox(_){return this.intersectBox(_,_vector$a)!==null}intersectTriangle(_,K,Z,te,ie){_edge1.subVectors(K,_),_edge2.subVectors(Z,_),_normal$1.crossVectors(_edge1,_edge2);let se=this.direction.dot(_normal$1),oe;if(se>0){if(te)return null;oe=1}else if(se<0)oe=-1,se=-se;else return null;_diff.subVectors(this.origin,_);const ae=oe*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ae<0)return null;const le=oe*this.direction.dot(_edge1.cross(_diff));if(le<0||ae+le>se)return null;const ue=-oe*_diff.dot(_normal$1);return ue<0?null:this.at(ue/se,ie)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(_,K,Z,te,ie,se,oe,ae,le,ue,fe,he,ge,_e,Se,Ee){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_!==void 0&&this.set(_,K,Z,te,ie,se,oe,ae,le,ue,fe,he,ge,_e,Se,Ee)}set(_,K,Z,te,ie,se,oe,ae,le,ue,fe,he,ge,_e,Se,Ee){const ye=this.elements;return ye[0]=_,ye[4]=K,ye[8]=Z,ye[12]=te,ye[1]=ie,ye[5]=se,ye[9]=oe,ye[13]=ae,ye[2]=le,ye[6]=ue,ye[10]=fe,ye[14]=he,ye[3]=ge,ye[7]=_e,ye[11]=Se,ye[15]=Ee,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const K=this.elements,Z=_.elements;return K[0]=Z[0],K[1]=Z[1],K[2]=Z[2],K[3]=Z[3],K[4]=Z[4],K[5]=Z[5],K[6]=Z[6],K[7]=Z[7],K[8]=Z[8],K[9]=Z[9],K[10]=Z[10],K[11]=Z[11],K[12]=Z[12],K[13]=Z[13],K[14]=Z[14],K[15]=Z[15],this}copyPosition(_){const K=this.elements,Z=_.elements;return K[12]=Z[12],K[13]=Z[13],K[14]=Z[14],this}setFromMatrix3(_){const K=_.elements;return this.set(K[0],K[3],K[6],0,K[1],K[4],K[7],0,K[2],K[5],K[8],0,0,0,0,1),this}extractBasis(_,K,Z){return _.setFromMatrixColumn(this,0),K.setFromMatrixColumn(this,1),Z.setFromMatrixColumn(this,2),this}makeBasis(_,K,Z){return this.set(_.x,K.x,Z.x,0,_.y,K.y,Z.y,0,_.z,K.z,Z.z,0,0,0,0,1),this}extractRotation(_){const K=this.elements,Z=_.elements,te=1/_v1$5.setFromMatrixColumn(_,0).length(),ie=1/_v1$5.setFromMatrixColumn(_,1).length(),se=1/_v1$5.setFromMatrixColumn(_,2).length();return K[0]=Z[0]*te,K[1]=Z[1]*te,K[2]=Z[2]*te,K[3]=0,K[4]=Z[4]*ie,K[5]=Z[5]*ie,K[6]=Z[6]*ie,K[7]=0,K[8]=Z[8]*se,K[9]=Z[9]*se,K[10]=Z[10]*se,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,this}makeRotationFromEuler(_){const K=this.elements,Z=_.x,te=_.y,ie=_.z,se=Math.cos(Z),oe=Math.sin(Z),ae=Math.cos(te),le=Math.sin(te),ue=Math.cos(ie),fe=Math.sin(ie);if(_.order==="XYZ"){const he=se*ue,ge=se*fe,_e=oe*ue,Se=oe*fe;K[0]=ae*ue,K[4]=-ae*fe,K[8]=le,K[1]=ge+_e*le,K[5]=he-Se*le,K[9]=-oe*ae,K[2]=Se-he*le,K[6]=_e+ge*le,K[10]=se*ae}else if(_.order==="YXZ"){const he=ae*ue,ge=ae*fe,_e=le*ue,Se=le*fe;K[0]=he+Se*oe,K[4]=_e*oe-ge,K[8]=se*le,K[1]=se*fe,K[5]=se*ue,K[9]=-oe,K[2]=ge*oe-_e,K[6]=Se+he*oe,K[10]=se*ae}else if(_.order==="ZXY"){const he=ae*ue,ge=ae*fe,_e=le*ue,Se=le*fe;K[0]=he-Se*oe,K[4]=-se*fe,K[8]=_e+ge*oe,K[1]=ge+_e*oe,K[5]=se*ue,K[9]=Se-he*oe,K[2]=-se*le,K[6]=oe,K[10]=se*ae}else if(_.order==="ZYX"){const he=se*ue,ge=se*fe,_e=oe*ue,Se=oe*fe;K[0]=ae*ue,K[4]=_e*le-ge,K[8]=he*le+Se,K[1]=ae*fe,K[5]=Se*le+he,K[9]=ge*le-_e,K[2]=-le,K[6]=oe*ae,K[10]=se*ae}else if(_.order==="YZX"){const he=se*ae,ge=se*le,_e=oe*ae,Se=oe*le;K[0]=ae*ue,K[4]=Se-he*fe,K[8]=_e*fe+ge,K[1]=fe,K[5]=se*ue,K[9]=-oe*ue,K[2]=-le*ue,K[6]=ge*fe+_e,K[10]=he-Se*fe}else if(_.order==="XZY"){const he=se*ae,ge=se*le,_e=oe*ae,Se=oe*le;K[0]=ae*ue,K[4]=-fe,K[8]=le*ue,K[1]=he*fe+Se,K[5]=se*ue,K[9]=ge*fe-_e,K[2]=_e*fe-ge,K[6]=oe*ue,K[10]=Se*fe+he}return K[3]=0,K[7]=0,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,K,Z){const te=this.elements;return _z.subVectors(_,K),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(Z,_z),_x.lengthSq()===0&&(Math.abs(Z.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(Z,_z)),_x.normalize(),_y.crossVectors(_z,_x),te[0]=_x.x,te[4]=_y.x,te[8]=_z.x,te[1]=_x.y,te[5]=_y.y,te[9]=_z.y,te[2]=_x.z,te[6]=_y.z,te[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,K){const Z=_.elements,te=K.elements,ie=this.elements,se=Z[0],oe=Z[4],ae=Z[8],le=Z[12],ue=Z[1],fe=Z[5],he=Z[9],ge=Z[13],_e=Z[2],Se=Z[6],Ee=Z[10],ye=Z[14],be=Z[3],we=Z[7],Pe=Z[11],Oe=Z[15],Be=te[0],Ue=te[4],$e=te[8],De=te[12],ke=te[1],Ge=te[5],Je=te[9],Ye=te[13],Qe=te[2],rt=te[6],ot=te[10],ct=te[14],je=te[3],st=te[7],nt=te[11],qe=te[15];return ie[0]=se*Be+oe*ke+ae*Qe+le*je,ie[4]=se*Ue+oe*Ge+ae*rt+le*st,ie[8]=se*$e+oe*Je+ae*ot+le*nt,ie[12]=se*De+oe*Ye+ae*ct+le*qe,ie[1]=ue*Be+fe*ke+he*Qe+ge*je,ie[5]=ue*Ue+fe*Ge+he*rt+ge*st,ie[9]=ue*$e+fe*Je+he*ot+ge*nt,ie[13]=ue*De+fe*Ye+he*ct+ge*qe,ie[2]=_e*Be+Se*ke+Ee*Qe+ye*je,ie[6]=_e*Ue+Se*Ge+Ee*rt+ye*st,ie[10]=_e*$e+Se*Je+Ee*ot+ye*nt,ie[14]=_e*De+Se*Ye+Ee*ct+ye*qe,ie[3]=be*Be+we*ke+Pe*Qe+Oe*je,ie[7]=be*Ue+we*Ge+Pe*rt+Oe*st,ie[11]=be*$e+we*Je+Pe*ot+Oe*nt,ie[15]=be*De+we*Ye+Pe*ct+Oe*qe,this}multiplyScalar(_){const K=this.elements;return K[0]*=_,K[4]*=_,K[8]*=_,K[12]*=_,K[1]*=_,K[5]*=_,K[9]*=_,K[13]*=_,K[2]*=_,K[6]*=_,K[10]*=_,K[14]*=_,K[3]*=_,K[7]*=_,K[11]*=_,K[15]*=_,this}determinant(){const _=this.elements,K=_[0],Z=_[4],te=_[8],ie=_[12],se=_[1],oe=_[5],ae=_[9],le=_[13],ue=_[2],fe=_[6],he=_[10],ge=_[14],_e=_[3],Se=_[7],Ee=_[11],ye=_[15];return _e*(+ie*ae*fe-te*le*fe-ie*oe*he+Z*le*he+te*oe*ge-Z*ae*ge)+Se*(+K*ae*ge-K*le*he+ie*se*he-te*se*ge+te*le*ue-ie*ae*ue)+Ee*(+K*le*fe-K*oe*ge-ie*se*fe+Z*se*ge+ie*oe*ue-Z*le*ue)+ye*(-te*oe*ue-K*ae*fe+K*oe*he+te*se*fe-Z*se*he+Z*ae*ue)}transpose(){const _=this.elements;let K;return K=_[1],_[1]=_[4],_[4]=K,K=_[2],_[2]=_[8],_[8]=K,K=_[6],_[6]=_[9],_[9]=K,K=_[3],_[3]=_[12],_[12]=K,K=_[7],_[7]=_[13],_[13]=K,K=_[11],_[11]=_[14],_[14]=K,this}setPosition(_,K,Z){const te=this.elements;return _.isVector3?(te[12]=_.x,te[13]=_.y,te[14]=_.z):(te[12]=_,te[13]=K,te[14]=Z),this}invert(){const _=this.elements,K=_[0],Z=_[1],te=_[2],ie=_[3],se=_[4],oe=_[5],ae=_[6],le=_[7],ue=_[8],fe=_[9],he=_[10],ge=_[11],_e=_[12],Se=_[13],Ee=_[14],ye=_[15],be=fe*Ee*le-Se*he*le+Se*ae*ge-oe*Ee*ge-fe*ae*ye+oe*he*ye,we=_e*he*le-ue*Ee*le-_e*ae*ge+se*Ee*ge+ue*ae*ye-se*he*ye,Pe=ue*Se*le-_e*fe*le+_e*oe*ge-se*Se*ge-ue*oe*ye+se*fe*ye,Oe=_e*fe*ae-ue*Se*ae-_e*oe*he+se*Se*he+ue*oe*Ee-se*fe*Ee,Be=K*be+Z*we+te*Pe+ie*Oe;if(Be===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ue=1/Be;return _[0]=be*Ue,_[1]=(Se*he*ie-fe*Ee*ie-Se*te*ge+Z*Ee*ge+fe*te*ye-Z*he*ye)*Ue,_[2]=(oe*Ee*ie-Se*ae*ie+Se*te*le-Z*Ee*le-oe*te*ye+Z*ae*ye)*Ue,_[3]=(fe*ae*ie-oe*he*ie-fe*te*le+Z*he*le+oe*te*ge-Z*ae*ge)*Ue,_[4]=we*Ue,_[5]=(ue*Ee*ie-_e*he*ie+_e*te*ge-K*Ee*ge-ue*te*ye+K*he*ye)*Ue,_[6]=(_e*ae*ie-se*Ee*ie-_e*te*le+K*Ee*le+se*te*ye-K*ae*ye)*Ue,_[7]=(se*he*ie-ue*ae*ie+ue*te*le-K*he*le-se*te*ge+K*ae*ge)*Ue,_[8]=Pe*Ue,_[9]=(_e*fe*ie-ue*Se*ie-_e*Z*ge+K*Se*ge+ue*Z*ye-K*fe*ye)*Ue,_[10]=(se*Se*ie-_e*oe*ie+_e*Z*le-K*Se*le-se*Z*ye+K*oe*ye)*Ue,_[11]=(ue*oe*ie-se*fe*ie-ue*Z*le+K*fe*le+se*Z*ge-K*oe*ge)*Ue,_[12]=Oe*Ue,_[13]=(ue*Se*te-_e*fe*te+_e*Z*he-K*Se*he-ue*Z*Ee+K*fe*Ee)*Ue,_[14]=(_e*oe*te-se*Se*te-_e*Z*ae+K*Se*ae+se*Z*Ee-K*oe*Ee)*Ue,_[15]=(se*fe*te-ue*oe*te+ue*Z*ae-K*fe*ae-se*Z*he+K*oe*he)*Ue,this}scale(_){const K=this.elements,Z=_.x,te=_.y,ie=_.z;return K[0]*=Z,K[4]*=te,K[8]*=ie,K[1]*=Z,K[5]*=te,K[9]*=ie,K[2]*=Z,K[6]*=te,K[10]*=ie,K[3]*=Z,K[7]*=te,K[11]*=ie,this}getMaxScaleOnAxis(){const _=this.elements,K=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],Z=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],te=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(K,Z,te))}makeTranslation(_,K,Z){return _.isVector3?this.set(1,0,0,_.x,0,1,0,_.y,0,0,1,_.z,0,0,0,1):this.set(1,0,0,_,0,1,0,K,0,0,1,Z,0,0,0,1),this}makeRotationX(_){const K=Math.cos(_),Z=Math.sin(_);return this.set(1,0,0,0,0,K,-Z,0,0,Z,K,0,0,0,0,1),this}makeRotationY(_){const K=Math.cos(_),Z=Math.sin(_);return this.set(K,0,Z,0,0,1,0,0,-Z,0,K,0,0,0,0,1),this}makeRotationZ(_){const K=Math.cos(_),Z=Math.sin(_);return this.set(K,-Z,0,0,Z,K,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,K){const Z=Math.cos(K),te=Math.sin(K),ie=1-Z,se=_.x,oe=_.y,ae=_.z,le=ie*se,ue=ie*oe;return this.set(le*se+Z,le*oe-te*ae,le*ae+te*oe,0,le*oe+te*ae,ue*oe+Z,ue*ae-te*se,0,le*ae-te*oe,ue*ae+te*se,ie*ae*ae+Z,0,0,0,0,1),this}makeScale(_,K,Z){return this.set(_,0,0,0,0,K,0,0,0,0,Z,0,0,0,0,1),this}makeShear(_,K,Z,te,ie,se){return this.set(1,Z,ie,0,_,1,se,0,K,te,1,0,0,0,0,1),this}compose(_,K,Z){const te=this.elements,ie=K._x,se=K._y,oe=K._z,ae=K._w,le=ie+ie,ue=se+se,fe=oe+oe,he=ie*le,ge=ie*ue,_e=ie*fe,Se=se*ue,Ee=se*fe,ye=oe*fe,be=ae*le,we=ae*ue,Pe=ae*fe,Oe=Z.x,Be=Z.y,Ue=Z.z;return te[0]=(1-(Se+ye))*Oe,te[1]=(ge+Pe)*Oe,te[2]=(_e-we)*Oe,te[3]=0,te[4]=(ge-Pe)*Be,te[5]=(1-(he+ye))*Be,te[6]=(Ee+be)*Be,te[7]=0,te[8]=(_e+we)*Ue,te[9]=(Ee-be)*Ue,te[10]=(1-(he+Se))*Ue,te[11]=0,te[12]=_.x,te[13]=_.y,te[14]=_.z,te[15]=1,this}decompose(_,K,Z){const te=this.elements;let ie=_v1$5.set(te[0],te[1],te[2]).length();const se=_v1$5.set(te[4],te[5],te[6]).length(),oe=_v1$5.set(te[8],te[9],te[10]).length();this.determinant()<0&&(ie=-ie),_.x=te[12],_.y=te[13],_.z=te[14],_m1$2.copy(this);const le=1/ie,ue=1/se,fe=1/oe;return _m1$2.elements[0]*=le,_m1$2.elements[1]*=le,_m1$2.elements[2]*=le,_m1$2.elements[4]*=ue,_m1$2.elements[5]*=ue,_m1$2.elements[6]*=ue,_m1$2.elements[8]*=fe,_m1$2.elements[9]*=fe,_m1$2.elements[10]*=fe,K.setFromRotationMatrix(_m1$2),Z.x=ie,Z.y=se,Z.z=oe,this}makePerspective(_,K,Z,te,ie,se,oe=WebGLCoordinateSystem,ae=!1){const le=this.elements,ue=2*ie/(K-_),fe=2*ie/(Z-te),he=(K+_)/(K-_),ge=(Z+te)/(Z-te);let _e,Se;if(ae)_e=ie/(se-ie),Se=se*ie/(se-ie);else if(oe===WebGLCoordinateSystem)_e=-(se+ie)/(se-ie),Se=-2*se*ie/(se-ie);else if(oe===WebGPUCoordinateSystem)_e=-se/(se-ie),Se=-se*ie/(se-ie);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+oe);return le[0]=ue,le[4]=0,le[8]=he,le[12]=0,le[1]=0,le[5]=fe,le[9]=ge,le[13]=0,le[2]=0,le[6]=0,le[10]=_e,le[14]=Se,le[3]=0,le[7]=0,le[11]=-1,le[15]=0,this}makeOrthographic(_,K,Z,te,ie,se,oe=WebGLCoordinateSystem,ae=!1){const le=this.elements,ue=2/(K-_),fe=2/(Z-te),he=-(K+_)/(K-_),ge=-(Z+te)/(Z-te);let _e,Se;if(ae)_e=1/(se-ie),Se=se/(se-ie);else if(oe===WebGLCoordinateSystem)_e=-2/(se-ie),Se=-(se+ie)/(se-ie);else if(oe===WebGPUCoordinateSystem)_e=-1/(se-ie),Se=-ie/(se-ie);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+oe);return le[0]=ue,le[4]=0,le[8]=0,le[12]=he,le[1]=0,le[5]=fe,le[9]=0,le[13]=ge,le[2]=0,le[6]=0,le[10]=_e,le[14]=Se,le[3]=0,le[7]=0,le[11]=0,le[15]=1,this}equals(_){const K=this.elements,Z=_.elements;for(let te=0;te<16;te++)if(K[te]!==Z[te])return!1;return!0}fromArray(_,K=0){for(let Z=0;Z<16;Z++)this.elements[Z]=_[Z+K];return this}toArray(_=[],K=0){const Z=this.elements;return _[K]=Z[0],_[K+1]=Z[1],_[K+2]=Z[2],_[K+3]=Z[3],_[K+4]=Z[4],_[K+5]=Z[5],_[K+6]=Z[6],_[K+7]=Z[7],_[K+8]=Z[8],_[K+9]=Z[9],_[K+10]=Z[10],_[K+11]=Z[11],_[K+12]=Z[12],_[K+13]=Z[13],_[K+14]=Z[14],_[K+15]=Z[15],_}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(_=0,K=0,Z=0,te=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=_,this._y=K,this._z=Z,this._order=te}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,K,Z,te=this._order){return this._x=_,this._y=K,this._z=Z,this._order=te,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,K=this._order,Z=!0){const te=_.elements,ie=te[0],se=te[4],oe=te[8],ae=te[1],le=te[5],ue=te[9],fe=te[2],he=te[6],ge=te[10];switch(K){case"XYZ":this._y=Math.asin(clamp$3(oe,-1,1)),Math.abs(oe)<.9999999?(this._x=Math.atan2(-ue,ge),this._z=Math.atan2(-se,ie)):(this._x=Math.atan2(he,le),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$3(ue,-1,1)),Math.abs(ue)<.9999999?(this._y=Math.atan2(oe,ge),this._z=Math.atan2(ae,le)):(this._y=Math.atan2(-fe,ie),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$3(he,-1,1)),Math.abs(he)<.9999999?(this._y=Math.atan2(-fe,ge),this._z=Math.atan2(-se,le)):(this._y=0,this._z=Math.atan2(ae,ie));break;case"ZYX":this._y=Math.asin(-clamp$3(fe,-1,1)),Math.abs(fe)<.9999999?(this._x=Math.atan2(he,ge),this._z=Math.atan2(ae,ie)):(this._x=0,this._z=Math.atan2(-se,le));break;case"YZX":this._z=Math.asin(clamp$3(ae,-1,1)),Math.abs(ae)<.9999999?(this._x=Math.atan2(-ue,le),this._y=Math.atan2(-fe,ie)):(this._x=0,this._y=Math.atan2(oe,ge));break;case"XZY":this._z=Math.asin(-clamp$3(se,-1,1)),Math.abs(se)<.9999999?(this._x=Math.atan2(he,le),this._y=Math.atan2(oe,ie)):(this._x=Math.atan2(-ue,ge),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+K)}return this._order=K,Z===!0&&this._onChangeCallback(),this}setFromQuaternion(_,K,Z){return _matrix$2.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix$2,K,Z)}setFromVector3(_,K=this._order){return this.set(_.x,_.y,_.z,K)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],K=0){return _[K]=this._x,_[K+1]=this._y,_[K+2]=this._z,_[K+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const _=new Vector3,K=new Euler,Z=new Quaternion,te=new Vector3(1,1,1);function ie(){Z.setFromEuler(K,!1)}function se(){K.setFromQuaternion(Z,void 0,!1)}K._onChange(ie),Z._onChange(se),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:K},quaternion:{configurable:!0,enumerable:!0,value:Z},scale:{configurable:!0,enumerable:!0,value:te},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,K){this.quaternion.setFromAxisAngle(_,K)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,K){return _q1.setFromAxisAngle(_,K),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,K){return _q1.setFromAxisAngle(_,K),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,K){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(K)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(_,K,Z){_.isVector3?_target.copy(_):_target.set(_,K,Z);const te=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),te&&(_m1$1$1.extractRotation(te.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let K=0;K<arguments.length;K++)this.add(arguments[K]);return this}return _===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.removeFromParent(),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let Z=0;Z<arguments.length;Z++)this.remove(arguments[Z]);return this}const K=this.children.indexOf(_);return K!==-1&&(_.parent=null,this.children.splice(K,1),_.dispatchEvent(_removedEvent),_childremovedEvent.child=_,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){return this.remove(...this.children)}attach(_){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$1$1),_.removeFromParent(),_.parent=this,this.children.push(_),_.updateWorldMatrix(!1,!0),_.dispatchEvent(_addedEvent),_childaddedEvent.child=_,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,K){if(this[_]===K)return this;for(let Z=0,te=this.children.length;Z<te;Z++){const se=this.children[Z].getObjectByProperty(_,K);if(se!==void 0)return se}}getObjectsByProperty(_,K,Z=[]){this[_]===K&&Z.push(this);const te=this.children;for(let ie=0,se=te.length;ie<se;ie++)te[ie].getObjectsByProperty(_,K,Z);return Z}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const K=this.matrixWorld.elements;return _.set(K[8],K[9],K[10]).normalize()}raycast(){}traverse(_){_(this);const K=this.children;for(let Z=0,te=K.length;Z<te;Z++)K[Z].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const K=this.children;for(let Z=0,te=K.length;Z<te;Z++)K[Z].traverseVisible(_)}traverseAncestors(_){const K=this.parent;K!==null&&(_(K),K.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,_=!0);const K=this.children;for(let Z=0,te=K.length;Z<te;Z++)K[Z].updateMatrixWorld(_)}updateWorldMatrix(_,K){const Z=this.parent;if(_===!0&&Z!==null&&Z.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),K===!0){const te=this.children;for(let ie=0,se=te.length;ie<se;ie++)te[ie].updateWorldMatrix(!1,!0)}}toJSON(_){const K=_===void 0||typeof _=="string",Z={};K&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},Z.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const te={};te.uuid=this.uuid,te.type=this.type,this.name!==""&&(te.name=this.name),this.castShadow===!0&&(te.castShadow=!0),this.receiveShadow===!0&&(te.receiveShadow=!0),this.visible===!1&&(te.visible=!1),this.frustumCulled===!1&&(te.frustumCulled=!1),this.renderOrder!==0&&(te.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(te.userData=this.userData),te.layers=this.layers.mask,te.matrix=this.matrix.toArray(),te.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(te.matrixAutoUpdate=!1),this.isInstancedMesh&&(te.type="InstancedMesh",te.count=this.count,te.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(te.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(te.type="BatchedMesh",te.perObjectFrustumCulled=this.perObjectFrustumCulled,te.sortObjects=this.sortObjects,te.drawRanges=this._drawRanges,te.reservedRanges=this._reservedRanges,te.geometryInfo=this._geometryInfo.map(oe=>({...oe,boundingBox:oe.boundingBox?oe.boundingBox.toJSON():void 0,boundingSphere:oe.boundingSphere?oe.boundingSphere.toJSON():void 0})),te.instanceInfo=this._instanceInfo.map(oe=>({...oe})),te.availableInstanceIds=this._availableInstanceIds.slice(),te.availableGeometryIds=this._availableGeometryIds.slice(),te.nextIndexStart=this._nextIndexStart,te.nextVertexStart=this._nextVertexStart,te.geometryCount=this._geometryCount,te.maxInstanceCount=this._maxInstanceCount,te.maxVertexCount=this._maxVertexCount,te.maxIndexCount=this._maxIndexCount,te.geometryInitialized=this._geometryInitialized,te.matricesTexture=this._matricesTexture.toJSON(_),te.indirectTexture=this._indirectTexture.toJSON(_),this._colorsTexture!==null&&(te.colorsTexture=this._colorsTexture.toJSON(_)),this.boundingSphere!==null&&(te.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(te.boundingBox=this.boundingBox.toJSON()));function ie(oe,ae){return oe[ae.uuid]===void 0&&(oe[ae.uuid]=ae.toJSON(_)),ae.uuid}if(this.isScene)this.background&&(this.background.isColor?te.background=this.background.toJSON():this.background.isTexture&&(te.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(te.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){te.geometry=ie(_.geometries,this.geometry);const oe=this.geometry.parameters;if(oe!==void 0&&oe.shapes!==void 0){const ae=oe.shapes;if(Array.isArray(ae))for(let le=0,ue=ae.length;le<ue;le++){const fe=ae[le];ie(_.shapes,fe)}else ie(_.shapes,ae)}}if(this.isSkinnedMesh&&(te.bindMode=this.bindMode,te.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ie(_.skeletons,this.skeleton),te.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const oe=[];for(let ae=0,le=this.material.length;ae<le;ae++)oe.push(ie(_.materials,this.material[ae]));te.material=oe}else te.material=ie(_.materials,this.material);if(this.children.length>0){te.children=[];for(let oe=0;oe<this.children.length;oe++)te.children.push(this.children[oe].toJSON(_).object)}if(this.animations.length>0){te.animations=[];for(let oe=0;oe<this.animations.length;oe++){const ae=this.animations[oe];te.animations.push(ie(_.animations,ae))}}if(K){const oe=se(_.geometries),ae=se(_.materials),le=se(_.textures),ue=se(_.images),fe=se(_.shapes),he=se(_.skeletons),ge=se(_.animations),_e=se(_.nodes);oe.length>0&&(Z.geometries=oe),ae.length>0&&(Z.materials=ae),le.length>0&&(Z.textures=le),ue.length>0&&(Z.images=ue),fe.length>0&&(Z.shapes=fe),he.length>0&&(Z.skeletons=he),ge.length>0&&(Z.animations=ge),_e.length>0&&(Z.nodes=_e)}return Z.object=te,Z;function se(oe){const ae=[];for(const le in oe){const ue=oe[le];delete ue.metadata,ae.push(ue)}return ae}}clone(_){return new this.constructor().copy(this,_)}copy(_,K=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.animations=_.animations.slice(),this.userData=JSON.parse(JSON.stringify(_.userData)),K===!0)for(let Z=0;Z<_.children.length;Z++){const te=_.children[Z];this.add(te.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(_=new Vector3,K=new Vector3,Z=new Vector3){this.a=_,this.b=K,this.c=Z}static getNormal(_,K,Z,te){te.subVectors(Z,K),_v0$1.subVectors(_,K),te.cross(_v0$1);const ie=te.lengthSq();return ie>0?te.multiplyScalar(1/Math.sqrt(ie)):te.set(0,0,0)}static getBarycoord(_,K,Z,te,ie){_v0$1.subVectors(te,K),_v1$3.subVectors(Z,K),_v2$2.subVectors(_,K);const se=_v0$1.dot(_v0$1),oe=_v0$1.dot(_v1$3),ae=_v0$1.dot(_v2$2),le=_v1$3.dot(_v1$3),ue=_v1$3.dot(_v2$2),fe=se*le-oe*oe;if(fe===0)return ie.set(0,0,0),null;const he=1/fe,ge=(le*ae-oe*ue)*he,_e=(se*ue-oe*ae)*he;return ie.set(1-ge-_e,_e,ge)}static containsPoint(_,K,Z,te){return this.getBarycoord(_,K,Z,te,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(_,K,Z,te,ie,se,oe,ae){return this.getBarycoord(_,K,Z,te,_v3$2)===null?(ae.x=0,ae.y=0,"z"in ae&&(ae.z=0),"w"in ae&&(ae.w=0),null):(ae.setScalar(0),ae.addScaledVector(ie,_v3$2.x),ae.addScaledVector(se,_v3$2.y),ae.addScaledVector(oe,_v3$2.z),ae)}static getInterpolatedAttribute(_,K,Z,te,ie,se){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(_,K),_v41.fromBufferAttribute(_,Z),_v42.fromBufferAttribute(_,te),se.setScalar(0),se.addScaledVector(_v40,ie.x),se.addScaledVector(_v41,ie.y),se.addScaledVector(_v42,ie.z),se}static isFrontFacing(_,K,Z,te){return _v0$1.subVectors(Z,K),_v1$3.subVectors(_,K),_v0$1.cross(_v1$3).dot(te)<0}set(_,K,Z){return this.a.copy(_),this.b.copy(K),this.c.copy(Z),this}setFromPointsAndIndices(_,K,Z,te){return this.a.copy(_[K]),this.b.copy(_[Z]),this.c.copy(_[te]),this}setFromAttributeAndIndices(_,K,Z,te){return this.a.fromBufferAttribute(_,K),this.b.fromBufferAttribute(_,Z),this.c.fromBufferAttribute(_,te),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,K){return Triangle.getBarycoord(_,this.a,this.b,this.c,K)}getInterpolation(_,K,Z,te,ie){return Triangle.getInterpolation(_,this.a,this.b,this.c,K,Z,te,ie)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,K){const Z=this.a,te=this.b,ie=this.c;let se,oe;_vab.subVectors(te,Z),_vac.subVectors(ie,Z),_vap.subVectors(_,Z);const ae=_vab.dot(_vap),le=_vac.dot(_vap);if(ae<=0&&le<=0)return K.copy(Z);_vbp.subVectors(_,te);const ue=_vab.dot(_vbp),fe=_vac.dot(_vbp);if(ue>=0&&fe<=ue)return K.copy(te);const he=ae*fe-ue*le;if(he<=0&&ae>=0&&ue<=0)return se=ae/(ae-ue),K.copy(Z).addScaledVector(_vab,se);_vcp.subVectors(_,ie);const ge=_vab.dot(_vcp),_e=_vac.dot(_vcp);if(_e>=0&&ge<=_e)return K.copy(ie);const Se=ge*le-ae*_e;if(Se<=0&&le>=0&&_e<=0)return oe=le/(le-_e),K.copy(Z).addScaledVector(_vac,oe);const Ee=ue*_e-ge*fe;if(Ee<=0&&fe-ue>=0&&ge-_e>=0)return _vbc.subVectors(ie,te),oe=(fe-ue)/(fe-ue+(ge-_e)),K.copy(te).addScaledVector(_vbc,oe);const ye=1/(Ee+Se+he);return se=Se*ye,oe=he*ye,K.copy(Z).addScaledVector(_vab,se).addScaledVector(_vac,oe)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(ne,_,K){return K<0&&(K+=1),K>1&&(K-=1),K<1/6?ne+(_-ne)*6*K:K<1/2?_:K<2/3?ne+(_-ne)*6*(2/3-K):ne}let Color$1=class{constructor(_,K,Z){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(_,K,Z)}set(_,K,Z){if(K===void 0&&Z===void 0){const te=_;te&&te.isColor?this.copy(te):typeof te=="number"?this.setHex(te):typeof te=="string"&&this.setStyle(te)}else this.setRGB(_,K,Z);return this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,K=SRGBColorSpace$1){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.colorSpaceToWorking(this,K),this}setRGB(_,K,Z,te=ColorManagement.workingColorSpace){return this.r=_,this.g=K,this.b=Z,ColorManagement.colorSpaceToWorking(this,te),this}setHSL(_,K,Z,te=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),K=clamp$3(K,0,1),Z=clamp$3(Z,0,1),K===0)this.r=this.g=this.b=Z;else{const ie=Z<=.5?Z*(1+K):Z+K-Z*K,se=2*Z-ie;this.r=hue2rgb(se,ie,_+1/3),this.g=hue2rgb(se,ie,_),this.b=hue2rgb(se,ie,_-1/3)}return ColorManagement.colorSpaceToWorking(this,te),this}setStyle(_,K=SRGBColorSpace$1){function Z(ie){ie!==void 0&&parseFloat(ie)<1&&console.warn("THREE.Color: Alpha component of "+_+" will be ignored.")}let te;if(te=/^(\w+)\(([^\)]*)\)/.exec(_)){let ie;const se=te[1],oe=te[2];switch(se){case"rgb":case"rgba":if(ie=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(oe))return Z(ie[4]),this.setRGB(Math.min(255,parseInt(ie[1],10))/255,Math.min(255,parseInt(ie[2],10))/255,Math.min(255,parseInt(ie[3],10))/255,K);if(ie=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(oe))return Z(ie[4]),this.setRGB(Math.min(100,parseInt(ie[1],10))/100,Math.min(100,parseInt(ie[2],10))/100,Math.min(100,parseInt(ie[3],10))/100,K);break;case"hsl":case"hsla":if(ie=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(oe))return Z(ie[4]),this.setHSL(parseFloat(ie[1])/360,parseFloat(ie[2])/100,parseFloat(ie[3])/100,K);break;default:console.warn("THREE.Color: Unknown color model "+_)}}else if(te=/^\#([A-Fa-f\d]+)$/.exec(_)){const ie=te[1],se=ie.length;if(se===3)return this.setRGB(parseInt(ie.charAt(0),16)/15,parseInt(ie.charAt(1),16)/15,parseInt(ie.charAt(2),16)/15,K);if(se===6)return this.setHex(parseInt(ie,16),K);console.warn("THREE.Color: Invalid hex color "+_)}else if(_&&_.length>0)return this.setColorName(_,K);return this}setColorName(_,K=SRGBColorSpace$1){const Z=_colorKeywords[_.toLowerCase()];return Z!==void 0?this.setHex(Z,K):console.warn("THREE.Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace$1){return ColorManagement.workingToColorSpace(_color.copy(this),_),Math.round(clamp$3(_color.r*255,0,255))*65536+Math.round(clamp$3(_color.g*255,0,255))*256+Math.round(clamp$3(_color.b*255,0,255))}getHexString(_=SRGBColorSpace$1){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,K=ColorManagement.workingColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),K);const Z=_color.r,te=_color.g,ie=_color.b,se=Math.max(Z,te,ie),oe=Math.min(Z,te,ie);let ae,le;const ue=(oe+se)/2;if(oe===se)ae=0,le=0;else{const fe=se-oe;switch(le=ue<=.5?fe/(se+oe):fe/(2-se-oe),se){case Z:ae=(te-ie)/fe+(te<ie?6:0);break;case te:ae=(ie-Z)/fe+2;break;case ie:ae=(Z-te)/fe+4;break}ae/=6}return _.h=ae,_.s=le,_.l=ue,_}getRGB(_,K=ColorManagement.workingColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),K),_.r=_color.r,_.g=_color.g,_.b=_color.b,_}getStyle(_=SRGBColorSpace$1){ColorManagement.workingToColorSpace(_color.copy(this),_);const K=_color.r,Z=_color.g,te=_color.b;return _!==SRGBColorSpace$1?`color(${_} ${K.toFixed(3)} ${Z.toFixed(3)} ${te.toFixed(3)})`:`rgb(${Math.round(K*255)},${Math.round(Z*255)},${Math.round(te*255)})`}offsetHSL(_,K,Z){return this.getHSL(_hslA),this.setHSL(_hslA.h+_,_hslA.s+K,_hslA.l+Z)}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,K){return this.r=_.r+K.r,this.g=_.g+K.g,this.b=_.b+K.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,K){return this.r+=(_.r-this.r)*K,this.g+=(_.g-this.g)*K,this.b+=(_.b-this.b)*K,this}lerpColors(_,K,Z){return this.r=_.r+(K.r-_.r)*Z,this.g=_.g+(K.g-_.g)*Z,this.b=_.b+(K.b-_.b)*Z,this}lerpHSL(_,K){this.getHSL(_hslA),_.getHSL(_hslB);const Z=lerp(_hslA.h,_hslB.h,K),te=lerp(_hslA.s,_hslB.s,K),ie=lerp(_hslA.l,_hslB.l,K);return this.setHSL(Z,te,ie),this}setFromVector3(_){return this.r=_.x,this.g=_.y,this.b=_.z,this}applyMatrix3(_){const K=this.r,Z=this.g,te=this.b,ie=_.elements;return this.r=ie[0]*K+ie[3]*Z+ie[6]*te,this.g=ie[1]*K+ie[4]*Z+ie[7]*te,this.b=ie[2]*K+ie[5]*Z+ie[8]*te,this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,K=0){return this.r=_[K],this.g=_[K+1],this.b=_[K+2],this}toArray(_=[],K=0){return _[K]=this.r,_[K+1]=this.g,_[K+2]=this.b,_}fromBufferAttribute(_,K){return this.r=_.getX(K),this.g=_.getY(K),this.b=_.getZ(K),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color=new Color$1;Color$1.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color$1(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const K in _){const Z=_[K];if(Z===void 0){console.warn(`THREE.Material: parameter '${K}' has value of undefined.`);continue}const te=this[K];if(te===void 0){console.warn(`THREE.Material: '${K}' is not a property of THREE.${this.type}.`);continue}te&&te.isColor?te.set(Z):te&&te.isVector3&&Z&&Z.isVector3?te.copy(Z):this[K]=Z}}toJSON(_){const K=_===void 0||typeof _=="string";K&&(_={textures:{},images:{}});const Z={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};Z.uuid=this.uuid,Z.type=this.type,this.name!==""&&(Z.name=this.name),this.color&&this.color.isColor&&(Z.color=this.color.getHex()),this.roughness!==void 0&&(Z.roughness=this.roughness),this.metalness!==void 0&&(Z.metalness=this.metalness),this.sheen!==void 0&&(Z.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(Z.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(Z.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(Z.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(Z.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(Z.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(Z.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(Z.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(Z.shininess=this.shininess),this.clearcoat!==void 0&&(Z.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(Z.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(Z.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(Z.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(Z.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,Z.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(Z.dispersion=this.dispersion),this.iridescence!==void 0&&(Z.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(Z.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(Z.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(Z.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(Z.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.anisotropy!==void 0&&(Z.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(Z.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(Z.anisotropyMap=this.anisotropyMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(Z.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(Z.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Z.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(Z.lightMap=this.lightMap.toJSON(_).uuid,Z.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(Z.aoMap=this.aoMap.toJSON(_).uuid,Z.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(Z.bumpMap=this.bumpMap.toJSON(_).uuid,Z.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Z.normalMap=this.normalMap.toJSON(_).uuid,Z.normalMapType=this.normalMapType,Z.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Z.displacementMap=this.displacementMap.toJSON(_).uuid,Z.displacementScale=this.displacementScale,Z.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Z.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Z.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Z.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(Z.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(Z.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(Z.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(Z.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(Z.combine=this.combine)),this.envMapRotation!==void 0&&(Z.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(Z.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(Z.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(Z.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(Z.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(Z.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(Z.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(Z.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(Z.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(Z.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(Z.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(Z.size=this.size),this.shadowSide!==null&&(Z.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(Z.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(Z.blending=this.blending),this.side!==FrontSide&&(Z.side=this.side),this.vertexColors===!0&&(Z.vertexColors=!0),this.opacity<1&&(Z.opacity=this.opacity),this.transparent===!0&&(Z.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(Z.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(Z.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(Z.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(Z.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(Z.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(Z.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(Z.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(Z.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(Z.depthFunc=this.depthFunc),this.depthTest===!1&&(Z.depthTest=this.depthTest),this.depthWrite===!1&&(Z.depthWrite=this.depthWrite),this.colorWrite===!1&&(Z.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(Z.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(Z.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(Z.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(Z.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(Z.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(Z.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(Z.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(Z.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(Z.rotation=this.rotation),this.polygonOffset===!0&&(Z.polygonOffset=!0),this.polygonOffsetFactor!==0&&(Z.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(Z.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(Z.linewidth=this.linewidth),this.dashSize!==void 0&&(Z.dashSize=this.dashSize),this.gapSize!==void 0&&(Z.gapSize=this.gapSize),this.scale!==void 0&&(Z.scale=this.scale),this.dithering===!0&&(Z.dithering=!0),this.alphaTest>0&&(Z.alphaTest=this.alphaTest),this.alphaHash===!0&&(Z.alphaHash=!0),this.alphaToCoverage===!0&&(Z.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(Z.premultipliedAlpha=!0),this.forceSinglePass===!0&&(Z.forceSinglePass=!0),this.wireframe===!0&&(Z.wireframe=!0),this.wireframeLinewidth>1&&(Z.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(Z.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(Z.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(Z.flatShading=!0),this.visible===!1&&(Z.visible=!1),this.toneMapped===!1&&(Z.toneMapped=!1),this.fog===!1&&(Z.fog=!1),Object.keys(this.userData).length>0&&(Z.userData=this.userData);function te(ie){const se=[];for(const oe in ie){const ae=ie[oe];delete ae.metadata,se.push(ae)}return se}if(K){const ie=te(_.textures),se=te(_.images);ie.length>0&&(Z.textures=ie),se.length>0&&(Z.images=se)}return Z}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.blendColor.copy(_.blendColor),this.blendAlpha=_.blendAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const K=_.clippingPlanes;let Z=null;if(K!==null){const te=K.length;Z=new Array(te);for(let ie=0;ie!==te;++ie)Z[ie]=K[ie].clone()}return this.clippingPlanes=Z,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaHash=_.alphaHash,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.forceSinglePass=_.forceSinglePass,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _tables=_generateTables();function _generateTables(){const ne=new ArrayBuffer(4),_=new Float32Array(ne),K=new Uint32Array(ne),Z=new Uint32Array(512),te=new Uint32Array(512);for(let ae=0;ae<256;++ae){const le=ae-127;le<-27?(Z[ae]=0,Z[ae|256]=32768,te[ae]=24,te[ae|256]=24):le<-14?(Z[ae]=1024>>-le-14,Z[ae|256]=1024>>-le-14|32768,te[ae]=-le-1,te[ae|256]=-le-1):le<=15?(Z[ae]=le+15<<10,Z[ae|256]=le+15<<10|32768,te[ae]=13,te[ae|256]=13):le<128?(Z[ae]=31744,Z[ae|256]=64512,te[ae]=24,te[ae|256]=24):(Z[ae]=31744,Z[ae|256]=64512,te[ae]=13,te[ae|256]=13)}const ie=new Uint32Array(2048),se=new Uint32Array(64),oe=new Uint32Array(64);for(let ae=1;ae<1024;++ae){let le=ae<<13,ue=0;for(;(le&8388608)===0;)le<<=1,ue-=8388608;le&=-8388609,ue+=947912704,ie[ae]=le|ue}for(let ae=1024;ae<2048;++ae)ie[ae]=939524096+(ae-1024<<13);for(let ae=1;ae<31;++ae)se[ae]=ae<<23;se[31]=1199570944,se[32]=2147483648;for(let ae=33;ae<63;++ae)se[ae]=2147483648+(ae-32<<23);se[63]=3347054592;for(let ae=1;ae<64;++ae)ae!==32&&(oe[ae]=1024);return{floatView:_,uint32View:K,baseTable:Z,shiftTable:te,mantissaTable:ie,exponentTable:se,offsetTable:oe}}function toHalfFloat(ne){Math.abs(ne)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),ne=clamp$3(ne,-65504,65504),_tables.floatView[0]=ne;const _=_tables.uint32View[0],K=_>>23&511;return _tables.baseTable[K]+((_&8388607)>>_tables.shiftTable[K])}function fromHalfFloat(ne){const _=ne>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(ne&1023)]+_tables.exponentTable[_],_tables.floatView[0]}class DataUtils{static toHalfFloat(_){return toHalfFloat(_)}static fromHalfFloat(_){return fromHalfFloat(_)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(_,K,Z=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=_,this.itemSize=K,this.count=_!==void 0?_.length/K:0,this.normalized=Z,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,K){this.updateRanges.push({start:_,count:K})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this.gpuType=_.gpuType,this}copyAt(_,K,Z){_*=this.itemSize,Z*=K.itemSize;for(let te=0,ie=this.itemSize;te<ie;te++)this.array[_+te]=K.array[Z+te];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let K=0,Z=this.count;K<Z;K++)_vector2$1.fromBufferAttribute(this,K),_vector2$1.applyMatrix3(_),this.setXY(K,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let K=0,Z=this.count;K<Z;K++)_vector$9.fromBufferAttribute(this,K),_vector$9.applyMatrix3(_),this.setXYZ(K,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(_){for(let K=0,Z=this.count;K<Z;K++)_vector$9.fromBufferAttribute(this,K),_vector$9.applyMatrix4(_),this.setXYZ(K,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(_){for(let K=0,Z=this.count;K<Z;K++)_vector$9.fromBufferAttribute(this,K),_vector$9.applyNormalMatrix(_),this.setXYZ(K,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(_){for(let K=0,Z=this.count;K<Z;K++)_vector$9.fromBufferAttribute(this,K),_vector$9.transformDirection(_),this.setXYZ(K,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(_,K=0){return this.array.set(_,K),this}getComponent(_,K){let Z=this.array[_*this.itemSize+K];return this.normalized&&(Z=denormalize(Z,this.array)),Z}setComponent(_,K,Z){return this.normalized&&(Z=normalize$6(Z,this.array)),this.array[_*this.itemSize+K]=Z,this}getX(_){let K=this.array[_*this.itemSize];return this.normalized&&(K=denormalize(K,this.array)),K}setX(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize]=K,this}getY(_){let K=this.array[_*this.itemSize+1];return this.normalized&&(K=denormalize(K,this.array)),K}setY(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize+1]=K,this}getZ(_){let K=this.array[_*this.itemSize+2];return this.normalized&&(K=denormalize(K,this.array)),K}setZ(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize+2]=K,this}getW(_){let K=this.array[_*this.itemSize+3];return this.normalized&&(K=denormalize(K,this.array)),K}setW(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize+3]=K,this}setXY(_,K,Z){return _*=this.itemSize,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array)),this.array[_+0]=K,this.array[_+1]=Z,this}setXYZ(_,K,Z,te){return _*=this.itemSize,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array),te=normalize$6(te,this.array)),this.array[_+0]=K,this.array[_+1]=Z,this.array[_+2]=te,this}setXYZW(_,K,Z,te,ie){return _*=this.itemSize,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array),te=normalize$6(te,this.array),ie=normalize$6(ie,this.array)),this.array[_+0]=K,this.array[_+1]=Z,this.array[_+2]=te,this.array[_+3]=ie,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),_}}class Int8BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Int8Array(_),K,Z)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Uint8Array(_),K,Z)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Uint8ClampedArray(_),K,Z)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Int16Array(_),K,Z)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Uint16Array(_),K,Z)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Int32Array(_),K,Z)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Uint32Array(_),K,Z)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Uint16Array(_),K,Z),this.isFloat16BufferAttribute=!0}getX(_){let K=fromHalfFloat(this.array[_*this.itemSize]);return this.normalized&&(K=denormalize(K,this.array)),K}setX(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize]=toHalfFloat(K),this}getY(_){let K=fromHalfFloat(this.array[_*this.itemSize+1]);return this.normalized&&(K=denormalize(K,this.array)),K}setY(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize+1]=toHalfFloat(K),this}getZ(_){let K=fromHalfFloat(this.array[_*this.itemSize+2]);return this.normalized&&(K=denormalize(K,this.array)),K}setZ(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize+2]=toHalfFloat(K),this}getW(_){let K=fromHalfFloat(this.array[_*this.itemSize+3]);return this.normalized&&(K=denormalize(K,this.array)),K}setW(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.array[_*this.itemSize+3]=toHalfFloat(K),this}setXY(_,K,Z){return _*=this.itemSize,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array)),this.array[_+0]=toHalfFloat(K),this.array[_+1]=toHalfFloat(Z),this}setXYZ(_,K,Z,te){return _*=this.itemSize,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array),te=normalize$6(te,this.array)),this.array[_+0]=toHalfFloat(K),this.array[_+1]=toHalfFloat(Z),this.array[_+2]=toHalfFloat(te),this}setXYZW(_,K,Z,te,ie){return _*=this.itemSize,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array),te=normalize$6(te,this.array),ie=normalize$6(ie,this.array)),this.array[_+0]=toHalfFloat(K),this.array[_+1]=toHalfFloat(Z),this.array[_+2]=toHalfFloat(te),this.array[_+3]=toHalfFloat(ie),this}}class Float32BufferAttribute extends BufferAttribute{constructor(_,K,Z){super(new Float32Array(_),K,Z)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}setIndirect(_){return this.indirect=_,this}getIndirect(){return this.indirect}getAttribute(_){return this.attributes[_]}setAttribute(_,K){return this.attributes[_]=K,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,K,Z=0){this.groups.push({start:_,count:K,materialIndex:Z})}clearGroups(){this.groups=[]}setDrawRange(_,K){this.drawRange.start=_,this.drawRange.count=K}applyMatrix4(_){const K=this.attributes.position;K!==void 0&&(K.applyMatrix4(_),K.needsUpdate=!0);const Z=this.attributes.normal;if(Z!==void 0){const ie=new Matrix3().getNormalMatrix(_);Z.applyNormalMatrix(ie),Z.needsUpdate=!0}const te=this.attributes.tangent;return te!==void 0&&(te.transformDirection(_),te.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1$3.makeRotationFromQuaternion(_),this.applyMatrix4(_m1$3),this}rotateX(_){return _m1$3.makeRotationX(_),this.applyMatrix4(_m1$3),this}rotateY(_){return _m1$3.makeRotationY(_),this.applyMatrix4(_m1$3),this}rotateZ(_){return _m1$3.makeRotationZ(_),this.applyMatrix4(_m1$3),this}translate(_,K,Z){return _m1$3.makeTranslation(_,K,Z),this.applyMatrix4(_m1$3),this}scale(_,K,Z){return _m1$3.makeScale(_,K,Z),this.applyMatrix4(_m1$3),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const K=this.getAttribute("position");if(K===void 0){const Z=[];for(let te=0,ie=_.length;te<ie;te++){const se=_[te];Z.push(se.x,se.y,se.z||0)}this.setAttribute("position",new Float32BufferAttribute(Z,3))}else{const Z=Math.min(_.length,K.count);for(let te=0;te<Z;te++){const ie=_[te];K.setXYZ(te,ie.x,ie.y,ie.z||0)}_.length>K.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),K.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,K=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),K)for(let Z=0,te=K.length;Z<te;Z++){const ie=K[Z];_box$2.setFromBufferAttribute(ie),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.attributes.position,K=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const Z=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(_),K)for(let ie=0,se=K.length;ie<se;ie++){const oe=K[ie];_boxMorphTargets.setFromBufferAttribute(oe),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(Z);let te=0;for(let ie=0,se=_.count;ie<se;ie++)_vector$8.fromBufferAttribute(_,ie),te=Math.max(te,Z.distanceToSquared(_vector$8));if(K)for(let ie=0,se=K.length;ie<se;ie++){const oe=K[ie],ae=this.morphTargetsRelative;for(let le=0,ue=oe.count;le<ue;le++)_vector$8.fromBufferAttribute(oe,le),ae&&(_offset.fromBufferAttribute(_,le),_vector$8.add(_offset)),te=Math.max(te,Z.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(te),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,K=this.attributes;if(_===null||K.position===void 0||K.normal===void 0||K.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const Z=K.position,te=K.normal,ie=K.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*Z.count),4));const se=this.getAttribute("tangent"),oe=[],ae=[];for(let $e=0;$e<Z.count;$e++)oe[$e]=new Vector3,ae[$e]=new Vector3;const le=new Vector3,ue=new Vector3,fe=new Vector3,he=new Vector2,ge=new Vector2,_e=new Vector2,Se=new Vector3,Ee=new Vector3;function ye($e,De,ke){le.fromBufferAttribute(Z,$e),ue.fromBufferAttribute(Z,De),fe.fromBufferAttribute(Z,ke),he.fromBufferAttribute(ie,$e),ge.fromBufferAttribute(ie,De),_e.fromBufferAttribute(ie,ke),ue.sub(le),fe.sub(le),ge.sub(he),_e.sub(he);const Ge=1/(ge.x*_e.y-_e.x*ge.y);isFinite(Ge)&&(Se.copy(ue).multiplyScalar(_e.y).addScaledVector(fe,-ge.y).multiplyScalar(Ge),Ee.copy(fe).multiplyScalar(ge.x).addScaledVector(ue,-_e.x).multiplyScalar(Ge),oe[$e].add(Se),oe[De].add(Se),oe[ke].add(Se),ae[$e].add(Ee),ae[De].add(Ee),ae[ke].add(Ee))}let be=this.groups;be.length===0&&(be=[{start:0,count:_.count}]);for(let $e=0,De=be.length;$e<De;++$e){const ke=be[$e],Ge=ke.start,Je=ke.count;for(let Ye=Ge,Qe=Ge+Je;Ye<Qe;Ye+=3)ye(_.getX(Ye+0),_.getX(Ye+1),_.getX(Ye+2))}const we=new Vector3,Pe=new Vector3,Oe=new Vector3,Be=new Vector3;function Ue($e){Oe.fromBufferAttribute(te,$e),Be.copy(Oe);const De=oe[$e];we.copy(De),we.sub(Oe.multiplyScalar(Oe.dot(De))).normalize(),Pe.crossVectors(Be,De);const Ge=Pe.dot(ae[$e])<0?-1:1;se.setXYZW($e,we.x,we.y,we.z,Ge)}for(let $e=0,De=be.length;$e<De;++$e){const ke=be[$e],Ge=ke.start,Je=ke.count;for(let Ye=Ge,Qe=Ge+Je;Ye<Qe;Ye+=3)Ue(_.getX(Ye+0)),Ue(_.getX(Ye+1)),Ue(_.getX(Ye+2))}}computeVertexNormals(){const _=this.index,K=this.getAttribute("position");if(K!==void 0){let Z=this.getAttribute("normal");if(Z===void 0)Z=new BufferAttribute(new Float32Array(K.count*3),3),this.setAttribute("normal",Z);else for(let he=0,ge=Z.count;he<ge;he++)Z.setXYZ(he,0,0,0);const te=new Vector3,ie=new Vector3,se=new Vector3,oe=new Vector3,ae=new Vector3,le=new Vector3,ue=new Vector3,fe=new Vector3;if(_)for(let he=0,ge=_.count;he<ge;he+=3){const _e=_.getX(he+0),Se=_.getX(he+1),Ee=_.getX(he+2);te.fromBufferAttribute(K,_e),ie.fromBufferAttribute(K,Se),se.fromBufferAttribute(K,Ee),ue.subVectors(se,ie),fe.subVectors(te,ie),ue.cross(fe),oe.fromBufferAttribute(Z,_e),ae.fromBufferAttribute(Z,Se),le.fromBufferAttribute(Z,Ee),oe.add(ue),ae.add(ue),le.add(ue),Z.setXYZ(_e,oe.x,oe.y,oe.z),Z.setXYZ(Se,ae.x,ae.y,ae.z),Z.setXYZ(Ee,le.x,le.y,le.z)}else for(let he=0,ge=K.count;he<ge;he+=3)te.fromBufferAttribute(K,he+0),ie.fromBufferAttribute(K,he+1),se.fromBufferAttribute(K,he+2),ue.subVectors(se,ie),fe.subVectors(te,ie),ue.cross(fe),Z.setXYZ(he+0,ue.x,ue.y,ue.z),Z.setXYZ(he+1,ue.x,ue.y,ue.z),Z.setXYZ(he+2,ue.x,ue.y,ue.z);this.normalizeNormals(),Z.needsUpdate=!0}}normalizeNormals(){const _=this.attributes.normal;for(let K=0,Z=_.count;K<Z;K++)_vector$8.fromBufferAttribute(_,K),_vector$8.normalize(),_.setXYZ(K,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function _(oe,ae){const le=oe.array,ue=oe.itemSize,fe=oe.normalized,he=new le.constructor(ae.length*ue);let ge=0,_e=0;for(let Se=0,Ee=ae.length;Se<Ee;Se++){oe.isInterleavedBufferAttribute?ge=ae[Se]*oe.data.stride+oe.offset:ge=ae[Se]*ue;for(let ye=0;ye<ue;ye++)he[_e++]=le[ge++]}return new BufferAttribute(he,ue,fe)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const K=new BufferGeometry,Z=this.index.array,te=this.attributes;for(const oe in te){const ae=te[oe],le=_(ae,Z);K.setAttribute(oe,le)}const ie=this.morphAttributes;for(const oe in ie){const ae=[],le=ie[oe];for(let ue=0,fe=le.length;ue<fe;ue++){const he=le[ue],ge=_(he,Z);ae.push(ge)}K.morphAttributes[oe]=ae}K.morphTargetsRelative=this.morphTargetsRelative;const se=this.groups;for(let oe=0,ae=se.length;oe<ae;oe++){const le=se[oe];K.addGroup(le.start,le.count,le.materialIndex)}return K}toJSON(){const _={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const ae=this.parameters;for(const le in ae)ae[le]!==void 0&&(_[le]=ae[le]);return _}_.data={attributes:{}};const K=this.index;K!==null&&(_.data.index={type:K.array.constructor.name,array:Array.prototype.slice.call(K.array)});const Z=this.attributes;for(const ae in Z){const le=Z[ae];_.data.attributes[ae]=le.toJSON(_.data)}const te={};let ie=!1;for(const ae in this.morphAttributes){const le=this.morphAttributes[ae],ue=[];for(let fe=0,he=le.length;fe<he;fe++){const ge=le[fe];ue.push(ge.toJSON(_.data))}ue.length>0&&(te[ae]=ue,ie=!0)}ie&&(_.data.morphAttributes=te,_.data.morphTargetsRelative=this.morphTargetsRelative);const se=this.groups;se.length>0&&(_.data.groups=JSON.parse(JSON.stringify(se)));const oe=this.boundingSphere;return oe!==null&&(_.data.boundingSphere=oe.toJSON()),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const K={};this.name=_.name;const Z=_.index;Z!==null&&this.setIndex(Z.clone());const te=_.attributes;for(const le in te){const ue=te[le];this.setAttribute(le,ue.clone(K))}const ie=_.morphAttributes;for(const le in ie){const ue=[],fe=ie[le];for(let he=0,ge=fe.length;he<ge;he++)ue.push(fe[he].clone(K));this.morphAttributes[le]=ue}this.morphTargetsRelative=_.morphTargetsRelative;const se=_.groups;for(let le=0,ue=se.length;le<ue;le++){const fe=se[le];this.addGroup(fe.start,fe.count,fe.materialIndex)}const oe=_.boundingBox;oe!==null&&(this.boundingBox=oe.clone());const ae=_.boundingSphere;return ae!==null&&(this.boundingSphere=ae.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,K=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=K,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(_,K){return super.copy(_,K),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}updateMorphTargets(){const K=this.geometry.morphAttributes,Z=Object.keys(K);if(Z.length>0){const te=K[Z[0]];if(te!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ie=0,se=te.length;ie<se;ie++){const oe=te[ie].name||String(ie);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=ie}}}}getVertexPosition(_,K){const Z=this.geometry,te=Z.attributes.position,ie=Z.morphAttributes.position,se=Z.morphTargetsRelative;K.fromBufferAttribute(te,_);const oe=this.morphTargetInfluences;if(ie&&oe){_morphA.set(0,0,0);for(let ae=0,le=ie.length;ae<le;ae++){const ue=oe[ae],fe=ie[ae];ue!==0&&(_tempA.fromBufferAttribute(fe,_),se?_morphA.addScaledVector(_tempA,ue):_morphA.addScaledVector(_tempA.sub(K),ue))}K.add(_morphA)}return K}raycast(_,K){const Z=this.geometry,te=this.material,ie=this.matrixWorld;te!==void 0&&(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$6.copy(Z.boundingSphere),_sphere$6.applyMatrix4(ie),_ray$3.copy(_.ray).recast(_.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(_.far-_.near)**2))&&(_inverseMatrix$3.copy(ie).invert(),_ray$3.copy(_.ray).applyMatrix4(_inverseMatrix$3),!(Z.boundingBox!==null&&_ray$3.intersectsBox(Z.boundingBox)===!1)&&this._computeIntersections(_,K,_ray$3)))}_computeIntersections(_,K,Z){let te;const ie=this.geometry,se=this.material,oe=ie.index,ae=ie.attributes.position,le=ie.attributes.uv,ue=ie.attributes.uv1,fe=ie.attributes.normal,he=ie.groups,ge=ie.drawRange;if(oe!==null)if(Array.isArray(se))for(let _e=0,Se=he.length;_e<Se;_e++){const Ee=he[_e],ye=se[Ee.materialIndex],be=Math.max(Ee.start,ge.start),we=Math.min(oe.count,Math.min(Ee.start+Ee.count,ge.start+ge.count));for(let Pe=be,Oe=we;Pe<Oe;Pe+=3){const Be=oe.getX(Pe),Ue=oe.getX(Pe+1),$e=oe.getX(Pe+2);te=checkGeometryIntersection(this,ye,_,Z,le,ue,fe,Be,Ue,$e),te&&(te.faceIndex=Math.floor(Pe/3),te.face.materialIndex=Ee.materialIndex,K.push(te))}}else{const _e=Math.max(0,ge.start),Se=Math.min(oe.count,ge.start+ge.count);for(let Ee=_e,ye=Se;Ee<ye;Ee+=3){const be=oe.getX(Ee),we=oe.getX(Ee+1),Pe=oe.getX(Ee+2);te=checkGeometryIntersection(this,se,_,Z,le,ue,fe,be,we,Pe),te&&(te.faceIndex=Math.floor(Ee/3),K.push(te))}}else if(ae!==void 0)if(Array.isArray(se))for(let _e=0,Se=he.length;_e<Se;_e++){const Ee=he[_e],ye=se[Ee.materialIndex],be=Math.max(Ee.start,ge.start),we=Math.min(ae.count,Math.min(Ee.start+Ee.count,ge.start+ge.count));for(let Pe=be,Oe=we;Pe<Oe;Pe+=3){const Be=Pe,Ue=Pe+1,$e=Pe+2;te=checkGeometryIntersection(this,ye,_,Z,le,ue,fe,Be,Ue,$e),te&&(te.faceIndex=Math.floor(Pe/3),te.face.materialIndex=Ee.materialIndex,K.push(te))}}else{const _e=Math.max(0,ge.start),Se=Math.min(ae.count,ge.start+ge.count);for(let Ee=_e,ye=Se;Ee<ye;Ee+=3){const be=Ee,we=Ee+1,Pe=Ee+2;te=checkGeometryIntersection(this,se,_,Z,le,ue,fe,be,we,Pe),te&&(te.faceIndex=Math.floor(Ee/3),K.push(te))}}}}function checkIntersection$1(ne,_,K,Z,te,ie,se,oe){let ae;if(_.side===BackSide?ae=Z.intersectTriangle(se,ie,te,!0,oe):ae=Z.intersectTriangle(te,ie,se,_.side===FrontSide,oe),ae===null)return null;_intersectionPointWorld.copy(oe),_intersectionPointWorld.applyMatrix4(ne.matrixWorld);const le=K.ray.origin.distanceTo(_intersectionPointWorld);return le<K.near||le>K.far?null:{distance:le,point:_intersectionPointWorld.clone(),object:ne}}function checkGeometryIntersection(ne,_,K,Z,te,ie,se,oe,ae,le){ne.getVertexPosition(oe,_vA$1),ne.getVertexPosition(ae,_vB$1),ne.getVertexPosition(le,_vC$1);const ue=checkIntersection$1(ne,_,K,Z,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(ue){const fe=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,fe),te&&(ue.uv=Triangle.getInterpolatedAttribute(te,oe,ae,le,fe,new Vector2)),ie&&(ue.uv1=Triangle.getInterpolatedAttribute(ie,oe,ae,le,fe,new Vector2)),se&&(ue.normal=Triangle.getInterpolatedAttribute(se,oe,ae,le,fe,new Vector3),ue.normal.dot(Z.direction)>0&&ue.normal.multiplyScalar(-1));const he={a:oe,b:ae,c:le,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,he.normal),ue.face=he,ue.barycoord=fe}return ue}class BoxGeometry extends BufferGeometry{constructor(_=1,K=1,Z=1,te=1,ie=1,se=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:K,depth:Z,widthSegments:te,heightSegments:ie,depthSegments:se};const oe=this;te=Math.floor(te),ie=Math.floor(ie),se=Math.floor(se);const ae=[],le=[],ue=[],fe=[];let he=0,ge=0;_e("z","y","x",-1,-1,Z,K,_,se,ie,0),_e("z","y","x",1,-1,Z,K,-_,se,ie,1),_e("x","z","y",1,1,_,Z,K,te,se,2),_e("x","z","y",1,-1,_,Z,-K,te,se,3),_e("x","y","z",1,-1,_,K,Z,te,ie,4),_e("x","y","z",-1,-1,_,K,-Z,te,ie,5),this.setIndex(ae),this.setAttribute("position",new Float32BufferAttribute(le,3)),this.setAttribute("normal",new Float32BufferAttribute(ue,3)),this.setAttribute("uv",new Float32BufferAttribute(fe,2));function _e(Se,Ee,ye,be,we,Pe,Oe,Be,Ue,$e,De){const ke=Pe/Ue,Ge=Oe/$e,Je=Pe/2,Ye=Oe/2,Qe=Be/2,rt=Ue+1,ot=$e+1;let ct=0,je=0;const st=new Vector3;for(let nt=0;nt<ot;nt++){const qe=nt*Ge-Ye;for(let lt=0;lt<rt;lt++){const Pt=lt*ke-Je;st[Se]=Pt*be,st[Ee]=qe*we,st[ye]=Qe,le.push(st.x,st.y,st.z),st[Se]=0,st[Ee]=0,st[ye]=Be>0?1:-1,ue.push(st.x,st.y,st.z),fe.push(lt/Ue),fe.push(1-nt/$e),ct+=1}}for(let nt=0;nt<$e;nt++)for(let qe=0;qe<Ue;qe++){const lt=he+qe+rt*nt,Pt=he+qe+rt*(nt+1),Gt=he+(qe+1)+rt*(nt+1),pt=he+(qe+1)+rt*nt;ae.push(lt,Pt,pt),ae.push(Pt,Gt,pt),je+=6}oe.addGroup(ge,je,De),ge+=je,he+=ct}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(ne){const _={};for(const K in ne){_[K]={};for(const Z in ne[K]){const te=ne[K][Z];te&&(te.isColor||te.isMatrix3||te.isMatrix4||te.isVector2||te.isVector3||te.isVector4||te.isTexture||te.isQuaternion)?te.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),_[K][Z]=null):_[K][Z]=te.clone():Array.isArray(te)?_[K][Z]=te.slice():_[K][Z]=te}}return _}function mergeUniforms(ne){const _={};for(let K=0;K<ne.length;K++){const Z=cloneUniforms(ne[K]);for(const te in Z)_[te]=Z[te]}return _}function cloneUniformsGroups(ne){const _=[];for(let K=0;K<ne.length;K++)_.push(ne[K].clone());return _}function getUnlitUniformColorSpace(ne){const _=ne.getRenderTarget();return _===null?ne.outputColorSpace:_.isXRRenderTarget===!0?_.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const K=super.toJSON(_);K.glslVersion=this.glslVersion,K.uniforms={};for(const te in this.uniforms){const se=this.uniforms[te].value;se&&se.isTexture?K.uniforms[te]={type:"t",value:se.toJSON(_).uuid}:se&&se.isColor?K.uniforms[te]={type:"c",value:se.getHex()}:se&&se.isVector2?K.uniforms[te]={type:"v2",value:se.toArray()}:se&&se.isVector3?K.uniforms[te]={type:"v3",value:se.toArray()}:se&&se.isVector4?K.uniforms[te]={type:"v4",value:se.toArray()}:se&&se.isMatrix3?K.uniforms[te]={type:"m3",value:se.toArray()}:se&&se.isMatrix4?K.uniforms[te]={type:"m4",value:se.toArray()}:K.uniforms[te]={value:se}}Object.keys(this.defines).length>0&&(K.defines=this.defines),K.vertexShader=this.vertexShader,K.fragmentShader=this.fragmentShader,K.lights=this.lights,K.clipping=this.clipping;const Z={};for(const te in this.extensions)this.extensions[te]===!0&&(Z[te]=!0);return Object.keys(Z).length>0&&(K.extensions=Z),K}}let Camera$1=class extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(_,K){return super.copy(_,K),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){return super.getWorldDirection(_).negate()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,K){super.updateWorldMatrix(_,K),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera$1{constructor(_=50,K=1,Z=.1,te=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=Z,this.far=te,this.focus=10,this.aspect=K,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,K){return super.copy(_,K),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const K=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(K),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(_,K,Z){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),K.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),Z.set(_v3$1.x,_v3$1.y).multiplyScalar(-_/_v3$1.z)}getViewSize(_,K){return this.getViewBounds(_,_minTarget,_maxTarget),K.subVectors(_maxTarget,_minTarget)}setViewOffset(_,K,Z,te,ie,se){this.aspect=_/K,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=K,this.view.offsetX=Z,this.view.offsetY=te,this.view.width=ie,this.view.height=se,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let K=_*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,Z=2*K,te=this.aspect*Z,ie=-.5*te;const se=this.view;if(this.view!==null&&this.view.enabled){const ae=se.fullWidth,le=se.fullHeight;ie+=se.offsetX*te/ae,K-=se.offsetY*Z/le,te*=se.width/ae,Z*=se.height/le}const oe=this.filmOffset;oe!==0&&(ie+=_*oe/this.getFilmWidth()),this.projectionMatrix.makePerspective(ie,ie+te,K,K-Z,_,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const K=super.toJSON(_);return K.object.fov=this.fov,K.object.zoom=this.zoom,K.object.near=this.near,K.object.far=this.far,K.object.focus=this.focus,K.object.aspect=this.aspect,this.view!==null&&(K.object.view=Object.assign({},this.view)),K.object.filmGauge=this.filmGauge,K.object.filmOffset=this.filmOffset,K}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,K,Z){super(),this.type="CubeCamera",this.renderTarget=Z,this.coordinateSystem=null,this.activeMipmapLevel=0;const te=new PerspectiveCamera(fov,aspect,_,K);te.layers=this.layers,this.add(te);const ie=new PerspectiveCamera(fov,aspect,_,K);ie.layers=this.layers,this.add(ie);const se=new PerspectiveCamera(fov,aspect,_,K);se.layers=this.layers,this.add(se);const oe=new PerspectiveCamera(fov,aspect,_,K);oe.layers=this.layers,this.add(oe);const ae=new PerspectiveCamera(fov,aspect,_,K);ae.layers=this.layers,this.add(ae);const le=new PerspectiveCamera(fov,aspect,_,K);le.layers=this.layers,this.add(le)}updateCoordinateSystem(){const _=this.coordinateSystem,K=this.children.concat(),[Z,te,ie,se,oe,ae]=K;for(const le of K)this.remove(le);if(_===WebGLCoordinateSystem)Z.up.set(0,1,0),Z.lookAt(1,0,0),te.up.set(0,1,0),te.lookAt(-1,0,0),ie.up.set(0,0,-1),ie.lookAt(0,1,0),se.up.set(0,0,1),se.lookAt(0,-1,0),oe.up.set(0,1,0),oe.lookAt(0,0,1),ae.up.set(0,1,0),ae.lookAt(0,0,-1);else if(_===WebGPUCoordinateSystem)Z.up.set(0,-1,0),Z.lookAt(-1,0,0),te.up.set(0,-1,0),te.lookAt(1,0,0),ie.up.set(0,0,1),ie.lookAt(0,1,0),se.up.set(0,0,-1),se.lookAt(0,-1,0),oe.up.set(0,-1,0),oe.lookAt(0,0,1),ae.up.set(0,-1,0),ae.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);for(const le of K)this.add(le),le.updateMatrixWorld()}update(_,K){this.parent===null&&this.updateMatrixWorld();const{renderTarget:Z,activeMipmapLevel:te}=this;this.coordinateSystem!==_.coordinateSystem&&(this.coordinateSystem=_.coordinateSystem,this.updateCoordinateSystem());const[ie,se,oe,ae,le,ue]=this.children,fe=_.getRenderTarget(),he=_.getActiveCubeFace(),ge=_.getActiveMipmapLevel(),_e=_.xr.enabled;_.xr.enabled=!1;const Se=Z.texture.generateMipmaps;Z.texture.generateMipmaps=!1,_.setRenderTarget(Z,0,te),_.render(K,ie),_.setRenderTarget(Z,1,te),_.render(K,se),_.setRenderTarget(Z,2,te),_.render(K,oe),_.setRenderTarget(Z,3,te),_.render(K,ae),_.setRenderTarget(Z,4,te),_.render(K,le),Z.texture.generateMipmaps=Se,_.setRenderTarget(Z,5,te),_.render(K,ue),_.setRenderTarget(fe,he,ge),_.xr.enabled=_e,Z.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_=[],K=CubeReflectionMapping,Z,te,ie,se,oe,ae,le,ue){super(_,K,Z,te,ie,se,oe,ae,le,ue),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,K={}){super(_,_,K),this.isWebGLCubeRenderTarget=!0;const Z={width:_,height:_,depth:1},te=[Z,Z,Z,Z,Z,Z];this.texture=new CubeTexture(te),this._setTextureOptions(K),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(_,K){this.texture.type=K.type,this.texture.colorSpace=K.colorSpace,this.texture.generateMipmaps=K.generateMipmaps,this.texture.minFilter=K.minFilter,this.texture.magFilter=K.magFilter;const Z={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},te=new BoxGeometry(5,5,5),ie=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(Z.uniforms),vertexShader:Z.vertexShader,fragmentShader:Z.fragmentShader,side:BackSide,blending:NoBlending});ie.uniforms.tEquirect.value=K;const se=new Mesh(te,ie),oe=K.minFilter;return K.minFilter===LinearMipmapLinearFilter&&(K.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,se),K.minFilter=oe,se.geometry.dispose(),se.material.dispose(),this}clear(_,K=!0,Z=!0,te=!0){const ie=_.getRenderTarget();for(let se=0;se<6;se++)_.setRenderTarget(this,se),_.clear(K,Z,te);_.setRenderTarget(ie)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const K=this._hand;if(K)for(const Z of _.hand.values())this._getHandJoint(K,Z)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,K,Z){let te=null,ie=null,se=null;const oe=this._targetRay,ae=this._grip,le=this._hand;if(_&&K.session.visibilityState!=="visible-blurred"){if(le&&_.hand){se=!0;for(const Se of _.hand.values()){const Ee=K.getJointPose(Se,Z),ye=this._getHandJoint(le,Se);Ee!==null&&(ye.matrix.fromArray(Ee.transform.matrix),ye.matrix.decompose(ye.position,ye.rotation,ye.scale),ye.matrixWorldNeedsUpdate=!0,ye.jointRadius=Ee.radius),ye.visible=Ee!==null}const ue=le.joints["index-finger-tip"],fe=le.joints["thumb-tip"],he=ue.position.distanceTo(fe.position),ge=.02,_e=.005;le.inputState.pinching&&he>ge+_e?(le.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!le.inputState.pinching&&he<=ge-_e&&(le.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else ae!==null&&_.gripSpace&&(ie=K.getPose(_.gripSpace,Z),ie!==null&&(ae.matrix.fromArray(ie.transform.matrix),ae.matrix.decompose(ae.position,ae.rotation,ae.scale),ae.matrixWorldNeedsUpdate=!0,ie.linearVelocity?(ae.hasLinearVelocity=!0,ae.linearVelocity.copy(ie.linearVelocity)):ae.hasLinearVelocity=!1,ie.angularVelocity?(ae.hasAngularVelocity=!0,ae.angularVelocity.copy(ie.angularVelocity)):ae.hasAngularVelocity=!1));oe!==null&&(te=K.getPose(_.targetRaySpace,Z),te===null&&ie!==null&&(te=ie),te!==null&&(oe.matrix.fromArray(te.transform.matrix),oe.matrix.decompose(oe.position,oe.rotation,oe.scale),oe.matrixWorldNeedsUpdate=!0,te.linearVelocity?(oe.hasLinearVelocity=!0,oe.linearVelocity.copy(te.linearVelocity)):oe.hasLinearVelocity=!1,te.angularVelocity?(oe.hasAngularVelocity=!0,oe.angularVelocity.copy(te.angularVelocity)):oe.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return oe!==null&&(oe.visible=te!==null),ae!==null&&(ae.visible=ie!==null),le!==null&&(le.visible=se!==null),this}_getHandJoint(_,K){if(_.joints[K.jointName]===void 0){const Z=new Group;Z.matrixAutoUpdate=!1,Z.visible=!1,_.joints[K.jointName]=Z,_.add(Z)}return _.joints[K.jointName]}}class FogExp2{constructor(_,K=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color$1(_),this.density=K}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,K=1,Z=1e3){this.isFog=!0,this.name="",this.color=new Color$1(_),this.near=K,this.far=Z}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,K){return super.copy(_,K),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,this.backgroundRotation.copy(_.backgroundRotation),this.environmentIntensity=_.environmentIntensity,this.environmentRotation.copy(_.environmentRotation),_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const K=super.toJSON(_);return this.fog!==null&&(K.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(K.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(K.object.backgroundIntensity=this.backgroundIntensity),K.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(K.object.environmentIntensity=this.environmentIntensity),K.object.environmentRotation=this.environmentRotation.toArray(),K}}class InterleavedBuffer{constructor(_,K){this.isInterleavedBuffer=!0,this.array=_,this.stride=K,this.count=_!==void 0?_.length/K:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}addUpdateRange(_,K){this.updateRanges.push({start:_,count:K})}clearUpdateRanges(){this.updateRanges.length=0}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,K,Z){_*=this.stride,Z*=K.stride;for(let te=0,ie=this.stride;te<ie;te++)this.array[_+te]=K.array[Z+te];return this}set(_,K=0){return this.array.set(_,K),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const K=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),Z=new this.constructor(K,this.stride);return Z.setUsage(this.usage),Z}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(_,K,Z,te=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=K,this.offset=Z,this.normalized=te}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let K=0,Z=this.data.count;K<Z;K++)_vector$7.fromBufferAttribute(this,K),_vector$7.applyMatrix4(_),this.setXYZ(K,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(_){for(let K=0,Z=this.count;K<Z;K++)_vector$7.fromBufferAttribute(this,K),_vector$7.applyNormalMatrix(_),this.setXYZ(K,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(_){for(let K=0,Z=this.count;K<Z;K++)_vector$7.fromBufferAttribute(this,K),_vector$7.transformDirection(_),this.setXYZ(K,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(_,K){let Z=this.array[_*this.data.stride+this.offset+K];return this.normalized&&(Z=denormalize(Z,this.array)),Z}setComponent(_,K,Z){return this.normalized&&(Z=normalize$6(Z,this.array)),this.data.array[_*this.data.stride+this.offset+K]=Z,this}setX(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.data.array[_*this.data.stride+this.offset]=K,this}setY(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.data.array[_*this.data.stride+this.offset+1]=K,this}setZ(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.data.array[_*this.data.stride+this.offset+2]=K,this}setW(_,K){return this.normalized&&(K=normalize$6(K,this.array)),this.data.array[_*this.data.stride+this.offset+3]=K,this}getX(_){let K=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(K=denormalize(K,this.array)),K}getY(_){let K=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(K=denormalize(K,this.array)),K}getZ(_){let K=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(K=denormalize(K,this.array)),K}getW(_){let K=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(K=denormalize(K,this.array)),K}setXY(_,K,Z){return _=_*this.data.stride+this.offset,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array)),this.data.array[_+0]=K,this.data.array[_+1]=Z,this}setXYZ(_,K,Z,te){return _=_*this.data.stride+this.offset,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array),te=normalize$6(te,this.array)),this.data.array[_+0]=K,this.data.array[_+1]=Z,this.data.array[_+2]=te,this}setXYZW(_,K,Z,te,ie){return _=_*this.data.stride+this.offset,this.normalized&&(K=normalize$6(K,this.array),Z=normalize$6(Z,this.array),te=normalize$6(te,this.array),ie=normalize$6(ie,this.array)),this.data.array[_+0]=K,this.data.array[_+1]=Z,this.data.array[_+2]=te,this.data.array[_+3]=ie,this}clone(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const K=[];for(let Z=0;Z<this.count;Z++){const te=Z*this.data.stride+this.offset;for(let ie=0;ie<this.itemSize;ie++)K.push(this.data.array[te+ie])}return new BufferAttribute(new this.array.constructor(K),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const K=[];for(let Z=0;Z<this.count;Z++){const te=Z*this.data.stride+this.offset;for(let ie=0;ie<this.itemSize;ie++)K.push(this.data.array[te+ie])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:K,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const K=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),Z=new InterleavedBuffer(K,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(Z,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(Z,2,3,!1))}this.geometry=_geometry,this.material=_,this.center=new Vector2(.5,.5),this.count=1}raycast(_,K){_.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const Z=this.material.rotation;let te,ie;Z!==0&&(ie=Math.cos(Z),te=Math.sin(Z));const se=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,se,_worldScale,te,ie),transformVertex(_vB.set(.5,-.5,0),_mvPosition,se,_worldScale,te,ie),transformVertex(_vC.set(.5,.5,0),_mvPosition,se,_worldScale,te,ie),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let oe=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(oe===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,se,_worldScale,te,ie),_uvB.set(0,1),oe=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),oe===null))return;const ae=_.ray.origin.distanceTo(_intersectPoint);ae<_.near||ae>_.far||K.push({distance:ae,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,K){return super.copy(_,K),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(ne,_,K,Z,te,ie){_alignedPosition.subVectors(ne,K).addScalar(.5).multiply(Z),te!==void 0?(_rotatedPosition.x=ie*_alignedPosition.x-te*_alignedPosition.y,_rotatedPosition.y=te*_alignedPosition.x+ie*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ne.copy(_),ne.x+=_rotatedPosition.x,ne.y+=_rotatedPosition.y,ne.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const K=_.levels;for(let Z=0,te=K.length;Z<te;Z++){const ie=K[Z];this.addLevel(ie.object.clone(),ie.distance,ie.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,K=0,Z=0){K=Math.abs(K);const te=this.levels;let ie;for(ie=0;ie<te.length&&!(K<te[ie].distance);ie++);return te.splice(ie,0,{distance:K,hysteresis:Z,object:_}),this.add(_),this}removeLevel(_){const K=this.levels;for(let Z=0;Z<K.length;Z++)if(K[Z].distance===_){const te=K.splice(Z,1);return this.remove(te[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const K=this.levels;if(K.length>0){let Z,te;for(Z=1,te=K.length;Z<te;Z++){let ie=K[Z].distance;if(K[Z].object.visible&&(ie-=ie*K[Z].hysteresis),_<ie)break}return K[Z-1].object}return null}raycast(_,K){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const te=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(te).raycast(_,K)}}update(_){const K=this.levels;if(K.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const Z=_v1$2.distanceTo(_v2$1)/_.zoom;K[0].object.visible=!0;let te,ie;for(te=1,ie=K.length;te<ie;te++){let se=K[te].distance;if(K[te].object.visible&&(se-=se*K[te].hysteresis),Z>=se)K[te-1].object.visible=!1,K[te].object.visible=!0;else break}for(this._currentLevel=te-1;te<ie;te++)K[te].object.visible=!1}}toJSON(_){const K=super.toJSON(_);this.autoUpdate===!1&&(K.object.autoUpdate=!1),K.object.levels=[];const Z=this.levels;for(let te=0,ie=Z.length;te<ie;te++){const se=Z[te];K.object.levels.push({object:se.object.uuid,distance:se.distance,hysteresis:se.hysteresis})}return K}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(_,K){super(_,K),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const _=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const K=_.getAttribute("position");for(let Z=0;Z<K.count;Z++)this.getVertexPosition(Z,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const _=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const K=_.getAttribute("position");for(let Z=0;Z<K.count;Z++)this.getVertexPosition(Z,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(_,K){return super.copy(_,K),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}raycast(_,K){const Z=this.material,te=this.matrixWorld;Z!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(te),_.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(te).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(_,K,_ray$2)))}getVertexPosition(_,K){return super.getVertexPosition(_,K),this.applyBoneTransform(_,K),K}bind(_,K){this.skeleton=_,K===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),K=this.matrixWorld),this.bindMatrix.copy(K),this.bindMatrixInverse.copy(K).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,K=this.geometry.attributes.skinWeight;for(let Z=0,te=K.count;Z<te;Z++){_.fromBufferAttribute(K,Z);const ie=1/_.manhattanLength();ie!==1/0?_.multiplyScalar(ie):_.set(1,0,0,0),K.setXYZW(Z,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(_,K){const Z=this.skeleton,te=this.geometry;_skinIndex.fromBufferAttribute(te.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(te.attributes.skinWeight,_),_basePosition.copy(K).applyMatrix4(this.bindMatrix),K.set(0,0,0);for(let ie=0;ie<4;ie++){const se=_skinWeight.getComponent(ie);if(se!==0){const oe=_skinIndex.getComponent(ie);_matrix4.multiplyMatrices(Z.bones[oe].matrixWorld,Z.boneInverses[oe]),K.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),se)}}return K.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,K=1,Z=1,te,ie,se,oe,ae,le=NearestFilter,ue=NearestFilter,fe,he){super(null,se,oe,ae,le,ue,te,ie,fe,he),this.isDataTexture=!0,this.image={data:_,width:K,height:Z},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$2=new Matrix4;class Skeleton{constructor(_=[],K=[]){this.uuid=generateUUID(),this.bones=_.slice(0),this.boneInverses=K,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const _=this.bones,K=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),K.length===0)this.calculateInverses();else if(_.length!==K.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let Z=0,te=this.bones.length;Z<te;Z++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,K=this.bones.length;_<K;_++){const Z=new Matrix4;this.bones[_]&&Z.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(Z)}}pose(){for(let _=0,K=this.bones.length;_<K;_++){const Z=this.bones[_];Z&&Z.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,K=this.bones.length;_<K;_++){const Z=this.bones[_];Z&&(Z.parent&&Z.parent.isBone?(Z.matrix.copy(Z.parent.matrixWorld).invert(),Z.matrix.multiply(Z.matrixWorld)):Z.matrix.copy(Z.matrixWorld),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale))}}update(){const _=this.bones,K=this.boneInverses,Z=this.boneMatrices,te=this.boneTexture;for(let ie=0,se=_.length;ie<se;ie++){const oe=_[ie]?_[ie].matrixWorld:_identityMatrix$2;_offsetMatrix.multiplyMatrices(oe,K[ie]),_offsetMatrix.toArray(Z,ie*16)}te!==null&&(te.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const K=new Float32Array(_*_*4);K.set(this.boneMatrices);const Z=new DataTexture(K,_,_,RGBAFormat,FloatType);return Z.needsUpdate=!0,this.boneMatrices=K,this.boneTexture=Z,this}getBoneByName(_){for(let K=0,Z=this.bones.length;K<Z;K++){const te=this.bones[K];if(te.name===_)return te}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,K){this.uuid=_.uuid;for(let Z=0,te=_.bones.length;Z<te;Z++){const ie=_.bones[Z];let se=K[ie];se===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",ie),se=new Bone),this.bones.push(se),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[Z]))}return this.init(),this}toJSON(){const _={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const K=this.bones,Z=this.boneInverses;for(let te=0,ie=K.length;te<ie;te++){const se=K[te];_.bones.push(se.uuid);const oe=Z[te];_.boneInverses.push(oe.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,K,Z,te=1){super(_,K,Z),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=te}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(_,K,Z){super(_,K),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Z*16),16),this.instanceColor=null,this.morphTexture=null,this.count=Z,this.boundingBox=null,this.boundingSphere=null;for(let te=0;te<Z;te++)this.setMatrixAt(te,_identity)}computeBoundingBox(){const _=this.geometry,K=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),_.boundingBox===null&&_.computeBoundingBox(),this.boundingBox.makeEmpty();for(let Z=0;Z<K;Z++)this.getMatrixAt(Z,_instanceLocalMatrix),_box3.copy(_.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const _=this.geometry,K=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),_.boundingSphere===null&&_.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let Z=0;Z<K;Z++)this.getMatrixAt(Z,_instanceLocalMatrix),_sphere$4.copy(_.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(_,K){return super.copy(_,K),this.instanceMatrix.copy(_.instanceMatrix),_.morphTexture!==null&&(this.morphTexture=_.morphTexture.clone()),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}getColorAt(_,K){K.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,K){K.fromArray(this.instanceMatrix.array,_*16)}getMorphAt(_,K){const Z=K.morphTargetInfluences,te=this.morphTexture.source.data.data,ie=Z.length+1,se=_*ie+1;for(let oe=0;oe<Z.length;oe++)Z[oe]=te[se+oe]}raycast(_,K){const Z=this.matrixWorld,te=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(Z),_.ray.intersectsSphere(_sphere$4)!==!1))for(let ie=0;ie<te;ie++){this.getMatrixAt(ie,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(Z,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(_,_instanceIntersects);for(let se=0,oe=_instanceIntersects.length;se<oe;se++){const ae=_instanceIntersects[se];ae.instanceId=ie,ae.object=this,K.push(ae)}_instanceIntersects.length=0}}setColorAt(_,K){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),K.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,K){K.toArray(this.instanceMatrix.array,_*16)}setMorphAt(_,K){const Z=K.morphTargetInfluences,te=Z.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(te*this.count),te,this.count,RedFormat,FloatType));const ie=this.morphTexture.source.data.data;let se=0;for(let le=0;le<Z.length;le++)se+=Z[le];const oe=this.geometry.morphTargetsRelative?1:1-se,ae=te*_;ie[ae]=oe,ie.set(Z,ae+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(_=new Vector3(1,0,0),K=0){this.isPlane=!0,this.normal=_,this.constant=K}set(_,K){return this.normal.copy(_),this.constant=K,this}setComponents(_,K,Z,te){return this.normal.set(_,K,Z),this.constant=te,this}setFromNormalAndCoplanarPoint(_,K){return this.normal.copy(_),this.constant=-K.dot(this.normal),this}setFromCoplanarPoints(_,K,Z){const te=_vector1.subVectors(Z,K).cross(_vector2.subVectors(_,K)).normalize();return this.setFromNormalAndCoplanarPoint(te,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,K){return K.copy(_).addScaledVector(this.normal,-this.distanceToPoint(_))}intersectLine(_,K){const Z=_.delta(_vector1),te=this.normal.dot(Z);if(te===0)return this.distanceToPoint(_.start)===0?K.copy(_.start):null;const ie=-(_.start.dot(this.normal)+this.constant)/te;return ie<0||ie>1?null:K.copy(_.start).addScaledVector(Z,ie)}intersectsLine(_){const K=this.distanceToPoint(_.start),Z=this.distanceToPoint(_.end);return K<0&&Z>0||Z<0&&K>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,K){const Z=K||_normalMatrix.getNormalMatrix(_),te=this.coplanarPoint(_vector1).applyMatrix4(_),ie=this.normal.applyMatrix3(Z).normalize();return this.constant=-te.dot(ie),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_defaultSpriteCenter=new Vector2(.5,.5),_vector$6=new Vector3;class Frustum{constructor(_=new Plane,K=new Plane,Z=new Plane,te=new Plane,ie=new Plane,se=new Plane){this.planes=[_,K,Z,te,ie,se]}set(_,K,Z,te,ie,se){const oe=this.planes;return oe[0].copy(_),oe[1].copy(K),oe[2].copy(Z),oe[3].copy(te),oe[4].copy(ie),oe[5].copy(se),this}copy(_){const K=this.planes;for(let Z=0;Z<6;Z++)K[Z].copy(_.planes[Z]);return this}setFromProjectionMatrix(_,K=WebGLCoordinateSystem,Z=!1){const te=this.planes,ie=_.elements,se=ie[0],oe=ie[1],ae=ie[2],le=ie[3],ue=ie[4],fe=ie[5],he=ie[6],ge=ie[7],_e=ie[8],Se=ie[9],Ee=ie[10],ye=ie[11],be=ie[12],we=ie[13],Pe=ie[14],Oe=ie[15];if(te[0].setComponents(le-se,ge-ue,ye-_e,Oe-be).normalize(),te[1].setComponents(le+se,ge+ue,ye+_e,Oe+be).normalize(),te[2].setComponents(le+oe,ge+fe,ye+Se,Oe+we).normalize(),te[3].setComponents(le-oe,ge-fe,ye-Se,Oe-we).normalize(),Z)te[4].setComponents(ae,he,Ee,Pe).normalize(),te[5].setComponents(le-ae,ge-he,ye-Ee,Oe-Pe).normalize();else if(te[4].setComponents(le-ae,ge-he,ye-Ee,Oe-Pe).normalize(),K===WebGLCoordinateSystem)te[5].setComponents(le+ae,ge+he,ye+Ee,Oe+Pe).normalize();else if(K===WebGPUCoordinateSystem)te[5].setComponents(ae,he,Ee,Pe).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+K);return this}intersectsObject(_){if(_.boundingSphere!==void 0)_.boundingSphere===null&&_.computeBoundingSphere(),_sphere$3.copy(_.boundingSphere).applyMatrix4(_.matrixWorld);else{const K=_.geometry;K.boundingSphere===null&&K.computeBoundingSphere(),_sphere$3.copy(K.boundingSphere).applyMatrix4(_.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(_){_sphere$3.center.set(0,0,0);const K=_defaultSpriteCenter.distanceTo(_.center);return _sphere$3.radius=.7071067811865476+K,_sphere$3.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(_){const K=this.planes,Z=_.center,te=-_.radius;for(let ie=0;ie<6;ie++)if(K[ie].distanceToPoint(Z)<te)return!1;return!0}intersectsBox(_){const K=this.planes;for(let Z=0;Z<6;Z++){const te=K[Z];if(_vector$6.x=te.normal.x>0?_.max.x:_.min.x,_vector$6.y=te.normal.y>0?_.max.y:_.min.y,_vector$6.z=te.normal.z>0?_.max.z:_.min.z,te.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(_){const K=this.planes;for(let Z=0;Z<6;Z++)if(K[Z].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _projScreenMatrix$2=new Matrix4,_frustum$1=new Frustum;class FrustumArray{constructor(){this.coordinateSystem=WebGLCoordinateSystem}intersectsObject(_,K){if(!K.isArrayCamera||K.cameras.length===0)return!1;for(let Z=0;Z<K.cameras.length;Z++){const te=K.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,te.coordinateSystem,te.reversedDepth),_frustum$1.intersectsObject(_))return!0}return!1}intersectsSprite(_,K){if(!K||!K.cameras||K.cameras.length===0)return!1;for(let Z=0;Z<K.cameras.length;Z++){const te=K.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,te.coordinateSystem,te.reversedDepth),_frustum$1.intersectsSprite(_))return!0}return!1}intersectsSphere(_,K){if(!K||!K.cameras||K.cameras.length===0)return!1;for(let Z=0;Z<K.cameras.length;Z++){const te=K.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,te.coordinateSystem,te.reversedDepth),_frustum$1.intersectsSphere(_))return!0}return!1}intersectsBox(_,K){if(!K||!K.cameras||K.cameras.length===0)return!1;for(let Z=0;Z<K.cameras.length;Z++){const te=K.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,te.coordinateSystem,te.reversedDepth),_frustum$1.intersectsBox(_))return!0}return!1}containsPoint(_,K){if(!K||!K.cameras||K.cameras.length===0)return!1;for(let Z=0;Z<K.cameras.length;Z++){const te=K.cameras[Z];if(_projScreenMatrix$2.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,te.coordinateSystem,te.reversedDepth),_frustum$1.containsPoint(_))return!0}return!1}clone(){return new FrustumArray}}function ascIdSort(ne,_){return ne-_}function sortOpaque(ne,_){return ne.z-_.z}function sortTransparent(ne,_){return _.z-ne.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(_,K,Z,te){const ie=this.pool,se=this.list;this.index>=ie.length&&ie.push({start:-1,count:-1,z:-1,index:-1});const oe=ie[this.index];se.push(oe),this.index++,oe.start=_,oe.count=K,oe.z=Z,oe.index=te}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color$1(1,1,1),_frustum=new Frustum,_frustumArray=new FrustumArray,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward$1=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(ne,_,K=0){const Z=_.itemSize;if(ne.isInterleavedBufferAttribute||ne.array.constructor!==_.array.constructor){const te=ne.count;for(let ie=0;ie<te;ie++)for(let se=0;se<Z;se++)_.setComponent(ie+K,se,ne.getComponent(ie,se))}else _.array.set(ne.array,K*Z);_.needsUpdate=!0}function copyArrayContents(ne,_){if(ne.constructor!==_.constructor){const K=Math.min(ne.length,_.length);for(let Z=0;Z<K;Z++)_[Z]=ne[Z]}else{const K=Math.min(ne.length,_.length);_.set(new ne.constructor(ne.buffer,0,K))}}class BatchedMesh extends Mesh{constructor(_,K,Z=K*2,te){super(new BufferGeometry,te),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=_,this._maxVertexCount=K,this._maxIndexCount=Z,this._multiDrawCounts=new Int32Array(_),this._multiDrawStarts=new Int32Array(_),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let _=Math.sqrt(this._maxInstanceCount*4);_=Math.ceil(_/4)*4,_=Math.max(_,4);const K=new Float32Array(_*_*4),Z=new DataTexture(K,_,_,RGBAFormat,FloatType);this._matricesTexture=Z}_initIndirectTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const K=new Uint32Array(_*_),Z=new DataTexture(K,_,_,RedIntegerFormat,UnsignedIntType);this._indirectTexture=Z}_initColorsTexture(){let _=Math.sqrt(this._maxInstanceCount);_=Math.ceil(_);const K=new Float32Array(_*_*4).fill(1),Z=new DataTexture(K,_,_,RGBAFormat,FloatType);Z.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=Z}_initializeGeometry(_){const K=this.geometry,Z=this._maxVertexCount,te=this._maxIndexCount;if(this._geometryInitialized===!1){for(const ie in _.attributes){const se=_.getAttribute(ie),{array:oe,itemSize:ae,normalized:le}=se,ue=new oe.constructor(Z*ae),fe=new BufferAttribute(ue,ae,le);K.setAttribute(ie,fe)}if(_.getIndex()!==null){const ie=Z>65535?new Uint32Array(te):new Uint16Array(te);K.setIndex(new BufferAttribute(ie,1))}this._geometryInitialized=!0}}_validateGeometry(_){const K=this.geometry;if(!!_.getIndex()!=!!K.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const Z in K.attributes){if(!_.hasAttribute(Z))throw new Error(`THREE.BatchedMesh: Added geometry missing "${Z}". All geometries must have consistent attributes.`);const te=_.getAttribute(Z),ie=K.getAttribute(Z);if(te.itemSize!==ie.itemSize||te.normalized!==ie.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(_){const K=this._instanceInfo;if(_<0||_>=K.length||K[_].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${_}. Instance is either out of range or has been deleted.`)}validateGeometryId(_){const K=this._geometryInfo;if(_<0||_>=K.length||K[_].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${_}. Geometry is either out of range or has been deleted.`)}setCustomSort(_){return this.customSort=_,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.boundingBox,K=this._instanceInfo;_.makeEmpty();for(let Z=0,te=K.length;Z<te;Z++){if(K[Z].active===!1)continue;const ie=K[Z].geometryIndex;this.getMatrixAt(Z,_matrix$1),this.getBoundingBoxAt(ie,_box$1).applyMatrix4(_matrix$1),_.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.boundingSphere,K=this._instanceInfo;_.makeEmpty();for(let Z=0,te=K.length;Z<te;Z++){if(K[Z].active===!1)continue;const ie=K[Z].geometryIndex;this.getMatrixAt(Z,_matrix$1),this.getBoundingSphereAt(ie,_sphere$2).applyMatrix4(_matrix$1),_.union(_sphere$2)}}addInstance(_){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const Z={visible:!0,active:!0,geometryIndex:_};let te=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),te=this._availableInstanceIds.shift(),this._instanceInfo[te]=Z):(te=this._instanceInfo.length,this._instanceInfo.push(Z));const ie=this._matricesTexture;_matrix$1.identity().toArray(ie.image.data,te*16),ie.needsUpdate=!0;const se=this._colorsTexture;return se&&(_whiteColor.toArray(se.image.data,te*4),se.needsUpdate=!0),this._visibilityChanged=!0,te}addGeometry(_,K=-1,Z=-1){this._initializeGeometry(_),this._validateGeometry(_);const te={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},ie=this._geometryInfo;te.vertexStart=this._nextVertexStart,te.reservedVertexCount=K===-1?_.getAttribute("position").count:K;const se=_.getIndex();if(se!==null&&(te.indexStart=this._nextIndexStart,te.reservedIndexCount=Z===-1?se.count:Z),te.indexStart!==-1&&te.indexStart+te.reservedIndexCount>this._maxIndexCount||te.vertexStart+te.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let ae;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),ae=this._availableGeometryIds.shift(),ie[ae]=te):(ae=this._geometryCount,this._geometryCount++,ie.push(te)),this.setGeometryAt(ae,_),this._nextIndexStart=te.indexStart+te.reservedIndexCount,this._nextVertexStart=te.vertexStart+te.reservedVertexCount,ae}setGeometryAt(_,K){if(_>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(K);const Z=this.geometry,te=Z.getIndex()!==null,ie=Z.getIndex(),se=K.getIndex(),oe=this._geometryInfo[_];if(te&&se.count>oe.reservedIndexCount||K.attributes.position.count>oe.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const ae=oe.vertexStart,le=oe.reservedVertexCount;oe.vertexCount=K.getAttribute("position").count;for(const ue in Z.attributes){const fe=K.getAttribute(ue),he=Z.getAttribute(ue);copyAttributeData(fe,he,ae);const ge=fe.itemSize;for(let _e=fe.count,Se=le;_e<Se;_e++){const Ee=ae+_e;for(let ye=0;ye<ge;ye++)he.setComponent(Ee,ye,0)}he.needsUpdate=!0,he.addUpdateRange(ae*ge,le*ge)}if(te){const ue=oe.indexStart,fe=oe.reservedIndexCount;oe.indexCount=K.getIndex().count;for(let he=0;he<se.count;he++)ie.setX(ue+he,ae+se.getX(he));for(let he=se.count,ge=fe;he<ge;he++)ie.setX(ue+he,ae);ie.needsUpdate=!0,ie.addUpdateRange(ue,oe.reservedIndexCount)}return oe.start=te?oe.indexStart:oe.vertexStart,oe.count=te?oe.indexCount:oe.vertexCount,oe.boundingBox=null,K.boundingBox!==null&&(oe.boundingBox=K.boundingBox.clone()),oe.boundingSphere=null,K.boundingSphere!==null&&(oe.boundingSphere=K.boundingSphere.clone()),this._visibilityChanged=!0,_}deleteGeometry(_){const K=this._geometryInfo;if(_>=K.length||K[_].active===!1)return this;const Z=this._instanceInfo;for(let te=0,ie=Z.length;te<ie;te++)Z[te].active&&Z[te].geometryIndex===_&&this.deleteInstance(te);return K[_].active=!1,this._availableGeometryIds.push(_),this._visibilityChanged=!0,this}deleteInstance(_){return this.validateInstanceId(_),this._instanceInfo[_].active=!1,this._availableInstanceIds.push(_),this._visibilityChanged=!0,this}optimize(){let _=0,K=0;const Z=this._geometryInfo,te=Z.map((se,oe)=>oe).sort((se,oe)=>Z[se].vertexStart-Z[oe].vertexStart),ie=this.geometry;for(let se=0,oe=Z.length;se<oe;se++){const ae=te[se],le=Z[ae];if(le.active!==!1){if(ie.index!==null){if(le.indexStart!==K){const{indexStart:ue,vertexStart:fe,reservedIndexCount:he}=le,ge=ie.index,_e=ge.array,Se=_-fe;for(let Ee=ue;Ee<ue+he;Ee++)_e[Ee]=_e[Ee]+Se;ge.array.copyWithin(K,ue,ue+he),ge.addUpdateRange(K,he),le.indexStart=K}K+=le.reservedIndexCount}if(le.vertexStart!==_){const{vertexStart:ue,reservedVertexCount:fe}=le,he=ie.attributes;for(const ge in he){const _e=he[ge],{array:Se,itemSize:Ee}=_e;Se.copyWithin(_*Ee,ue*Ee,(ue+fe)*Ee),_e.addUpdateRange(_*Ee,fe*Ee)}le.vertexStart=_}_+=le.reservedVertexCount,le.start=ie.index?le.indexStart:le.vertexStart,this._nextIndexStart=ie.index?le.indexStart+le.reservedIndexCount:0,this._nextVertexStart=le.vertexStart+le.reservedVertexCount}}return this}getBoundingBoxAt(_,K){if(_>=this._geometryCount)return null;const Z=this.geometry,te=this._geometryInfo[_];if(te.boundingBox===null){const ie=new Box3,se=Z.index,oe=Z.attributes.position;for(let ae=te.start,le=te.start+te.count;ae<le;ae++){let ue=ae;se&&(ue=se.getX(ue)),ie.expandByPoint(_vector$5.fromBufferAttribute(oe,ue))}te.boundingBox=ie}return K.copy(te.boundingBox),K}getBoundingSphereAt(_,K){if(_>=this._geometryCount)return null;const Z=this.geometry,te=this._geometryInfo[_];if(te.boundingSphere===null){const ie=new Sphere;this.getBoundingBoxAt(_,_box$1),_box$1.getCenter(ie.center);const se=Z.index,oe=Z.attributes.position;let ae=0;for(let le=te.start,ue=te.start+te.count;le<ue;le++){let fe=le;se&&(fe=se.getX(fe)),_vector$5.fromBufferAttribute(oe,fe),ae=Math.max(ae,ie.center.distanceToSquared(_vector$5))}ie.radius=Math.sqrt(ae),te.boundingSphere=ie}return K.copy(te.boundingSphere),K}setMatrixAt(_,K){this.validateInstanceId(_);const Z=this._matricesTexture,te=this._matricesTexture.image.data;return K.toArray(te,_*16),Z.needsUpdate=!0,this}getMatrixAt(_,K){return this.validateInstanceId(_),K.fromArray(this._matricesTexture.image.data,_*16)}setColorAt(_,K){return this.validateInstanceId(_),this._colorsTexture===null&&this._initColorsTexture(),K.toArray(this._colorsTexture.image.data,_*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(_,K){return this.validateInstanceId(_),K.fromArray(this._colorsTexture.image.data,_*4)}setVisibleAt(_,K){return this.validateInstanceId(_),this._instanceInfo[_].visible===K?this:(this._instanceInfo[_].visible=K,this._visibilityChanged=!0,this)}getVisibleAt(_){return this.validateInstanceId(_),this._instanceInfo[_].visible}setGeometryIdAt(_,K){return this.validateInstanceId(_),this.validateGeometryId(K),this._instanceInfo[_].geometryIndex=K,this}getGeometryIdAt(_){return this.validateInstanceId(_),this._instanceInfo[_].geometryIndex}getGeometryRangeAt(_,K={}){this.validateGeometryId(_);const Z=this._geometryInfo[_];return K.vertexStart=Z.vertexStart,K.vertexCount=Z.vertexCount,K.reservedVertexCount=Z.reservedVertexCount,K.indexStart=Z.indexStart,K.indexCount=Z.indexCount,K.reservedIndexCount=Z.reservedIndexCount,K.start=Z.start,K.count=Z.count,K}setInstanceCount(_){const K=this._availableInstanceIds,Z=this._instanceInfo;for(K.sort(ascIdSort);K[K.length-1]===Z.length-1;)Z.pop(),K.pop();if(_<Z.length)throw new Error(`BatchedMesh: Instance ids outside the range ${_} are being used. Cannot shrink instance count.`);const te=new Int32Array(_),ie=new Int32Array(_);copyArrayContents(this._multiDrawCounts,te),copyArrayContents(this._multiDrawStarts,ie),this._multiDrawCounts=te,this._multiDrawStarts=ie,this._maxInstanceCount=_;const se=this._indirectTexture,oe=this._matricesTexture,ae=this._colorsTexture;se.dispose(),this._initIndirectTexture(),copyArrayContents(se.image.data,this._indirectTexture.image.data),oe.dispose(),this._initMatricesTexture(),copyArrayContents(oe.image.data,this._matricesTexture.image.data),ae&&(ae.dispose(),this._initColorsTexture(),copyArrayContents(ae.image.data,this._colorsTexture.image.data))}setGeometrySize(_,K){const Z=[...this._geometryInfo].filter(oe=>oe.active);if(Math.max(...Z.map(oe=>oe.vertexStart+oe.reservedVertexCount))>_)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${K}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...Z.map(ae=>ae.indexStart+ae.reservedIndexCount))>K)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${K}. Cannot shrink further.`);const ie=this.geometry;ie.dispose(),this._maxVertexCount=_,this._maxIndexCount=K,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(ie));const se=this.geometry;ie.index&&copyArrayContents(ie.index.array,se.index.array);for(const oe in ie.attributes)copyArrayContents(ie.attributes[oe].array,se.attributes[oe].array)}raycast(_,K){const Z=this._instanceInfo,te=this._geometryInfo,ie=this.matrixWorld,se=this.geometry;_mesh.material=this.material,_mesh.geometry.index=se.index,_mesh.geometry.attributes=se.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let oe=0,ae=Z.length;oe<ae;oe++){if(!Z[oe].visible||!Z[oe].active)continue;const le=Z[oe].geometryIndex,ue=te[le];_mesh.geometry.setDrawRange(ue.start,ue.count),this.getMatrixAt(oe,_mesh.matrixWorld).premultiply(ie),this.getBoundingBoxAt(le,_mesh.geometry.boundingBox),this.getBoundingSphereAt(le,_mesh.geometry.boundingSphere),_mesh.raycast(_,_batchIntersects);for(let fe=0,he=_batchIntersects.length;fe<he;fe++){const ge=_batchIntersects[fe];ge.object=this,ge.batchId=oe,K.push(ge)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(_){return super.copy(_),this.geometry=_.geometry.clone(),this.perObjectFrustumCulled=_.perObjectFrustumCulled,this.sortObjects=_.sortObjects,this.boundingBox=_.boundingBox!==null?_.boundingBox.clone():null,this.boundingSphere=_.boundingSphere!==null?_.boundingSphere.clone():null,this._geometryInfo=_._geometryInfo.map(K=>({...K,boundingBox:K.boundingBox!==null?K.boundingBox.clone():null,boundingSphere:K.boundingSphere!==null?K.boundingSphere.clone():null})),this._instanceInfo=_._instanceInfo.map(K=>({...K})),this._availableInstanceIds=_._availableInstanceIds.slice(),this._availableGeometryIds=_._availableGeometryIds.slice(),this._nextIndexStart=_._nextIndexStart,this._nextVertexStart=_._nextVertexStart,this._geometryCount=_._geometryCount,this._maxInstanceCount=_._maxInstanceCount,this._maxVertexCount=_._maxVertexCount,this._maxIndexCount=_._maxIndexCount,this._geometryInitialized=_._geometryInitialized,this._multiDrawCounts=_._multiDrawCounts.slice(),this._multiDrawStarts=_._multiDrawStarts.slice(),this._indirectTexture=_._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=_._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=_._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(_,K,Z,te,ie){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const se=te.getIndex(),oe=se===null?1:se.array.BYTES_PER_ELEMENT,ae=this._instanceInfo,le=this._multiDrawStarts,ue=this._multiDrawCounts,fe=this._geometryInfo,he=this.perObjectFrustumCulled,ge=this._indirectTexture,_e=ge.image.data,Se=Z.isArrayCamera?_frustumArray:_frustum;he&&!Z.isArrayCamera&&(_matrix$1.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,Z.coordinateSystem,Z.reversedDepth));let Ee=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(_matrix$1),_forward$1.set(0,0,-1).transformDirection(Z.matrixWorld).transformDirection(_matrix$1);for(let we=0,Pe=ae.length;we<Pe;we++)if(ae[we].visible&&ae[we].active){const Oe=ae[we].geometryIndex;this.getMatrixAt(we,_matrix$1),this.getBoundingSphereAt(Oe,_sphere$2).applyMatrix4(_matrix$1);let Be=!1;if(he&&(Be=!Se.intersectsSphere(_sphere$2,Z)),!Be){const Ue=fe[Oe],$e=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward$1);_renderList.push(Ue.start,Ue.count,$e,we)}}const ye=_renderList.list,be=this.customSort;be===null?ye.sort(ie.transparent?sortTransparent:sortOpaque):be.call(this,ye,Z);for(let we=0,Pe=ye.length;we<Pe;we++){const Oe=ye[we];le[Ee]=Oe.start*oe,ue[Ee]=Oe.count,_e[Ee]=Oe.index,Ee++}_renderList.reset()}else for(let ye=0,be=ae.length;ye<be;ye++)if(ae[ye].visible&&ae[ye].active){const we=ae[ye].geometryIndex;let Pe=!1;if(he&&(this.getMatrixAt(ye,_matrix$1),this.getBoundingSphereAt(we,_sphere$2).applyMatrix4(_matrix$1),Pe=!Se.intersectsSphere(_sphere$2,Z)),!Pe){const Oe=fe[we];le[Ee]=Oe.start*oe,ue[Ee]=Oe.count,_e[Ee]=ye,Ee++}}ge.needsUpdate=!0,this._multiDrawCount=Ee,this._visibilityChanged=!1}onBeforeShadow(_,K,Z,te,ie,se){this.onBeforeRender(_,null,te,ie,se)}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(_=new BufferGeometry,K=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=K,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(_,K){return super.copy(_,K),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const K=_.attributes.position,Z=[0];for(let te=1,ie=K.count;te<ie;te++)_vStart.fromBufferAttribute(K,te-1),_vEnd.fromBufferAttribute(K,te),Z[te]=Z[te-1],Z[te]+=_vStart.distanceTo(_vEnd);_.setAttribute("lineDistance",new Float32BufferAttribute(Z,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,K){const Z=this.geometry,te=this.matrixWorld,ie=_.params.Line.threshold,se=Z.drawRange;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere$1.copy(Z.boundingSphere),_sphere$1.applyMatrix4(te),_sphere$1.radius+=ie,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(te).invert(),_ray$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const oe=ie/((this.scale.x+this.scale.y+this.scale.z)/3),ae=oe*oe,le=this.isLineSegments?2:1,ue=Z.index,he=Z.attributes.position;if(ue!==null){const ge=Math.max(0,se.start),_e=Math.min(ue.count,se.start+se.count);for(let Se=ge,Ee=_e-1;Se<Ee;Se+=le){const ye=ue.getX(Se),be=ue.getX(Se+1),we=checkIntersection(this,_,_ray$1,ae,ye,be,Se);we&&K.push(we)}if(this.isLineLoop){const Se=ue.getX(_e-1),Ee=ue.getX(ge),ye=checkIntersection(this,_,_ray$1,ae,Se,Ee,_e-1);ye&&K.push(ye)}}else{const ge=Math.max(0,se.start),_e=Math.min(he.count,se.start+se.count);for(let Se=ge,Ee=_e-1;Se<Ee;Se+=le){const ye=checkIntersection(this,_,_ray$1,ae,Se,Se+1,Se);ye&&K.push(ye)}if(this.isLineLoop){const Se=checkIntersection(this,_,_ray$1,ae,_e-1,ge,_e-1);Se&&K.push(Se)}}}updateMorphTargets(){const K=this.geometry.morphAttributes,Z=Object.keys(K);if(Z.length>0){const te=K[Z[0]];if(te!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ie=0,se=te.length;ie<se;ie++){const oe=te[ie].name||String(ie);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=ie}}}}}function checkIntersection(ne,_,K,Z,te,ie,se){const oe=ne.geometry.attributes.position;if(_vStart.fromBufferAttribute(oe,te),_vEnd.fromBufferAttribute(oe,ie),K.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>Z)return;_intersectPointOnRay.applyMatrix4(ne.matrixWorld);const le=_.ray.origin.distanceTo(_intersectPointOnRay);if(!(le<_.near||le>_.far))return{distance:le,point:_intersectPointOnSegment.clone().applyMatrix4(ne.matrixWorld),index:se,face:null,faceIndex:null,barycoord:null,object:ne}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,K){super(_,K),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const K=_.attributes.position,Z=[];for(let te=0,ie=K.count;te<ie;te+=2)_start.fromBufferAttribute(K,te),_end.fromBufferAttribute(K,te+1),Z[te]=te===0?0:Z[te-1],Z[te+1]=Z[te]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(Z,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,K){super(_,K),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix=new Matrix4,_ray$4=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(_=new BufferGeometry,K=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=K,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(_,K){return super.copy(_,K),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}raycast(_,K){const Z=this.geometry,te=this.matrixWorld,ie=_.params.Points.threshold,se=Z.drawRange;if(Z.boundingSphere===null&&Z.computeBoundingSphere(),_sphere.copy(Z.boundingSphere),_sphere.applyMatrix4(te),_sphere.radius+=ie,_.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(te).invert(),_ray$4.copy(_.ray).applyMatrix4(_inverseMatrix);const oe=ie/((this.scale.x+this.scale.y+this.scale.z)/3),ae=oe*oe,le=Z.index,fe=Z.attributes.position;if(le!==null){const he=Math.max(0,se.start),ge=Math.min(le.count,se.start+se.count);for(let _e=he,Se=ge;_e<Se;_e++){const Ee=le.getX(_e);_position$2.fromBufferAttribute(fe,Ee),testPoint(_position$2,Ee,ae,te,_,K,this)}}else{const he=Math.max(0,se.start),ge=Math.min(fe.count,se.start+se.count);for(let _e=he,Se=ge;_e<Se;_e++)_position$2.fromBufferAttribute(fe,_e),testPoint(_position$2,_e,ae,te,_,K,this)}}updateMorphTargets(){const K=this.geometry.morphAttributes,Z=Object.keys(K);if(Z.length>0){const te=K[Z[0]];if(te!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ie=0,se=te.length;ie<se;ie++){const oe=te[ie].name||String(ie);this.morphTargetInfluences.push(0),this.morphTargetDictionary[oe]=ie}}}}}function testPoint(ne,_,K,Z,te,ie,se){const oe=_ray$4.distanceSqToPoint(ne);if(oe<K){const ae=new Vector3;_ray$4.closestPointToPoint(ne,ae),ae.applyMatrix4(Z);const le=te.ray.origin.distanceTo(ae);if(le<te.near||le>te.far)return;ie.push({distance:le,distanceToRay:Math.sqrt(oe),point:ae,index:_,face:null,faceIndex:null,barycoord:null,object:se})}}class VideoTexture extends Texture{constructor(_,K,Z,te,ie=LinearFilter,se=LinearFilter,oe,ae,le){super(_,K,Z,te,ie,se,oe,ae,le),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const ue=this;function fe(){ue.needsUpdate=!0,ue._requestVideoFrameCallbackId=_.requestVideoFrameCallback(fe)}"requestVideoFrameCallback"in _&&(this._requestVideoFrameCallbackId=_.requestVideoFrameCallback(fe))}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class VideoFrameTexture extends VideoTexture{constructor(_,K,Z,te,ie,se,oe,ae){super({},_,K,Z,te,ie,se,oe,ae),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(_){this.image=_,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(_,K){super({width:_,height:K}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,K,Z,te,ie,se,oe,ae,le,ue,fe,he){super(null,se,oe,ae,le,ue,te,ie,fe,he),this.isCompressedTexture=!0,this.image={width:K,height:Z},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(_,K,Z,te,ie,se){super(_,K,Z,ie,se),this.isCompressedArrayTexture=!0,this.image.depth=te,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(_){this.layerUpdates.add(_)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(_,K,Z){super(void 0,_[0].width,_[0].height,K,Z,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=_}}class CanvasTexture extends Texture{constructor(_,K,Z,te,ie,se,oe,ae,le){super(_,K,Z,te,ie,se,oe,ae,le),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(_,K,Z=UnsignedIntType,te,ie,se,oe=NearestFilter,ae=NearestFilter,le,ue=DepthFormat,fe=1){if(ue!==DepthFormat&&ue!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const he={width:_,height:K,depth:fe};super(he,te,ie,se,oe,ae,ue,Z,le),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(_){return super.copy(_),this.source=new Source(Object.assign({},_.image)),this.compareFunction=_.compareFunction,this}toJSON(_){const K=super.toJSON(_);return this.compareFunction!==null&&(K.compareFunction=this.compareFunction),K}}class CapsuleGeometry extends BufferGeometry{constructor(_=1,K=1,Z=4,te=8,ie=1){super(),this.type="CapsuleGeometry",this.parameters={radius:_,height:K,capSegments:Z,radialSegments:te,heightSegments:ie},K=Math.max(0,K),Z=Math.max(1,Math.floor(Z)),te=Math.max(3,Math.floor(te)),ie=Math.max(1,Math.floor(ie));const se=[],oe=[],ae=[],le=[],ue=K/2,fe=Math.PI/2*_,he=K,ge=2*fe+he,_e=Z*2+ie,Se=te+1,Ee=new Vector3,ye=new Vector3;for(let be=0;be<=_e;be++){let we=0,Pe=0,Oe=0,Be=0;if(be<=Z){const De=be/Z,ke=De*Math.PI/2;Pe=-ue-_*Math.cos(ke),Oe=_*Math.sin(ke),Be=-_*Math.cos(ke),we=De*fe}else if(be<=Z+ie){const De=(be-Z)/ie;Pe=-ue+De*K,Oe=_,Be=0,we=fe+De*he}else{const De=(be-Z-ie)/Z,ke=De*Math.PI/2;Pe=ue+_*Math.sin(ke),Oe=_*Math.cos(ke),Be=_*Math.sin(ke),we=fe+he+De*fe}const Ue=Math.max(0,Math.min(1,we/ge));let $e=0;be===0?$e=.5/te:be===_e&&($e=-.5/te);for(let De=0;De<=te;De++){const ke=De/te,Ge=ke*Math.PI*2,Je=Math.sin(Ge),Ye=Math.cos(Ge);ye.x=-Oe*Ye,ye.y=Pe,ye.z=Oe*Je,oe.push(ye.x,ye.y,ye.z),Ee.set(-Oe*Ye,Be,Oe*Je),Ee.normalize(),ae.push(Ee.x,Ee.y,Ee.z),le.push(ke+$e,Ue)}if(be>0){const De=(be-1)*Se;for(let ke=0;ke<te;ke++){const Ge=De+ke,Je=De+ke+1,Ye=be*Se+ke,Qe=be*Se+ke+1;se.push(Ge,Je,Ye),se.push(Je,Qe,Ye)}}}this.setIndex(se),this.setAttribute("position",new Float32BufferAttribute(oe,3)),this.setAttribute("normal",new Float32BufferAttribute(ae,3)),this.setAttribute("uv",new Float32BufferAttribute(le,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CapsuleGeometry(_.radius,_.height,_.capSegments,_.radialSegments,_.heightSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,K=32,Z=0,te=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:K,thetaStart:Z,thetaLength:te},K=Math.max(3,K);const ie=[],se=[],oe=[],ae=[],le=new Vector3,ue=new Vector2;se.push(0,0,0),oe.push(0,0,1),ae.push(.5,.5);for(let fe=0,he=3;fe<=K;fe++,he+=3){const ge=Z+fe/K*te;le.x=_*Math.cos(ge),le.y=_*Math.sin(ge),se.push(le.x,le.y,le.z),oe.push(0,0,1),ue.x=(se[he]/_+1)/2,ue.y=(se[he+1]/_+1)/2,ae.push(ue.x,ue.y)}for(let fe=1;fe<=K;fe++)ie.push(fe,fe+1,0);this.setIndex(ie),this.setAttribute("position",new Float32BufferAttribute(se,3)),this.setAttribute("normal",new Float32BufferAttribute(oe,3)),this.setAttribute("uv",new Float32BufferAttribute(ae,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,K=1,Z=1,te=32,ie=1,se=!1,oe=0,ae=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:K,height:Z,radialSegments:te,heightSegments:ie,openEnded:se,thetaStart:oe,thetaLength:ae};const le=this;te=Math.floor(te),ie=Math.floor(ie);const ue=[],fe=[],he=[],ge=[];let _e=0;const Se=[],Ee=Z/2;let ye=0;be(),se===!1&&(_>0&&we(!0),K>0&&we(!1)),this.setIndex(ue),this.setAttribute("position",new Float32BufferAttribute(fe,3)),this.setAttribute("normal",new Float32BufferAttribute(he,3)),this.setAttribute("uv",new Float32BufferAttribute(ge,2));function be(){const Pe=new Vector3,Oe=new Vector3;let Be=0;const Ue=(K-_)/Z;for(let $e=0;$e<=ie;$e++){const De=[],ke=$e/ie,Ge=ke*(K-_)+_;for(let Je=0;Je<=te;Je++){const Ye=Je/te,Qe=Ye*ae+oe,rt=Math.sin(Qe),ot=Math.cos(Qe);Oe.x=Ge*rt,Oe.y=-ke*Z+Ee,Oe.z=Ge*ot,fe.push(Oe.x,Oe.y,Oe.z),Pe.set(rt,Ue,ot).normalize(),he.push(Pe.x,Pe.y,Pe.z),ge.push(Ye,1-ke),De.push(_e++)}Se.push(De)}for(let $e=0;$e<te;$e++)for(let De=0;De<ie;De++){const ke=Se[De][$e],Ge=Se[De+1][$e],Je=Se[De+1][$e+1],Ye=Se[De][$e+1];(_>0||De!==0)&&(ue.push(ke,Ge,Ye),Be+=3),(K>0||De!==ie-1)&&(ue.push(Ge,Je,Ye),Be+=3)}le.addGroup(ye,Be,0),ye+=Be}function we(Pe){const Oe=_e,Be=new Vector2,Ue=new Vector3;let $e=0;const De=Pe===!0?_:K,ke=Pe===!0?1:-1;for(let Je=1;Je<=te;Je++)fe.push(0,Ee*ke,0),he.push(0,ke,0),ge.push(.5,.5),_e++;const Ge=_e;for(let Je=0;Je<=te;Je++){const Qe=Je/te*ae+oe,rt=Math.cos(Qe),ot=Math.sin(Qe);Ue.x=De*ot,Ue.y=Ee*ke,Ue.z=De*rt,fe.push(Ue.x,Ue.y,Ue.z),he.push(0,ke,0),Be.x=rt*.5+.5,Be.y=ot*.5*ke+.5,ge.push(Be.x,Be.y),_e++}for(let Je=0;Je<te;Je++){const Ye=Oe+Je,Qe=Ge+Je;Pe===!0?ue.push(Qe,Qe+1,Ye):ue.push(Qe+1,Qe,Ye),$e+=3}le.addGroup(ye,$e,Pe===!0?1:2),ye+=$e}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,K=1,Z=32,te=1,ie=!1,se=0,oe=Math.PI*2){super(0,_,K,Z,te,ie,se,oe),this.type="ConeGeometry",this.parameters={radius:_,height:K,radialSegments:Z,heightSegments:te,openEnded:ie,thetaStart:se,thetaLength:oe}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],K=[],Z=1,te=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:K,radius:Z,detail:te};const ie=[],se=[];oe(te),le(Z),ue(),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(ie.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(se,2)),te===0?this.computeVertexNormals():this.normalizeNormals();function oe(be){const we=new Vector3,Pe=new Vector3,Oe=new Vector3;for(let Be=0;Be<K.length;Be+=3)ge(K[Be+0],we),ge(K[Be+1],Pe),ge(K[Be+2],Oe),ae(we,Pe,Oe,be)}function ae(be,we,Pe,Oe){const Be=Oe+1,Ue=[];for(let $e=0;$e<=Be;$e++){Ue[$e]=[];const De=be.clone().lerp(Pe,$e/Be),ke=we.clone().lerp(Pe,$e/Be),Ge=Be-$e;for(let Je=0;Je<=Ge;Je++)Je===0&&$e===Be?Ue[$e][Je]=De:Ue[$e][Je]=De.clone().lerp(ke,Je/Ge)}for(let $e=0;$e<Be;$e++)for(let De=0;De<2*(Be-$e)-1;De++){const ke=Math.floor(De/2);De%2===0?(he(Ue[$e][ke+1]),he(Ue[$e+1][ke]),he(Ue[$e][ke])):(he(Ue[$e][ke+1]),he(Ue[$e+1][ke+1]),he(Ue[$e+1][ke]))}}function le(be){const we=new Vector3;for(let Pe=0;Pe<ie.length;Pe+=3)we.x=ie[Pe+0],we.y=ie[Pe+1],we.z=ie[Pe+2],we.normalize().multiplyScalar(be),ie[Pe+0]=we.x,ie[Pe+1]=we.y,ie[Pe+2]=we.z}function ue(){const be=new Vector3;for(let we=0;we<ie.length;we+=3){be.x=ie[we+0],be.y=ie[we+1],be.z=ie[we+2];const Pe=Ee(be)/2/Math.PI+.5,Oe=ye(be)/Math.PI+.5;se.push(Pe,1-Oe)}_e(),fe()}function fe(){for(let be=0;be<se.length;be+=6){const we=se[be+0],Pe=se[be+2],Oe=se[be+4],Be=Math.max(we,Pe,Oe),Ue=Math.min(we,Pe,Oe);Be>.9&&Ue<.1&&(we<.2&&(se[be+0]+=1),Pe<.2&&(se[be+2]+=1),Oe<.2&&(se[be+4]+=1))}}function he(be){ie.push(be.x,be.y,be.z)}function ge(be,we){const Pe=be*3;we.x=_[Pe+0],we.y=_[Pe+1],we.z=_[Pe+2]}function _e(){const be=new Vector3,we=new Vector3,Pe=new Vector3,Oe=new Vector3,Be=new Vector2,Ue=new Vector2,$e=new Vector2;for(let De=0,ke=0;De<ie.length;De+=9,ke+=6){be.set(ie[De+0],ie[De+1],ie[De+2]),we.set(ie[De+3],ie[De+4],ie[De+5]),Pe.set(ie[De+6],ie[De+7],ie[De+8]),Be.set(se[ke+0],se[ke+1]),Ue.set(se[ke+2],se[ke+3]),$e.set(se[ke+4],se[ke+5]),Oe.copy(be).add(we).add(Pe).divideScalar(3);const Ge=Ee(Oe);Se(Be,ke+0,be,Ge),Se(Ue,ke+2,we,Ge),Se($e,ke+4,Pe,Ge)}}function Se(be,we,Pe,Oe){Oe<0&&be.x===1&&(se[we]=be.x-1),Pe.x===0&&Pe.z===0&&(se[we]=Oe/2/Math.PI+.5)}function Ee(be){return Math.atan2(be.z,-be.x)}function ye(be){return Math.atan2(-be.y,Math.sqrt(be.x*be.x+be.z*be.z))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,K=0){const Z=(1+Math.sqrt(5))/2,te=1/Z,ie=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-te,-Z,0,-te,Z,0,te,-Z,0,te,Z,-te,-Z,0,-te,Z,0,te,-Z,0,te,Z,0,-Z,0,-te,Z,0,-te,-Z,0,te,Z,0,te],se=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ie,se,_,K),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:K}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,K=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:K},_!==null){const te=Math.pow(10,4),ie=Math.cos(DEG2RAD*K),se=_.getIndex(),oe=_.getAttribute("position"),ae=se?se.count:oe.count,le=[0,0,0],ue=["a","b","c"],fe=new Array(3),he={},ge=[];for(let _e=0;_e<ae;_e+=3){se?(le[0]=se.getX(_e),le[1]=se.getX(_e+1),le[2]=se.getX(_e+2)):(le[0]=_e,le[1]=_e+1,le[2]=_e+2);const{a:Se,b:Ee,c:ye}=_triangle;if(Se.fromBufferAttribute(oe,le[0]),Ee.fromBufferAttribute(oe,le[1]),ye.fromBufferAttribute(oe,le[2]),_triangle.getNormal(_normal),fe[0]=`${Math.round(Se.x*te)},${Math.round(Se.y*te)},${Math.round(Se.z*te)}`,fe[1]=`${Math.round(Ee.x*te)},${Math.round(Ee.y*te)},${Math.round(Ee.z*te)}`,fe[2]=`${Math.round(ye.x*te)},${Math.round(ye.y*te)},${Math.round(ye.z*te)}`,!(fe[0]===fe[1]||fe[1]===fe[2]||fe[2]===fe[0]))for(let be=0;be<3;be++){const we=(be+1)%3,Pe=fe[be],Oe=fe[we],Be=_triangle[ue[be]],Ue=_triangle[ue[we]],$e=`${Pe}_${Oe}`,De=`${Oe}_${Pe}`;De in he&&he[De]?(_normal.dot(he[De].normal)<=ie&&(ge.push(Be.x,Be.y,Be.z),ge.push(Ue.x,Ue.y,Ue.z)),he[De]=null):$e in he||(he[$e]={index0:le[be],index1:le[we],normal:_normal.clone()})}}for(const _e in he)if(he[_e]){const{index0:Se,index1:Ee}=he[_e];_v0$3.fromBufferAttribute(oe,Se),_v1$1.fromBufferAttribute(oe,Ee),ge.push(_v0$3.x,_v0$3.y,_v0$3.z),ge.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(ge,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(_,K){const Z=this.getUtoTmapping(_);return this.getPoint(Z,K)}getPoints(_=5){const K=[];for(let Z=0;Z<=_;Z++)K.push(this.getPoint(Z/_));return K}getSpacedPoints(_=5){const K=[];for(let Z=0;Z<=_;Z++)K.push(this.getPointAt(Z/_));return K}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const K=[];let Z,te=this.getPoint(0),ie=0;K.push(0);for(let se=1;se<=_;se++)Z=this.getPoint(se/_),ie+=Z.distanceTo(te),K.push(ie),te=Z;return this.cacheArcLengths=K,K}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,K=null){const Z=this.getLengths();let te=0;const ie=Z.length;let se;K?se=K:se=_*Z[ie-1];let oe=0,ae=ie-1,le;for(;oe<=ae;)if(te=Math.floor(oe+(ae-oe)/2),le=Z[te]-se,le<0)oe=te+1;else if(le>0)ae=te-1;else{ae=te;break}if(te=ae,Z[te]===se)return te/(ie-1);const ue=Z[te],he=Z[te+1]-ue,ge=(se-ue)/he;return(te+ge)/(ie-1)}getTangent(_,K){let te=_-1e-4,ie=_+1e-4;te<0&&(te=0),ie>1&&(ie=1);const se=this.getPoint(te),oe=this.getPoint(ie),ae=K||(se.isVector2?new Vector2:new Vector3);return ae.copy(oe).sub(se).normalize(),ae}getTangentAt(_,K){const Z=this.getUtoTmapping(_);return this.getTangent(Z,K)}computeFrenetFrames(_,K=!1){const Z=new Vector3,te=[],ie=[],se=[],oe=new Vector3,ae=new Matrix4;for(let ge=0;ge<=_;ge++){const _e=ge/_;te[ge]=this.getTangentAt(_e,new Vector3)}ie[0]=new Vector3,se[0]=new Vector3;let le=Number.MAX_VALUE;const ue=Math.abs(te[0].x),fe=Math.abs(te[0].y),he=Math.abs(te[0].z);ue<=le&&(le=ue,Z.set(1,0,0)),fe<=le&&(le=fe,Z.set(0,1,0)),he<=le&&Z.set(0,0,1),oe.crossVectors(te[0],Z).normalize(),ie[0].crossVectors(te[0],oe),se[0].crossVectors(te[0],ie[0]);for(let ge=1;ge<=_;ge++){if(ie[ge]=ie[ge-1].clone(),se[ge]=se[ge-1].clone(),oe.crossVectors(te[ge-1],te[ge]),oe.length()>Number.EPSILON){oe.normalize();const _e=Math.acos(clamp$3(te[ge-1].dot(te[ge]),-1,1));ie[ge].applyMatrix4(ae.makeRotationAxis(oe,_e))}se[ge].crossVectors(te[ge],ie[ge])}if(K===!0){let ge=Math.acos(clamp$3(ie[0].dot(ie[_]),-1,1));ge/=_,te[0].dot(oe.crossVectors(ie[0],ie[_]))>0&&(ge=-ge);for(let _e=1;_e<=_;_e++)ie[_e].applyMatrix4(ae.makeRotationAxis(te[_e],ge*_e)),se[_e].crossVectors(te[_e],ie[_e])}return{tangents:te,normals:ie,binormals:se}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,K=0,Z=1,te=1,ie=0,se=Math.PI*2,oe=!1,ae=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=K,this.xRadius=Z,this.yRadius=te,this.aStartAngle=ie,this.aEndAngle=se,this.aClockwise=oe,this.aRotation=ae}getPoint(_,K=new Vector2){const Z=K,te=Math.PI*2;let ie=this.aEndAngle-this.aStartAngle;const se=Math.abs(ie)<Number.EPSILON;for(;ie<0;)ie+=te;for(;ie>te;)ie-=te;ie<Number.EPSILON&&(se?ie=0:ie=te),this.aClockwise===!0&&!se&&(ie===te?ie=-te:ie=ie-te);const oe=this.aStartAngle+_*ie;let ae=this.aX+this.xRadius*Math.cos(oe),le=this.aY+this.yRadius*Math.sin(oe);if(this.aRotation!==0){const ue=Math.cos(this.aRotation),fe=Math.sin(this.aRotation),he=ae-this.aX,ge=le-this.aY;ae=he*ue-ge*fe+this.aX,le=he*fe+ge*ue+this.aY}return Z.set(ae,le)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,K,Z,te,ie,se){super(_,K,Z,Z,te,ie,se),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let ne=0,_=0,K=0,Z=0;function te(ie,se,oe,ae){ne=ie,_=oe,K=-3*ie+3*se-2*oe-ae,Z=2*ie-2*se+oe+ae}return{initCatmullRom:function(ie,se,oe,ae,le){te(se,oe,le*(oe-ie),le*(ae-se))},initNonuniformCatmullRom:function(ie,se,oe,ae,le,ue,fe){let he=(se-ie)/le-(oe-ie)/(le+ue)+(oe-se)/ue,ge=(oe-se)/ue-(ae-se)/(ue+fe)+(ae-oe)/fe;he*=ue,ge*=ue,te(se,oe,he,ge)},calc:function(ie){const se=ie*ie,oe=se*ie;return ne+_*ie+K*se+Z*oe}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],K=!1,Z="centripetal",te=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=K,this.curveType=Z,this.tension=te}getPoint(_,K=new Vector3){const Z=K,te=this.points,ie=te.length,se=(ie-(this.closed?0:1))*_;let oe=Math.floor(se),ae=se-oe;this.closed?oe+=oe>0?0:(Math.floor(Math.abs(oe)/ie)+1)*ie:ae===0&&oe===ie-1&&(oe=ie-2,ae=1);let le,ue;this.closed||oe>0?le=te[(oe-1)%ie]:(tmp.subVectors(te[0],te[1]).add(te[0]),le=tmp);const fe=te[oe%ie],he=te[(oe+1)%ie];if(this.closed||oe+2<ie?ue=te[(oe+2)%ie]:(tmp.subVectors(te[ie-1],te[ie-2]).add(te[ie-1]),ue=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const ge=this.curveType==="chordal"?.5:.25;let _e=Math.pow(le.distanceToSquared(fe),ge),Se=Math.pow(fe.distanceToSquared(he),ge),Ee=Math.pow(he.distanceToSquared(ue),ge);Se<1e-4&&(Se=1),_e<1e-4&&(_e=Se),Ee<1e-4&&(Ee=Se),px.initNonuniformCatmullRom(le.x,fe.x,he.x,ue.x,_e,Se,Ee),py.initNonuniformCatmullRom(le.y,fe.y,he.y,ue.y,_e,Se,Ee),pz.initNonuniformCatmullRom(le.z,fe.z,he.z,ue.z,_e,Se,Ee)}else this.curveType==="catmullrom"&&(px.initCatmullRom(le.x,fe.x,he.x,ue.x,this.tension),py.initCatmullRom(le.y,fe.y,he.y,ue.y,this.tension),pz.initCatmullRom(le.z,fe.z,he.z,ue.z,this.tension));return Z.set(px.calc(ae),py.calc(ae),pz.calc(ae)),Z}copy(_){super.copy(_),this.points=[];for(let K=0,Z=_.points.length;K<Z;K++){const te=_.points[K];this.points.push(te.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let K=0,Z=this.points.length;K<Z;K++){const te=this.points[K];_.points.push(te.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let K=0,Z=_.points.length;K<Z;K++){const te=_.points[K];this.points.push(new Vector3().fromArray(te))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(ne,_,K,Z,te){const ie=(Z-_)*.5,se=(te-K)*.5,oe=ne*ne,ae=ne*oe;return(2*K-2*Z+ie+se)*ae+(-3*K+3*Z-2*ie-se)*oe+ie*ne+K}function QuadraticBezierP0(ne,_){const K=1-ne;return K*K*_}function QuadraticBezierP1(ne,_){return 2*(1-ne)*ne*_}function QuadraticBezierP2(ne,_){return ne*ne*_}function QuadraticBezier(ne,_,K,Z){return QuadraticBezierP0(ne,_)+QuadraticBezierP1(ne,K)+QuadraticBezierP2(ne,Z)}function CubicBezierP0(ne,_){const K=1-ne;return K*K*K*_}function CubicBezierP1(ne,_){const K=1-ne;return 3*K*K*ne*_}function CubicBezierP2(ne,_){return 3*(1-ne)*ne*ne*_}function CubicBezierP3(ne,_){return ne*ne*ne*_}function CubicBezier(ne,_,K,Z,te){return CubicBezierP0(ne,_)+CubicBezierP1(ne,K)+CubicBezierP2(ne,Z)+CubicBezierP3(ne,te)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,K=new Vector2,Z=new Vector2,te=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=K,this.v2=Z,this.v3=te}getPoint(_,K=new Vector2){const Z=K,te=this.v0,ie=this.v1,se=this.v2,oe=this.v3;return Z.set(CubicBezier(_,te.x,ie.x,se.x,oe.x),CubicBezier(_,te.y,ie.y,se.y,oe.y)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,K=new Vector3,Z=new Vector3,te=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=K,this.v2=Z,this.v3=te}getPoint(_,K=new Vector3){const Z=K,te=this.v0,ie=this.v1,se=this.v2,oe=this.v3;return Z.set(CubicBezier(_,te.x,ie.x,se.x,oe.x),CubicBezier(_,te.y,ie.y,se.y,oe.y),CubicBezier(_,te.z,ie.z,se.z,oe.z)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,K=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=K}getPoint(_,K=new Vector2){const Z=K;return _===1?Z.copy(this.v2):(Z.copy(this.v2).sub(this.v1),Z.multiplyScalar(_).add(this.v1)),Z}getPointAt(_,K){return this.getPoint(_,K)}getTangent(_,K=new Vector2){return K.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,K){return this.getTangent(_,K)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,K=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=K}getPoint(_,K=new Vector3){const Z=K;return _===1?Z.copy(this.v2):(Z.copy(this.v2).sub(this.v1),Z.multiplyScalar(_).add(this.v1)),Z}getPointAt(_,K){return this.getPoint(_,K)}getTangent(_,K=new Vector3){return K.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,K){return this.getTangent(_,K)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,K=new Vector2,Z=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=K,this.v2=Z}getPoint(_,K=new Vector2){const Z=K,te=this.v0,ie=this.v1,se=this.v2;return Z.set(QuadraticBezier(_,te.x,ie.x,se.x),QuadraticBezier(_,te.y,ie.y,se.y)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,K=new Vector3,Z=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=K,this.v2=Z}getPoint(_,K=new Vector3){const Z=K,te=this.v0,ie=this.v1,se=this.v2;return Z.set(QuadraticBezier(_,te.x,ie.x,se.x),QuadraticBezier(_,te.y,ie.y,se.y),QuadraticBezier(_,te.z,ie.z,se.z)),Z}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,K=new Vector2){const Z=K,te=this.points,ie=(te.length-1)*_,se=Math.floor(ie),oe=ie-se,ae=te[se===0?se:se-1],le=te[se],ue=te[se>te.length-2?te.length-1:se+1],fe=te[se>te.length-3?te.length-1:se+2];return Z.set(CatmullRom(oe,ae.x,le.x,ue.x,fe.x),CatmullRom(oe,ae.y,le.y,ue.y,fe.y)),Z}copy(_){super.copy(_),this.points=[];for(let K=0,Z=_.points.length;K<Z;K++){const te=_.points[K];this.points.push(te.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let K=0,Z=this.points.length;K<Z;K++){const te=this.points[K];_.points.push(te.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let K=0,Z=_.points.length;K<Z;K++){const te=_.points[K];this.points.push(new Vector2().fromArray(te))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),K=this.curves[this.curves.length-1].getPoint(1);if(!_.equals(K)){const Z=_.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[Z](K,_))}return this}getPoint(_,K){const Z=_*this.getLength(),te=this.getCurveLengths();let ie=0;for(;ie<te.length;){if(te[ie]>=Z){const se=te[ie]-Z,oe=this.curves[ie],ae=oe.getLength(),le=ae===0?0:1-se/ae;return oe.getPointAt(le,K)}ie++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let K=0;for(let Z=0,te=this.curves.length;Z<te;Z++)K+=this.curves[Z].getLength(),_.push(K);return this.cacheLengths=_,_}getSpacedPoints(_=40){const K=[];for(let Z=0;Z<=_;Z++)K.push(this.getPoint(Z/_));return this.autoClose&&K.push(K[0]),K}getPoints(_=12){const K=[];let Z;for(let te=0,ie=this.curves;te<ie.length;te++){const se=ie[te],oe=se.isEllipseCurve?_*2:se.isLineCurve||se.isLineCurve3?1:se.isSplineCurve?_*se.points.length:_,ae=se.getPoints(oe);for(let le=0;le<ae.length;le++){const ue=ae[le];Z&&Z.equals(ue)||(K.push(ue),Z=ue)}}return this.autoClose&&K.length>1&&!K[K.length-1].equals(K[0])&&K.push(K[0]),K}copy(_){super.copy(_),this.curves=[];for(let K=0,Z=_.curves.length;K<Z;K++){const te=_.curves[K];this.curves.push(te.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let K=0,Z=this.curves.length;K<Z;K++){const te=this.curves[K];_.curves.push(te.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let K=0,Z=_.curves.length;K<Z;K++){const te=_.curves[K];this.curves.push(new Curves[te.type]().fromJSON(te))}return this}}class Path extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let K=1,Z=_.length;K<Z;K++)this.lineTo(_[K].x,_[K].y);return this}moveTo(_,K){return this.currentPoint.set(_,K),this}lineTo(_,K){const Z=new LineCurve(this.currentPoint.clone(),new Vector2(_,K));return this.curves.push(Z),this.currentPoint.set(_,K),this}quadraticCurveTo(_,K,Z,te){const ie=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,K),new Vector2(Z,te));return this.curves.push(ie),this.currentPoint.set(Z,te),this}bezierCurveTo(_,K,Z,te,ie,se){const oe=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,K),new Vector2(Z,te),new Vector2(ie,se));return this.curves.push(oe),this.currentPoint.set(ie,se),this}splineThru(_){const K=[this.currentPoint.clone()].concat(_),Z=new SplineCurve(K);return this.curves.push(Z),this.currentPoint.copy(_[_.length-1]),this}arc(_,K,Z,te,ie,se){const oe=this.currentPoint.x,ae=this.currentPoint.y;return this.absarc(_+oe,K+ae,Z,te,ie,se),this}absarc(_,K,Z,te,ie,se){return this.absellipse(_,K,Z,Z,te,ie,se),this}ellipse(_,K,Z,te,ie,se,oe,ae){const le=this.currentPoint.x,ue=this.currentPoint.y;return this.absellipse(_+le,K+ue,Z,te,ie,se,oe,ae),this}absellipse(_,K,Z,te,ie,se,oe,ae){const le=new EllipseCurve(_,K,Z,te,ie,se,oe,ae);if(this.curves.length>0){const fe=le.getPoint(0);fe.equals(this.currentPoint)||this.lineTo(fe.x,fe.y)}this.curves.push(le);const ue=le.getPoint(1);return this.currentPoint.copy(ue),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}}class Shape extends Path{constructor(_){super(_),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(_){const K=[];for(let Z=0,te=this.holes.length;Z<te;Z++)K[Z]=this.holes[Z].getPoints(_);return K}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let K=0,Z=_.holes.length;K<Z;K++){const te=_.holes[K];this.holes.push(te.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let K=0,Z=this.holes.length;K<Z;K++){const te=this.holes[K];_.holes.push(te.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let K=0,Z=_.holes.length;K<Z;K++){const te=_.holes[K];this.holes.push(new Path().fromJSON(te))}return this}}function earcut(ne,_,K=2){const Z=_&&_.length,te=Z?_[0]*K:ne.length;let ie=linkedList(ne,0,te,K,!0);const se=[];if(!ie||ie.next===ie.prev)return se;let oe,ae,le;if(Z&&(ie=eliminateHoles(ne,_,ie,K)),ne.length>80*K){oe=1/0,ae=1/0;let ue=-1/0,fe=-1/0;for(let he=K;he<te;he+=K){const ge=ne[he],_e=ne[he+1];ge<oe&&(oe=ge),_e<ae&&(ae=_e),ge>ue&&(ue=ge),_e>fe&&(fe=_e)}le=Math.max(ue-oe,fe-ae),le=le!==0?32767/le:0}return earcutLinked(ie,se,K,oe,ae,le,0),se}function linkedList(ne,_,K,Z,te){let ie;if(te===signedArea(ne,_,K,Z)>0)for(let se=_;se<K;se+=Z)ie=insertNode(se/Z|0,ne[se],ne[se+1],ie);else for(let se=K-Z;se>=_;se-=Z)ie=insertNode(se/Z|0,ne[se],ne[se+1],ie);return ie&&equals(ie,ie.next)&&(removeNode(ie),ie=ie.next),ie}function filterPoints(ne,_){if(!ne)return ne;_||(_=ne);let K=ne,Z;do if(Z=!1,!K.steiner&&(equals(K,K.next)||area(K.prev,K,K.next)===0)){if(removeNode(K),K=_=K.prev,K===K.next)break;Z=!0}else K=K.next;while(Z||K!==_);return _}function earcutLinked(ne,_,K,Z,te,ie,se){if(!ne)return;!se&&ie&&indexCurve(ne,Z,te,ie);let oe=ne;for(;ne.prev!==ne.next;){const ae=ne.prev,le=ne.next;if(ie?isEarHashed(ne,Z,te,ie):isEar(ne)){_.push(ae.i,ne.i,le.i),removeNode(ne),ne=le.next,oe=le.next;continue}if(ne=le,ne===oe){se?se===1?(ne=cureLocalIntersections(filterPoints(ne),_),earcutLinked(ne,_,K,Z,te,ie,2)):se===2&&splitEarcut(ne,_,K,Z,te,ie):earcutLinked(filterPoints(ne),_,K,Z,te,ie,1);break}}}function isEar(ne){const _=ne.prev,K=ne,Z=ne.next;if(area(_,K,Z)>=0)return!1;const te=_.x,ie=K.x,se=Z.x,oe=_.y,ae=K.y,le=Z.y,ue=Math.min(te,ie,se),fe=Math.min(oe,ae,le),he=Math.max(te,ie,se),ge=Math.max(oe,ae,le);let _e=Z.next;for(;_e!==_;){if(_e.x>=ue&&_e.x<=he&&_e.y>=fe&&_e.y<=ge&&pointInTriangleExceptFirst(te,oe,ie,ae,se,le,_e.x,_e.y)&&area(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function isEarHashed(ne,_,K,Z){const te=ne.prev,ie=ne,se=ne.next;if(area(te,ie,se)>=0)return!1;const oe=te.x,ae=ie.x,le=se.x,ue=te.y,fe=ie.y,he=se.y,ge=Math.min(oe,ae,le),_e=Math.min(ue,fe,he),Se=Math.max(oe,ae,le),Ee=Math.max(ue,fe,he),ye=zOrder(ge,_e,_,K,Z),be=zOrder(Se,Ee,_,K,Z);let we=ne.prevZ,Pe=ne.nextZ;for(;we&&we.z>=ye&&Pe&&Pe.z<=be;){if(we.x>=ge&&we.x<=Se&&we.y>=_e&&we.y<=Ee&&we!==te&&we!==se&&pointInTriangleExceptFirst(oe,ue,ae,fe,le,he,we.x,we.y)&&area(we.prev,we,we.next)>=0||(we=we.prevZ,Pe.x>=ge&&Pe.x<=Se&&Pe.y>=_e&&Pe.y<=Ee&&Pe!==te&&Pe!==se&&pointInTriangleExceptFirst(oe,ue,ae,fe,le,he,Pe.x,Pe.y)&&area(Pe.prev,Pe,Pe.next)>=0))return!1;Pe=Pe.nextZ}for(;we&&we.z>=ye;){if(we.x>=ge&&we.x<=Se&&we.y>=_e&&we.y<=Ee&&we!==te&&we!==se&&pointInTriangleExceptFirst(oe,ue,ae,fe,le,he,we.x,we.y)&&area(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Pe&&Pe.z<=be;){if(Pe.x>=ge&&Pe.x<=Se&&Pe.y>=_e&&Pe.y<=Ee&&Pe!==te&&Pe!==se&&pointInTriangleExceptFirst(oe,ue,ae,fe,le,he,Pe.x,Pe.y)&&area(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.nextZ}return!0}function cureLocalIntersections(ne,_){let K=ne;do{const Z=K.prev,te=K.next.next;!equals(Z,te)&&intersects(Z,K,K.next,te)&&locallyInside(Z,te)&&locallyInside(te,Z)&&(_.push(Z.i,K.i,te.i),removeNode(K),removeNode(K.next),K=ne=te),K=K.next}while(K!==ne);return filterPoints(K)}function splitEarcut(ne,_,K,Z,te,ie){let se=ne;do{let oe=se.next.next;for(;oe!==se.prev;){if(se.i!==oe.i&&isValidDiagonal(se,oe)){let ae=splitPolygon(se,oe);se=filterPoints(se,se.next),ae=filterPoints(ae,ae.next),earcutLinked(se,_,K,Z,te,ie,0),earcutLinked(ae,_,K,Z,te,ie,0);return}oe=oe.next}se=se.next}while(se!==ne)}function eliminateHoles(ne,_,K,Z){const te=[];for(let ie=0,se=_.length;ie<se;ie++){const oe=_[ie]*Z,ae=ie<se-1?_[ie+1]*Z:ne.length,le=linkedList(ne,oe,ae,Z,!1);le===le.next&&(le.steiner=!0),te.push(getLeftmost(le))}te.sort(compareXYSlope);for(let ie=0;ie<te.length;ie++)K=eliminateHole(te[ie],K);return K}function compareXYSlope(ne,_){let K=ne.x-_.x;if(K===0&&(K=ne.y-_.y,K===0)){const Z=(ne.next.y-ne.y)/(ne.next.x-ne.x),te=(_.next.y-_.y)/(_.next.x-_.x);K=Z-te}return K}function eliminateHole(ne,_){const K=findHoleBridge(ne,_);if(!K)return _;const Z=splitPolygon(K,ne);return filterPoints(Z,Z.next),filterPoints(K,K.next)}function findHoleBridge(ne,_){let K=_;const Z=ne.x,te=ne.y;let ie=-1/0,se;if(equals(ne,K))return K;do{if(equals(ne,K.next))return K.next;if(te<=K.y&&te>=K.next.y&&K.next.y!==K.y){const fe=K.x+(te-K.y)*(K.next.x-K.x)/(K.next.y-K.y);if(fe<=Z&&fe>ie&&(ie=fe,se=K.x<K.next.x?K:K.next,fe===Z))return se}K=K.next}while(K!==_);if(!se)return null;const oe=se,ae=se.x,le=se.y;let ue=1/0;K=se;do{if(Z>=K.x&&K.x>=ae&&Z!==K.x&&pointInTriangle(te<le?Z:ie,te,ae,le,te<le?ie:Z,te,K.x,K.y)){const fe=Math.abs(te-K.y)/(Z-K.x);locallyInside(K,ne)&&(fe<ue||fe===ue&&(K.x>se.x||K.x===se.x&&sectorContainsSector(se,K)))&&(se=K,ue=fe)}K=K.next}while(K!==oe);return se}function sectorContainsSector(ne,_){return area(ne.prev,ne,_.prev)<0&&area(_.next,ne,ne.next)<0}function indexCurve(ne,_,K,Z){let te=ne;do te.z===0&&(te.z=zOrder(te.x,te.y,_,K,Z)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==ne);te.prevZ.nextZ=null,te.prevZ=null,sortLinked(te)}function sortLinked(ne){let _,K=1;do{let Z=ne,te;ne=null;let ie=null;for(_=0;Z;){_++;let se=Z,oe=0;for(let le=0;le<K&&(oe++,se=se.nextZ,!!se);le++);let ae=K;for(;oe>0||ae>0&&se;)oe!==0&&(ae===0||!se||Z.z<=se.z)?(te=Z,Z=Z.nextZ,oe--):(te=se,se=se.nextZ,ae--),ie?ie.nextZ=te:ne=te,te.prevZ=ie,ie=te;Z=se}ie.nextZ=null,K*=2}while(_>1);return ne}function zOrder(ne,_,K,Z,te){return ne=(ne-K)*te|0,_=(_-Z)*te|0,ne=(ne|ne<<8)&16711935,ne=(ne|ne<<4)&252645135,ne=(ne|ne<<2)&858993459,ne=(ne|ne<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,ne|_<<1}function getLeftmost(ne){let _=ne,K=ne;do(_.x<K.x||_.x===K.x&&_.y<K.y)&&(K=_),_=_.next;while(_!==ne);return K}function pointInTriangle(ne,_,K,Z,te,ie,se,oe){return(te-se)*(_-oe)>=(ne-se)*(ie-oe)&&(ne-se)*(Z-oe)>=(K-se)*(_-oe)&&(K-se)*(ie-oe)>=(te-se)*(Z-oe)}function pointInTriangleExceptFirst(ne,_,K,Z,te,ie,se,oe){return!(ne===se&&_===oe)&&pointInTriangle(ne,_,K,Z,te,ie,se,oe)}function isValidDiagonal(ne,_){return ne.next.i!==_.i&&ne.prev.i!==_.i&&!intersectsPolygon(ne,_)&&(locallyInside(ne,_)&&locallyInside(_,ne)&&middleInside(ne,_)&&(area(ne.prev,ne,_.prev)||area(ne,_.prev,_))||equals(ne,_)&&area(ne.prev,ne,ne.next)>0&&area(_.prev,_,_.next)>0)}function area(ne,_,K){return(_.y-ne.y)*(K.x-_.x)-(_.x-ne.x)*(K.y-_.y)}function equals(ne,_){return ne.x===_.x&&ne.y===_.y}function intersects(ne,_,K,Z){const te=sign(area(ne,_,K)),ie=sign(area(ne,_,Z)),se=sign(area(K,Z,ne)),oe=sign(area(K,Z,_));return!!(te!==ie&&se!==oe||te===0&&onSegment(ne,K,_)||ie===0&&onSegment(ne,Z,_)||se===0&&onSegment(K,ne,Z)||oe===0&&onSegment(K,_,Z))}function onSegment(ne,_,K){return _.x<=Math.max(ne.x,K.x)&&_.x>=Math.min(ne.x,K.x)&&_.y<=Math.max(ne.y,K.y)&&_.y>=Math.min(ne.y,K.y)}function sign(ne){return ne>0?1:ne<0?-1:0}function intersectsPolygon(ne,_){let K=ne;do{if(K.i!==ne.i&&K.next.i!==ne.i&&K.i!==_.i&&K.next.i!==_.i&&intersects(K,K.next,ne,_))return!0;K=K.next}while(K!==ne);return!1}function locallyInside(ne,_){return area(ne.prev,ne,ne.next)<0?area(ne,_,ne.next)>=0&&area(ne,ne.prev,_)>=0:area(ne,_,ne.prev)<0||area(ne,ne.next,_)<0}function middleInside(ne,_){let K=ne,Z=!1;const te=(ne.x+_.x)/2,ie=(ne.y+_.y)/2;do K.y>ie!=K.next.y>ie&&K.next.y!==K.y&&te<(K.next.x-K.x)*(ie-K.y)/(K.next.y-K.y)+K.x&&(Z=!Z),K=K.next;while(K!==ne);return Z}function splitPolygon(ne,_){const K=createNode(ne.i,ne.x,ne.y),Z=createNode(_.i,_.x,_.y),te=ne.next,ie=_.prev;return ne.next=_,_.prev=ne,K.next=te,te.prev=K,Z.next=K,K.prev=Z,ie.next=Z,Z.prev=ie,Z}function insertNode(ne,_,K,Z){const te=createNode(ne,_,K);return Z?(te.next=Z.next,te.prev=Z,Z.next.prev=te,Z.next=te):(te.prev=te,te.next=te),te}function removeNode(ne){ne.next.prev=ne.prev,ne.prev.next=ne.next,ne.prevZ&&(ne.prevZ.nextZ=ne.nextZ),ne.nextZ&&(ne.nextZ.prevZ=ne.prevZ)}function createNode(ne,_,K){return{i:ne,x:_,y:K,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(ne,_,K,Z){let te=0;for(let ie=_,se=K-Z;ie<K;ie+=Z)te+=(ne[se]-ne[ie])*(ne[ie+1]+ne[se+1]),se=ie;return te}class Earcut{static triangulate(_,K,Z=2){return earcut(_,K,Z)}}class ShapeUtils{static area(_){const K=_.length;let Z=0;for(let te=K-1,ie=0;ie<K;te=ie++)Z+=_[te].x*_[ie].y-_[ie].x*_[te].y;return Z*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,K){const Z=[],te=[],ie=[];removeDupEndPts(_),addContour(Z,_);let se=_.length;K.forEach(removeDupEndPts);for(let ae=0;ae<K.length;ae++)te.push(se),se+=K[ae].length,addContour(Z,K[ae]);const oe=Earcut.triangulate(Z,te);for(let ae=0;ae<oe.length;ae+=3)ie.push(oe.slice(ae,ae+3));return ie}}function removeDupEndPts(ne){const _=ne.length;_>2&&ne[_-1].equals(ne[0])&&ne.pop()}function addContour(ne,_){for(let K=0;K<_.length;K++)ne.push(_[K].x),ne.push(_[K].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),K={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:K},_=Array.isArray(_)?_:[_];const Z=this,te=[],ie=[];for(let oe=0,ae=_.length;oe<ae;oe++){const le=_[oe];se(le)}this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("uv",new Float32BufferAttribute(ie,2)),this.computeVertexNormals();function se(oe){const ae=[],le=K.curveSegments!==void 0?K.curveSegments:12,ue=K.steps!==void 0?K.steps:1,fe=K.depth!==void 0?K.depth:1;let he=K.bevelEnabled!==void 0?K.bevelEnabled:!0,ge=K.bevelThickness!==void 0?K.bevelThickness:.2,_e=K.bevelSize!==void 0?K.bevelSize:ge-.1,Se=K.bevelOffset!==void 0?K.bevelOffset:0,Ee=K.bevelSegments!==void 0?K.bevelSegments:3;const ye=K.extrudePath,be=K.UVGenerator!==void 0?K.UVGenerator:WorldUVGenerator;let we,Pe=!1,Oe,Be,Ue,$e;ye&&(we=ye.getSpacedPoints(ue),Pe=!0,he=!1,Oe=ye.computeFrenetFrames(ue,!1),Be=new Vector3,Ue=new Vector3,$e=new Vector3),he||(Ee=0,ge=0,_e=0,Se=0);const De=oe.extractPoints(le);let ke=De.shape;const Ge=De.holes;if(!ShapeUtils.isClockWise(ke)){ke=ke.reverse();for(let Ut=0,Dt=Ge.length;Ut<Dt;Ut++){const Vt=Ge[Ut];ShapeUtils.isClockWise(Vt)&&(Ge[Ut]=Vt.reverse())}}function Ye(Ut){const Vt=10000000000000001e-36;let It=Ut[0];for(let Qt=1;Qt<=Ut.length;Qt++){const kt=Qt%Ut.length,qt=Ut[kt],Tn=qt.x-It.x,Sn=qt.y-It.y,We=Tn*Tn+Sn*Sn,Ve=Math.max(Math.abs(qt.x),Math.abs(qt.y),Math.abs(It.x),Math.abs(It.y)),ft=Vt*Ve*Ve;if(We<=ft){Ut.splice(kt,1),Qt--;continue}It=qt}}Ye(ke),Ge.forEach(Ye);const Qe=Ge.length,rt=ke;for(let Ut=0;Ut<Qe;Ut++){const Dt=Ge[Ut];ke=ke.concat(Dt)}function ot(Ut,Dt,Vt){return Dt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ut.clone().addScaledVector(Dt,Vt)}const ct=ke.length;function je(Ut,Dt,Vt){let It,Qt,kt;const qt=Ut.x-Dt.x,Tn=Ut.y-Dt.y,Sn=Vt.x-Ut.x,We=Vt.y-Ut.y,Ve=qt*qt+Tn*Tn,ft=qt*We-Tn*Sn;if(Math.abs(ft)>Number.EPSILON){const Et=Math.sqrt(Ve),Ft=Math.sqrt(Sn*Sn+We*We),Ct=Dt.x-Tn/Et,un=Dt.y+qt/Et,Yt=Vt.x-We/Ft,fn=Vt.y+Sn/Ft,gn=((Yt-Ct)*We-(fn-un)*Sn)/(qt*We-Tn*Sn);It=Ct+qt*gn-Ut.x,Qt=un+Tn*gn-Ut.y;const $t=It*It+Qt*Qt;if($t<=2)return new Vector2(It,Qt);kt=Math.sqrt($t/2)}else{let Et=!1;qt>Number.EPSILON?Sn>Number.EPSILON&&(Et=!0):qt<-Number.EPSILON?Sn<-Number.EPSILON&&(Et=!0):Math.sign(Tn)===Math.sign(We)&&(Et=!0),Et?(It=-Tn,Qt=qt,kt=Math.sqrt(Ve)):(It=qt,Qt=Tn,kt=Math.sqrt(Ve/2))}return new Vector2(It/kt,Qt/kt)}const st=[];for(let Ut=0,Dt=rt.length,Vt=Dt-1,It=Ut+1;Ut<Dt;Ut++,Vt++,It++)Vt===Dt&&(Vt=0),It===Dt&&(It=0),st[Ut]=je(rt[Ut],rt[Vt],rt[It]);const nt=[];let qe,lt=st.concat();for(let Ut=0,Dt=Qe;Ut<Dt;Ut++){const Vt=Ge[Ut];qe=[];for(let It=0,Qt=Vt.length,kt=Qt-1,qt=It+1;It<Qt;It++,kt++,qt++)kt===Qt&&(kt=0),qt===Qt&&(qt=0),qe[It]=je(Vt[It],Vt[kt],Vt[qt]);nt.push(qe),lt=lt.concat(qe)}let Pt;if(Ee===0)Pt=ShapeUtils.triangulateShape(rt,Ge);else{const Ut=[],Dt=[];for(let Vt=0;Vt<Ee;Vt++){const It=Vt/Ee,Qt=ge*Math.cos(It*Math.PI/2),kt=_e*Math.sin(It*Math.PI/2)+Se;for(let qt=0,Tn=rt.length;qt<Tn;qt++){const Sn=ot(rt[qt],st[qt],kt);jt(Sn.x,Sn.y,-Qt),It===0&&Ut.push(Sn)}for(let qt=0,Tn=Qe;qt<Tn;qt++){const Sn=Ge[qt];qe=nt[qt];const We=[];for(let Ve=0,ft=Sn.length;Ve<ft;Ve++){const Et=ot(Sn[Ve],qe[Ve],kt);jt(Et.x,Et.y,-Qt),It===0&&We.push(Et)}It===0&&Dt.push(We)}}Pt=ShapeUtils.triangulateShape(Ut,Dt)}const Gt=Pt.length,pt=_e+Se;for(let Ut=0;Ut<ct;Ut++){const Dt=he?ot(ke[Ut],lt[Ut],pt):ke[Ut];Pe?(Ue.copy(Oe.normals[0]).multiplyScalar(Dt.x),Be.copy(Oe.binormals[0]).multiplyScalar(Dt.y),$e.copy(we[0]).add(Ue).add(Be),jt($e.x,$e.y,$e.z)):jt(Dt.x,Dt.y,0)}for(let Ut=1;Ut<=ue;Ut++)for(let Dt=0;Dt<ct;Dt++){const Vt=he?ot(ke[Dt],lt[Dt],pt):ke[Dt];Pe?(Ue.copy(Oe.normals[Ut]).multiplyScalar(Vt.x),Be.copy(Oe.binormals[Ut]).multiplyScalar(Vt.y),$e.copy(we[Ut]).add(Ue).add(Be),jt($e.x,$e.y,$e.z)):jt(Vt.x,Vt.y,fe/ue*Ut)}for(let Ut=Ee-1;Ut>=0;Ut--){const Dt=Ut/Ee,Vt=ge*Math.cos(Dt*Math.PI/2),It=_e*Math.sin(Dt*Math.PI/2)+Se;for(let Qt=0,kt=rt.length;Qt<kt;Qt++){const qt=ot(rt[Qt],st[Qt],It);jt(qt.x,qt.y,fe+Vt)}for(let Qt=0,kt=Ge.length;Qt<kt;Qt++){const qt=Ge[Qt];qe=nt[Qt];for(let Tn=0,Sn=qt.length;Tn<Sn;Tn++){const We=ot(qt[Tn],qe[Tn],It);Pe?jt(We.x,We.y+we[ue-1].y,we[ue-1].x+Vt):jt(We.x,We.y,fe+Vt)}}}yt(),Bt();function yt(){const Ut=te.length/3;if(he){let Dt=0,Vt=ct*Dt;for(let It=0;It<Gt;It++){const Qt=Pt[It];nn(Qt[2]+Vt,Qt[1]+Vt,Qt[0]+Vt)}Dt=ue+Ee*2,Vt=ct*Dt;for(let It=0;It<Gt;It++){const Qt=Pt[It];nn(Qt[0]+Vt,Qt[1]+Vt,Qt[2]+Vt)}}else{for(let Dt=0;Dt<Gt;Dt++){const Vt=Pt[Dt];nn(Vt[2],Vt[1],Vt[0])}for(let Dt=0;Dt<Gt;Dt++){const Vt=Pt[Dt];nn(Vt[0]+ct*ue,Vt[1]+ct*ue,Vt[2]+ct*ue)}}Z.addGroup(Ut,te.length/3-Ut,0)}function Bt(){const Ut=te.length/3;let Dt=0;Wt(rt,Dt),Dt+=rt.length;for(let Vt=0,It=Ge.length;Vt<It;Vt++){const Qt=Ge[Vt];Wt(Qt,Dt),Dt+=Qt.length}Z.addGroup(Ut,te.length/3-Ut,1)}function Wt(Ut,Dt){let Vt=Ut.length;for(;--Vt>=0;){const It=Vt;let Qt=Vt-1;Qt<0&&(Qt=Ut.length-1);for(let kt=0,qt=ue+Ee*2;kt<qt;kt++){const Tn=ct*kt,Sn=ct*(kt+1),We=Dt+It+Tn,Ve=Dt+Qt+Tn,ft=Dt+Qt+Sn,Et=Dt+It+Sn;an(We,Ve,ft,Et)}}}function jt(Ut,Dt,Vt){ae.push(Ut),ae.push(Dt),ae.push(Vt)}function nn(Ut,Dt,Vt){mn(Ut),mn(Dt),mn(Vt);const It=te.length/3,Qt=be.generateTopUV(Z,te,It-3,It-2,It-1);tt(Qt[0]),tt(Qt[1]),tt(Qt[2])}function an(Ut,Dt,Vt,It){mn(Ut),mn(Dt),mn(It),mn(Dt),mn(Vt),mn(It);const Qt=te.length/3,kt=be.generateSideWallUV(Z,te,Qt-6,Qt-3,Qt-2,Qt-1);tt(kt[0]),tt(kt[1]),tt(kt[3]),tt(kt[1]),tt(kt[2]),tt(kt[3])}function mn(Ut){te.push(ae[Ut*3+0]),te.push(ae[Ut*3+1]),te.push(ae[Ut*3+2])}function tt(Ut){ie.push(Ut.x),ie.push(Ut.y)}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),K=this.parameters.shapes,Z=this.parameters.options;return toJSON$1(K,Z,_)}static fromJSON(_,K){const Z=[];for(let ie=0,se=_.shapes.length;ie<se;ie++){const oe=K[_.shapes[ie]];Z.push(oe)}const te=_.options.extrudePath;return te!==void 0&&(_.options.extrudePath=new Curves[te.type]().fromJSON(te)),new ExtrudeGeometry(Z,_.options)}}const WorldUVGenerator={generateTopUV:function(ne,_,K,Z,te){const ie=_[K*3],se=_[K*3+1],oe=_[Z*3],ae=_[Z*3+1],le=_[te*3],ue=_[te*3+1];return[new Vector2(ie,se),new Vector2(oe,ae),new Vector2(le,ue)]},generateSideWallUV:function(ne,_,K,Z,te,ie){const se=_[K*3],oe=_[K*3+1],ae=_[K*3+2],le=_[Z*3],ue=_[Z*3+1],fe=_[Z*3+2],he=_[te*3],ge=_[te*3+1],_e=_[te*3+2],Se=_[ie*3],Ee=_[ie*3+1],ye=_[ie*3+2];return Math.abs(oe-ue)<Math.abs(se-le)?[new Vector2(se,1-ae),new Vector2(le,1-fe),new Vector2(he,1-_e),new Vector2(Se,1-ye)]:[new Vector2(oe,1-ae),new Vector2(ue,1-fe),new Vector2(ge,1-_e),new Vector2(Ee,1-ye)]}};function toJSON$1(ne,_,K){if(K.shapes=[],Array.isArray(ne))for(let Z=0,te=ne.length;Z<te;Z++){const ie=ne[Z];K.shapes.push(ie.uuid)}else K.shapes.push(ne.uuid);return K.options=Object.assign({},_),_.extrudePath!==void 0&&(K.options.extrudePath=_.extrudePath.toJSON()),K}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,K=0){const Z=(1+Math.sqrt(5))/2,te=[-1,Z,0,1,Z,0,-1,-Z,0,1,-Z,0,0,-1,Z,0,1,Z,0,-1,-Z,0,1,-Z,Z,0,-1,Z,0,1,-Z,0,-1,-Z,0,1],ie=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(te,ie,_,K),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:K}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],K=12,Z=0,te=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:K,phiStart:Z,phiLength:te},K=Math.floor(K),te=clamp$3(te,0,Math.PI*2);const ie=[],se=[],oe=[],ae=[],le=[],ue=1/K,fe=new Vector3,he=new Vector2,ge=new Vector3,_e=new Vector3,Se=new Vector3;let Ee=0,ye=0;for(let be=0;be<=_.length-1;be++)switch(be){case 0:Ee=_[be+1].x-_[be].x,ye=_[be+1].y-_[be].y,ge.x=ye*1,ge.y=-Ee,ge.z=ye*0,Se.copy(ge),ge.normalize(),ae.push(ge.x,ge.y,ge.z);break;case _.length-1:ae.push(Se.x,Se.y,Se.z);break;default:Ee=_[be+1].x-_[be].x,ye=_[be+1].y-_[be].y,ge.x=ye*1,ge.y=-Ee,ge.z=ye*0,_e.copy(ge),ge.x+=Se.x,ge.y+=Se.y,ge.z+=Se.z,ge.normalize(),ae.push(ge.x,ge.y,ge.z),Se.copy(_e)}for(let be=0;be<=K;be++){const we=Z+be*ue*te,Pe=Math.sin(we),Oe=Math.cos(we);for(let Be=0;Be<=_.length-1;Be++){fe.x=_[Be].x*Pe,fe.y=_[Be].y,fe.z=_[Be].x*Oe,se.push(fe.x,fe.y,fe.z),he.x=be/K,he.y=Be/(_.length-1),oe.push(he.x,he.y);const Ue=ae[3*Be+0]*Pe,$e=ae[3*Be+1],De=ae[3*Be+0]*Oe;le.push(Ue,$e,De)}}for(let be=0;be<K;be++)for(let we=0;we<_.length-1;we++){const Pe=we+be*_.length,Oe=Pe,Be=Pe+_.length,Ue=Pe+_.length+1,$e=Pe+1;ie.push(Oe,Be,$e),ie.push(Ue,$e,Be)}this.setIndex(ie),this.setAttribute("position",new Float32BufferAttribute(se,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2)),this.setAttribute("normal",new Float32BufferAttribute(le,3))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,K=0){const Z=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],te=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(Z,te,_,K),this.type="OctahedronGeometry",this.parameters={radius:_,detail:K}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class PlaneGeometry extends BufferGeometry{constructor(_=1,K=1,Z=1,te=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:K,widthSegments:Z,heightSegments:te};const ie=_/2,se=K/2,oe=Math.floor(Z),ae=Math.floor(te),le=oe+1,ue=ae+1,fe=_/oe,he=K/ae,ge=[],_e=[],Se=[],Ee=[];for(let ye=0;ye<ue;ye++){const be=ye*he-se;for(let we=0;we<le;we++){const Pe=we*fe-ie;_e.push(Pe,-be,0),Se.push(0,0,1),Ee.push(we/oe),Ee.push(1-ye/ae)}}for(let ye=0;ye<ae;ye++)for(let be=0;be<oe;be++){const we=be+le*ye,Pe=be+le*(ye+1),Oe=be+1+le*(ye+1),Be=be+1+le*ye;ge.push(we,Pe,Be),ge.push(Pe,Oe,Be)}this.setIndex(ge),this.setAttribute("position",new Float32BufferAttribute(_e,3)),this.setAttribute("normal",new Float32BufferAttribute(Se,3)),this.setAttribute("uv",new Float32BufferAttribute(Ee,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(_=.5,K=1,Z=32,te=1,ie=0,se=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:K,thetaSegments:Z,phiSegments:te,thetaStart:ie,thetaLength:se},Z=Math.max(3,Z),te=Math.max(1,te);const oe=[],ae=[],le=[],ue=[];let fe=_;const he=(K-_)/te,ge=new Vector3,_e=new Vector2;for(let Se=0;Se<=te;Se++){for(let Ee=0;Ee<=Z;Ee++){const ye=ie+Ee/Z*se;ge.x=fe*Math.cos(ye),ge.y=fe*Math.sin(ye),ae.push(ge.x,ge.y,ge.z),le.push(0,0,1),_e.x=(ge.x/K+1)/2,_e.y=(ge.y/K+1)/2,ue.push(_e.x,_e.y)}fe+=he}for(let Se=0;Se<te;Se++){const Ee=Se*(Z+1);for(let ye=0;ye<Z;ye++){const be=ye+Ee,we=be,Pe=be+Z+1,Oe=be+Z+2,Be=be+1;oe.push(we,Pe,Be),oe.push(Pe,Oe,Be)}}this.setIndex(oe),this.setAttribute("position",new Float32BufferAttribute(ae,3)),this.setAttribute("normal",new Float32BufferAttribute(le,3)),this.setAttribute("uv",new Float32BufferAttribute(ue,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),K=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:K};const Z=[],te=[],ie=[],se=[];let oe=0,ae=0;if(Array.isArray(_)===!1)le(_);else for(let ue=0;ue<_.length;ue++)le(_[ue]),this.addGroup(oe,ae,ue),oe+=ae,ae=0;this.setIndex(Z),this.setAttribute("position",new Float32BufferAttribute(te,3)),this.setAttribute("normal",new Float32BufferAttribute(ie,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2));function le(ue){const fe=te.length/3,he=ue.extractPoints(K);let ge=he.shape;const _e=he.holes;ShapeUtils.isClockWise(ge)===!1&&(ge=ge.reverse());for(let Ee=0,ye=_e.length;Ee<ye;Ee++){const be=_e[Ee];ShapeUtils.isClockWise(be)===!0&&(_e[Ee]=be.reverse())}const Se=ShapeUtils.triangulateShape(ge,_e);for(let Ee=0,ye=_e.length;Ee<ye;Ee++){const be=_e[Ee];ge=ge.concat(be)}for(let Ee=0,ye=ge.length;Ee<ye;Ee++){const be=ge[Ee];te.push(be.x,be.y,0),ie.push(0,0,1),se.push(be.x,be.y)}for(let Ee=0,ye=Se.length;Ee<ye;Ee++){const be=Se[Ee],we=be[0]+fe,Pe=be[1]+fe,Oe=be[2]+fe;Z.push(we,Pe,Oe),ae+=3}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),K=this.parameters.shapes;return toJSON(K,_)}static fromJSON(_,K){const Z=[];for(let te=0,ie=_.shapes.length;te<ie;te++){const se=K[_.shapes[te]];Z.push(se)}return new ShapeGeometry(Z,_.curveSegments)}}function toJSON(ne,_){if(_.shapes=[],Array.isArray(ne))for(let K=0,Z=ne.length;K<Z;K++){const te=ne[K];_.shapes.push(te.uuid)}else _.shapes.push(ne.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,K=32,Z=16,te=0,ie=Math.PI*2,se=0,oe=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:K,heightSegments:Z,phiStart:te,phiLength:ie,thetaStart:se,thetaLength:oe},K=Math.max(3,Math.floor(K)),Z=Math.max(2,Math.floor(Z));const ae=Math.min(se+oe,Math.PI);let le=0;const ue=[],fe=new Vector3,he=new Vector3,ge=[],_e=[],Se=[],Ee=[];for(let ye=0;ye<=Z;ye++){const be=[],we=ye/Z;let Pe=0;ye===0&&se===0?Pe=.5/K:ye===Z&&ae===Math.PI&&(Pe=-.5/K);for(let Oe=0;Oe<=K;Oe++){const Be=Oe/K;fe.x=-_*Math.cos(te+Be*ie)*Math.sin(se+we*oe),fe.y=_*Math.cos(se+we*oe),fe.z=_*Math.sin(te+Be*ie)*Math.sin(se+we*oe),_e.push(fe.x,fe.y,fe.z),he.copy(fe).normalize(),Se.push(he.x,he.y,he.z),Ee.push(Be+Pe,1-we),be.push(le++)}ue.push(be)}for(let ye=0;ye<Z;ye++)for(let be=0;be<K;be++){const we=ue[ye][be+1],Pe=ue[ye][be],Oe=ue[ye+1][be],Be=ue[ye+1][be+1];(ye!==0||se>0)&&ge.push(we,Pe,Be),(ye!==Z-1||ae<Math.PI)&&ge.push(Pe,Oe,Be)}this.setIndex(ge),this.setAttribute("position",new Float32BufferAttribute(_e,3)),this.setAttribute("normal",new Float32BufferAttribute(Se,3)),this.setAttribute("uv",new Float32BufferAttribute(Ee,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,K=0){const Z=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],te=[2,1,0,0,3,2,1,3,0,2,3,1];super(Z,te,_,K),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:K}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,K=.4,Z=12,te=48,ie=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:K,radialSegments:Z,tubularSegments:te,arc:ie},Z=Math.floor(Z),te=Math.floor(te);const se=[],oe=[],ae=[],le=[],ue=new Vector3,fe=new Vector3,he=new Vector3;for(let ge=0;ge<=Z;ge++)for(let _e=0;_e<=te;_e++){const Se=_e/te*ie,Ee=ge/Z*Math.PI*2;fe.x=(_+K*Math.cos(Ee))*Math.cos(Se),fe.y=(_+K*Math.cos(Ee))*Math.sin(Se),fe.z=K*Math.sin(Ee),oe.push(fe.x,fe.y,fe.z),ue.x=_*Math.cos(Se),ue.y=_*Math.sin(Se),he.subVectors(fe,ue).normalize(),ae.push(he.x,he.y,he.z),le.push(_e/te),le.push(ge/Z)}for(let ge=1;ge<=Z;ge++)for(let _e=1;_e<=te;_e++){const Se=(te+1)*ge+_e-1,Ee=(te+1)*(ge-1)+_e-1,ye=(te+1)*(ge-1)+_e,be=(te+1)*ge+_e;se.push(Se,Ee,be),se.push(Ee,ye,be)}this.setIndex(se),this.setAttribute("position",new Float32BufferAttribute(oe,3)),this.setAttribute("normal",new Float32BufferAttribute(ae,3)),this.setAttribute("uv",new Float32BufferAttribute(le,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,K=.4,Z=64,te=8,ie=2,se=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:K,tubularSegments:Z,radialSegments:te,p:ie,q:se},Z=Math.floor(Z),te=Math.floor(te);const oe=[],ae=[],le=[],ue=[],fe=new Vector3,he=new Vector3,ge=new Vector3,_e=new Vector3,Se=new Vector3,Ee=new Vector3,ye=new Vector3;for(let we=0;we<=Z;++we){const Pe=we/Z*ie*Math.PI*2;be(Pe,ie,se,_,ge),be(Pe+.01,ie,se,_,_e),Ee.subVectors(_e,ge),ye.addVectors(_e,ge),Se.crossVectors(Ee,ye),ye.crossVectors(Se,Ee),Se.normalize(),ye.normalize();for(let Oe=0;Oe<=te;++Oe){const Be=Oe/te*Math.PI*2,Ue=-K*Math.cos(Be),$e=K*Math.sin(Be);fe.x=ge.x+(Ue*ye.x+$e*Se.x),fe.y=ge.y+(Ue*ye.y+$e*Se.y),fe.z=ge.z+(Ue*ye.z+$e*Se.z),ae.push(fe.x,fe.y,fe.z),he.subVectors(fe,ge).normalize(),le.push(he.x,he.y,he.z),ue.push(we/Z),ue.push(Oe/te)}}for(let we=1;we<=Z;we++)for(let Pe=1;Pe<=te;Pe++){const Oe=(te+1)*(we-1)+(Pe-1),Be=(te+1)*we+(Pe-1),Ue=(te+1)*we+Pe,$e=(te+1)*(we-1)+Pe;oe.push(Oe,Be,$e),oe.push(Be,Ue,$e)}this.setIndex(oe),this.setAttribute("position",new Float32BufferAttribute(ae,3)),this.setAttribute("normal",new Float32BufferAttribute(le,3)),this.setAttribute("uv",new Float32BufferAttribute(ue,2));function be(we,Pe,Oe,Be,Ue){const $e=Math.cos(we),De=Math.sin(we),ke=Oe/Pe*we,Ge=Math.cos(ke);Ue.x=Be*(2+Ge)*.5*$e,Ue.y=Be*(2+Ge)*De*.5,Ue.z=Be*Math.sin(ke)*.5}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),K=64,Z=1,te=8,ie=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:K,radius:Z,radialSegments:te,closed:ie};const se=_.computeFrenetFrames(K,ie);this.tangents=se.tangents,this.normals=se.normals,this.binormals=se.binormals;const oe=new Vector3,ae=new Vector3,le=new Vector2;let ue=new Vector3;const fe=[],he=[],ge=[],_e=[];Se(),this.setIndex(_e),this.setAttribute("position",new Float32BufferAttribute(fe,3)),this.setAttribute("normal",new Float32BufferAttribute(he,3)),this.setAttribute("uv",new Float32BufferAttribute(ge,2));function Se(){for(let we=0;we<K;we++)Ee(we);Ee(ie===!1?K:0),be(),ye()}function Ee(we){ue=_.getPointAt(we/K,ue);const Pe=se.normals[we],Oe=se.binormals[we];for(let Be=0;Be<=te;Be++){const Ue=Be/te*Math.PI*2,$e=Math.sin(Ue),De=-Math.cos(Ue);ae.x=De*Pe.x+$e*Oe.x,ae.y=De*Pe.y+$e*Oe.y,ae.z=De*Pe.z+$e*Oe.z,ae.normalize(),he.push(ae.x,ae.y,ae.z),oe.x=ue.x+Z*ae.x,oe.y=ue.y+Z*ae.y,oe.z=ue.z+Z*ae.z,fe.push(oe.x,oe.y,oe.z)}}function ye(){for(let we=1;we<=K;we++)for(let Pe=1;Pe<=te;Pe++){const Oe=(te+1)*(we-1)+(Pe-1),Be=(te+1)*we+(Pe-1),Ue=(te+1)*we+Pe,$e=(te+1)*(we-1)+Pe;_e.push(Oe,Be,$e),_e.push(Be,Ue,$e)}}function be(){for(let we=0;we<=K;we++)for(let Pe=0;Pe<=te;Pe++)le.x=we/K,le.y=Pe/te,ge.push(le.x,le.y)}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const K=[],Z=new Set,te=new Vector3,ie=new Vector3;if(_.index!==null){const se=_.attributes.position,oe=_.index;let ae=_.groups;ae.length===0&&(ae=[{start:0,count:oe.count,materialIndex:0}]);for(let le=0,ue=ae.length;le<ue;++le){const fe=ae[le],he=fe.start,ge=fe.count;for(let _e=he,Se=he+ge;_e<Se;_e+=3)for(let Ee=0;Ee<3;Ee++){const ye=oe.getX(_e+Ee),be=oe.getX(_e+(Ee+1)%3);te.fromBufferAttribute(se,ye),ie.fromBufferAttribute(se,be),isUniqueEdge(te,ie,Z)===!0&&(K.push(te.x,te.y,te.z),K.push(ie.x,ie.y,ie.z))}}}else{const se=_.attributes.position;for(let oe=0,ae=se.count/3;oe<ae;oe++)for(let le=0;le<3;le++){const ue=3*oe+le,fe=3*oe+(le+1)%3;te.fromBufferAttribute(se,ue),ie.fromBufferAttribute(se,fe),isUniqueEdge(te,ie,Z)===!0&&(K.push(te.x,te.y,te.z),K.push(ie.x,ie.y,ie.z))}}this.setAttribute("position",new Float32BufferAttribute(K,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}function isUniqueEdge(ne,_,K){const Z=`${ne.x},${ne.y},${ne.z}-${_.x},${_.y},${_.z}`,te=`${_.x},${_.y},${_.z}-${ne.x},${ne.y},${ne.z}`;return K.has(Z)===!0||K.has(te)===!0?!1:(K.add(Z),K.add(te),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$3(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(K){this.ior=(1+.4*K)/(1-.4*K)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(_)}get anisotropy(){return this._anisotropy}set anisotropy(_){this._anisotropy>0!=_>0&&this.version++,this._anisotropy=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get dispersion(){return this._dispersion}set dispersion(_){this._dispersion>0!=_>0&&this.version++,this._dispersion=_}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=_.anisotropy,this.anisotropyRotation=_.anisotropyRotation,this.anisotropyMap=_.anisotropyMap,this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.dispersion=_.dispersion,this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapRotation.copy(_.envMapRotation),this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function convertArray(ne,_){return!ne||ne.constructor===_?ne:typeof _.BYTES_PER_ELEMENT=="number"?new _(ne):Array.prototype.slice.call(ne)}function isTypedArray(ne){return ArrayBuffer.isView(ne)&&!(ne instanceof DataView)}function getKeyframeOrder(ne){function _(te,ie){return ne[te]-ne[ie]}const K=ne.length,Z=new Array(K);for(let te=0;te!==K;++te)Z[te]=te;return Z.sort(_),Z}function sortedArray(ne,_,K){const Z=ne.length,te=new ne.constructor(Z);for(let ie=0,se=0;se!==Z;++ie){const oe=K[ie]*_;for(let ae=0;ae!==_;++ae)te[se++]=ne[oe+ae]}return te}function flattenJSON(ne,_,K,Z){let te=1,ie=ne[0];for(;ie!==void 0&&ie[Z]===void 0;)ie=ne[te++];if(ie===void 0)return;let se=ie[Z];if(se!==void 0)if(Array.isArray(se))do se=ie[Z],se!==void 0&&(_.push(ie.time),K.push(...se)),ie=ne[te++];while(ie!==void 0);else if(se.toArray!==void 0)do se=ie[Z],se!==void 0&&(_.push(ie.time),se.toArray(K,K.length)),ie=ne[te++];while(ie!==void 0);else do se=ie[Z],se!==void 0&&(_.push(ie.time),K.push(se)),ie=ne[te++];while(ie!==void 0)}function subclip(ne,_,K,Z,te=30){const ie=ne.clone();ie.name=_;const se=[];for(let ae=0;ae<ie.tracks.length;++ae){const le=ie.tracks[ae],ue=le.getValueSize(),fe=[],he=[];for(let ge=0;ge<le.times.length;++ge){const _e=le.times[ge]*te;if(!(_e<K||_e>=Z)){fe.push(le.times[ge]);for(let Se=0;Se<ue;++Se)he.push(le.values[ge*ue+Se])}}fe.length!==0&&(le.times=convertArray(fe,le.times.constructor),le.values=convertArray(he,le.values.constructor),se.push(le))}ie.tracks=se;let oe=1/0;for(let ae=0;ae<ie.tracks.length;++ae)oe>ie.tracks[ae].times[0]&&(oe=ie.tracks[ae].times[0]);for(let ae=0;ae<ie.tracks.length;++ae)ie.tracks[ae].shift(-1*oe);return ie.resetDuration(),ie}function makeClipAdditive(ne,_=0,K=ne,Z=30){Z<=0&&(Z=30);const te=K.tracks.length,ie=_/Z;for(let se=0;se<te;++se){const oe=K.tracks[se],ae=oe.ValueTypeName;if(ae==="bool"||ae==="string")continue;const le=ne.tracks.find(function(ye){return ye.name===oe.name&&ye.ValueTypeName===ae});if(le===void 0)continue;let ue=0;const fe=oe.getValueSize();oe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ue=fe/3);let he=0;const ge=le.getValueSize();le.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(he=ge/3);const _e=oe.times.length-1;let Se;if(ie<=oe.times[0]){const ye=ue,be=fe-ue;Se=oe.values.slice(ye,be)}else if(ie>=oe.times[_e]){const ye=_e*fe+ue,be=ye+fe-ue;Se=oe.values.slice(ye,be)}else{const ye=oe.createInterpolant(),be=ue,we=fe-ue;ye.evaluate(ie),Se=ye.resultBuffer.slice(be,we)}ae==="quaternion"&&new Quaternion().fromArray(Se).normalize().conjugate().toArray(Se);const Ee=le.times.length;for(let ye=0;ye<Ee;++ye){const be=ye*ge+he;if(ae==="quaternion")Quaternion.multiplyQuaternionsFlat(le.values,be,Se,0,le.values,be);else{const we=ge-he*2;for(let Pe=0;Pe<we;++Pe)le.values[be+Pe]-=Se[Pe]}}}return ne.blendMode=AdditiveAnimationBlendMode,ne}class AnimationUtils{static convertArray(_,K){return convertArray(_,K)}static isTypedArray(_){return isTypedArray(_)}static getKeyframeOrder(_){return getKeyframeOrder(_)}static sortedArray(_,K,Z){return sortedArray(_,K,Z)}static flattenJSON(_,K,Z,te){flattenJSON(_,K,Z,te)}static subclip(_,K,Z,te,ie=30){return subclip(_,K,Z,te,ie)}static makeClipAdditive(_,K=0,Z=_,te=30){return makeClipAdditive(_,K,Z,te)}}class Interpolant{constructor(_,K,Z,te){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=te!==void 0?te:new K.constructor(Z),this.sampleValues=K,this.valueSize=Z,this.settings=null,this.DefaultSettings_={}}evaluate(_){const K=this.parameterPositions;let Z=this._cachedIndex,te=K[Z],ie=K[Z-1];e:{t:{let se;n:{r:if(!(_<te)){for(let oe=Z+2;;){if(te===void 0){if(_<ie)break r;return Z=K.length,this._cachedIndex=Z,this.copySampleValue_(Z-1)}if(Z===oe)break;if(ie=te,te=K[++Z],_<te)break t}se=K.length;break n}if(!(_>=ie)){const oe=K[1];_<oe&&(Z=2,ie=oe);for(let ae=Z-2;;){if(ie===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Z===ae)break;if(te=ie,ie=K[--Z-1],_>=ie)break t}se=Z,Z=0;break n}break e}for(;Z<se;){const oe=Z+se>>>1;_<K[oe]?se=oe:Z=oe+1}if(te=K[Z],ie=K[Z-1],ie===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(te===void 0)return Z=K.length,this._cachedIndex=Z,this.copySampleValue_(Z-1)}this._cachedIndex=Z,this.intervalChanged_(Z,ie,te)}return this.interpolate_(Z,ie,_,te)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const K=this.resultBuffer,Z=this.sampleValues,te=this.valueSize,ie=_*te;for(let se=0;se!==te;++se)K[se]=Z[ie+se];return K}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,K,Z,te){super(_,K,Z,te),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,K,Z){const te=this.parameterPositions;let ie=_-2,se=_+1,oe=te[ie],ae=te[se];if(oe===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ie=_,oe=2*K-Z;break;case WrapAroundEnding:ie=te.length-2,oe=K+te[ie]-te[ie+1];break;default:ie=_,oe=Z}if(ae===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:se=_,ae=2*Z-K;break;case WrapAroundEnding:se=1,ae=Z+te[1]-te[0];break;default:se=_-1,ae=K}const le=(Z-K)*.5,ue=this.valueSize;this._weightPrev=le/(K-oe),this._weightNext=le/(ae-Z),this._offsetPrev=ie*ue,this._offsetNext=se*ue}interpolate_(_,K,Z,te){const ie=this.resultBuffer,se=this.sampleValues,oe=this.valueSize,ae=_*oe,le=ae-oe,ue=this._offsetPrev,fe=this._offsetNext,he=this._weightPrev,ge=this._weightNext,_e=(Z-K)/(te-K),Se=_e*_e,Ee=Se*_e,ye=-he*Ee+2*he*Se-he*_e,be=(1+he)*Ee+(-1.5-2*he)*Se+(-.5+he)*_e+1,we=(-1-ge)*Ee+(1.5+ge)*Se+.5*_e,Pe=ge*Ee-ge*Se;for(let Oe=0;Oe!==oe;++Oe)ie[Oe]=ye*se[ue+Oe]+be*se[le+Oe]+we*se[ae+Oe]+Pe*se[fe+Oe];return ie}}class LinearInterpolant extends Interpolant{constructor(_,K,Z,te){super(_,K,Z,te)}interpolate_(_,K,Z,te){const ie=this.resultBuffer,se=this.sampleValues,oe=this.valueSize,ae=_*oe,le=ae-oe,ue=(Z-K)/(te-K),fe=1-ue;for(let he=0;he!==oe;++he)ie[he]=se[le+he]*fe+se[ae+he]*ue;return ie}}class DiscreteInterpolant extends Interpolant{constructor(_,K,Z,te){super(_,K,Z,te)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,K,Z,te){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(K===void 0||K.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(K,this.TimeBufferType),this.values=convertArray(Z,this.ValueBufferType),this.setInterpolation(te||this.DefaultInterpolation)}static toJSON(_){const K=_.constructor;let Z;if(K.toJSON!==this.toJSON)Z=K.toJSON(_);else{Z={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const te=_.getInterpolation();te!==_.DefaultInterpolation&&(Z.interpolation=te)}return Z.type=_.ValueTypeName,Z}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let K;switch(_){case InterpolateDiscrete:K=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:K=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:K=this.InterpolantFactoryMethodSmooth;break}if(K===void 0){const Z="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Z);return console.warn("THREE.KeyframeTrack:",Z),this}return this.createInterpolant=K,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const K=this.times;for(let Z=0,te=K.length;Z!==te;++Z)K[Z]+=_}return this}scale(_){if(_!==1){const K=this.times;for(let Z=0,te=K.length;Z!==te;++Z)K[Z]*=_}return this}trim(_,K){const Z=this.times,te=Z.length;let ie=0,se=te-1;for(;ie!==te&&Z[ie]<_;)++ie;for(;se!==-1&&Z[se]>K;)--se;if(++se,ie!==0||se!==te){ie>=se&&(se=Math.max(se,1),ie=se-1);const oe=this.getValueSize();this.times=Z.slice(ie,se),this.values=this.values.slice(ie*oe,se*oe)}return this}validate(){let _=!0;const K=this.getValueSize();K-Math.floor(K)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_=!1);const Z=this.times,te=this.values,ie=Z.length;ie===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_=!1);let se=null;for(let oe=0;oe!==ie;oe++){const ae=Z[oe];if(typeof ae=="number"&&isNaN(ae)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,oe,ae),_=!1;break}if(se!==null&&se>ae){console.error("THREE.KeyframeTrack: Out of order keys.",this,oe,ae,se),_=!1;break}se=ae}if(te!==void 0&&isTypedArray(te))for(let oe=0,ae=te.length;oe!==ae;++oe){const le=te[oe];if(isNaN(le)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,oe,le),_=!1;break}}return _}optimize(){const _=this.times.slice(),K=this.values.slice(),Z=this.getValueSize(),te=this.getInterpolation()===InterpolateSmooth,ie=_.length-1;let se=1;for(let oe=1;oe<ie;++oe){let ae=!1;const le=_[oe],ue=_[oe+1];if(le!==ue&&(oe!==1||le!==_[0]))if(te)ae=!0;else{const fe=oe*Z,he=fe-Z,ge=fe+Z;for(let _e=0;_e!==Z;++_e){const Se=K[fe+_e];if(Se!==K[he+_e]||Se!==K[ge+_e]){ae=!0;break}}}if(ae){if(oe!==se){_[se]=_[oe];const fe=oe*Z,he=se*Z;for(let ge=0;ge!==Z;++ge)K[he+ge]=K[fe+ge]}++se}}if(ie>0){_[se]=_[ie];for(let oe=ie*Z,ae=se*Z,le=0;le!==Z;++le)K[ae+le]=K[oe+le];++se}return se!==_.length?(this.times=_.slice(0,se),this.values=K.slice(0,se*Z)):(this.times=_,this.values=K),this}clone(){const _=this.times.slice(),K=this.values.slice(),Z=this.constructor,te=new Z(this.name,_,K);return te.createInterpolant=this.createInterpolant,te}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(_,K,Z){super(_,K,Z)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(_,K,Z,te){super(_,K,Z,te)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(_,K,Z,te){super(_,K,Z,te)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,K,Z,te){super(_,K,Z,te)}interpolate_(_,K,Z,te){const ie=this.resultBuffer,se=this.sampleValues,oe=this.valueSize,ae=(Z-K)/(te-K);let le=_*oe;for(let ue=le+oe;le!==ue;le+=4)Quaternion.slerpFlat(ie,0,se,le-oe,se,le,ae);return ie}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(_,K,Z,te){super(_,K,Z,te)}InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(_,K,Z){super(_,K,Z)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(_,K,Z,te){super(_,K,Z,te)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_="",K=-1,Z=[],te=NormalAnimationBlendMode){this.name=_,this.tracks=Z,this.duration=K,this.blendMode=te,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(_){const K=[],Z=_.tracks,te=1/(_.fps||1);for(let se=0,oe=Z.length;se!==oe;++se)K.push(parseKeyframeTrack(Z[se]).scale(te));const ie=new this(_.name,_.duration,K,_.blendMode);return ie.uuid=_.uuid,ie}static toJSON(_){const K=[],Z=_.tracks,te={name:_.name,duration:_.duration,tracks:K,uuid:_.uuid,blendMode:_.blendMode};for(let ie=0,se=Z.length;ie!==se;++ie)K.push(KeyframeTrack.toJSON(Z[ie]));return te}static CreateFromMorphTargetSequence(_,K,Z,te){const ie=K.length,se=[];for(let oe=0;oe<ie;oe++){let ae=[],le=[];ae.push((oe+ie-1)%ie,oe,(oe+1)%ie),le.push(0,1,0);const ue=getKeyframeOrder(ae);ae=sortedArray(ae,1,ue),le=sortedArray(le,1,ue),!te&&ae[0]===0&&(ae.push(ie),le.push(le[0])),se.push(new NumberKeyframeTrack(".morphTargetInfluences["+K[oe].name+"]",ae,le).scale(1/Z))}return new this(_,-1,se)}static findByName(_,K){let Z=_;if(!Array.isArray(_)){const te=_;Z=te.geometry&&te.geometry.animations||te.animations}for(let te=0;te<Z.length;te++)if(Z[te].name===K)return Z[te];return null}static CreateClipsFromMorphTargetSequences(_,K,Z){const te={},ie=/^([\w-]*?)([\d]+)$/;for(let oe=0,ae=_.length;oe<ae;oe++){const le=_[oe],ue=le.name.match(ie);if(ue&&ue.length>1){const fe=ue[1];let he=te[fe];he||(te[fe]=he=[]),he.push(le)}}const se=[];for(const oe in te)se.push(this.CreateFromMorphTargetSequence(oe,te[oe],K,Z));return se}static parseAnimation(_,K){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!_)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const Z=function(fe,he,ge,_e,Se){if(ge.length!==0){const Ee=[],ye=[];flattenJSON(ge,Ee,ye,_e),Ee.length!==0&&Se.push(new fe(he,Ee,ye))}},te=[],ie=_.name||"default",se=_.fps||30,oe=_.blendMode;let ae=_.length||-1;const le=_.hierarchy||[];for(let fe=0;fe<le.length;fe++){const he=le[fe].keys;if(!(!he||he.length===0))if(he[0].morphTargets){const ge={};let _e;for(_e=0;_e<he.length;_e++)if(he[_e].morphTargets)for(let Se=0;Se<he[_e].morphTargets.length;Se++)ge[he[_e].morphTargets[Se]]=-1;for(const Se in ge){const Ee=[],ye=[];for(let be=0;be!==he[_e].morphTargets.length;++be){const we=he[_e];Ee.push(we.time),ye.push(we.morphTarget===Se?1:0)}te.push(new NumberKeyframeTrack(".morphTargetInfluence["+Se+"]",Ee,ye))}ae=ge.length*se}else{const ge=".bones["+K[fe].name+"]";Z(VectorKeyframeTrack,ge+".position",he,"pos",te),Z(QuaternionKeyframeTrack,ge+".quaternion",he,"rot",te),Z(VectorKeyframeTrack,ge+".scale",he,"scl",te)}}return te.length===0?null:new this(ie,ae,te,oe)}resetDuration(){const _=this.tracks;let K=0;for(let Z=0,te=_.length;Z!==te;++Z){const ie=this.tracks[Z];K=Math.max(K,ie.times[ie.times.length-1])}return this.duration=K,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let K=0;K<this.tracks.length;K++)_=_&&this.tracks[K].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let K=0;K<this.tracks.length;K++)_.push(this.tracks[K].clone());return new this.constructor(this.name,this.duration,_,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(ne){switch(ne.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ne)}function parseKeyframeTrack(ne){if(ne.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(ne.type);if(ne.times===void 0){const K=[],Z=[];flattenJSON(ne.keys,K,Z,"value"),ne.times=K,ne.values=Z}return _.parse!==void 0?_.parse(ne):new _(ne.name,ne.times,ne.values,ne.interpolation)}const Cache={enabled:!1,files:{},add:function(ne,_){this.enabled!==!1&&(this.files[ne]=_)},get:function(ne){if(this.enabled!==!1)return this.files[ne]},remove:function(ne){delete this.files[ne]},clear:function(){this.files={}}};class LoadingManager{constructor(_,K,Z){const te=this;let ie=!1,se=0,oe=0,ae;const le=[];this.onStart=void 0,this.onLoad=_,this.onProgress=K,this.onError=Z,this.abortController=new AbortController,this.itemStart=function(ue){oe++,ie===!1&&te.onStart!==void 0&&te.onStart(ue,se,oe),ie=!0},this.itemEnd=function(ue){se++,te.onProgress!==void 0&&te.onProgress(ue,se,oe),se===oe&&(ie=!1,te.onLoad!==void 0&&te.onLoad())},this.itemError=function(ue){te.onError!==void 0&&te.onError(ue)},this.resolveURL=function(ue){return ae?ae(ue):ue},this.setURLModifier=function(ue){return ae=ue,this},this.addHandler=function(ue,fe){return le.push(ue,fe),this},this.removeHandler=function(ue){const fe=le.indexOf(ue);return fe!==-1&&le.splice(fe,2),this},this.getHandler=function(ue){for(let fe=0,he=le.length;fe<he;fe+=2){const ge=le[fe],_e=le[fe+1];if(ge.global&&(ge.lastIndex=0),ge.test(ue))return _e}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,K){const Z=this;return new Promise(function(te,ie){Z.load(_,te,K,ie)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(_,K){super(_),this.response=K}}class FileLoader extends Loader{constructor(_){super(_),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(_,K,Z,te){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ie=Cache.get(`file:${_}`);if(ie!==void 0)return this.manager.itemStart(_),setTimeout(()=>{K&&K(ie),this.manager.itemEnd(_)},0),ie;if(loading[_]!==void 0){loading[_].push({onLoad:K,onProgress:Z,onError:te});return}loading[_]=[],loading[_].push({onLoad:K,onProgress:Z,onError:te});const se=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),oe=this.mimeType,ae=this.responseType;fetch(se).then(le=>{if(le.status===200||le.status===0){if(le.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||le.body===void 0||le.body.getReader===void 0)return le;const ue=loading[_],fe=le.body.getReader(),he=le.headers.get("X-File-Size")||le.headers.get("Content-Length"),ge=he?parseInt(he):0,_e=ge!==0;let Se=0;const Ee=new ReadableStream({start(ye){be();function be(){fe.read().then(({done:we,value:Pe})=>{if(we)ye.close();else{Se+=Pe.byteLength;const Oe=new ProgressEvent("progress",{lengthComputable:_e,loaded:Se,total:ge});for(let Be=0,Ue=ue.length;Be<Ue;Be++){const $e=ue[Be];$e.onProgress&&$e.onProgress(Oe)}ye.enqueue(Pe),be()}},we=>{ye.error(we)})}}});return new Response(Ee)}else throw new HttpError(`fetch for "${le.url}" responded with ${le.status}: ${le.statusText}`,le)}).then(le=>{switch(ae){case"arraybuffer":return le.arrayBuffer();case"blob":return le.blob();case"document":return le.text().then(ue=>new DOMParser().parseFromString(ue,oe));case"json":return le.json();default:if(oe==="")return le.text();{const fe=/charset="?([^;"\s]*)"?/i.exec(oe),he=fe&&fe[1]?fe[1].toLowerCase():void 0,ge=new TextDecoder(he);return le.arrayBuffer().then(_e=>ge.decode(_e))}}}).then(le=>{Cache.add(`file:${_}`,le);const ue=loading[_];delete loading[_];for(let fe=0,he=ue.length;fe<he;fe++){const ge=ue[fe];ge.onLoad&&ge.onLoad(le)}}).catch(le=>{const ue=loading[_];if(ue===void 0)throw this.manager.itemError(_),le;delete loading[_];for(let fe=0,he=ue.length;fe<he;fe++){const ge=ue[fe];ge.onError&&ge.onError(le)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AnimationLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=this,se=new FileLoader(this.manager);se.setPath(this.path),se.setRequestHeader(this.requestHeader),se.setWithCredentials(this.withCredentials),se.load(_,function(oe){try{K(ie.parse(JSON.parse(oe)))}catch(ae){te?te(ae):console.error(ae),ie.manager.itemError(_)}},Z,te)}parse(_){const K=[];for(let Z=0;Z<_.length;Z++){const te=AnimationClip.parse(_[Z]);K.push(te)}return K}}class CompressedTextureLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=this,se=[],oe=new CompressedTexture,ae=new FileLoader(this.manager);ae.setPath(this.path),ae.setResponseType("arraybuffer"),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(ie.withCredentials);let le=0;function ue(fe){ae.load(_[fe],function(he){const ge=ie.parse(he,!0);se[fe]={width:ge.width,height:ge.height,format:ge.format,mipmaps:ge.mipmaps},le+=1,le===6&&(ge.mipmapCount===1&&(oe.minFilter=LinearFilter),oe.image=se,oe.format=ge.format,oe.needsUpdate=!0,K&&K(oe))},Z,te)}if(Array.isArray(_))for(let fe=0,he=_.length;fe<he;++fe)ue(fe);else ae.load(_,function(fe){const he=ie.parse(fe,!0);if(he.isCubemap){const ge=he.mipmaps.length/he.mipmapCount;for(let _e=0;_e<ge;_e++){se[_e]={mipmaps:[]};for(let Se=0;Se<he.mipmapCount;Se++)se[_e].mipmaps.push(he.mipmaps[_e*he.mipmapCount+Se]),se[_e].format=he.format,se[_e].width=he.width,se[_e].height=he.height}oe.image=se}else oe.image.width=he.width,oe.image.height=he.height,oe.mipmaps=he.mipmaps;he.mipmapCount===1&&(oe.minFilter=LinearFilter),oe.format=he.format,oe.needsUpdate=!0,K&&K(oe)},Z,te);return oe}}const _loading=new WeakMap;class ImageLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ie=this,se=Cache.get(`image:${_}`);if(se!==void 0){if(se.complete===!0)ie.manager.itemStart(_),setTimeout(function(){K&&K(se),ie.manager.itemEnd(_)},0);else{let fe=_loading.get(se);fe===void 0&&(fe=[],_loading.set(se,fe)),fe.push({onLoad:K,onError:te})}return se}const oe=createElementNS("img");function ae(){ue(),K&&K(this);const fe=_loading.get(this)||[];for(let he=0;he<fe.length;he++){const ge=fe[he];ge.onLoad&&ge.onLoad(this)}_loading.delete(this),ie.manager.itemEnd(_)}function le(fe){ue(),te&&te(fe),Cache.remove(`image:${_}`);const he=_loading.get(this)||[];for(let ge=0;ge<he.length;ge++){const _e=he[ge];_e.onError&&_e.onError(fe)}_loading.delete(this),ie.manager.itemError(_),ie.manager.itemEnd(_)}function ue(){oe.removeEventListener("load",ae,!1),oe.removeEventListener("error",le,!1)}return oe.addEventListener("load",ae,!1),oe.addEventListener("error",le,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(oe.crossOrigin=this.crossOrigin),Cache.add(`image:${_}`,oe),ie.manager.itemStart(_),oe.src=_,oe}}class CubeTextureLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=new CubeTexture;ie.colorSpace=SRGBColorSpace$1;const se=new ImageLoader(this.manager);se.setCrossOrigin(this.crossOrigin),se.setPath(this.path);let oe=0;function ae(le){se.load(_[le],function(ue){ie.images[le]=ue,oe++,oe===6&&(ie.needsUpdate=!0,K&&K(ie))},void 0,te)}for(let le=0;le<_.length;++le)ae(le);return ie}}class DataTextureLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=this,se=new DataTexture,oe=new FileLoader(this.manager);return oe.setResponseType("arraybuffer"),oe.setRequestHeader(this.requestHeader),oe.setPath(this.path),oe.setWithCredentials(ie.withCredentials),oe.load(_,function(ae){let le;try{le=ie.parse(ae)}catch(ue){if(te!==void 0)te(ue);else{console.error(ue);return}}le.image!==void 0?se.image=le.image:le.data!==void 0&&(se.image.width=le.width,se.image.height=le.height,se.image.data=le.data),se.wrapS=le.wrapS!==void 0?le.wrapS:ClampToEdgeWrapping,se.wrapT=le.wrapT!==void 0?le.wrapT:ClampToEdgeWrapping,se.magFilter=le.magFilter!==void 0?le.magFilter:LinearFilter,se.minFilter=le.minFilter!==void 0?le.minFilter:LinearFilter,se.anisotropy=le.anisotropy!==void 0?le.anisotropy:1,le.colorSpace!==void 0&&(se.colorSpace=le.colorSpace),le.flipY!==void 0&&(se.flipY=le.flipY),le.format!==void 0&&(se.format=le.format),le.type!==void 0&&(se.type=le.type),le.mipmaps!==void 0&&(se.mipmaps=le.mipmaps,se.minFilter=LinearMipmapLinearFilter),le.mipmapCount===1&&(se.minFilter=LinearFilter),le.generateMipmaps!==void 0&&(se.generateMipmaps=le.generateMipmaps),se.needsUpdate=!0,K&&K(se,le)},Z,te),se}}class TextureLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=new Texture,se=new ImageLoader(this.manager);return se.setCrossOrigin(this.crossOrigin),se.setPath(this.path),se.load(_,function(oe){ie.image=oe,ie.needsUpdate=!0,K!==void 0&&K(ie)},Z,te),ie}}class Light extends Object3D{constructor(_,K=1){super(),this.isLight=!0,this.type="Light",this.color=new Color$1(_),this.intensity=K}dispose(){}copy(_,K){return super.copy(_,K),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const K=super.toJSON(_);return K.object.color=this.color.getHex(),K.object.intensity=this.intensity,this.groundColor!==void 0&&(K.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(K.object.distance=this.distance),this.angle!==void 0&&(K.object.angle=this.angle),this.decay!==void 0&&(K.object.decay=this.decay),this.penumbra!==void 0&&(K.object.penumbra=this.penumbra),this.shadow!==void 0&&(K.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(K.object.target=this.target.uuid),K}}class HemisphereLight extends Light{constructor(_,K,Z){super(_,Z),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color$1(K)}copy(_,K){return super.copy(_,K),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.mapType=UnsignedByteType,this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const K=this.camera,Z=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),K.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),K.lookAt(_lookTarget$1),K.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1,K.coordinateSystem,K.reversedDepth),K.reversedDepth?Z.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):Z.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Z.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.intensity=_.intensity,this.bias=_.bias,this.radius=_.radius,this.autoUpdate=_.autoUpdate,this.needsUpdate=_.needsUpdate,this.normalBias=_.normalBias,this.blurSamples=_.blurSamples,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.intensity!==1&&(_.intensity=this.intensity),this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(_){const K=this.camera,Z=RAD2DEG*2*_.angle*this.focus,te=this.mapSize.width/this.mapSize.height*this.aspect,ie=_.distance||K.far;(Z!==K.fov||te!==K.aspect||ie!==K.far)&&(K.fov=Z,K.aspect=te,K.far=ie,K.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,K,Z=0,te=Math.PI/3,ie=0,se=2){super(_,K),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=Z,this.angle=te,this.penumbra=ie,this.decay=se,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,K){return super.copy(_,K),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,K=0){const Z=this.camera,te=this.matrix,ie=_.distance||Z.far;ie!==Z.far&&(Z.far=ie,Z.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),Z.position.copy(_lightPositionWorld),_lookTarget.copy(Z.position),_lookTarget.add(this._cubeDirections[K]),Z.up.copy(this._cubeUps[K]),Z.lookAt(_lookTarget),Z.updateMatrixWorld(),te.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix,Z.coordinateSystem,Z.reversedDepth)}}class PointLight extends Light{constructor(_,K,Z=0,te=2){super(_,K),this.isPointLight=!0,this.type="PointLight",this.distance=Z,this.decay=te,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,K){return super.copy(_,K),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class OrthographicCamera extends Camera$1{constructor(_=-1,K=1,Z=1,te=-1,ie=.1,se=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=K,this.top=Z,this.bottom=te,this.near=ie,this.far=se,this.updateProjectionMatrix()}copy(_,K){return super.copy(_,K),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,K,Z,te,ie,se){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=K,this.view.offsetX=Z,this.view.offsetY=te,this.view.width=ie,this.view.height=se,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),K=(this.top-this.bottom)/(2*this.zoom),Z=(this.right+this.left)/2,te=(this.top+this.bottom)/2;let ie=Z-_,se=Z+_,oe=te+K,ae=te-K;if(this.view!==null&&this.view.enabled){const le=(this.right-this.left)/this.view.fullWidth/this.zoom,ue=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ie+=le*this.view.offsetX,se=ie+le*this.view.width,oe-=ue*this.view.offsetY,ae=oe-ue*this.view.height}this.projectionMatrix.makeOrthographic(ie,se,oe,ae,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const K=super.toJSON(_);return K.object.zoom=this.zoom,K.object.left=this.left,K.object.right=this.right,K.object.top=this.top,K.object.bottom=this.bottom,K.object.near=this.near,K.object.far=this.far,this.view!==null&&(K.object.view=Object.assign({},this.view)),K}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,K){super(_,K),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,K){super(_,K),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,K,Z=10,te=10){super(_,K),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=Z,this.height=te}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const K=super.toJSON(_);return K.object.width=this.width,K.object.height=this.height,K}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let K=0;K<9;K++)this.coefficients[K].copy(_[K]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,K){const Z=_.x,te=_.y,ie=_.z,se=this.coefficients;return K.copy(se[0]).multiplyScalar(.282095),K.addScaledVector(se[1],.488603*te),K.addScaledVector(se[2],.488603*ie),K.addScaledVector(se[3],.488603*Z),K.addScaledVector(se[4],1.092548*(Z*te)),K.addScaledVector(se[5],1.092548*(te*ie)),K.addScaledVector(se[6],.315392*(3*ie*ie-1)),K.addScaledVector(se[7],1.092548*(Z*ie)),K.addScaledVector(se[8],.546274*(Z*Z-te*te)),K}getIrradianceAt(_,K){const Z=_.x,te=_.y,ie=_.z,se=this.coefficients;return K.copy(se[0]).multiplyScalar(.886227),K.addScaledVector(se[1],2*.511664*te),K.addScaledVector(se[2],2*.511664*ie),K.addScaledVector(se[3],2*.511664*Z),K.addScaledVector(se[4],2*.429043*Z*te),K.addScaledVector(se[5],2*.429043*te*ie),K.addScaledVector(se[6],.743125*ie*ie-.247708),K.addScaledVector(se[7],2*.429043*Z*ie),K.addScaledVector(se[8],.429043*(Z*Z-te*te)),K}add(_){for(let K=0;K<9;K++)this.coefficients[K].add(_.coefficients[K]);return this}addScaledSH(_,K){for(let Z=0;Z<9;Z++)this.coefficients[Z].addScaledVector(_.coefficients[Z],K);return this}scale(_){for(let K=0;K<9;K++)this.coefficients[K].multiplyScalar(_);return this}lerp(_,K){for(let Z=0;Z<9;Z++)this.coefficients[Z].lerp(_.coefficients[Z],K);return this}equals(_){for(let K=0;K<9;K++)if(!this.coefficients[K].equals(_.coefficients[K]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,K=0){const Z=this.coefficients;for(let te=0;te<9;te++)Z[te].fromArray(_,K+te*3);return this}toArray(_=[],K=0){const Z=this.coefficients;for(let te=0;te<9;te++)Z[te].toArray(_,K+te*3);return _}static getBasisAt(_,K){const Z=_.x,te=_.y,ie=_.z;K[0]=.282095,K[1]=.488603*te,K[2]=.488603*ie,K[3]=.488603*Z,K[4]=1.092548*Z*te,K[5]=1.092548*te*ie,K[6]=.315392*(3*ie*ie-1),K[7]=1.092548*Z*ie,K[8]=.546274*(Z*Z-te*te)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,K=1){super(void 0,K),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const K=super.toJSON(_);return K.object.sh=this.sh.toArray(),K}}class MaterialLoader extends Loader{constructor(_){super(_),this.textures={}}load(_,K,Z,te){const ie=this,se=new FileLoader(ie.manager);se.setPath(ie.path),se.setRequestHeader(ie.requestHeader),se.setWithCredentials(ie.withCredentials),se.load(_,function(oe){try{K(ie.parse(JSON.parse(oe)))}catch(ae){te?te(ae):console.error(ae),ie.manager.itemError(_)}},Z,te)}parse(_){const K=this.textures;function Z(ie){return K[ie]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",ie),K[ie]}const te=this.createMaterialFromType(_.type);if(_.uuid!==void 0&&(te.uuid=_.uuid),_.name!==void 0&&(te.name=_.name),_.color!==void 0&&te.color!==void 0&&te.color.setHex(_.color),_.roughness!==void 0&&(te.roughness=_.roughness),_.metalness!==void 0&&(te.metalness=_.metalness),_.sheen!==void 0&&(te.sheen=_.sheen),_.sheenColor!==void 0&&(te.sheenColor=new Color$1().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(te.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&te.emissive!==void 0&&te.emissive.setHex(_.emissive),_.specular!==void 0&&te.specular!==void 0&&te.specular.setHex(_.specular),_.specularIntensity!==void 0&&(te.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&te.specularColor!==void 0&&te.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(te.shininess=_.shininess),_.clearcoat!==void 0&&(te.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(te.clearcoatRoughness=_.clearcoatRoughness),_.dispersion!==void 0&&(te.dispersion=_.dispersion),_.iridescence!==void 0&&(te.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(te.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(te.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(te.transmission=_.transmission),_.thickness!==void 0&&(te.thickness=_.thickness),_.attenuationDistance!==void 0&&(te.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&te.attenuationColor!==void 0&&te.attenuationColor.setHex(_.attenuationColor),_.anisotropy!==void 0&&(te.anisotropy=_.anisotropy),_.anisotropyRotation!==void 0&&(te.anisotropyRotation=_.anisotropyRotation),_.fog!==void 0&&(te.fog=_.fog),_.flatShading!==void 0&&(te.flatShading=_.flatShading),_.blending!==void 0&&(te.blending=_.blending),_.combine!==void 0&&(te.combine=_.combine),_.side!==void 0&&(te.side=_.side),_.shadowSide!==void 0&&(te.shadowSide=_.shadowSide),_.opacity!==void 0&&(te.opacity=_.opacity),_.transparent!==void 0&&(te.transparent=_.transparent),_.alphaTest!==void 0&&(te.alphaTest=_.alphaTest),_.alphaHash!==void 0&&(te.alphaHash=_.alphaHash),_.depthFunc!==void 0&&(te.depthFunc=_.depthFunc),_.depthTest!==void 0&&(te.depthTest=_.depthTest),_.depthWrite!==void 0&&(te.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(te.colorWrite=_.colorWrite),_.blendSrc!==void 0&&(te.blendSrc=_.blendSrc),_.blendDst!==void 0&&(te.blendDst=_.blendDst),_.blendEquation!==void 0&&(te.blendEquation=_.blendEquation),_.blendSrcAlpha!==void 0&&(te.blendSrcAlpha=_.blendSrcAlpha),_.blendDstAlpha!==void 0&&(te.blendDstAlpha=_.blendDstAlpha),_.blendEquationAlpha!==void 0&&(te.blendEquationAlpha=_.blendEquationAlpha),_.blendColor!==void 0&&te.blendColor!==void 0&&te.blendColor.setHex(_.blendColor),_.blendAlpha!==void 0&&(te.blendAlpha=_.blendAlpha),_.stencilWriteMask!==void 0&&(te.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(te.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(te.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(te.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(te.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(te.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(te.stencilZPass=_.stencilZPass),_.stencilWrite!==void 0&&(te.stencilWrite=_.stencilWrite),_.wireframe!==void 0&&(te.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(te.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(te.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(te.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(te.rotation=_.rotation),_.linewidth!==void 0&&(te.linewidth=_.linewidth),_.dashSize!==void 0&&(te.dashSize=_.dashSize),_.gapSize!==void 0&&(te.gapSize=_.gapSize),_.scale!==void 0&&(te.scale=_.scale),_.polygonOffset!==void 0&&(te.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(te.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(te.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(te.dithering=_.dithering),_.alphaToCoverage!==void 0&&(te.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(te.premultipliedAlpha=_.premultipliedAlpha),_.forceSinglePass!==void 0&&(te.forceSinglePass=_.forceSinglePass),_.visible!==void 0&&(te.visible=_.visible),_.toneMapped!==void 0&&(te.toneMapped=_.toneMapped),_.userData!==void 0&&(te.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?te.vertexColors=_.vertexColors>0:te.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const ie in _.uniforms){const se=_.uniforms[ie];switch(te.uniforms[ie]={},se.type){case"t":te.uniforms[ie].value=Z(se.value);break;case"c":te.uniforms[ie].value=new Color$1().setHex(se.value);break;case"v2":te.uniforms[ie].value=new Vector2().fromArray(se.value);break;case"v3":te.uniforms[ie].value=new Vector3().fromArray(se.value);break;case"v4":te.uniforms[ie].value=new Vector4().fromArray(se.value);break;case"m3":te.uniforms[ie].value=new Matrix3().fromArray(se.value);break;case"m4":te.uniforms[ie].value=new Matrix4().fromArray(se.value);break;default:te.uniforms[ie].value=se.value}}if(_.defines!==void 0&&(te.defines=_.defines),_.vertexShader!==void 0&&(te.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(te.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(te.glslVersion=_.glslVersion),_.extensions!==void 0)for(const ie in _.extensions)te.extensions[ie]=_.extensions[ie];if(_.lights!==void 0&&(te.lights=_.lights),_.clipping!==void 0&&(te.clipping=_.clipping),_.size!==void 0&&(te.size=_.size),_.sizeAttenuation!==void 0&&(te.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(te.map=Z(_.map)),_.matcap!==void 0&&(te.matcap=Z(_.matcap)),_.alphaMap!==void 0&&(te.alphaMap=Z(_.alphaMap)),_.bumpMap!==void 0&&(te.bumpMap=Z(_.bumpMap)),_.bumpScale!==void 0&&(te.bumpScale=_.bumpScale),_.normalMap!==void 0&&(te.normalMap=Z(_.normalMap)),_.normalMapType!==void 0&&(te.normalMapType=_.normalMapType),_.normalScale!==void 0){let ie=_.normalScale;Array.isArray(ie)===!1&&(ie=[ie,ie]),te.normalScale=new Vector2().fromArray(ie)}return _.displacementMap!==void 0&&(te.displacementMap=Z(_.displacementMap)),_.displacementScale!==void 0&&(te.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(te.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(te.roughnessMap=Z(_.roughnessMap)),_.metalnessMap!==void 0&&(te.metalnessMap=Z(_.metalnessMap)),_.emissiveMap!==void 0&&(te.emissiveMap=Z(_.emissiveMap)),_.emissiveIntensity!==void 0&&(te.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(te.specularMap=Z(_.specularMap)),_.specularIntensityMap!==void 0&&(te.specularIntensityMap=Z(_.specularIntensityMap)),_.specularColorMap!==void 0&&(te.specularColorMap=Z(_.specularColorMap)),_.envMap!==void 0&&(te.envMap=Z(_.envMap)),_.envMapRotation!==void 0&&te.envMapRotation.fromArray(_.envMapRotation),_.envMapIntensity!==void 0&&(te.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(te.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(te.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(te.lightMap=Z(_.lightMap)),_.lightMapIntensity!==void 0&&(te.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(te.aoMap=Z(_.aoMap)),_.aoMapIntensity!==void 0&&(te.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(te.gradientMap=Z(_.gradientMap)),_.clearcoatMap!==void 0&&(te.clearcoatMap=Z(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(te.clearcoatRoughnessMap=Z(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(te.clearcoatNormalMap=Z(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(te.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(te.iridescenceMap=Z(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(te.iridescenceThicknessMap=Z(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(te.transmissionMap=Z(_.transmissionMap)),_.thicknessMap!==void 0&&(te.thicknessMap=Z(_.thicknessMap)),_.anisotropyMap!==void 0&&(te.anisotropyMap=Z(_.anisotropyMap)),_.sheenColorMap!==void 0&&(te.sheenColorMap=Z(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(te.sheenRoughnessMap=Z(_.sheenRoughnessMap)),te}setTextures(_){return this.textures=_,this}createMaterialFromType(_){return MaterialLoader.createMaterialFromType(_)}static createMaterialFromType(_){const K={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new K[_]}}class LoaderUtils{static extractUrlBase(_){const K=_.lastIndexOf("/");return K===-1?"./":_.slice(0,K+1)}static resolveURL(_,K){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(K)&&/^\//.test(_)&&(K=K.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:K+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=this,se=new FileLoader(ie.manager);se.setPath(ie.path),se.setRequestHeader(ie.requestHeader),se.setWithCredentials(ie.withCredentials),se.load(_,function(oe){try{K(ie.parse(JSON.parse(oe)))}catch(ae){te?te(ae):console.error(ae),ie.manager.itemError(_)}},Z,te)}parse(_){const K={},Z={};function te(ge,_e){if(K[_e]!==void 0)return K[_e];const Ee=ge.interleavedBuffers[_e],ye=ie(ge,Ee.buffer),be=getTypedArray(Ee.type,ye),we=new InterleavedBuffer(be,Ee.stride);return we.uuid=Ee.uuid,K[_e]=we,we}function ie(ge,_e){if(Z[_e]!==void 0)return Z[_e];const Ee=ge.arrayBuffers[_e],ye=new Uint32Array(Ee).buffer;return Z[_e]=ye,ye}const se=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,oe=_.data.index;if(oe!==void 0){const ge=getTypedArray(oe.type,oe.array);se.setIndex(new BufferAttribute(ge,1))}const ae=_.data.attributes;for(const ge in ae){const _e=ae[ge];let Se;if(_e.isInterleavedBufferAttribute){const Ee=te(_.data,_e.data);Se=new InterleavedBufferAttribute(Ee,_e.itemSize,_e.offset,_e.normalized)}else{const Ee=getTypedArray(_e.type,_e.array),ye=_e.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;Se=new ye(Ee,_e.itemSize,_e.normalized)}_e.name!==void 0&&(Se.name=_e.name),_e.usage!==void 0&&Se.setUsage(_e.usage),se.setAttribute(ge,Se)}const le=_.data.morphAttributes;if(le)for(const ge in le){const _e=le[ge],Se=[];for(let Ee=0,ye=_e.length;Ee<ye;Ee++){const be=_e[Ee];let we;if(be.isInterleavedBufferAttribute){const Pe=te(_.data,be.data);we=new InterleavedBufferAttribute(Pe,be.itemSize,be.offset,be.normalized)}else{const Pe=getTypedArray(be.type,be.array);we=new BufferAttribute(Pe,be.itemSize,be.normalized)}be.name!==void 0&&(we.name=be.name),Se.push(we)}se.morphAttributes[ge]=Se}_.data.morphTargetsRelative&&(se.morphTargetsRelative=!0);const fe=_.data.groups||_.data.drawcalls||_.data.offsets;if(fe!==void 0)for(let ge=0,_e=fe.length;ge!==_e;++ge){const Se=fe[ge];se.addGroup(Se.start,Se.count,Se.materialIndex)}const he=_.data.boundingSphere;return he!==void 0&&(se.boundingSphere=new Sphere().fromJSON(he)),_.name&&(se.name=_.name),_.userData&&(se.userData=_.userData),se}}class ObjectLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=this,se=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||se;const oe=new FileLoader(this.manager);oe.setPath(this.path),oe.setRequestHeader(this.requestHeader),oe.setWithCredentials(this.withCredentials),oe.load(_,function(ae){let le=null;try{le=JSON.parse(ae)}catch(fe){te!==void 0&&te(fe),console.error("THREE:ObjectLoader: Can't parse "+_+".",fe.message);return}const ue=le.metadata;if(ue===void 0||ue.type===void 0||ue.type.toLowerCase()==="geometry"){te!==void 0&&te(new Error("THREE.ObjectLoader: Can't load "+_)),console.error("THREE.ObjectLoader: Can't load "+_);return}ie.parse(le,K)},Z,te)}async loadAsync(_,K){const Z=this,te=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||te;const ie=new FileLoader(this.manager);ie.setPath(this.path),ie.setRequestHeader(this.requestHeader),ie.setWithCredentials(this.withCredentials);const se=await ie.loadAsync(_,K),oe=JSON.parse(se),ae=oe.metadata;if(ae===void 0||ae.type===void 0||ae.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await Z.parseAsync(oe)}parse(_,K){const Z=this.parseAnimations(_.animations),te=this.parseShapes(_.shapes),ie=this.parseGeometries(_.geometries,te),se=this.parseImages(_.images,function(){K!==void 0&&K(le)}),oe=this.parseTextures(_.textures,se),ae=this.parseMaterials(_.materials,oe),le=this.parseObject(_.object,ie,ae,oe,Z),ue=this.parseSkeletons(_.skeletons,le);if(this.bindSkeletons(le,ue),this.bindLightTargets(le),K!==void 0){let fe=!1;for(const he in se)if(se[he].data instanceof HTMLImageElement){fe=!0;break}fe===!1&&K(le)}return le}async parseAsync(_){const K=this.parseAnimations(_.animations),Z=this.parseShapes(_.shapes),te=this.parseGeometries(_.geometries,Z),ie=await this.parseImagesAsync(_.images),se=this.parseTextures(_.textures,ie),oe=this.parseMaterials(_.materials,se),ae=this.parseObject(_.object,te,oe,se,K),le=this.parseSkeletons(_.skeletons,ae);return this.bindSkeletons(ae,le),this.bindLightTargets(ae),ae}parseShapes(_){const K={};if(_!==void 0)for(let Z=0,te=_.length;Z<te;Z++){const ie=new Shape().fromJSON(_[Z]);K[ie.uuid]=ie}return K}parseSkeletons(_,K){const Z={},te={};if(K.traverse(function(ie){ie.isBone&&(te[ie.uuid]=ie)}),_!==void 0)for(let ie=0,se=_.length;ie<se;ie++){const oe=new Skeleton().fromJSON(_[ie],te);Z[oe.uuid]=oe}return Z}parseGeometries(_,K){const Z={};if(_!==void 0){const te=new BufferGeometryLoader;for(let ie=0,se=_.length;ie<se;ie++){let oe;const ae=_[ie];switch(ae.type){case"BufferGeometry":case"InstancedBufferGeometry":oe=te.parse(ae);break;default:ae.type in Geometries?oe=Geometries[ae.type].fromJSON(ae,K):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${ae.type}"`)}oe.uuid=ae.uuid,ae.name!==void 0&&(oe.name=ae.name),ae.userData!==void 0&&(oe.userData=ae.userData),Z[ae.uuid]=oe}}return Z}parseMaterials(_,K){const Z={},te={};if(_!==void 0){const ie=new MaterialLoader;ie.setTextures(K);for(let se=0,oe=_.length;se<oe;se++){const ae=_[se];Z[ae.uuid]===void 0&&(Z[ae.uuid]=ie.parse(ae)),te[ae.uuid]=Z[ae.uuid]}}return te}parseAnimations(_){const K={};if(_!==void 0)for(let Z=0;Z<_.length;Z++){const te=_[Z],ie=AnimationClip.parse(te);K[ie.uuid]=ie}return K}parseImages(_,K){const Z=this,te={};let ie;function se(ae){return Z.manager.itemStart(ae),ie.load(ae,function(){Z.manager.itemEnd(ae)},void 0,function(){Z.manager.itemError(ae),Z.manager.itemEnd(ae)})}function oe(ae){if(typeof ae=="string"){const le=ae,ue=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(le)?le:Z.resourcePath+le;return se(ue)}else return ae.data?{data:getTypedArray(ae.type,ae.data),width:ae.width,height:ae.height}:null}if(_!==void 0&&_.length>0){const ae=new LoadingManager(K);ie=new ImageLoader(ae),ie.setCrossOrigin(this.crossOrigin);for(let le=0,ue=_.length;le<ue;le++){const fe=_[le],he=fe.url;if(Array.isArray(he)){const ge=[];for(let _e=0,Se=he.length;_e<Se;_e++){const Ee=he[_e],ye=oe(Ee);ye!==null&&(ye instanceof HTMLImageElement?ge.push(ye):ge.push(new DataTexture(ye.data,ye.width,ye.height)))}te[fe.uuid]=new Source(ge)}else{const ge=oe(fe.url);te[fe.uuid]=new Source(ge)}}}return te}async parseImagesAsync(_){const K=this,Z={};let te;async function ie(se){if(typeof se=="string"){const oe=se,ae=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(oe)?oe:K.resourcePath+oe;return await te.loadAsync(ae)}else return se.data?{data:getTypedArray(se.type,se.data),width:se.width,height:se.height}:null}if(_!==void 0&&_.length>0){te=new ImageLoader(this.manager),te.setCrossOrigin(this.crossOrigin);for(let se=0,oe=_.length;se<oe;se++){const ae=_[se],le=ae.url;if(Array.isArray(le)){const ue=[];for(let fe=0,he=le.length;fe<he;fe++){const ge=le[fe],_e=await ie(ge);_e!==null&&(_e instanceof HTMLImageElement?ue.push(_e):ue.push(new DataTexture(_e.data,_e.width,_e.height)))}Z[ae.uuid]=new Source(ue)}else{const ue=await ie(ae.url);Z[ae.uuid]=new Source(ue)}}}return Z}parseTextures(_,K){function Z(ie,se){return typeof ie=="number"?ie:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ie),se[ie])}const te={};if(_!==void 0)for(let ie=0,se=_.length;ie<se;ie++){const oe=_[ie];oe.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',oe.uuid),K[oe.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",oe.image);const ae=K[oe.image],le=ae.data;let ue;Array.isArray(le)?(ue=new CubeTexture,le.length===6&&(ue.needsUpdate=!0)):(le&&le.data?ue=new DataTexture:ue=new Texture,le&&(ue.needsUpdate=!0)),ue.source=ae,ue.uuid=oe.uuid,oe.name!==void 0&&(ue.name=oe.name),oe.mapping!==void 0&&(ue.mapping=Z(oe.mapping,TEXTURE_MAPPING)),oe.channel!==void 0&&(ue.channel=oe.channel),oe.offset!==void 0&&ue.offset.fromArray(oe.offset),oe.repeat!==void 0&&ue.repeat.fromArray(oe.repeat),oe.center!==void 0&&ue.center.fromArray(oe.center),oe.rotation!==void 0&&(ue.rotation=oe.rotation),oe.wrap!==void 0&&(ue.wrapS=Z(oe.wrap[0],TEXTURE_WRAPPING),ue.wrapT=Z(oe.wrap[1],TEXTURE_WRAPPING)),oe.format!==void 0&&(ue.format=oe.format),oe.internalFormat!==void 0&&(ue.internalFormat=oe.internalFormat),oe.type!==void 0&&(ue.type=oe.type),oe.colorSpace!==void 0&&(ue.colorSpace=oe.colorSpace),oe.minFilter!==void 0&&(ue.minFilter=Z(oe.minFilter,TEXTURE_FILTER)),oe.magFilter!==void 0&&(ue.magFilter=Z(oe.magFilter,TEXTURE_FILTER)),oe.anisotropy!==void 0&&(ue.anisotropy=oe.anisotropy),oe.flipY!==void 0&&(ue.flipY=oe.flipY),oe.generateMipmaps!==void 0&&(ue.generateMipmaps=oe.generateMipmaps),oe.premultiplyAlpha!==void 0&&(ue.premultiplyAlpha=oe.premultiplyAlpha),oe.unpackAlignment!==void 0&&(ue.unpackAlignment=oe.unpackAlignment),oe.compareFunction!==void 0&&(ue.compareFunction=oe.compareFunction),oe.userData!==void 0&&(ue.userData=oe.userData),te[oe.uuid]=ue}return te}parseObject(_,K,Z,te,ie){let se;function oe(he){return K[he]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",he),K[he]}function ae(he){if(he!==void 0){if(Array.isArray(he)){const ge=[];for(let _e=0,Se=he.length;_e<Se;_e++){const Ee=he[_e];Z[Ee]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ee),ge.push(Z[Ee])}return ge}return Z[he]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",he),Z[he]}}function le(he){return te[he]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",he),te[he]}let ue,fe;switch(_.type){case"Scene":se=new Scene,_.background!==void 0&&(Number.isInteger(_.background)?se.background=new Color$1(_.background):se.background=le(_.background)),_.environment!==void 0&&(se.environment=le(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?se.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(se.fog=new FogExp2(_.fog.color,_.fog.density)),_.fog.name!==""&&(se.fog.name=_.fog.name)),_.backgroundBlurriness!==void 0&&(se.backgroundBlurriness=_.backgroundBlurriness),_.backgroundIntensity!==void 0&&(se.backgroundIntensity=_.backgroundIntensity),_.backgroundRotation!==void 0&&se.backgroundRotation.fromArray(_.backgroundRotation),_.environmentIntensity!==void 0&&(se.environmentIntensity=_.environmentIntensity),_.environmentRotation!==void 0&&se.environmentRotation.fromArray(_.environmentRotation);break;case"PerspectiveCamera":se=new PerspectiveCamera(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(se.focus=_.focus),_.zoom!==void 0&&(se.zoom=_.zoom),_.filmGauge!==void 0&&(se.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(se.filmOffset=_.filmOffset),_.view!==void 0&&(se.view=Object.assign({},_.view));break;case"OrthographicCamera":se=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(se.zoom=_.zoom),_.view!==void 0&&(se.view=Object.assign({},_.view));break;case"AmbientLight":se=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":se=new DirectionalLight(_.color,_.intensity),se.target=_.target||"";break;case"PointLight":se=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":se=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":se=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay),se.target=_.target||"";break;case"HemisphereLight":se=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":se=new LightProbe().fromJSON(_);break;case"SkinnedMesh":ue=oe(_.geometry),fe=ae(_.material),se=new SkinnedMesh(ue,fe),_.bindMode!==void 0&&(se.bindMode=_.bindMode),_.bindMatrix!==void 0&&se.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(se.skeleton=_.skeleton);break;case"Mesh":ue=oe(_.geometry),fe=ae(_.material),se=new Mesh(ue,fe);break;case"InstancedMesh":ue=oe(_.geometry),fe=ae(_.material);const he=_.count,ge=_.instanceMatrix,_e=_.instanceColor;se=new InstancedMesh(ue,fe,he),se.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ge.array),16),_e!==void 0&&(se.instanceColor=new InstancedBufferAttribute(new Float32Array(_e.array),_e.itemSize));break;case"BatchedMesh":ue=oe(_.geometry),fe=ae(_.material),se=new BatchedMesh(_.maxInstanceCount,_.maxVertexCount,_.maxIndexCount,fe),se.geometry=ue,se.perObjectFrustumCulled=_.perObjectFrustumCulled,se.sortObjects=_.sortObjects,se._drawRanges=_.drawRanges,se._reservedRanges=_.reservedRanges,se._geometryInfo=_.geometryInfo.map(Se=>{let Ee=null,ye=null;return Se.boundingBox!==void 0&&(Ee=new Box3().fromJSON(Se.boundingBox)),Se.boundingSphere!==void 0&&(ye=new Sphere().fromJSON(Se.boundingSphere)),{...Se,boundingBox:Ee,boundingSphere:ye}}),se._instanceInfo=_.instanceInfo,se._availableInstanceIds=_._availableInstanceIds,se._availableGeometryIds=_._availableGeometryIds,se._nextIndexStart=_.nextIndexStart,se._nextVertexStart=_.nextVertexStart,se._geometryCount=_.geometryCount,se._maxInstanceCount=_.maxInstanceCount,se._maxVertexCount=_.maxVertexCount,se._maxIndexCount=_.maxIndexCount,se._geometryInitialized=_.geometryInitialized,se._matricesTexture=le(_.matricesTexture.uuid),se._indirectTexture=le(_.indirectTexture.uuid),_.colorsTexture!==void 0&&(se._colorsTexture=le(_.colorsTexture.uuid)),_.boundingSphere!==void 0&&(se.boundingSphere=new Sphere().fromJSON(_.boundingSphere)),_.boundingBox!==void 0&&(se.boundingBox=new Box3().fromJSON(_.boundingBox));break;case"LOD":se=new LOD;break;case"Line":se=new Line(oe(_.geometry),ae(_.material));break;case"LineLoop":se=new LineLoop(oe(_.geometry),ae(_.material));break;case"LineSegments":se=new LineSegments(oe(_.geometry),ae(_.material));break;case"PointCloud":case"Points":se=new Points(oe(_.geometry),ae(_.material));break;case"Sprite":se=new Sprite(ae(_.material));break;case"Group":se=new Group;break;case"Bone":se=new Bone;break;default:se=new Object3D}if(se.uuid=_.uuid,_.name!==void 0&&(se.name=_.name),_.matrix!==void 0?(se.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(se.matrixAutoUpdate=_.matrixAutoUpdate),se.matrixAutoUpdate&&se.matrix.decompose(se.position,se.quaternion,se.scale)):(_.position!==void 0&&se.position.fromArray(_.position),_.rotation!==void 0&&se.rotation.fromArray(_.rotation),_.quaternion!==void 0&&se.quaternion.fromArray(_.quaternion),_.scale!==void 0&&se.scale.fromArray(_.scale)),_.up!==void 0&&se.up.fromArray(_.up),_.castShadow!==void 0&&(se.castShadow=_.castShadow),_.receiveShadow!==void 0&&(se.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.intensity!==void 0&&(se.shadow.intensity=_.shadow.intensity),_.shadow.bias!==void 0&&(se.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(se.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(se.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&se.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(se.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(se.visible=_.visible),_.frustumCulled!==void 0&&(se.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(se.renderOrder=_.renderOrder),_.userData!==void 0&&(se.userData=_.userData),_.layers!==void 0&&(se.layers.mask=_.layers),_.children!==void 0){const he=_.children;for(let ge=0;ge<he.length;ge++)se.add(this.parseObject(he[ge],K,Z,te,ie))}if(_.animations!==void 0){const he=_.animations;for(let ge=0;ge<he.length;ge++){const _e=he[ge];se.animations.push(ie[_e])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(se.autoUpdate=_.autoUpdate);const he=_.levels;for(let ge=0;ge<he.length;ge++){const _e=he[ge],Se=se.getObjectByProperty("uuid",_e.object);Se!==void 0&&se.addLevel(Se,_e.distance,_e.hysteresis)}}return se}bindSkeletons(_,K){Object.keys(K).length!==0&&_.traverse(function(Z){if(Z.isSkinnedMesh===!0&&Z.skeleton!==void 0){const te=K[Z.skeleton];te===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",Z.skeleton):Z.bind(te,Z.bindMatrix)}})}bindLightTargets(_){_.traverse(function(K){if(K.isDirectionalLight||K.isSpotLight){const Z=K.target,te=_.getObjectByProperty("uuid",Z);te!==void 0?K.target=te:K.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter},_errorMap=new WeakMap;class ImageBitmapLoader extends Loader{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(_){return this.options=_,this}load(_,K,Z,te){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const ie=this,se=Cache.get(`image-bitmap:${_}`);if(se!==void 0){if(ie.manager.itemStart(_),se.then){se.then(le=>{if(_errorMap.has(se)===!0)te&&te(_errorMap.get(se)),ie.manager.itemError(_),ie.manager.itemEnd(_);else return K&&K(le),ie.manager.itemEnd(_),le});return}return setTimeout(function(){K&&K(se),ie.manager.itemEnd(_)},0),se}const oe={};oe.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",oe.headers=this.requestHeader,oe.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const ae=fetch(_,oe).then(function(le){return le.blob()}).then(function(le){return createImageBitmap(le,Object.assign(ie.options,{colorSpaceConversion:"none"}))}).then(function(le){return Cache.add(`image-bitmap:${_}`,le),K&&K(le),ie.manager.itemEnd(_),le}).catch(function(le){te&&te(le),_errorMap.set(ae,le),Cache.remove(`image-bitmap:${_}`),ie.manager.itemError(_),ie.manager.itemEnd(_)});Cache.add(`image-bitmap:${_}`,ae),ie.manager.itemStart(_)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _context$1;class AudioContext{static getContext(){return _context$1===void 0&&(_context$1=new(window.AudioContext||window.webkitAudioContext)),_context$1}static setContext(_){_context$1=_}}class AudioLoader extends Loader{constructor(_){super(_)}load(_,K,Z,te){const ie=this,se=new FileLoader(this.manager);se.setResponseType("arraybuffer"),se.setPath(this.path),se.setRequestHeader(this.requestHeader),se.setWithCredentials(this.withCredentials),se.load(_,function(ae){try{const le=ae.slice(0);AudioContext.getContext().decodeAudioData(le,function(fe){K(fe)}).catch(oe)}catch(le){oe(le)}},Z,te);function oe(ae){te?te(ae):console.error(ae),ie.manager.itemError(_)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const K=this._cache;if(K.focus!==_.focus||K.fov!==_.fov||K.aspect!==_.aspect*this.aspect||K.near!==_.near||K.far!==_.far||K.zoom!==_.zoom||K.eyeSep!==this.eyeSep){K.focus=_.focus,K.fov=_.fov,K.aspect=_.aspect*this.aspect,K.near=_.near,K.far=_.far,K.zoom=_.zoom,K.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const te=K.eyeSep/2,ie=te*K.near/K.focus,se=K.near*Math.tan(DEG2RAD*K.fov*.5)/K.zoom;let oe,ae;_eyeLeft.elements[12]=-te,_eyeRight.elements[12]=te,oe=-se*K.aspect+ie,ae=se*K.aspect+ie,_projectionMatrix.elements[0]=2*K.near/(ae-oe),_projectionMatrix.elements[8]=(ae+oe)/(ae-oe),this.cameraL.projectionMatrix.copy(_projectionMatrix),oe=-se*K.aspect-ie,ae=se*K.aspect-ie,_projectionMatrix.elements[0]=2*K.near/(ae-oe),_projectionMatrix.elements[8]=(ae+oe)/(ae-oe),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(_=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=_}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const K=performance.now();_=(K-this.oldTime)/1e3,this.oldTime=K,this.elapsedTime+=_}return _}}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_forward=new Vector3,_up=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const K=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_forward.set(0,0,-1).applyQuaternion(_quaternion$1),_up.set(0,1,0).applyQuaternion(_quaternion$1),K.positionX){const Z=this.context.currentTime+this.timeDelta;K.positionX.linearRampToValueAtTime(_position$1.x,Z),K.positionY.linearRampToValueAtTime(_position$1.y,Z),K.positionZ.linearRampToValueAtTime(_position$1.z,Z),K.forwardX.linearRampToValueAtTime(_forward.x,Z),K.forwardY.linearRampToValueAtTime(_forward.y,Z),K.forwardZ.linearRampToValueAtTime(_forward.z,Z),K.upX.linearRampToValueAtTime(_up.x,Z),K.upY.linearRampToValueAtTime(_up.y,Z),K.upZ.linearRampToValueAtTime(_up.z,Z)}else K.setPosition(_position$1.x,_position$1.y,_position$1.z),K.setOrientation(_forward.x,_forward.y,_forward.z,_up.x,_up.y,_up.z)}}class Audio extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const K=this.context.createBufferSource();return K.buffer=this.buffer,K.loop=this.loop,K.loopStart=this.loopStart,K.loopEnd=this.loopEnd,K.onended=this.onEnded.bind(this),K.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=K,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(_=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+_),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,K=this.filters.length;_<K;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,K=this.filters.length;_<K;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){return this.detune=_,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}copy(_,K){return super.copy(_,K),_.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=_.autoplay,this.buffer=_.buffer,this.detune=_.detune,this.loop=_.loop,this.loopStart=_.loopStart,this.loopEnd=_.loopEnd,this.offset=_.offset,this.duration=_.duration,this.playbackRate=_.playbackRate,this.hasPlaybackControl=_.hasPlaybackControl,this.sourceType=_.sourceType,this.filters=_.filters.slice(),this)}clone(_){return new this.constructor(this.listener).copy(this,_)}}const _position=new Vector3,_quaternion$5=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,K,Z){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=K,this.panner.coneOuterGain=Z,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion$5,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion$5);const K=this.panner;if(K.positionX){const Z=this.context.currentTime+this.listener.timeDelta;K.positionX.linearRampToValueAtTime(_position.x,Z),K.positionY.linearRampToValueAtTime(_position.y,Z),K.positionZ.linearRampToValueAtTime(_position.z,Z),K.orientationX.linearRampToValueAtTime(_orientation.x,Z),K.orientationY.linearRampToValueAtTime(_orientation.y,Z),K.orientationZ.linearRampToValueAtTime(_orientation.z,Z)}else K.setPosition(_position.x,_position.y,_position.z),K.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,K=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=K,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const K=this.getFrequencyData();for(let Z=0;Z<K.length;Z++)_+=K[Z];return _/K.length}}class PropertyMixer{constructor(_,K,Z){this.binding=_,this.valueSize=Z;let te,ie,se;switch(K){case"quaternion":te=this._slerp,ie=this._slerpAdditive,se=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(Z*6),this._workIndex=5;break;case"string":case"bool":te=this._select,ie=this._select,se=this._setAdditiveIdentityOther,this.buffer=new Array(Z*5);break;default:te=this._lerp,ie=this._lerpAdditive,se=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(Z*5)}this._mixBufferRegion=te,this._mixBufferRegionAdditive=ie,this._setIdentity=se,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,K){const Z=this.buffer,te=this.valueSize,ie=_*te+te;let se=this.cumulativeWeight;if(se===0){for(let oe=0;oe!==te;++oe)Z[ie+oe]=Z[oe];se=K}else{se+=K;const oe=K/se;this._mixBufferRegion(Z,ie,0,oe,te)}this.cumulativeWeight=se}accumulateAdditive(_){const K=this.buffer,Z=this.valueSize,te=Z*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(K,te,0,_,Z),this.cumulativeWeightAdditive+=_}apply(_){const K=this.valueSize,Z=this.buffer,te=_*K+K,ie=this.cumulativeWeight,se=this.cumulativeWeightAdditive,oe=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ie<1){const ae=K*this._origIndex;this._mixBufferRegion(Z,te,ae,1-ie,K)}se>0&&this._mixBufferRegionAdditive(Z,te,this._addIndex*K,1,K);for(let ae=K,le=K+K;ae!==le;++ae)if(Z[ae]!==Z[ae+K]){oe.setValue(Z,te);break}}saveOriginalState(){const _=this.binding,K=this.buffer,Z=this.valueSize,te=Z*this._origIndex;_.getValue(K,te);for(let ie=Z,se=te;ie!==se;++ie)K[ie]=K[te+ie%Z];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,K=_+this.valueSize;for(let Z=_;Z<K;Z++)this.buffer[Z]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,K=this._addIndex*this.valueSize;for(let Z=0;Z<this.valueSize;Z++)this.buffer[K+Z]=this.buffer[_+Z]}_select(_,K,Z,te,ie){if(te>=.5)for(let se=0;se!==ie;++se)_[K+se]=_[Z+se]}_slerp(_,K,Z,te){Quaternion.slerpFlat(_,K,_,K,_,Z,te)}_slerpAdditive(_,K,Z,te,ie){const se=this._workIndex*ie;Quaternion.multiplyQuaternionsFlat(_,se,_,K,_,Z),Quaternion.slerpFlat(_,K,_,K,_,se,te)}_lerp(_,K,Z,te,ie){const se=1-te;for(let oe=0;oe!==ie;++oe){const ae=K+oe;_[ae]=_[ae]*se+_[Z+oe]*te}}_lerpAdditive(_,K,Z,te,ie){for(let se=0;se!==ie;++se){const oe=K+se;_[oe]=_[oe]+_[Z+se]*te}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,K,Z){const te=Z||PropertyBinding.parseTrackName(K);this._targetGroup=_,this._bindings=_.subscribe_(K,te)}getValue(_,K){this.bind();const Z=this._targetGroup.nCachedObjects_,te=this._bindings[Z];te!==void 0&&te.getValue(_,K)}setValue(_,K){const Z=this._bindings;for(let te=this._targetGroup.nCachedObjects_,ie=Z.length;te!==ie;++te)Z[te].setValue(_,K)}bind(){const _=this._bindings;for(let K=this._targetGroup.nCachedObjects_,Z=_.length;K!==Z;++K)_[K].bind()}unbind(){const _=this._bindings;for(let K=this._targetGroup.nCachedObjects_,Z=_.length;K!==Z;++K)_[K].unbind()}}class PropertyBinding{constructor(_,K,Z){this.path=K,this.parsedPath=Z||PropertyBinding.parseTrackName(K),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName),this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,K,Z){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,K,Z):new PropertyBinding(_,K,Z)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const K=_trackRe.exec(_);if(K===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const Z={nodeName:K[2],objectName:K[3],objectIndex:K[4],propertyName:K[5],propertyIndex:K[6]},te=Z.nodeName&&Z.nodeName.lastIndexOf(".");if(te!==void 0&&te!==-1){const ie=Z.nodeName.substring(te+1);_supportedObjectNames.indexOf(ie)!==-1&&(Z.nodeName=Z.nodeName.substring(0,te),Z.objectName=ie)}if(Z.propertyName===null||Z.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return Z}static findNode(_,K){if(K===void 0||K===""||K==="."||K===-1||K===_.name||K===_.uuid)return _;if(_.skeleton){const Z=_.skeleton.getBoneByName(K);if(Z!==void 0)return Z}if(_.children){const Z=function(ie){for(let se=0;se<ie.length;se++){const oe=ie[se];if(oe.name===K||oe.uuid===K)return oe;const ae=Z(oe.children);if(ae)return ae}return null},te=Z(_.children);if(te)return te}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,K){_[K]=this.targetObject[this.propertyName]}_getValue_array(_,K){const Z=this.resolvedProperty;for(let te=0,ie=Z.length;te!==ie;++te)_[K++]=Z[te]}_getValue_arrayElement(_,K){_[K]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,K){this.resolvedProperty.toArray(_,K)}_setValue_direct(_,K){this.targetObject[this.propertyName]=_[K]}_setValue_direct_setNeedsUpdate(_,K){this.targetObject[this.propertyName]=_[K],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,K){this.targetObject[this.propertyName]=_[K],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,K){const Z=this.resolvedProperty;for(let te=0,ie=Z.length;te!==ie;++te)Z[te]=_[K++]}_setValue_array_setNeedsUpdate(_,K){const Z=this.resolvedProperty;for(let te=0,ie=Z.length;te!==ie;++te)Z[te]=_[K++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,K){const Z=this.resolvedProperty;for(let te=0,ie=Z.length;te!==ie;++te)Z[te]=_[K++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,K){this.resolvedProperty[this.propertyIndex]=_[K]}_setValue_arrayElement_setNeedsUpdate(_,K){this.resolvedProperty[this.propertyIndex]=_[K],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,K){this.resolvedProperty[this.propertyIndex]=_[K],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,K){this.resolvedProperty.fromArray(_,K)}_setValue_fromArray_setNeedsUpdate(_,K){this.resolvedProperty.fromArray(_,K),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,K){this.resolvedProperty.fromArray(_,K),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,K){this.bind(),this.getValue(_,K)}_setValue_unbound(_,K){this.bind(),this.setValue(_,K)}bind(){let _=this.node;const K=this.parsedPath,Z=K.objectName,te=K.propertyName;let ie=K.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,K.nodeName),this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(Z){let le=K.objectIndex;switch(Z){case"materials":if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let ue=0;ue<_.length;ue++)if(_[ue].name===le){le=ue;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[Z]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[Z]}if(le!==void 0){if(_[le]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[le]}}const se=_[te];if(se===void 0){const le=K.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+le+"."+te+" but it wasn't found.",_);return}let oe=this.Versioning.None;this.targetObject=_,_.isMaterial===!0?oe=this.Versioning.NeedsUpdate:_.isObject3D===!0&&(oe=this.Versioning.MatrixWorldNeedsUpdate);let ae=this.BindingType.Direct;if(ie!==void 0){if(te==="morphTargetInfluences"){if(!_.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[ie]!==void 0&&(ie=_.morphTargetDictionary[ie])}ae=this.BindingType.ArrayElement,this.resolvedProperty=se,this.propertyIndex=ie}else se.fromArray!==void 0&&se.toArray!==void 0?(ae=this.BindingType.HasFromToArray,this.resolvedProperty=se):Array.isArray(se)?(ae=this.BindingType.EntireArray,this.resolvedProperty=se):this.propertyName=te;this.getValue=this.GetterByBindingType[ae],this.setValue=this.SetterByBindingTypeAndVersioning[ae][oe]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let Z=0,te=arguments.length;Z!==te;++Z)_[arguments[Z].uuid]=Z;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const K=this;this.stats={objects:{get total(){return K._objects.length},get inUse(){return this.total-K.nCachedObjects_}},get bindingsPerObject(){return K._bindings.length}}}add(){const _=this._objects,K=this._indicesByUUID,Z=this._paths,te=this._parsedPaths,ie=this._bindings,se=ie.length;let oe,ae=_.length,le=this.nCachedObjects_;for(let ue=0,fe=arguments.length;ue!==fe;++ue){const he=arguments[ue],ge=he.uuid;let _e=K[ge];if(_e===void 0){_e=ae++,K[ge]=_e,_.push(he);for(let Se=0,Ee=se;Se!==Ee;++Se)ie[Se].push(new PropertyBinding(he,Z[Se],te[Se]))}else if(_e<le){oe=_[_e];const Se=--le,Ee=_[Se];K[Ee.uuid]=_e,_[_e]=Ee,K[ge]=Se,_[Se]=he;for(let ye=0,be=se;ye!==be;++ye){const we=ie[ye],Pe=we[Se];let Oe=we[_e];we[_e]=Pe,Oe===void 0&&(Oe=new PropertyBinding(he,Z[ye],te[ye])),we[Se]=Oe}}else _[_e]!==oe&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=le}remove(){const _=this._objects,K=this._indicesByUUID,Z=this._bindings,te=Z.length;let ie=this.nCachedObjects_;for(let se=0,oe=arguments.length;se!==oe;++se){const ae=arguments[se],le=ae.uuid,ue=K[le];if(ue!==void 0&&ue>=ie){const fe=ie++,he=_[fe];K[he.uuid]=ue,_[ue]=he,K[le]=fe,_[fe]=ae;for(let ge=0,_e=te;ge!==_e;++ge){const Se=Z[ge],Ee=Se[fe],ye=Se[ue];Se[ue]=Ee,Se[fe]=ye}}}this.nCachedObjects_=ie}uncache(){const _=this._objects,K=this._indicesByUUID,Z=this._bindings,te=Z.length;let ie=this.nCachedObjects_,se=_.length;for(let oe=0,ae=arguments.length;oe!==ae;++oe){const le=arguments[oe],ue=le.uuid,fe=K[ue];if(fe!==void 0)if(delete K[ue],fe<ie){const he=--ie,ge=_[he],_e=--se,Se=_[_e];K[ge.uuid]=fe,_[fe]=ge,K[Se.uuid]=he,_[he]=Se,_.pop();for(let Ee=0,ye=te;Ee!==ye;++Ee){const be=Z[Ee],we=be[he],Pe=be[_e];be[fe]=we,be[he]=Pe,be.pop()}}else{const he=--se,ge=_[he];he>0&&(K[ge.uuid]=fe),_[fe]=ge,_.pop();for(let _e=0,Se=te;_e!==Se;++_e){const Ee=Z[_e];Ee[fe]=Ee[he],Ee.pop()}}}this.nCachedObjects_=ie}subscribe_(_,K){const Z=this._bindingsIndicesByPath;let te=Z[_];const ie=this._bindings;if(te!==void 0)return ie[te];const se=this._paths,oe=this._parsedPaths,ae=this._objects,le=ae.length,ue=this.nCachedObjects_,fe=new Array(le);te=ie.length,Z[_]=te,se.push(_),oe.push(K),ie.push(fe);for(let he=ue,ge=ae.length;he!==ge;++he){const _e=ae[he];fe[he]=new PropertyBinding(_e,_,K)}return fe}unsubscribe_(_){const K=this._bindingsIndicesByPath,Z=K[_];if(Z!==void 0){const te=this._paths,ie=this._parsedPaths,se=this._bindings,oe=se.length-1,ae=se[oe],le=_[oe];K[le]=Z,se[Z]=ae,se.pop(),ie[Z]=ie[oe],ie.pop(),te[Z]=te[oe],te.pop()}}}class AnimationAction{constructor(_,K,Z=null,te=K.blendMode){this._mixer=_,this._clip=K,this._localRoot=Z,this.blendMode=te;const ie=K.tracks,se=ie.length,oe=new Array(se),ae={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let le=0;le!==se;++le){const ue=ie[le].createInterpolant(null);oe[le]=ue,ue.settings=ae}this._interpolantSettings=ae,this._interpolants=oe,this._propertyBindings=new Array(se),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,K){return this.loop=_,this.repetitions=K,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,K,Z=!1){if(_.fadeOut(K),this.fadeIn(K),Z===!0){const te=this._clip.duration,ie=_._clip.duration,se=ie/te,oe=te/ie;_.warp(1,se,K),this.warp(oe,1,K)}return this}crossFadeTo(_,K,Z=!1){return _.crossFadeFrom(this,K,Z)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,K,Z){const te=this._mixer,ie=te.time,se=this.timeScale;let oe=this._timeScaleInterpolant;oe===null&&(oe=te._lendControlInterpolant(),this._timeScaleInterpolant=oe);const ae=oe.parameterPositions,le=oe.sampleValues;return ae[0]=ie,ae[1]=ie+Z,le[0]=_/se,le[1]=K/se,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,K,Z,te){if(!this.enabled){this._updateWeight(_);return}const ie=this._startTime;if(ie!==null){const ae=(_-ie)*Z;ae<0||Z===0?K=0:(this._startTime=null,K=Z*ae)}K*=this._updateTimeScale(_);const se=this._updateTime(K),oe=this._updateWeight(_);if(oe>0){const ae=this._interpolants,le=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ue=0,fe=ae.length;ue!==fe;++ue)ae[ue].evaluate(se),le[ue].accumulateAdditive(oe);break;case NormalAnimationBlendMode:default:for(let ue=0,fe=ae.length;ue!==fe;++ue)ae[ue].evaluate(se),le[ue].accumulate(te,oe)}}}_updateWeight(_){let K=0;if(this.enabled){K=this.weight;const Z=this._weightInterpolant;if(Z!==null){const te=Z.evaluate(_)[0];K*=te,_>Z.parameterPositions[1]&&(this.stopFading(),te===0&&(this.enabled=!1))}}return this._effectiveWeight=K,K}_updateTimeScale(_){let K=0;if(!this.paused){K=this.timeScale;const Z=this._timeScaleInterpolant;if(Z!==null){const te=Z.evaluate(_)[0];K*=te,_>Z.parameterPositions[1]&&(this.stopWarping(),K===0?this.paused=!0:this.timeScale=K)}}return this._effectiveTimeScale=K,K}_updateTime(_){const K=this._clip.duration,Z=this.loop;let te=this.time+_,ie=this._loopCount;const se=Z===LoopPingPong;if(_===0)return ie===-1?te:se&&(ie&1)===1?K-te:te;if(Z===LoopOnce){ie===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(te>=K)te=K;else if(te<0)te=0;else{this.time=te;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=te,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(ie===-1&&(_>=0?(ie=0,this._setEndings(!0,this.repetitions===0,se)):this._setEndings(this.repetitions===0,!0,se)),te>=K||te<0){const oe=Math.floor(te/K);te-=K*oe,ie+=Math.abs(oe);const ae=this.repetitions-ie;if(ae<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,te=_>0?K:0,this.time=te,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(ae===1){const le=_<0;this._setEndings(le,!le,se)}else this._setEndings(!1,!1,se);this._loopCount=ie,this.time=te,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:oe})}}else this.time=te;if(se&&(ie&1)===1)return K-te}return te}_setEndings(_,K,Z){const te=this._interpolantSettings;Z?(te.endingStart=ZeroSlopeEnding,te.endingEnd=ZeroSlopeEnding):(_?te.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:te.endingStart=WrapAroundEnding,K?te.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:te.endingEnd=WrapAroundEnding)}_scheduleFading(_,K,Z){const te=this._mixer,ie=te.time;let se=this._weightInterpolant;se===null&&(se=te._lendControlInterpolant(),this._weightInterpolant=se);const oe=se.parameterPositions,ae=se.sampleValues;return oe[0]=ie,ae[0]=K,oe[1]=ie+_,ae[1]=Z,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$1{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,K){const Z=_._localRoot||this._root,te=_._clip.tracks,ie=te.length,se=_._propertyBindings,oe=_._interpolants,ae=Z.uuid,le=this._bindingsByRootAndName;let ue=le[ae];ue===void 0&&(ue={},le[ae]=ue);for(let fe=0;fe!==ie;++fe){const he=te[fe],ge=he.name;let _e=ue[ge];if(_e!==void 0)++_e.referenceCount,se[fe]=_e;else{if(_e=se[fe],_e!==void 0){_e._cacheIndex===null&&(++_e.referenceCount,this._addInactiveBinding(_e,ae,ge));continue}const Se=K&&K._propertyBindings[fe].binding.parsedPath;_e=new PropertyMixer(PropertyBinding.create(Z,ge,Se),he.ValueTypeName,he.getValueSize()),++_e.referenceCount,this._addInactiveBinding(_e,ae,ge),se[fe]=_e}oe[fe].resultBuffer=_e.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const Z=(_._localRoot||this._root).uuid,te=_._clip.uuid,ie=this._actionsByClip[te];this._bindAction(_,ie&&ie.knownActions[0]),this._addInactiveAction(_,te,Z)}const K=_._propertyBindings;for(let Z=0,te=K.length;Z!==te;++Z){const ie=K[Z];ie.useCount++===0&&(this._lendBinding(ie),ie.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const K=_._propertyBindings;for(let Z=0,te=K.length;Z!==te;++Z){const ie=K[Z];--ie.useCount===0&&(ie.restoreOriginalState(),this._takeBackBinding(ie))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const K=_._cacheIndex;return K!==null&&K<this._nActiveActions}_addInactiveAction(_,K,Z){const te=this._actions,ie=this._actionsByClip;let se=ie[K];if(se===void 0)se={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,ie[K]=se;else{const oe=se.knownActions;_._byClipCacheIndex=oe.length,oe.push(_)}_._cacheIndex=te.length,te.push(_),se.actionByRoot[Z]=_}_removeInactiveAction(_){const K=this._actions,Z=K[K.length-1],te=_._cacheIndex;Z._cacheIndex=te,K[te]=Z,K.pop(),_._cacheIndex=null;const ie=_._clip.uuid,se=this._actionsByClip,oe=se[ie],ae=oe.knownActions,le=ae[ae.length-1],ue=_._byClipCacheIndex;le._byClipCacheIndex=ue,ae[ue]=le,ae.pop(),_._byClipCacheIndex=null;const fe=oe.actionByRoot,he=(_._localRoot||this._root).uuid;delete fe[he],ae.length===0&&delete se[ie],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const K=_._propertyBindings;for(let Z=0,te=K.length;Z!==te;++Z){const ie=K[Z];--ie.referenceCount===0&&this._removeInactiveBinding(ie)}}_lendAction(_){const K=this._actions,Z=_._cacheIndex,te=this._nActiveActions++,ie=K[te];_._cacheIndex=te,K[te]=_,ie._cacheIndex=Z,K[Z]=ie}_takeBackAction(_){const K=this._actions,Z=_._cacheIndex,te=--this._nActiveActions,ie=K[te];_._cacheIndex=te,K[te]=_,ie._cacheIndex=Z,K[Z]=ie}_addInactiveBinding(_,K,Z){const te=this._bindingsByRootAndName,ie=this._bindings;let se=te[K];se===void 0&&(se={},te[K]=se),se[Z]=_,_._cacheIndex=ie.length,ie.push(_)}_removeInactiveBinding(_){const K=this._bindings,Z=_.binding,te=Z.rootNode.uuid,ie=Z.path,se=this._bindingsByRootAndName,oe=se[te],ae=K[K.length-1],le=_._cacheIndex;ae._cacheIndex=le,K[le]=ae,K.pop(),delete oe[ie],Object.keys(oe).length===0&&delete se[te]}_lendBinding(_){const K=this._bindings,Z=_._cacheIndex,te=this._nActiveBindings++,ie=K[te];_._cacheIndex=te,K[te]=_,ie._cacheIndex=Z,K[Z]=ie}_takeBackBinding(_){const K=this._bindings,Z=_._cacheIndex,te=--this._nActiveBindings,ie=K[te];_._cacheIndex=te,K[te]=_,ie._cacheIndex=Z,K[Z]=ie}_lendControlInterpolant(){const _=this._controlInterpolants,K=this._nActiveControlInterpolants++;let Z=_[K];return Z===void 0&&(Z=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),Z.__cacheIndex=K,_[K]=Z),Z}_takeBackControlInterpolant(_){const K=this._controlInterpolants,Z=_.__cacheIndex,te=--this._nActiveControlInterpolants,ie=K[te];_.__cacheIndex=te,K[te]=_,ie.__cacheIndex=Z,K[Z]=ie}clipAction(_,K,Z){const te=K||this._root,ie=te.uuid;let se=typeof _=="string"?AnimationClip.findByName(te,_):_;const oe=se!==null?se.uuid:_,ae=this._actionsByClip[oe];let le=null;if(Z===void 0&&(se!==null?Z=se.blendMode:Z=NormalAnimationBlendMode),ae!==void 0){const fe=ae.actionByRoot[ie];if(fe!==void 0&&fe.blendMode===Z)return fe;le=ae.knownActions[0],se===null&&(se=le._clip)}if(se===null)return null;const ue=new AnimationAction(this,se,K,Z);return this._bindAction(ue,le),this._addInactiveAction(ue,oe,ie),ue}existingAction(_,K){const Z=K||this._root,te=Z.uuid,ie=typeof _=="string"?AnimationClip.findByName(Z,_):_,se=ie?ie.uuid:_,oe=this._actionsByClip[se];return oe!==void 0&&oe.actionByRoot[te]||null}stopAllAction(){const _=this._actions,K=this._nActiveActions;for(let Z=K-1;Z>=0;--Z)_[Z].stop();return this}update(_){_*=this.timeScale;const K=this._actions,Z=this._nActiveActions,te=this.time+=_,ie=Math.sign(_),se=this._accuIndex^=1;for(let le=0;le!==Z;++le)K[le]._update(te,_,ie,se);const oe=this._bindings,ae=this._nActiveBindings;for(let le=0;le!==ae;++le)oe[le].apply(se);return this}setTime(_){this.time=0;for(let K=0;K<this._actions.length;K++)this._actions[K].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const K=this._actions,Z=_.uuid,te=this._actionsByClip,ie=te[Z];if(ie!==void 0){const se=ie.knownActions;for(let oe=0,ae=se.length;oe!==ae;++oe){const le=se[oe];this._deactivateAction(le);const ue=le._cacheIndex,fe=K[K.length-1];le._cacheIndex=null,le._byClipCacheIndex=null,fe._cacheIndex=ue,K[ue]=fe,K.pop(),this._removeInactiveBindingsForAction(le)}delete te[Z]}}uncacheRoot(_){const K=_.uuid,Z=this._actionsByClip;for(const se in Z){const oe=Z[se].actionByRoot,ae=oe[K];ae!==void 0&&(this._deactivateAction(ae),this._removeInactiveAction(ae))}const te=this._bindingsByRootAndName,ie=te[K];if(ie!==void 0)for(const se in ie){const oe=ie[se];oe.restoreOriginalState(),this._removeInactiveBinding(oe)}}uncacheAction(_,K){const Z=this.existingAction(_,K);Z!==null&&(this._deactivateAction(Z),this._removeInactiveAction(Z))}}class RenderTarget3D extends RenderTarget{constructor(_=1,K=1,Z=1,te={}){super(_,K,te),this.isRenderTarget3D=!0,this.depth=Z,this.texture=new Data3DTexture(null,_,K,Z),this._setTextureOptions(te),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher$1{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const K=this.uniforms.indexOf(_);return K!==-1&&this.uniforms.splice(K,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(_){this.name=_.name,this.usage=_.usage;const K=_.uniforms;this.uniforms.length=0;for(let Z=0,te=K.length;Z<te;Z++){const ie=Array.isArray(K[Z])?K[Z]:[K[Z]];for(let se=0;se<ie.length;se++)this.uniforms.push(ie[se].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,K,Z=1){super(_,K),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=Z}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const K=super.clone(_);return K.meshPerAttribute=this.meshPerAttribute,K}toJSON(_){const K=super.toJSON(_);return K.isInstancedInterleavedBuffer=!0,K.meshPerAttribute=this.meshPerAttribute,K}}class GLBufferAttribute{constructor(_,K,Z,te,ie,se=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=_,this.type=K,this.itemSize=Z,this.elementSize=te,this.count=ie,this.normalized=se,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,K){return this.type=_,this.elementSize=K,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}const _matrix=new Matrix4;class Raycaster{constructor(_,K,Z=0,te=1/0){this.ray=new Ray(_,K),this.near=Z,this.far=te,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,K){this.ray.set(_,K)}setFromCamera(_,K){K.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(K.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(K).sub(this.ray.origin).normalize(),this.camera=K):K.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(K.near+K.far)/(K.near-K.far)).unproject(K),this.ray.direction.set(0,0,-1).transformDirection(K.matrixWorld),this.camera=K):console.error("THREE.Raycaster: Unsupported camera type: "+K.type)}setFromXRController(_){return _matrix.identity().extractRotation(_.matrixWorld),this.ray.origin.setFromMatrixPosition(_.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(_,K=!0,Z=[]){return intersect(_,this,Z,K),Z.sort(ascSort),Z}intersectObjects(_,K=!0,Z=[]){for(let te=0,ie=_.length;te<ie;te++)intersect(_[te],this,Z,K);return Z.sort(ascSort),Z}}function ascSort(ne,_){return ne.distance-_.distance}function intersect(ne,_,K,Z){let te=!0;if(ne.layers.test(_.layers)&&ne.raycast(_,K)===!1&&(te=!1),te===!0&&Z===!0){const ie=ne.children;for(let se=0,oe=ie.length;se<oe;se++)intersect(ie[se],_,K,!0)}}class Timer{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(_){this._document=_,_.hidden!==void 0&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),_.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(_){return this._timescale=_,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(_){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(_!==void 0?_:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function handleVisibilityChange(){this._document.hidden===!1&&this.reset()}class Spherical{constructor(_=1,K=0,Z=0){this.radius=_,this.phi=K,this.theta=Z}set(_,K,Z){return this.radius=_,this.phi=K,this.theta=Z,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=clamp$3(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,K,Z){return this.radius=Math.sqrt(_*_+K*K+Z*Z),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,Z),this.phi=Math.acos(clamp$3(K/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,K=0,Z=0){this.radius=_,this.theta=K,this.y=Z}set(_,K,Z){return this.radius=_,this.theta=K,this.y=Z,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,K,Z){return this.radius=Math.sqrt(_*_+Z*Z),this.theta=Math.atan2(_,Z),this.y=K,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(_,K,Z,te){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],_!==void 0&&this.set(_,K,Z,te)}identity(){return this.set(1,0,0,1),this}fromArray(_,K=0){for(let Z=0;Z<4;Z++)this.elements[Z]=_[Z+K];return this}set(_,K,Z,te){const ie=this.elements;return ie[0]=_,ie[2]=K,ie[1]=Z,ie[3]=te,this}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),K=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=K}set(_,K){return this.min.copy(_),this.max.copy(K),this}setFromPoints(_){this.makeEmpty();for(let K=0,Z=_.length;K<Z;K++)this.expandByPoint(_[K]);return this}setFromCenterAndSize(_,K){const Z=_vector$4.copy(K).multiplyScalar(.5);return this.min.copy(_).sub(Z),this.max.copy(_).add(Z),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return _.x>=this.min.x&&_.x<=this.max.x&&_.y>=this.min.y&&_.y<=this.max.y}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,K){return K.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return _.max.x>=this.min.x&&_.min.x<=this.max.x&&_.max.y>=this.min.y&&_.min.y<=this.max.y}clampPoint(_,K){return K.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$4).distanceTo(_)}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3,_d1=new Vector3,_d2=new Vector3,_r=new Vector3,_c1=new Vector3,_c2=new Vector3;class Line3{constructor(_=new Vector3,K=new Vector3){this.start=_,this.end=K}set(_,K){return this.start.copy(_),this.end.copy(K),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,K){return this.delta(K).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,K){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const Z=_startEnd.dot(_startEnd);let ie=_startEnd.dot(_startP)/Z;return K&&(ie=clamp$3(ie,0,1)),ie}closestPointToPoint(_,K,Z){const te=this.closestPointToPointParameter(_,K);return this.delta(Z).multiplyScalar(te).add(this.start)}distanceSqToLine3(_,K=_c1,Z=_c2){const te=10000000000000001e-32;let ie,se;const oe=this.start,ae=_.start,le=this.end,ue=_.end;_d1.subVectors(le,oe),_d2.subVectors(ue,ae),_r.subVectors(oe,ae);const fe=_d1.dot(_d1),he=_d2.dot(_d2),ge=_d2.dot(_r);if(fe<=te&&he<=te)return K.copy(oe),Z.copy(ae),K.sub(Z),K.dot(K);if(fe<=te)ie=0,se=ge/he,se=clamp$3(se,0,1);else{const _e=_d1.dot(_r);if(he<=te)se=0,ie=clamp$3(-_e/fe,0,1);else{const Se=_d1.dot(_d2),Ee=fe*he-Se*Se;Ee!==0?ie=clamp$3((Se*ge-_e*he)/Ee,0,1):ie=0,se=(Se*ie+ge)/he,se<0?(se=0,ie=clamp$3(-_e/fe,0,1)):se>1&&(se=1,ie=clamp$3((Se-_e)/fe,0,1))}}return K.copy(oe).add(_d1.multiplyScalar(ie)),Z.copy(ae).add(_d2.multiplyScalar(se)),K.sub(Z),K.dot(K)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,K){super(),this.light=_,this.matrixAutoUpdate=!1,this.color=K,this.type="SpotLightHelper";const Z=new BufferGeometry,te=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let se=0,oe=1,ae=32;se<ae;se++,oe++){const le=se/ae*Math.PI*2,ue=oe/ae*Math.PI*2;te.push(Math.cos(le),Math.sin(le),1,Math.cos(ue),Math.sin(ue),1)}Z.setAttribute("position",new Float32BufferAttribute(te,3));const ie=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(Z,ie),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const _=this.light.distance?this.light.distance:1e3,K=_*Math.tan(this.light.angle);this.cone.scale.set(K,K,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const K=getBoneList(_),Z=new BufferGeometry,te=[],ie=[];for(let le=0;le<K.length;le++){const ue=K[le];ue.parent&&ue.parent.isBone&&(te.push(0,0,0),te.push(0,0,0),ie.push(0,0,0),ie.push(0,0,0))}Z.setAttribute("position",new Float32BufferAttribute(te,3)),Z.setAttribute("color",new Float32BufferAttribute(ie,3));const se=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(Z,se),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=K,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1;const oe=new Color$1(255),ae=new Color$1(65280);this.setColors(oe,ae)}updateMatrixWorld(_){const K=this.bones,Z=this.geometry,te=Z.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let ie=0,se=0;ie<K.length;ie++){const oe=K[ie];oe.parent&&oe.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,oe.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),te.setXYZ(se,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,oe.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),te.setXYZ(se+1,_vector$2.x,_vector$2.y,_vector$2.z),se+=2)}Z.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}setColors(_,K){const te=this.geometry.getAttribute("color");for(let ie=0;ie<te.count;ie+=2)te.setXYZ(ie,_.r,_.g,_.b),te.setXYZ(ie+1,K.r,K.g,K.b);return te.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(ne){const _=[];ne.isBone===!0&&_.push(ne);for(let K=0;K<ne.children.length;K++)_.push(...getBoneList(ne.children[K]));return _}class PointLightHelper extends Mesh{constructor(_,K,Z){const te=new SphereGeometry(K,4,2),ie=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(te,ie),this.light=_,this.color=Z,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color$1,_color2=new Color$1;class HemisphereLightHelper extends Object3D{constructor(_,K,Z){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=Z,this.type="HemisphereLightHelper";const te=new OctahedronGeometry(K);te.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ie=te.getAttribute("position"),se=new Float32Array(ie.count*3);te.setAttribute("color",new BufferAttribute(se,3)),this.add(new Mesh(te,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const K=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let Z=0,te=K.count;Z<te;Z++){const ie=Z<te/2?_color1:_color2;K.setXYZ(Z,ie.r,ie.g,ie.b)}K.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,K=10,Z=4473924,te=8947848){Z=new Color$1(Z),te=new Color$1(te);const ie=K/2,se=_/K,oe=_/2,ae=[],le=[];for(let he=0,ge=0,_e=-oe;he<=K;he++,_e+=se){ae.push(-oe,0,_e,oe,0,_e),ae.push(_e,0,-oe,_e,0,oe);const Se=he===ie?Z:te;Se.toArray(le,ge),ge+=3,Se.toArray(le,ge),ge+=3,Se.toArray(le,ge),ge+=3,Se.toArray(le,ge),ge+=3}const ue=new BufferGeometry;ue.setAttribute("position",new Float32BufferAttribute(ae,3)),ue.setAttribute("color",new Float32BufferAttribute(le,3));const fe=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ue,fe),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,K=16,Z=8,te=64,ie=4473924,se=8947848){ie=new Color$1(ie),se=new Color$1(se);const oe=[],ae=[];if(K>1)for(let fe=0;fe<K;fe++){const he=fe/K*(Math.PI*2),ge=Math.sin(he)*_,_e=Math.cos(he)*_;oe.push(0,0,0),oe.push(ge,0,_e);const Se=fe&1?ie:se;ae.push(Se.r,Se.g,Se.b),ae.push(Se.r,Se.g,Se.b)}for(let fe=0;fe<Z;fe++){const he=fe&1?ie:se,ge=_-_/Z*fe;for(let _e=0;_e<te;_e++){let Se=_e/te*(Math.PI*2),Ee=Math.sin(Se)*ge,ye=Math.cos(Se)*ge;oe.push(Ee,0,ye),ae.push(he.r,he.g,he.b),Se=(_e+1)/te*(Math.PI*2),Ee=Math.sin(Se)*ge,ye=Math.cos(Se)*ge,oe.push(Ee,0,ye),ae.push(he.r,he.g,he.b)}}const le=new BufferGeometry;le.setAttribute("position",new Float32BufferAttribute(oe,3)),le.setAttribute("color",new Float32BufferAttribute(ae,3));const ue=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(le,ue),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,K,Z){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=Z,this.type="DirectionalLightHelper",K===void 0&&(K=1);let te=new BufferGeometry;te.setAttribute("position",new Float32BufferAttribute([-K,K,0,K,K,0,K,-K,0,-K,-K,0,-K,K,0],3));const ie=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(te,ie),this.add(this.lightPlane),te=new BufferGeometry,te.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(te,ie),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera$1;class CameraHelper extends LineSegments{constructor(_){const K=new BufferGeometry,Z=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),te=[],ie=[],se={};oe("n1","n2"),oe("n2","n4"),oe("n4","n3"),oe("n3","n1"),oe("f1","f2"),oe("f2","f4"),oe("f4","f3"),oe("f3","f1"),oe("n1","f1"),oe("n2","f2"),oe("n3","f3"),oe("n4","f4"),oe("p","n1"),oe("p","n2"),oe("p","n3"),oe("p","n4"),oe("u1","u2"),oe("u2","u3"),oe("u3","u1"),oe("c","t"),oe("p","c"),oe("cn1","cn2"),oe("cn3","cn4"),oe("cf1","cf2"),oe("cf3","cf4");function oe(_e,Se){ae(_e),ae(Se)}function ae(_e){te.push(0,0,0),ie.push(0,0,0),se[_e]===void 0&&(se[_e]=[]),se[_e].push(te.length/3-1)}K.setAttribute("position",new Float32BufferAttribute(te,3)),K.setAttribute("color",new Float32BufferAttribute(ie,3)),super(K,Z),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=se,this.update();const le=new Color$1(16755200),ue=new Color$1(16711680),fe=new Color$1(43775),he=new Color$1(16777215),ge=new Color$1(3355443);this.setColors(le,ue,fe,he,ge)}setColors(_,K,Z,te,ie){const oe=this.geometry.getAttribute("color");return oe.setXYZ(0,_.r,_.g,_.b),oe.setXYZ(1,_.r,_.g,_.b),oe.setXYZ(2,_.r,_.g,_.b),oe.setXYZ(3,_.r,_.g,_.b),oe.setXYZ(4,_.r,_.g,_.b),oe.setXYZ(5,_.r,_.g,_.b),oe.setXYZ(6,_.r,_.g,_.b),oe.setXYZ(7,_.r,_.g,_.b),oe.setXYZ(8,_.r,_.g,_.b),oe.setXYZ(9,_.r,_.g,_.b),oe.setXYZ(10,_.r,_.g,_.b),oe.setXYZ(11,_.r,_.g,_.b),oe.setXYZ(12,_.r,_.g,_.b),oe.setXYZ(13,_.r,_.g,_.b),oe.setXYZ(14,_.r,_.g,_.b),oe.setXYZ(15,_.r,_.g,_.b),oe.setXYZ(16,_.r,_.g,_.b),oe.setXYZ(17,_.r,_.g,_.b),oe.setXYZ(18,_.r,_.g,_.b),oe.setXYZ(19,_.r,_.g,_.b),oe.setXYZ(20,_.r,_.g,_.b),oe.setXYZ(21,_.r,_.g,_.b),oe.setXYZ(22,_.r,_.g,_.b),oe.setXYZ(23,_.r,_.g,_.b),oe.setXYZ(24,K.r,K.g,K.b),oe.setXYZ(25,K.r,K.g,K.b),oe.setXYZ(26,K.r,K.g,K.b),oe.setXYZ(27,K.r,K.g,K.b),oe.setXYZ(28,K.r,K.g,K.b),oe.setXYZ(29,K.r,K.g,K.b),oe.setXYZ(30,K.r,K.g,K.b),oe.setXYZ(31,K.r,K.g,K.b),oe.setXYZ(32,Z.r,Z.g,Z.b),oe.setXYZ(33,Z.r,Z.g,Z.b),oe.setXYZ(34,Z.r,Z.g,Z.b),oe.setXYZ(35,Z.r,Z.g,Z.b),oe.setXYZ(36,Z.r,Z.g,Z.b),oe.setXYZ(37,Z.r,Z.g,Z.b),oe.setXYZ(38,te.r,te.g,te.b),oe.setXYZ(39,te.r,te.g,te.b),oe.setXYZ(40,ie.r,ie.g,ie.b),oe.setXYZ(41,ie.r,ie.g,ie.b),oe.setXYZ(42,ie.r,ie.g,ie.b),oe.setXYZ(43,ie.r,ie.g,ie.b),oe.setXYZ(44,ie.r,ie.g,ie.b),oe.setXYZ(45,ie.r,ie.g,ie.b),oe.setXYZ(46,ie.r,ie.g,ie.b),oe.setXYZ(47,ie.r,ie.g,ie.b),oe.setXYZ(48,ie.r,ie.g,ie.b),oe.setXYZ(49,ie.r,ie.g,ie.b),oe.needsUpdate=!0,this}update(){const _=this.geometry,K=this.pointMap,Z=1,te=1;let ie,se;if(_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)ie=1,se=0;else if(this.camera.coordinateSystem===WebGLCoordinateSystem)ie=-1,se=1;else if(this.camera.coordinateSystem===WebGPUCoordinateSystem)ie=0,se=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);setPoint("c",K,_,_camera,0,0,ie),setPoint("t",K,_,_camera,0,0,se),setPoint("n1",K,_,_camera,-Z,-te,ie),setPoint("n2",K,_,_camera,Z,-te,ie),setPoint("n3",K,_,_camera,-Z,te,ie),setPoint("n4",K,_,_camera,Z,te,ie),setPoint("f1",K,_,_camera,-Z,-te,se),setPoint("f2",K,_,_camera,Z,-te,se),setPoint("f3",K,_,_camera,-Z,te,se),setPoint("f4",K,_,_camera,Z,te,se),setPoint("u1",K,_,_camera,Z*.7,te*1.1,ie),setPoint("u2",K,_,_camera,-Z*.7,te*1.1,ie),setPoint("u3",K,_,_camera,0,te*2,ie),setPoint("cf1",K,_,_camera,-Z,0,se),setPoint("cf2",K,_,_camera,Z,0,se),setPoint("cf3",K,_,_camera,0,-te,se),setPoint("cf4",K,_,_camera,0,te,se),setPoint("cn1",K,_,_camera,-Z,0,ie),setPoint("cn2",K,_,_camera,Z,0,ie),setPoint("cn3",K,_,_camera,0,-te,ie),setPoint("cn4",K,_,_camera,0,te,ie),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(ne,_,K,Z,te,ie,se){_vector.set(te,ie,se).unproject(Z);const oe=_[ne];if(oe!==void 0){const ae=K.getAttribute("position");for(let le=0,ue=oe.length;le<ue;le++)ae.setXYZ(oe[le],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,K=16776960){const Z=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),te=new Float32Array(24),ie=new BufferGeometry;ie.setIndex(new BufferAttribute(Z,1)),ie.setAttribute("position",new BufferAttribute(te,3)),super(ie,new LineBasicMaterial({color:K,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const _=_box.min,K=_box.max,Z=this.geometry.attributes.position,te=Z.array;te[0]=K.x,te[1]=K.y,te[2]=K.z,te[3]=_.x,te[4]=K.y,te[5]=K.z,te[6]=_.x,te[7]=_.y,te[8]=K.z,te[9]=K.x,te[10]=_.y,te[11]=K.z,te[12]=K.x,te[13]=K.y,te[14]=_.z,te[15]=_.x,te[16]=K.y,te[17]=_.z,te[18]=_.x,te[19]=_.y,te[20]=_.z,te[21]=K.x,te[22]=_.y,te[23]=_.z,Z.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,K){return super.copy(_,K),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,K=16776960){const Z=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),te=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ie=new BufferGeometry;ie.setIndex(new BufferAttribute(Z,1)),ie.setAttribute("position",new Float32BufferAttribute(te,3)),super(ie,new LineBasicMaterial({color:K,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const K=this.box;K.isEmpty()||(K.getCenter(this.position),K.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,K=1,Z=16776960){const te=Z,ie=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],se=new BufferGeometry;se.setAttribute("position",new Float32BufferAttribute(ie,3)),se.computeBoundingSphere(),super(se,new LineBasicMaterial({color:te,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=K;const oe=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],ae=new BufferGeometry;ae.setAttribute("position",new Float32BufferAttribute(oe,3)),ae.computeBoundingSphere(),this.add(new Mesh(ae,new MeshBasicMaterial({color:te,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),K=new Vector3(0,0,0),Z=1,te=16776960,ie=Z*.2,se=ie*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new ConeGeometry(.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(K),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:te,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:te,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(Z,ie,se)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const K=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,K)}}setLength(_,K=_*.2,Z=K*.2){this.line.scale.set(1,Math.max(1e-4,_-K),1),this.line.updateMatrix(),this.cone.scale.set(Z,K,Z),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const K=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],Z=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],te=new BufferGeometry;te.setAttribute("position",new Float32BufferAttribute(K,3)),te.setAttribute("color",new Float32BufferAttribute(Z,3));const ie=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(te,ie),this.type="AxesHelper"}setColors(_,K,Z){const te=new Color$1,ie=this.geometry.attributes.color.array;return te.set(_),te.toArray(ie,0),te.toArray(ie,3),te.set(K),te.toArray(ie,6),te.toArray(ie,9),te.set(Z),te.toArray(ie,12),te.toArray(ie,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color$1,this.subPaths=[],this.currentPath=null}moveTo(_,K){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,K),this}lineTo(_,K){return this.currentPath.lineTo(_,K),this}quadraticCurveTo(_,K,Z,te){return this.currentPath.quadraticCurveTo(_,K,Z,te),this}bezierCurveTo(_,K,Z,te,ie,se){return this.currentPath.bezierCurveTo(_,K,Z,te,ie,se),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function K(ye){const be=[];for(let we=0,Pe=ye.length;we<Pe;we++){const Oe=ye[we],Be=new Shape;Be.curves=Oe.curves,be.push(Be)}return be}function Z(ye,be){const we=be.length;let Pe=!1;for(let Oe=we-1,Be=0;Be<we;Oe=Be++){let Ue=be[Oe],$e=be[Be],De=$e.x-Ue.x,ke=$e.y-Ue.y;if(Math.abs(ke)>Number.EPSILON){if(ke<0&&(Ue=be[Be],De=-De,$e=be[Oe],ke=-ke),ye.y<Ue.y||ye.y>$e.y)continue;if(ye.y===Ue.y){if(ye.x===Ue.x)return!0}else{const Ge=ke*(ye.x-Ue.x)-De*(ye.y-Ue.y);if(Ge===0)return!0;if(Ge<0)continue;Pe=!Pe}}else{if(ye.y!==Ue.y)continue;if($e.x<=ye.x&&ye.x<=Ue.x||Ue.x<=ye.x&&ye.x<=$e.x)return!0}}return Pe}const te=ShapeUtils.isClockWise,ie=this.subPaths;if(ie.length===0)return[];let se,oe,ae;const le=[];if(ie.length===1)return oe=ie[0],ae=new Shape,ae.curves=oe.curves,le.push(ae),le;let ue=!te(ie[0].getPoints());ue=_?!ue:ue;const fe=[],he=[];let ge=[],_e=0,Se;he[_e]=void 0,ge[_e]=[];for(let ye=0,be=ie.length;ye<be;ye++)oe=ie[ye],Se=oe.getPoints(),se=te(Se),se=_?!se:se,se?(!ue&&he[_e]&&_e++,he[_e]={s:new Shape,p:Se},he[_e].s.curves=oe.curves,ue&&_e++,ge[_e]=[]):ge[_e].push({h:oe,p:Se[0]});if(!he[0])return K(ie);if(he.length>1){let ye=!1,be=0;for(let we=0,Pe=he.length;we<Pe;we++)fe[we]=[];for(let we=0,Pe=he.length;we<Pe;we++){const Oe=ge[we];for(let Be=0;Be<Oe.length;Be++){const Ue=Oe[Be];let $e=!0;for(let De=0;De<he.length;De++)Z(Ue.p,he[De].p)&&(we!==De&&be++,$e?($e=!1,fe[De].push(Ue)):ye=!0);$e&&fe[we].push(Ue)}}be>0&&ye===!1&&(ge=fe)}let Ee;for(let ye=0,be=he.length;ye<be;ye++){ae=he[ye].s,le.push(ae),Ee=ge[ye];for(let we=0,Pe=Ee.length;we<Pe;we++)ae.holes.push(Ee[we].h)}return le}}class Controls extends EventDispatcher$1{constructor(_,K=null){super(),this.object=_,this.domElement=K,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(_){if(_===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=_}disconnect(){}dispose(){}update(){}}function contain(ne,_){const K=ne.image&&ne.image.width?ne.image.width/ne.image.height:1;return K>_?(ne.repeat.x=1,ne.repeat.y=K/_,ne.offset.x=0,ne.offset.y=(1-ne.repeat.y)/2):(ne.repeat.x=_/K,ne.repeat.y=1,ne.offset.x=(1-ne.repeat.x)/2,ne.offset.y=0),ne}function cover(ne,_){const K=ne.image&&ne.image.width?ne.image.width/ne.image.height:1;return K>_?(ne.repeat.x=_/K,ne.repeat.y=1,ne.offset.x=(1-ne.repeat.x)/2,ne.offset.y=0):(ne.repeat.x=1,ne.repeat.y=K/_,ne.offset.x=0,ne.offset.y=(1-ne.repeat.y)/2),ne}function fill(ne){return ne.repeat.x=1,ne.repeat.y=1,ne.offset.x=0,ne.offset.y=0,ne}function getByteLength(ne,_,K,Z){const te=getTextureTypeByteLength(Z);switch(K){case AlphaFormat:return ne*_;case RedFormat:return ne*_/te.components*te.byteLength;case RedIntegerFormat:return ne*_/te.components*te.byteLength;case RGFormat:return ne*_*2/te.components*te.byteLength;case RGIntegerFormat:return ne*_*2/te.components*te.byteLength;case RGBFormat:return ne*_*3/te.components*te.byteLength;case RGBAFormat:return ne*_*4/te.components*te.byteLength;case RGBAIntegerFormat:return ne*_*4/te.components*te.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((ne+3)/4)*Math.floor((_+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((ne+3)/4)*Math.floor((_+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(ne,16)*Math.max(_,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(ne,8)*Math.max(_,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((ne+3)/4)*Math.floor((_+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((ne+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((ne+3)/4)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((ne+4)/5)*Math.floor((_+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((ne+4)/5)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((ne+5)/6)*Math.floor((_+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((ne+5)/6)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((ne+7)/8)*Math.floor((_+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((ne+7)/8)*Math.floor((_+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((ne+7)/8)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((ne+9)/10)*Math.floor((_+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((ne+9)/10)*Math.floor((_+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((ne+9)/10)*Math.floor((_+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((ne+9)/10)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((ne+11)/12)*Math.floor((_+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((ne+11)/12)*Math.floor((_+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(ne/4)*Math.ceil(_/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(ne/4)*Math.ceil(_/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(ne/4)*Math.ceil(_/4)*16}throw new Error(`Unable to determine texture byte length for ${K} format.`)}function getTextureTypeByteLength(ne){switch(ne){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${ne}.`)}class TextureUtils{static contain(_,K){return contain(_,K)}static cover(_,K){return cover(_,K)}static fill(_){return fill(_)}static getByteLength(_,K,Z,te){return getByteLength(_,K,Z,te)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let ne=null,_=!1,K=null,Z=null;function te(ie,se){K(ie,se),Z=ne.requestAnimationFrame(te)}return{start:function(){_!==!0&&K!==null&&(Z=ne.requestAnimationFrame(te),_=!0)},stop:function(){ne.cancelAnimationFrame(Z),_=!1},setAnimationLoop:function(ie){K=ie},setContext:function(ie){ne=ie}}}function WebGLAttributes(ne){const _=new WeakMap;function K(oe,ae){const le=oe.array,ue=oe.usage,fe=le.byteLength,he=ne.createBuffer();ne.bindBuffer(ae,he),ne.bufferData(ae,le,ue),oe.onUploadCallback();let ge;if(le instanceof Float32Array)ge=ne.FLOAT;else if(typeof Float16Array<"u"&&le instanceof Float16Array)ge=ne.HALF_FLOAT;else if(le instanceof Uint16Array)oe.isFloat16BufferAttribute?ge=ne.HALF_FLOAT:ge=ne.UNSIGNED_SHORT;else if(le instanceof Int16Array)ge=ne.SHORT;else if(le instanceof Uint32Array)ge=ne.UNSIGNED_INT;else if(le instanceof Int32Array)ge=ne.INT;else if(le instanceof Int8Array)ge=ne.BYTE;else if(le instanceof Uint8Array)ge=ne.UNSIGNED_BYTE;else if(le instanceof Uint8ClampedArray)ge=ne.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+le);return{buffer:he,type:ge,bytesPerElement:le.BYTES_PER_ELEMENT,version:oe.version,size:fe}}function Z(oe,ae,le){const ue=ae.array,fe=ae.updateRanges;if(ne.bindBuffer(le,oe),fe.length===0)ne.bufferSubData(le,0,ue);else{fe.sort((ge,_e)=>ge.start-_e.start);let he=0;for(let ge=1;ge<fe.length;ge++){const _e=fe[he],Se=fe[ge];Se.start<=_e.start+_e.count+1?_e.count=Math.max(_e.count,Se.start+Se.count-_e.start):(++he,fe[he]=Se)}fe.length=he+1;for(let ge=0,_e=fe.length;ge<_e;ge++){const Se=fe[ge];ne.bufferSubData(le,Se.start*ue.BYTES_PER_ELEMENT,ue,Se.start,Se.count)}ae.clearUpdateRanges()}ae.onUploadCallback()}function te(oe){return oe.isInterleavedBufferAttribute&&(oe=oe.data),_.get(oe)}function ie(oe){oe.isInterleavedBufferAttribute&&(oe=oe.data);const ae=_.get(oe);ae&&(ne.deleteBuffer(ae.buffer),_.delete(oe))}function se(oe,ae){if(oe.isInterleavedBufferAttribute&&(oe=oe.data),oe.isGLBufferAttribute){const ue=_.get(oe);(!ue||ue.version<oe.version)&&_.set(oe,{buffer:oe.buffer,type:oe.type,bytesPerElement:oe.elementSize,version:oe.version});return}const le=_.get(oe);if(le===void 0)_.set(oe,K(oe,ae));else if(le.version<oe.version){if(le.size!==oe.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");Z(le.buffer,oe,ae),le.version=oe.version}}return{get:te,remove:ie,update:se}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(ne,_,K,Z,te,ie,se){const oe=new Color$1(0);let ae=ie===!0?0:1,le,ue,fe=null,he=0,ge=null;function _e(we){let Pe=we.isScene===!0?we.background:null;return Pe&&Pe.isTexture&&(Pe=(we.backgroundBlurriness>0?K:_).get(Pe)),Pe}function Se(we){let Pe=!1;const Oe=_e(we);Oe===null?ye(oe,ae):Oe&&Oe.isColor&&(ye(Oe,1),Pe=!0);const Be=ne.xr.getEnvironmentBlendMode();Be==="additive"?Z.buffers.color.setClear(0,0,0,1,se):Be==="alpha-blend"&&Z.buffers.color.setClear(0,0,0,0,se),(ne.autoClear||Pe)&&(Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),ne.clear(ne.autoClearColor,ne.autoClearDepth,ne.autoClearStencil))}function Ee(we,Pe){const Oe=_e(Pe);Oe&&(Oe.isCubeTexture||Oe.mapping===CubeUVReflectionMapping)?(ue===void 0&&(ue=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),ue.geometry.deleteAttribute("normal"),ue.geometry.deleteAttribute("uv"),ue.onBeforeRender=function(Be,Ue,$e){this.matrixWorld.copyPosition($e.matrixWorld)},Object.defineProperty(ue.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),te.update(ue)),_e1$1.copy(Pe.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),ue.material.uniforms.envMap.value=Oe,ue.material.uniforms.flipEnvMap.value=Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1?-1:1,ue.material.uniforms.backgroundBlurriness.value=Pe.backgroundBlurriness,ue.material.uniforms.backgroundIntensity.value=Pe.backgroundIntensity,ue.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),ue.material.toneMapped=ColorManagement.getTransfer(Oe.colorSpace)!==SRGBTransfer,(fe!==Oe||he!==Oe.version||ge!==ne.toneMapping)&&(ue.material.needsUpdate=!0,fe=Oe,he=Oe.version,ge=ne.toneMapping),ue.layers.enableAll(),we.unshift(ue,ue.geometry,ue.material,0,0,null)):Oe&&Oe.isTexture&&(le===void 0&&(le=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),le.geometry.deleteAttribute("normal"),Object.defineProperty(le.material,"map",{get:function(){return this.uniforms.t2D.value}}),te.update(le)),le.material.uniforms.t2D.value=Oe,le.material.uniforms.backgroundIntensity.value=Pe.backgroundIntensity,le.material.toneMapped=ColorManagement.getTransfer(Oe.colorSpace)!==SRGBTransfer,Oe.matrixAutoUpdate===!0&&Oe.updateMatrix(),le.material.uniforms.uvTransform.value.copy(Oe.matrix),(fe!==Oe||he!==Oe.version||ge!==ne.toneMapping)&&(le.material.needsUpdate=!0,fe=Oe,he=Oe.version,ge=ne.toneMapping),le.layers.enableAll(),we.unshift(le,le.geometry,le.material,0,0,null))}function ye(we,Pe){we.getRGB(_rgb,getUnlitUniformColorSpace(ne)),Z.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,Pe,se)}function be(){ue!==void 0&&(ue.geometry.dispose(),ue.material.dispose(),ue=void 0),le!==void 0&&(le.geometry.dispose(),le.material.dispose(),le=void 0)}return{getClearColor:function(){return oe},setClearColor:function(we,Pe=1){oe.set(we),ae=Pe,ye(oe,ae)},getClearAlpha:function(){return ae},setClearAlpha:function(we){ae=we,ye(oe,ae)},render:Se,addToRenderList:Ee,dispose:be}}function WebGLBindingStates(ne,_){const K=ne.getParameter(ne.MAX_VERTEX_ATTRIBS),Z={},te=he(null);let ie=te,se=!1;function oe(ke,Ge,Je,Ye,Qe){let rt=!1;const ot=fe(Ye,Je,Ge);ie!==ot&&(ie=ot,le(ie.object)),rt=ge(ke,Ye,Je,Qe),rt&&_e(ke,Ye,Je,Qe),Qe!==null&&_.update(Qe,ne.ELEMENT_ARRAY_BUFFER),(rt||se)&&(se=!1,Pe(ke,Ge,Je,Ye),Qe!==null&&ne.bindBuffer(ne.ELEMENT_ARRAY_BUFFER,_.get(Qe).buffer))}function ae(){return ne.createVertexArray()}function le(ke){return ne.bindVertexArray(ke)}function ue(ke){return ne.deleteVertexArray(ke)}function fe(ke,Ge,Je){const Ye=Je.wireframe===!0;let Qe=Z[ke.id];Qe===void 0&&(Qe={},Z[ke.id]=Qe);let rt=Qe[Ge.id];rt===void 0&&(rt={},Qe[Ge.id]=rt);let ot=rt[Ye];return ot===void 0&&(ot=he(ae()),rt[Ye]=ot),ot}function he(ke){const Ge=[],Je=[],Ye=[];for(let Qe=0;Qe<K;Qe++)Ge[Qe]=0,Je[Qe]=0,Ye[Qe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ge,enabledAttributes:Je,attributeDivisors:Ye,object:ke,attributes:{},index:null}}function ge(ke,Ge,Je,Ye){const Qe=ie.attributes,rt=Ge.attributes;let ot=0;const ct=Je.getAttributes();for(const je in ct)if(ct[je].location>=0){const nt=Qe[je];let qe=rt[je];if(qe===void 0&&(je==="instanceMatrix"&&ke.instanceMatrix&&(qe=ke.instanceMatrix),je==="instanceColor"&&ke.instanceColor&&(qe=ke.instanceColor)),nt===void 0||nt.attribute!==qe||qe&&nt.data!==qe.data)return!0;ot++}return ie.attributesNum!==ot||ie.index!==Ye}function _e(ke,Ge,Je,Ye){const Qe={},rt=Ge.attributes;let ot=0;const ct=Je.getAttributes();for(const je in ct)if(ct[je].location>=0){let nt=rt[je];nt===void 0&&(je==="instanceMatrix"&&ke.instanceMatrix&&(nt=ke.instanceMatrix),je==="instanceColor"&&ke.instanceColor&&(nt=ke.instanceColor));const qe={};qe.attribute=nt,nt&&nt.data&&(qe.data=nt.data),Qe[je]=qe,ot++}ie.attributes=Qe,ie.attributesNum=ot,ie.index=Ye}function Se(){const ke=ie.newAttributes;for(let Ge=0,Je=ke.length;Ge<Je;Ge++)ke[Ge]=0}function Ee(ke){ye(ke,0)}function ye(ke,Ge){const Je=ie.newAttributes,Ye=ie.enabledAttributes,Qe=ie.attributeDivisors;Je[ke]=1,Ye[ke]===0&&(ne.enableVertexAttribArray(ke),Ye[ke]=1),Qe[ke]!==Ge&&(ne.vertexAttribDivisor(ke,Ge),Qe[ke]=Ge)}function be(){const ke=ie.newAttributes,Ge=ie.enabledAttributes;for(let Je=0,Ye=Ge.length;Je<Ye;Je++)Ge[Je]!==ke[Je]&&(ne.disableVertexAttribArray(Je),Ge[Je]=0)}function we(ke,Ge,Je,Ye,Qe,rt,ot){ot===!0?ne.vertexAttribIPointer(ke,Ge,Je,Qe,rt):ne.vertexAttribPointer(ke,Ge,Je,Ye,Qe,rt)}function Pe(ke,Ge,Je,Ye){Se();const Qe=Ye.attributes,rt=Je.getAttributes(),ot=Ge.defaultAttributeValues;for(const ct in rt){const je=rt[ct];if(je.location>=0){let st=Qe[ct];if(st===void 0&&(ct==="instanceMatrix"&&ke.instanceMatrix&&(st=ke.instanceMatrix),ct==="instanceColor"&&ke.instanceColor&&(st=ke.instanceColor)),st!==void 0){const nt=st.normalized,qe=st.itemSize,lt=_.get(st);if(lt===void 0)continue;const Pt=lt.buffer,Gt=lt.type,pt=lt.bytesPerElement,yt=Gt===ne.INT||Gt===ne.UNSIGNED_INT||st.gpuType===IntType;if(st.isInterleavedBufferAttribute){const Bt=st.data,Wt=Bt.stride,jt=st.offset;if(Bt.isInstancedInterleavedBuffer){for(let nn=0;nn<je.locationSize;nn++)ye(je.location+nn,Bt.meshPerAttribute);ke.isInstancedMesh!==!0&&Ye._maxInstanceCount===void 0&&(Ye._maxInstanceCount=Bt.meshPerAttribute*Bt.count)}else for(let nn=0;nn<je.locationSize;nn++)Ee(je.location+nn);ne.bindBuffer(ne.ARRAY_BUFFER,Pt);for(let nn=0;nn<je.locationSize;nn++)we(je.location+nn,qe/je.locationSize,Gt,nt,Wt*pt,(jt+qe/je.locationSize*nn)*pt,yt)}else{if(st.isInstancedBufferAttribute){for(let Bt=0;Bt<je.locationSize;Bt++)ye(je.location+Bt,st.meshPerAttribute);ke.isInstancedMesh!==!0&&Ye._maxInstanceCount===void 0&&(Ye._maxInstanceCount=st.meshPerAttribute*st.count)}else for(let Bt=0;Bt<je.locationSize;Bt++)Ee(je.location+Bt);ne.bindBuffer(ne.ARRAY_BUFFER,Pt);for(let Bt=0;Bt<je.locationSize;Bt++)we(je.location+Bt,qe/je.locationSize,Gt,nt,qe*pt,qe/je.locationSize*Bt*pt,yt)}}else if(ot!==void 0){const nt=ot[ct];if(nt!==void 0)switch(nt.length){case 2:ne.vertexAttrib2fv(je.location,nt);break;case 3:ne.vertexAttrib3fv(je.location,nt);break;case 4:ne.vertexAttrib4fv(je.location,nt);break;default:ne.vertexAttrib1fv(je.location,nt)}}}}be()}function Oe(){$e();for(const ke in Z){const Ge=Z[ke];for(const Je in Ge){const Ye=Ge[Je];for(const Qe in Ye)ue(Ye[Qe].object),delete Ye[Qe];delete Ge[Je]}delete Z[ke]}}function Be(ke){if(Z[ke.id]===void 0)return;const Ge=Z[ke.id];for(const Je in Ge){const Ye=Ge[Je];for(const Qe in Ye)ue(Ye[Qe].object),delete Ye[Qe];delete Ge[Je]}delete Z[ke.id]}function Ue(ke){for(const Ge in Z){const Je=Z[Ge];if(Je[ke.id]===void 0)continue;const Ye=Je[ke.id];for(const Qe in Ye)ue(Ye[Qe].object),delete Ye[Qe];delete Je[ke.id]}}function $e(){De(),se=!0,ie!==te&&(ie=te,le(ie.object))}function De(){te.geometry=null,te.program=null,te.wireframe=!1}return{setup:oe,reset:$e,resetDefaultState:De,dispose:Oe,releaseStatesOfGeometry:Be,releaseStatesOfProgram:Ue,initAttributes:Se,enableAttribute:Ee,disableUnusedAttributes:be}}function WebGLBufferRenderer(ne,_,K){let Z;function te(le){Z=le}function ie(le,ue){ne.drawArrays(Z,le,ue),K.update(ue,Z,1)}function se(le,ue,fe){fe!==0&&(ne.drawArraysInstanced(Z,le,ue,fe),K.update(ue,Z,fe))}function oe(le,ue,fe){if(fe===0)return;_.get("WEBGL_multi_draw").multiDrawArraysWEBGL(Z,le,0,ue,0,fe);let ge=0;for(let _e=0;_e<fe;_e++)ge+=ue[_e];K.update(ge,Z,1)}function ae(le,ue,fe,he){if(fe===0)return;const ge=_.get("WEBGL_multi_draw");if(ge===null)for(let _e=0;_e<le.length;_e++)se(le[_e],ue[_e],he[_e]);else{ge.multiDrawArraysInstancedWEBGL(Z,le,0,ue,0,he,0,fe);let _e=0;for(let Se=0;Se<fe;Se++)_e+=ue[Se]*he[Se];K.update(_e,Z,1)}}this.setMode=te,this.render=ie,this.renderInstances=se,this.renderMultiDraw=oe,this.renderMultiDrawInstances=ae}function WebGLCapabilities(ne,_,K,Z){let te;function ie(){if(te!==void 0)return te;if(_.has("EXT_texture_filter_anisotropic")===!0){const Ue=_.get("EXT_texture_filter_anisotropic");te=ne.getParameter(Ue.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else te=0;return te}function se(Ue){return!(Ue!==RGBAFormat&&Z.convert(Ue)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_FORMAT))}function oe(Ue){const $e=Ue===HalfFloatType&&(_.has("EXT_color_buffer_half_float")||_.has("EXT_color_buffer_float"));return!(Ue!==UnsignedByteType&&Z.convert(Ue)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_TYPE)&&Ue!==FloatType&&!$e)}function ae(Ue){if(Ue==="highp"){if(ne.getShaderPrecisionFormat(ne.VERTEX_SHADER,ne.HIGH_FLOAT).precision>0&&ne.getShaderPrecisionFormat(ne.FRAGMENT_SHADER,ne.HIGH_FLOAT).precision>0)return"highp";Ue="mediump"}return Ue==="mediump"&&ne.getShaderPrecisionFormat(ne.VERTEX_SHADER,ne.MEDIUM_FLOAT).precision>0&&ne.getShaderPrecisionFormat(ne.FRAGMENT_SHADER,ne.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let le=K.precision!==void 0?K.precision:"highp";const ue=ae(le);ue!==le&&(console.warn("THREE.WebGLRenderer:",le,"not supported, using",ue,"instead."),le=ue);const fe=K.logarithmicDepthBuffer===!0,he=K.reversedDepthBuffer===!0&&_.has("EXT_clip_control"),ge=ne.getParameter(ne.MAX_TEXTURE_IMAGE_UNITS),_e=ne.getParameter(ne.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Se=ne.getParameter(ne.MAX_TEXTURE_SIZE),Ee=ne.getParameter(ne.MAX_CUBE_MAP_TEXTURE_SIZE),ye=ne.getParameter(ne.MAX_VERTEX_ATTRIBS),be=ne.getParameter(ne.MAX_VERTEX_UNIFORM_VECTORS),we=ne.getParameter(ne.MAX_VARYING_VECTORS),Pe=ne.getParameter(ne.MAX_FRAGMENT_UNIFORM_VECTORS),Oe=_e>0,Be=ne.getParameter(ne.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:ie,getMaxPrecision:ae,textureFormatReadable:se,textureTypeReadable:oe,precision:le,logarithmicDepthBuffer:fe,reversedDepthBuffer:he,maxTextures:ge,maxVertexTextures:_e,maxTextureSize:Se,maxCubemapSize:Ee,maxAttributes:ye,maxVertexUniforms:be,maxVaryings:we,maxFragmentUniforms:Pe,vertexTextures:Oe,maxSamples:Be}}function WebGLClipping(ne){const _=this;let K=null,Z=0,te=!1,ie=!1;const se=new Plane,oe=new Matrix3,ae={value:null,needsUpdate:!1};this.uniform=ae,this.numPlanes=0,this.numIntersection=0,this.init=function(fe,he){const ge=fe.length!==0||he||Z!==0||te;return te=he,Z=fe.length,ge},this.beginShadows=function(){ie=!0,ue(null)},this.endShadows=function(){ie=!1},this.setGlobalState=function(fe,he){K=ue(fe,he,0)},this.setState=function(fe,he,ge){const _e=fe.clippingPlanes,Se=fe.clipIntersection,Ee=fe.clipShadows,ye=ne.get(fe);if(!te||_e===null||_e.length===0||ie&&!Ee)ie?ue(null):le();else{const be=ie?0:Z,we=be*4;let Pe=ye.clippingState||null;ae.value=Pe,Pe=ue(_e,he,we,ge);for(let Oe=0;Oe!==we;++Oe)Pe[Oe]=K[Oe];ye.clippingState=Pe,this.numIntersection=Se?this.numPlanes:0,this.numPlanes+=be}};function le(){ae.value!==K&&(ae.value=K,ae.needsUpdate=Z>0),_.numPlanes=Z,_.numIntersection=0}function ue(fe,he,ge,_e){const Se=fe!==null?fe.length:0;let Ee=null;if(Se!==0){if(Ee=ae.value,_e!==!0||Ee===null){const ye=ge+Se*4,be=he.matrixWorldInverse;oe.getNormalMatrix(be),(Ee===null||Ee.length<ye)&&(Ee=new Float32Array(ye));for(let we=0,Pe=ge;we!==Se;++we,Pe+=4)se.copy(fe[we]).applyMatrix4(be,oe),se.normal.toArray(Ee,Pe),Ee[Pe+3]=se.constant}ae.value=Ee,ae.needsUpdate=!0}return _.numPlanes=Se,_.numIntersection=0,Ee}}function WebGLCubeMaps(ne){let _=new WeakMap;function K(se,oe){return oe===EquirectangularReflectionMapping?se.mapping=CubeReflectionMapping:oe===EquirectangularRefractionMapping&&(se.mapping=CubeRefractionMapping),se}function Z(se){if(se&&se.isTexture){const oe=se.mapping;if(oe===EquirectangularReflectionMapping||oe===EquirectangularRefractionMapping)if(_.has(se)){const ae=_.get(se).texture;return K(ae,se.mapping)}else{const ae=se.image;if(ae&&ae.height>0){const le=new WebGLCubeRenderTarget(ae.height);return le.fromEquirectangularTexture(ne,se),_.set(se,le),se.addEventListener("dispose",te),K(le.texture,se.mapping)}else return null}}return se}function te(se){const oe=se.target;oe.removeEventListener("dispose",te);const ae=_.get(oe);ae!==void 0&&(_.delete(oe),ae.dispose())}function ie(){_=new WeakMap}return{get:Z,dispose:ie}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color$1;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)],_origin=new Vector3;class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(_,K=0,Z=.1,te=100,ie={}){const{size:se=256,position:oe=_origin}=ie;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(se);const ae=this._allocateTargets();return ae.depthBuffer=!0,this._sceneToCubeUV(_,Z,te,ae,oe),K>0&&this._blur(ae,0,0,K),this._applyPMREM(ae),this._cleanup(ae),ae}fromEquirectangular(_,K=null){return this._fromTexture(_,K)}fromCubemap(_,K=null){return this._fromTexture(_,K)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodPlanes.length;_++)this._lodPlanes[_].dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,K){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const Z=K||this._allocateTargets();return this._textureToCubeUV(_,Z),this._applyPMREM(Z),this._cleanup(Z),Z}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),K=4*this._cubeSize,Z={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace$1,depthBuffer:!1},te=_createRenderTarget(_,K,Z);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_||this._pingPongRenderTarget.height!==K){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,K,Z);const{_lodMax:ie}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(ie)),this._blurMaterial=_getBlurShader(ie,_,K)}return te}_compileMaterial(_){const K=new Mesh(this._lodPlanes[0],_);this._renderer.compile(K,_flatCamera)}_sceneToCubeUV(_,K,Z,te,ie){const ae=new PerspectiveCamera(90,1,K,Z),le=[1,-1,1,1,1,1],ue=[1,1,1,-1,-1,-1],fe=this._renderer,he=fe.autoClear,ge=fe.toneMapping;fe.getClearColor(_clearColor),fe.toneMapping=NoToneMapping,fe.autoClear=!1,fe.state.buffers.depth.getReversed()&&(fe.setRenderTarget(te),fe.clearDepth(),fe.setRenderTarget(null));const Se=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),Ee=new Mesh(new BoxGeometry,Se);let ye=!1;const be=_.background;be?be.isColor&&(Se.color.copy(be),_.background=null,ye=!0):(Se.color.copy(_clearColor),ye=!0);for(let we=0;we<6;we++){const Pe=we%3;Pe===0?(ae.up.set(0,le[we],0),ae.position.set(ie.x,ie.y,ie.z),ae.lookAt(ie.x+ue[we],ie.y,ie.z)):Pe===1?(ae.up.set(0,0,le[we]),ae.position.set(ie.x,ie.y,ie.z),ae.lookAt(ie.x,ie.y+ue[we],ie.z)):(ae.up.set(0,le[we],0),ae.position.set(ie.x,ie.y,ie.z),ae.lookAt(ie.x,ie.y,ie.z+ue[we]));const Oe=this._cubeSize;_setViewport(te,Pe*Oe,we>2?Oe:0,Oe,Oe),fe.setRenderTarget(te),ye&&fe.render(Ee,ae),fe.render(_,ae)}Ee.geometry.dispose(),Ee.material.dispose(),fe.toneMapping=ge,fe.autoClear=he,_.background=be}_textureToCubeUV(_,K){const Z=this._renderer,te=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;te?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ie=te?this._cubemapMaterial:this._equirectMaterial,se=new Mesh(this._lodPlanes[0],ie),oe=ie.uniforms;oe.envMap.value=_;const ae=this._cubeSize;_setViewport(K,0,0,3*ae,2*ae),Z.setRenderTarget(K),Z.render(se,_flatCamera)}_applyPMREM(_){const K=this._renderer,Z=K.autoClear;K.autoClear=!1;const te=this._lodPlanes.length;for(let ie=1;ie<te;ie++){const se=Math.sqrt(this._sigmas[ie]*this._sigmas[ie]-this._sigmas[ie-1]*this._sigmas[ie-1]),oe=_axisDirections[(te-ie-1)%_axisDirections.length];this._blur(_,ie-1,ie,se,oe)}K.autoClear=Z}_blur(_,K,Z,te,ie){const se=this._pingPongRenderTarget;this._halfBlur(_,se,K,Z,te,"latitudinal",ie),this._halfBlur(se,_,Z,Z,te,"longitudinal",ie)}_halfBlur(_,K,Z,te,ie,se,oe){const ae=this._renderer,le=this._blurMaterial;se!=="latitudinal"&&se!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ue=3,fe=new Mesh(this._lodPlanes[te],le),he=le.uniforms,ge=this._sizeLods[Z]-1,_e=isFinite(ie)?Math.PI/(2*ge):2*Math.PI/(2*MAX_SAMPLES-1),Se=ie/_e,Ee=isFinite(ie)?1+Math.floor(ue*Se):MAX_SAMPLES;Ee>MAX_SAMPLES&&console.warn(`sigmaRadians, ${ie}, is too large and will clip, as it requested ${Ee} samples when the maximum is set to ${MAX_SAMPLES}`);const ye=[];let be=0;for(let Ue=0;Ue<MAX_SAMPLES;++Ue){const $e=Ue/Se,De=Math.exp(-$e*$e/2);ye.push(De),Ue===0?be+=De:Ue<Ee&&(be+=2*De)}for(let Ue=0;Ue<ye.length;Ue++)ye[Ue]=ye[Ue]/be;he.envMap.value=_.texture,he.samples.value=Ee,he.weights.value=ye,he.latitudinal.value=se==="latitudinal",oe&&(he.poleAxis.value=oe);const{_lodMax:we}=this;he.dTheta.value=_e,he.mipInt.value=we-Z;const Pe=this._sizeLods[te],Oe=3*Pe*(te>we-LOD_MIN?te-we+LOD_MIN:0),Be=4*(this._cubeSize-Pe);_setViewport(K,Oe,Be,3*Pe,2*Pe),ae.setRenderTarget(K),ae.render(fe,_flatCamera)}}function _createPlanes(ne){const _=[],K=[],Z=[];let te=ne;const ie=ne-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let se=0;se<ie;se++){const oe=Math.pow(2,te);K.push(oe);let ae=1/oe;se>ne-LOD_MIN?ae=EXTRA_LOD_SIGMA[se-ne+LOD_MIN-1]:se===0&&(ae=0),Z.push(ae);const le=1/(oe-2),ue=-le,fe=1+le,he=[ue,ue,fe,ue,fe,fe,ue,ue,fe,fe,ue,fe],ge=6,_e=6,Se=3,Ee=2,ye=1,be=new Float32Array(Se*_e*ge),we=new Float32Array(Ee*_e*ge),Pe=new Float32Array(ye*_e*ge);for(let Be=0;Be<ge;Be++){const Ue=Be%3*2/3-1,$e=Be>2?0:-1,De=[Ue,$e,0,Ue+2/3,$e,0,Ue+2/3,$e+1,0,Ue,$e,0,Ue+2/3,$e+1,0,Ue,$e+1,0];be.set(De,Se*_e*Be),we.set(he,Ee*_e*Be);const ke=[Be,Be,Be,Be,Be,Be];Pe.set(ke,ye*_e*Be)}const Oe=new BufferGeometry;Oe.setAttribute("position",new BufferAttribute(be,Se)),Oe.setAttribute("uv",new BufferAttribute(we,Ee)),Oe.setAttribute("faceIndex",new BufferAttribute(Pe,ye)),_.push(Oe),te>LOD_MIN&&te--}return{lodPlanes:_,sizeLods:K,sigmas:Z}}function _createRenderTarget(ne,_,K){const Z=new WebGLRenderTarget(ne,_,K);return Z.texture.mapping=CubeUVReflectionMapping,Z.texture.name="PMREM.cubeUv",Z.scissorTest=!0,Z}function _setViewport(ne,_,K,Z,te){ne.viewport.set(_,K,Z,te),ne.scissor.set(_,K,Z,te)}function _getBlurShader(ne,_,K){const Z=new Float32Array(MAX_SAMPLES),te=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/K,CUBEUV_MAX_MIP:`${ne}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Z},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:te}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(ne){let _=new WeakMap,K=null;function Z(oe){if(oe&&oe.isTexture){const ae=oe.mapping,le=ae===EquirectangularReflectionMapping||ae===EquirectangularRefractionMapping,ue=ae===CubeReflectionMapping||ae===CubeRefractionMapping;if(le||ue){let fe=_.get(oe);const he=fe!==void 0?fe.texture.pmremVersion:0;if(oe.isRenderTargetTexture&&oe.pmremVersion!==he)return K===null&&(K=new PMREMGenerator(ne)),fe=le?K.fromEquirectangular(oe,fe):K.fromCubemap(oe,fe),fe.texture.pmremVersion=oe.pmremVersion,_.set(oe,fe),fe.texture;if(fe!==void 0)return fe.texture;{const ge=oe.image;return le&&ge&&ge.height>0||ue&&ge&&te(ge)?(K===null&&(K=new PMREMGenerator(ne)),fe=le?K.fromEquirectangular(oe):K.fromCubemap(oe),fe.texture.pmremVersion=oe.pmremVersion,_.set(oe,fe),oe.addEventListener("dispose",ie),fe.texture):null}}}return oe}function te(oe){let ae=0;const le=6;for(let ue=0;ue<le;ue++)oe[ue]!==void 0&&ae++;return ae===le}function ie(oe){const ae=oe.target;ae.removeEventListener("dispose",ie);const le=_.get(ae);le!==void 0&&(_.delete(ae),le.dispose())}function se(){_=new WeakMap,K!==null&&(K.dispose(),K=null)}return{get:Z,dispose:se}}function WebGLExtensions(ne){const _={};function K(Z){if(_[Z]!==void 0)return _[Z];let te;switch(Z){case"WEBGL_depth_texture":te=ne.getExtension("WEBGL_depth_texture")||ne.getExtension("MOZ_WEBGL_depth_texture")||ne.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":te=ne.getExtension("EXT_texture_filter_anisotropic")||ne.getExtension("MOZ_EXT_texture_filter_anisotropic")||ne.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":te=ne.getExtension("WEBGL_compressed_texture_s3tc")||ne.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ne.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":te=ne.getExtension("WEBGL_compressed_texture_pvrtc")||ne.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:te=ne.getExtension(Z)}return _[Z]=te,te}return{has:function(Z){return K(Z)!==null},init:function(){K("EXT_color_buffer_float"),K("WEBGL_clip_cull_distance"),K("OES_texture_float_linear"),K("EXT_color_buffer_half_float"),K("WEBGL_multisampled_render_to_texture"),K("WEBGL_render_shared_exponent")},get:function(Z){const te=K(Z);return te===null&&warnOnce("THREE.WebGLRenderer: "+Z+" extension not supported."),te}}}function WebGLGeometries(ne,_,K,Z){const te={},ie=new WeakMap;function se(fe){const he=fe.target;he.index!==null&&_.remove(he.index);for(const _e in he.attributes)_.remove(he.attributes[_e]);he.removeEventListener("dispose",se),delete te[he.id];const ge=ie.get(he);ge&&(_.remove(ge),ie.delete(he)),Z.releaseStatesOfGeometry(he),he.isInstancedBufferGeometry===!0&&delete he._maxInstanceCount,K.memory.geometries--}function oe(fe,he){return te[he.id]===!0||(he.addEventListener("dispose",se),te[he.id]=!0,K.memory.geometries++),he}function ae(fe){const he=fe.attributes;for(const ge in he)_.update(he[ge],ne.ARRAY_BUFFER)}function le(fe){const he=[],ge=fe.index,_e=fe.attributes.position;let Se=0;if(ge!==null){const be=ge.array;Se=ge.version;for(let we=0,Pe=be.length;we<Pe;we+=3){const Oe=be[we+0],Be=be[we+1],Ue=be[we+2];he.push(Oe,Be,Be,Ue,Ue,Oe)}}else if(_e!==void 0){const be=_e.array;Se=_e.version;for(let we=0,Pe=be.length/3-1;we<Pe;we+=3){const Oe=we+0,Be=we+1,Ue=we+2;he.push(Oe,Be,Be,Ue,Ue,Oe)}}else return;const Ee=new(arrayNeedsUint32(he)?Uint32BufferAttribute:Uint16BufferAttribute)(he,1);Ee.version=Se;const ye=ie.get(fe);ye&&_.remove(ye),ie.set(fe,Ee)}function ue(fe){const he=ie.get(fe);if(he){const ge=fe.index;ge!==null&&he.version<ge.version&&le(fe)}else le(fe);return ie.get(fe)}return{get:oe,update:ae,getWireframeAttribute:ue}}function WebGLIndexedBufferRenderer(ne,_,K){let Z;function te(he){Z=he}let ie,se;function oe(he){ie=he.type,se=he.bytesPerElement}function ae(he,ge){ne.drawElements(Z,ge,ie,he*se),K.update(ge,Z,1)}function le(he,ge,_e){_e!==0&&(ne.drawElementsInstanced(Z,ge,ie,he*se,_e),K.update(ge,Z,_e))}function ue(he,ge,_e){if(_e===0)return;_.get("WEBGL_multi_draw").multiDrawElementsWEBGL(Z,ge,0,ie,he,0,_e);let Ee=0;for(let ye=0;ye<_e;ye++)Ee+=ge[ye];K.update(Ee,Z,1)}function fe(he,ge,_e,Se){if(_e===0)return;const Ee=_.get("WEBGL_multi_draw");if(Ee===null)for(let ye=0;ye<he.length;ye++)le(he[ye]/se,ge[ye],Se[ye]);else{Ee.multiDrawElementsInstancedWEBGL(Z,ge,0,ie,he,0,Se,0,_e);let ye=0;for(let be=0;be<_e;be++)ye+=ge[be]*Se[be];K.update(ye,Z,1)}}this.setMode=te,this.setIndex=oe,this.render=ae,this.renderInstances=le,this.renderMultiDraw=ue,this.renderMultiDrawInstances=fe}function WebGLInfo(ne){const _={geometries:0,textures:0},K={frame:0,calls:0,triangles:0,points:0,lines:0};function Z(ie,se,oe){switch(K.calls++,se){case ne.TRIANGLES:K.triangles+=oe*(ie/3);break;case ne.LINES:K.lines+=oe*(ie/2);break;case ne.LINE_STRIP:K.lines+=oe*(ie-1);break;case ne.LINE_LOOP:K.lines+=oe*ie;break;case ne.POINTS:K.points+=oe*ie;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",se);break}}function te(){K.calls=0,K.triangles=0,K.points=0,K.lines=0}return{memory:_,render:K,programs:null,autoReset:!0,reset:te,update:Z}}function WebGLMorphtargets(ne,_,K){const Z=new WeakMap,te=new Vector4;function ie(se,oe,ae){const le=se.morphTargetInfluences,ue=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,fe=ue!==void 0?ue.length:0;let he=Z.get(oe);if(he===void 0||he.count!==fe){let De=function(){Ue.dispose(),Z.delete(oe),oe.removeEventListener("dispose",De)};he!==void 0&&he.texture.dispose();const ge=oe.morphAttributes.position!==void 0,_e=oe.morphAttributes.normal!==void 0,Se=oe.morphAttributes.color!==void 0,Ee=oe.morphAttributes.position||[],ye=oe.morphAttributes.normal||[],be=oe.morphAttributes.color||[];let we=0;ge===!0&&(we=1),_e===!0&&(we=2),Se===!0&&(we=3);let Pe=oe.attributes.position.count*we,Oe=1;Pe>_.maxTextureSize&&(Oe=Math.ceil(Pe/_.maxTextureSize),Pe=_.maxTextureSize);const Be=new Float32Array(Pe*Oe*4*fe),Ue=new DataArrayTexture(Be,Pe,Oe,fe);Ue.type=FloatType,Ue.needsUpdate=!0;const $e=we*4;for(let ke=0;ke<fe;ke++){const Ge=Ee[ke],Je=ye[ke],Ye=be[ke],Qe=Pe*Oe*4*ke;for(let rt=0;rt<Ge.count;rt++){const ot=rt*$e;ge===!0&&(te.fromBufferAttribute(Ge,rt),Be[Qe+ot+0]=te.x,Be[Qe+ot+1]=te.y,Be[Qe+ot+2]=te.z,Be[Qe+ot+3]=0),_e===!0&&(te.fromBufferAttribute(Je,rt),Be[Qe+ot+4]=te.x,Be[Qe+ot+5]=te.y,Be[Qe+ot+6]=te.z,Be[Qe+ot+7]=0),Se===!0&&(te.fromBufferAttribute(Ye,rt),Be[Qe+ot+8]=te.x,Be[Qe+ot+9]=te.y,Be[Qe+ot+10]=te.z,Be[Qe+ot+11]=Ye.itemSize===4?te.w:1)}}he={count:fe,texture:Ue,size:new Vector2(Pe,Oe)},Z.set(oe,he),oe.addEventListener("dispose",De)}if(se.isInstancedMesh===!0&&se.morphTexture!==null)ae.getUniforms().setValue(ne,"morphTexture",se.morphTexture,K);else{let ge=0;for(let Se=0;Se<le.length;Se++)ge+=le[Se];const _e=oe.morphTargetsRelative?1:1-ge;ae.getUniforms().setValue(ne,"morphTargetBaseInfluence",_e),ae.getUniforms().setValue(ne,"morphTargetInfluences",le)}ae.getUniforms().setValue(ne,"morphTargetsTexture",he.texture,K),ae.getUniforms().setValue(ne,"morphTargetsTextureSize",he.size)}return{update:ie}}function WebGLObjects(ne,_,K,Z){let te=new WeakMap;function ie(ae){const le=Z.render.frame,ue=ae.geometry,fe=_.get(ae,ue);if(te.get(fe)!==le&&(_.update(fe),te.set(fe,le)),ae.isInstancedMesh&&(ae.hasEventListener("dispose",oe)===!1&&ae.addEventListener("dispose",oe),te.get(ae)!==le&&(K.update(ae.instanceMatrix,ne.ARRAY_BUFFER),ae.instanceColor!==null&&K.update(ae.instanceColor,ne.ARRAY_BUFFER),te.set(ae,le))),ae.isSkinnedMesh){const he=ae.skeleton;te.get(he)!==le&&(he.update(),te.set(he,le))}return fe}function se(){te=new WeakMap}function oe(ae){const le=ae.target;le.removeEventListener("dispose",oe),K.remove(le.instanceMatrix),le.instanceColor!==null&&K.remove(le.instanceColor)}return{update:ie,dispose:se}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$1(ne,_,K){const Z=ne[0];if(Z<=0||Z>0)return ne;const te=_*K;let ie=arrayCacheF32[te];if(ie===void 0&&(ie=new Float32Array(te),arrayCacheF32[te]=ie),_!==0){Z.toArray(ie,0);for(let se=1,oe=0;se!==_;++se)oe+=K,ne[se].toArray(ie,oe)}return ie}function arraysEqual(ne,_){if(ne.length!==_.length)return!1;for(let K=0,Z=ne.length;K<Z;K++)if(ne[K]!==_[K])return!1;return!0}function copyArray(ne,_){for(let K=0,Z=_.length;K<Z;K++)ne[K]=_[K]}function allocTexUnits(ne,_){let K=arrayCacheI32[_];K===void 0&&(K=new Int32Array(_),arrayCacheI32[_]=K);for(let Z=0;Z!==_;++Z)K[Z]=ne.allocateTextureUnit();return K}function setValueV1f(ne,_){const K=this.cache;K[0]!==_&&(ne.uniform1f(this.addr,_),K[0]=_)}function setValueV2f(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y)&&(ne.uniform2f(this.addr,_.x,_.y),K[0]=_.x,K[1]=_.y);else{if(arraysEqual(K,_))return;ne.uniform2fv(this.addr,_),copyArray(K,_)}}function setValueV3f(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y||K[2]!==_.z)&&(ne.uniform3f(this.addr,_.x,_.y,_.z),K[0]=_.x,K[1]=_.y,K[2]=_.z);else if(_.r!==void 0)(K[0]!==_.r||K[1]!==_.g||K[2]!==_.b)&&(ne.uniform3f(this.addr,_.r,_.g,_.b),K[0]=_.r,K[1]=_.g,K[2]=_.b);else{if(arraysEqual(K,_))return;ne.uniform3fv(this.addr,_),copyArray(K,_)}}function setValueV4f(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y||K[2]!==_.z||K[3]!==_.w)&&(ne.uniform4f(this.addr,_.x,_.y,_.z,_.w),K[0]=_.x,K[1]=_.y,K[2]=_.z,K[3]=_.w);else{if(arraysEqual(K,_))return;ne.uniform4fv(this.addr,_),copyArray(K,_)}}function setValueM2(ne,_){const K=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(K,_))return;ne.uniformMatrix2fv(this.addr,!1,_),copyArray(K,_)}else{if(arraysEqual(K,Z))return;mat2array.set(Z),ne.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(K,Z)}}function setValueM3(ne,_){const K=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(K,_))return;ne.uniformMatrix3fv(this.addr,!1,_),copyArray(K,_)}else{if(arraysEqual(K,Z))return;mat3array.set(Z),ne.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(K,Z)}}function setValueM4(ne,_){const K=this.cache,Z=_.elements;if(Z===void 0){if(arraysEqual(K,_))return;ne.uniformMatrix4fv(this.addr,!1,_),copyArray(K,_)}else{if(arraysEqual(K,Z))return;mat4array.set(Z),ne.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(K,Z)}}function setValueV1i(ne,_){const K=this.cache;K[0]!==_&&(ne.uniform1i(this.addr,_),K[0]=_)}function setValueV2i(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y)&&(ne.uniform2i(this.addr,_.x,_.y),K[0]=_.x,K[1]=_.y);else{if(arraysEqual(K,_))return;ne.uniform2iv(this.addr,_),copyArray(K,_)}}function setValueV3i(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y||K[2]!==_.z)&&(ne.uniform3i(this.addr,_.x,_.y,_.z),K[0]=_.x,K[1]=_.y,K[2]=_.z);else{if(arraysEqual(K,_))return;ne.uniform3iv(this.addr,_),copyArray(K,_)}}function setValueV4i(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y||K[2]!==_.z||K[3]!==_.w)&&(ne.uniform4i(this.addr,_.x,_.y,_.z,_.w),K[0]=_.x,K[1]=_.y,K[2]=_.z,K[3]=_.w);else{if(arraysEqual(K,_))return;ne.uniform4iv(this.addr,_),copyArray(K,_)}}function setValueV1ui(ne,_){const K=this.cache;K[0]!==_&&(ne.uniform1ui(this.addr,_),K[0]=_)}function setValueV2ui(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y)&&(ne.uniform2ui(this.addr,_.x,_.y),K[0]=_.x,K[1]=_.y);else{if(arraysEqual(K,_))return;ne.uniform2uiv(this.addr,_),copyArray(K,_)}}function setValueV3ui(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y||K[2]!==_.z)&&(ne.uniform3ui(this.addr,_.x,_.y,_.z),K[0]=_.x,K[1]=_.y,K[2]=_.z);else{if(arraysEqual(K,_))return;ne.uniform3uiv(this.addr,_),copyArray(K,_)}}function setValueV4ui(ne,_){const K=this.cache;if(_.x!==void 0)(K[0]!==_.x||K[1]!==_.y||K[2]!==_.z||K[3]!==_.w)&&(ne.uniform4ui(this.addr,_.x,_.y,_.z,_.w),K[0]=_.x,K[1]=_.y,K[2]=_.z,K[3]=_.w);else{if(arraysEqual(K,_))return;ne.uniform4uiv(this.addr,_),copyArray(K,_)}}function setValueT1(ne,_,K){const Z=this.cache,te=K.allocateTextureUnit();Z[0]!==te&&(ne.uniform1i(this.addr,te),Z[0]=te);let ie;this.type===ne.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,ie=emptyShadowTexture):ie=emptyTexture,K.setTexture2D(_||ie,te)}function setValueT3D1(ne,_,K){const Z=this.cache,te=K.allocateTextureUnit();Z[0]!==te&&(ne.uniform1i(this.addr,te),Z[0]=te),K.setTexture3D(_||empty3dTexture,te)}function setValueT6(ne,_,K){const Z=this.cache,te=K.allocateTextureUnit();Z[0]!==te&&(ne.uniform1i(this.addr,te),Z[0]=te),K.setTextureCube(_||emptyCubeTexture,te)}function setValueT2DArray1(ne,_,K){const Z=this.cache,te=K.allocateTextureUnit();Z[0]!==te&&(ne.uniform1i(this.addr,te),Z[0]=te),K.setTexture2DArray(_||emptyArrayTexture,te)}function getSingularSetter(ne){switch(ne){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ne,_){ne.uniform1fv(this.addr,_)}function setValueV2fArray(ne,_){const K=flatten$1(_,this.size,2);ne.uniform2fv(this.addr,K)}function setValueV3fArray(ne,_){const K=flatten$1(_,this.size,3);ne.uniform3fv(this.addr,K)}function setValueV4fArray(ne,_){const K=flatten$1(_,this.size,4);ne.uniform4fv(this.addr,K)}function setValueM2Array(ne,_){const K=flatten$1(_,this.size,4);ne.uniformMatrix2fv(this.addr,!1,K)}function setValueM3Array(ne,_){const K=flatten$1(_,this.size,9);ne.uniformMatrix3fv(this.addr,!1,K)}function setValueM4Array(ne,_){const K=flatten$1(_,this.size,16);ne.uniformMatrix4fv(this.addr,!1,K)}function setValueV1iArray(ne,_){ne.uniform1iv(this.addr,_)}function setValueV2iArray(ne,_){ne.uniform2iv(this.addr,_)}function setValueV3iArray(ne,_){ne.uniform3iv(this.addr,_)}function setValueV4iArray(ne,_){ne.uniform4iv(this.addr,_)}function setValueV1uiArray(ne,_){ne.uniform1uiv(this.addr,_)}function setValueV2uiArray(ne,_){ne.uniform2uiv(this.addr,_)}function setValueV3uiArray(ne,_){ne.uniform3uiv(this.addr,_)}function setValueV4uiArray(ne,_){ne.uniform4uiv(this.addr,_)}function setValueT1Array(ne,_,K){const Z=this.cache,te=_.length,ie=allocTexUnits(K,te);arraysEqual(Z,ie)||(ne.uniform1iv(this.addr,ie),copyArray(Z,ie));for(let se=0;se!==te;++se)K.setTexture2D(_[se]||emptyTexture,ie[se])}function setValueT3DArray(ne,_,K){const Z=this.cache,te=_.length,ie=allocTexUnits(K,te);arraysEqual(Z,ie)||(ne.uniform1iv(this.addr,ie),copyArray(Z,ie));for(let se=0;se!==te;++se)K.setTexture3D(_[se]||empty3dTexture,ie[se])}function setValueT6Array(ne,_,K){const Z=this.cache,te=_.length,ie=allocTexUnits(K,te);arraysEqual(Z,ie)||(ne.uniform1iv(this.addr,ie),copyArray(Z,ie));for(let se=0;se!==te;++se)K.setTextureCube(_[se]||emptyCubeTexture,ie[se])}function setValueT2DArrayArray(ne,_,K){const Z=this.cache,te=_.length,ie=allocTexUnits(K,te);arraysEqual(Z,ie)||(ne.uniform1iv(this.addr,ie),copyArray(Z,ie));for(let se=0;se!==te;++se)K.setTexture2DArray(_[se]||emptyArrayTexture,ie[se])}function getPureArraySetter(ne){switch(ne){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,K,Z){this.id=_,this.addr=Z,this.cache=[],this.type=K.type,this.setValue=getSingularSetter(K.type)}}class PureArrayUniform{constructor(_,K,Z){this.id=_,this.addr=Z,this.cache=[],this.type=K.type,this.size=K.size,this.setValue=getPureArraySetter(K.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,K,Z){const te=this.seq;for(let ie=0,se=te.length;ie!==se;++ie){const oe=te[ie];oe.setValue(_,K[oe.id],Z)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(ne,_){ne.seq.push(_),ne.map[_.id]=_}function parseUniform(ne,_,K){const Z=ne.name,te=Z.length;for(RePathPart.lastIndex=0;;){const ie=RePathPart.exec(Z),se=RePathPart.lastIndex;let oe=ie[1];const ae=ie[2]==="]",le=ie[3];if(ae&&(oe=oe|0),le===void 0||le==="["&&se+2===te){addUniform(K,le===void 0?new SingleUniform(oe,ne,_):new PureArrayUniform(oe,ne,_));break}else{let fe=K.map[oe];fe===void 0&&(fe=new StructuredUniform(oe),addUniform(K,fe)),K=fe}}}class WebGLUniforms{constructor(_,K){this.seq=[],this.map={};const Z=_.getProgramParameter(K,_.ACTIVE_UNIFORMS);for(let te=0;te<Z;++te){const ie=_.getActiveUniform(K,te),se=_.getUniformLocation(K,ie.name);parseUniform(ie,se,this)}}setValue(_,K,Z,te){const ie=this.map[K];ie!==void 0&&ie.setValue(_,Z,te)}setOptional(_,K,Z){const te=K[Z];te!==void 0&&this.setValue(_,Z,te)}static upload(_,K,Z,te){for(let ie=0,se=K.length;ie!==se;++ie){const oe=K[ie],ae=Z[oe.id];ae.needsUpdate!==!1&&oe.setValue(_,ae.value,te)}}static seqWithValue(_,K){const Z=[];for(let te=0,ie=_.length;te!==ie;++te){const se=_[te];se.id in K&&Z.push(se)}return Z}}function WebGLShader(ne,_,K){const Z=ne.createShader(_);return ne.shaderSource(Z,K),ne.compileShader(Z),Z}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(ne,_){const K=ne.split(`
`),Z=[],te=Math.max(_-6,0),ie=Math.min(_+6,K.length);for(let se=te;se<ie;se++){const oe=se+1;Z.push(`${oe===_?">":" "} ${oe}: ${K[se]}`)}return Z.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(ne){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,ne);const _=`mat3( ${_m0.elements.map(K=>K.toFixed(4))} )`;switch(ColorManagement.getTransfer(ne)){case LinearTransfer:return[_,"LinearTransferOETF"];case SRGBTransfer:return[_,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",ne),[_,"LinearTransferOETF"]}}function getShaderErrors(ne,_,K){const Z=ne.getShaderParameter(_,ne.COMPILE_STATUS),ie=(ne.getShaderInfoLog(_)||"").trim();if(Z&&ie==="")return"";const se=/ERROR: 0:(\d+)/.exec(ie);if(se){const oe=parseInt(se[1]);return K.toUpperCase()+`

`+ie+`

`+handleSource(ne.getShaderSource(_),oe)}else return ie}function getTexelEncodingFunction(ne,_){const K=getEncodingComponents(_);return[`vec4 ${ne}( vec4 value ) {`,`	return ${K[1]}( vec4( value.rgb * ${K[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(ne,_){let K;switch(_){case LinearToneMapping:K="Linear";break;case ReinhardToneMapping:K="Reinhard";break;case CineonToneMapping:K="Cineon";break;case ACESFilmicToneMapping:K="ACESFilmic";break;case AgXToneMapping:K="AgX";break;case NeutralToneMapping:K="Neutral";break;case CustomToneMapping:K="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",_),K="Linear"}return"vec3 "+ne+"( vec3 color ) { return "+K+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const ne=_v0.x.toFixed(4),_=_v0.y.toFixed(4),K=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${ne}, ${_}, ${K} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(ne){return[ne.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",ne.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(ne){const _=[];for(const K in ne){const Z=ne[K];Z!==!1&&_.push("#define "+K+" "+Z)}return _.join(`
`)}function fetchAttributeLocations(ne,_){const K={},Z=ne.getProgramParameter(_,ne.ACTIVE_ATTRIBUTES);for(let te=0;te<Z;te++){const ie=ne.getActiveAttrib(_,te),se=ie.name;let oe=1;ie.type===ne.FLOAT_MAT2&&(oe=2),ie.type===ne.FLOAT_MAT3&&(oe=3),ie.type===ne.FLOAT_MAT4&&(oe=4),K[se]={type:ie.type,location:ne.getAttribLocation(_,se),locationSize:oe}}return K}function filterEmptyLine(ne){return ne!==""}function replaceLightNums(ne,_){const K=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return ne.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,K).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(ne,_){return ne.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ne){return ne.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(ne,_){let K=ShaderChunk[_];if(K===void 0){const Z=shaderChunkMap.get(_);if(Z!==void 0)K=ShaderChunk[Z],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',_,Z);else throw new Error("Can not resolve #include <"+_+">")}return resolveIncludes(K)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(ne){return ne.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(ne,_,K,Z){let te="";for(let ie=parseInt(_);ie<parseInt(K);ie++)te+=Z.replace(/\[\s*i\s*\]/g,"[ "+ie+" ]").replace(/UNROLLED_LOOP_INDEX/g,ie);return te}function generatePrecision(ne){let _=`precision ${ne.precision} float;
	precision ${ne.precision} int;
	precision ${ne.precision} sampler2D;
	precision ${ne.precision} samplerCube;
	precision ${ne.precision} sampler3D;
	precision ${ne.precision} sampler2DArray;
	precision ${ne.precision} sampler2DShadow;
	precision ${ne.precision} samplerCubeShadow;
	precision ${ne.precision} sampler2DArrayShadow;
	precision ${ne.precision} isampler2D;
	precision ${ne.precision} isampler3D;
	precision ${ne.precision} isamplerCube;
	precision ${ne.precision} isampler2DArray;
	precision ${ne.precision} usampler2D;
	precision ${ne.precision} usampler3D;
	precision ${ne.precision} usamplerCube;
	precision ${ne.precision} usampler2DArray;
	`;return ne.precision==="highp"?_+=`
#define HIGH_PRECISION`:ne.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:ne.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(ne){let _="SHADOWMAP_TYPE_BASIC";return ne.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":ne.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":ne.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(ne){let _="ENVMAP_TYPE_CUBE";if(ne.envMap)switch(ne.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(ne){let _="ENVMAP_MODE_REFLECTION";if(ne.envMap)switch(ne.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(ne){let _="ENVMAP_BLENDING_NONE";if(ne.envMap)switch(ne.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(ne){const _=ne.envMapCubeUVHeight;if(_===null)return null;const K=Math.log2(_)-2,Z=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,K),112)),texelHeight:Z,maxMip:K}}function WebGLProgram(ne,_,K,Z){const te=ne.getContext(),ie=K.defines;let se=K.vertexShader,oe=K.fragmentShader;const ae=generateShadowMapTypeDefine(K),le=generateEnvMapTypeDefine(K),ue=generateEnvMapModeDefine(K),fe=generateEnvMapBlendingDefine(K),he=generateCubeUVSize(K),ge=generateVertexExtensions(K),_e=generateDefines(ie),Se=te.createProgram();let Ee,ye,be=K.glslVersion?"#version "+K.glslVersion+`
`:"";K.isRawShaderMaterial?(Ee=["#define SHADER_TYPE "+K.shaderType,"#define SHADER_NAME "+K.shaderName,_e].filter(filterEmptyLine).join(`
`),Ee.length>0&&(Ee+=`
`),ye=["#define SHADER_TYPE "+K.shaderType,"#define SHADER_NAME "+K.shaderName,_e].filter(filterEmptyLine).join(`
`),ye.length>0&&(ye+=`
`)):(Ee=[generatePrecision(K),"#define SHADER_TYPE "+K.shaderType,"#define SHADER_NAME "+K.shaderName,_e,K.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",K.batching?"#define USE_BATCHING":"",K.batchingColor?"#define USE_BATCHING_COLOR":"",K.instancing?"#define USE_INSTANCING":"",K.instancingColor?"#define USE_INSTANCING_COLOR":"",K.instancingMorph?"#define USE_INSTANCING_MORPH":"",K.useFog&&K.fog?"#define USE_FOG":"",K.useFog&&K.fogExp2?"#define FOG_EXP2":"",K.map?"#define USE_MAP":"",K.envMap?"#define USE_ENVMAP":"",K.envMap?"#define "+ue:"",K.lightMap?"#define USE_LIGHTMAP":"",K.aoMap?"#define USE_AOMAP":"",K.bumpMap?"#define USE_BUMPMAP":"",K.normalMap?"#define USE_NORMALMAP":"",K.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",K.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",K.displacementMap?"#define USE_DISPLACEMENTMAP":"",K.emissiveMap?"#define USE_EMISSIVEMAP":"",K.anisotropy?"#define USE_ANISOTROPY":"",K.anisotropyMap?"#define USE_ANISOTROPYMAP":"",K.clearcoatMap?"#define USE_CLEARCOATMAP":"",K.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",K.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",K.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",K.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",K.specularMap?"#define USE_SPECULARMAP":"",K.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",K.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",K.roughnessMap?"#define USE_ROUGHNESSMAP":"",K.metalnessMap?"#define USE_METALNESSMAP":"",K.alphaMap?"#define USE_ALPHAMAP":"",K.alphaHash?"#define USE_ALPHAHASH":"",K.transmission?"#define USE_TRANSMISSION":"",K.transmissionMap?"#define USE_TRANSMISSIONMAP":"",K.thicknessMap?"#define USE_THICKNESSMAP":"",K.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",K.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",K.mapUv?"#define MAP_UV "+K.mapUv:"",K.alphaMapUv?"#define ALPHAMAP_UV "+K.alphaMapUv:"",K.lightMapUv?"#define LIGHTMAP_UV "+K.lightMapUv:"",K.aoMapUv?"#define AOMAP_UV "+K.aoMapUv:"",K.emissiveMapUv?"#define EMISSIVEMAP_UV "+K.emissiveMapUv:"",K.bumpMapUv?"#define BUMPMAP_UV "+K.bumpMapUv:"",K.normalMapUv?"#define NORMALMAP_UV "+K.normalMapUv:"",K.displacementMapUv?"#define DISPLACEMENTMAP_UV "+K.displacementMapUv:"",K.metalnessMapUv?"#define METALNESSMAP_UV "+K.metalnessMapUv:"",K.roughnessMapUv?"#define ROUGHNESSMAP_UV "+K.roughnessMapUv:"",K.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+K.anisotropyMapUv:"",K.clearcoatMapUv?"#define CLEARCOATMAP_UV "+K.clearcoatMapUv:"",K.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+K.clearcoatNormalMapUv:"",K.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+K.clearcoatRoughnessMapUv:"",K.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+K.iridescenceMapUv:"",K.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+K.iridescenceThicknessMapUv:"",K.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+K.sheenColorMapUv:"",K.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+K.sheenRoughnessMapUv:"",K.specularMapUv?"#define SPECULARMAP_UV "+K.specularMapUv:"",K.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+K.specularColorMapUv:"",K.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+K.specularIntensityMapUv:"",K.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+K.transmissionMapUv:"",K.thicknessMapUv?"#define THICKNESSMAP_UV "+K.thicknessMapUv:"",K.vertexTangents&&K.flatShading===!1?"#define USE_TANGENT":"",K.vertexColors?"#define USE_COLOR":"",K.vertexAlphas?"#define USE_COLOR_ALPHA":"",K.vertexUv1s?"#define USE_UV1":"",K.vertexUv2s?"#define USE_UV2":"",K.vertexUv3s?"#define USE_UV3":"",K.pointsUvs?"#define USE_POINTS_UV":"",K.flatShading?"#define FLAT_SHADED":"",K.skinning?"#define USE_SKINNING":"",K.morphTargets?"#define USE_MORPHTARGETS":"",K.morphNormals&&K.flatShading===!1?"#define USE_MORPHNORMALS":"",K.morphColors?"#define USE_MORPHCOLORS":"",K.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+K.morphTextureStride:"",K.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+K.morphTargetsCount:"",K.doubleSided?"#define DOUBLE_SIDED":"",K.flipSided?"#define FLIP_SIDED":"",K.shadowMapEnabled?"#define USE_SHADOWMAP":"",K.shadowMapEnabled?"#define "+ae:"",K.sizeAttenuation?"#define USE_SIZEATTENUATION":"",K.numLightProbes>0?"#define USE_LIGHT_PROBES":"",K.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",K.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ye=[generatePrecision(K),"#define SHADER_TYPE "+K.shaderType,"#define SHADER_NAME "+K.shaderName,_e,K.useFog&&K.fog?"#define USE_FOG":"",K.useFog&&K.fogExp2?"#define FOG_EXP2":"",K.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",K.map?"#define USE_MAP":"",K.matcap?"#define USE_MATCAP":"",K.envMap?"#define USE_ENVMAP":"",K.envMap?"#define "+le:"",K.envMap?"#define "+ue:"",K.envMap?"#define "+fe:"",he?"#define CUBEUV_TEXEL_WIDTH "+he.texelWidth:"",he?"#define CUBEUV_TEXEL_HEIGHT "+he.texelHeight:"",he?"#define CUBEUV_MAX_MIP "+he.maxMip+".0":"",K.lightMap?"#define USE_LIGHTMAP":"",K.aoMap?"#define USE_AOMAP":"",K.bumpMap?"#define USE_BUMPMAP":"",K.normalMap?"#define USE_NORMALMAP":"",K.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",K.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",K.emissiveMap?"#define USE_EMISSIVEMAP":"",K.anisotropy?"#define USE_ANISOTROPY":"",K.anisotropyMap?"#define USE_ANISOTROPYMAP":"",K.clearcoat?"#define USE_CLEARCOAT":"",K.clearcoatMap?"#define USE_CLEARCOATMAP":"",K.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",K.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",K.dispersion?"#define USE_DISPERSION":"",K.iridescence?"#define USE_IRIDESCENCE":"",K.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",K.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",K.specularMap?"#define USE_SPECULARMAP":"",K.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",K.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",K.roughnessMap?"#define USE_ROUGHNESSMAP":"",K.metalnessMap?"#define USE_METALNESSMAP":"",K.alphaMap?"#define USE_ALPHAMAP":"",K.alphaTest?"#define USE_ALPHATEST":"",K.alphaHash?"#define USE_ALPHAHASH":"",K.sheen?"#define USE_SHEEN":"",K.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",K.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",K.transmission?"#define USE_TRANSMISSION":"",K.transmissionMap?"#define USE_TRANSMISSIONMAP":"",K.thicknessMap?"#define USE_THICKNESSMAP":"",K.vertexTangents&&K.flatShading===!1?"#define USE_TANGENT":"",K.vertexColors||K.instancingColor||K.batchingColor?"#define USE_COLOR":"",K.vertexAlphas?"#define USE_COLOR_ALPHA":"",K.vertexUv1s?"#define USE_UV1":"",K.vertexUv2s?"#define USE_UV2":"",K.vertexUv3s?"#define USE_UV3":"",K.pointsUvs?"#define USE_POINTS_UV":"",K.gradientMap?"#define USE_GRADIENTMAP":"",K.flatShading?"#define FLAT_SHADED":"",K.doubleSided?"#define DOUBLE_SIDED":"",K.flipSided?"#define FLIP_SIDED":"",K.shadowMapEnabled?"#define USE_SHADOWMAP":"",K.shadowMapEnabled?"#define "+ae:"",K.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",K.numLightProbes>0?"#define USE_LIGHT_PROBES":"",K.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",K.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",K.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",K.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",K.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",K.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",K.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",K.toneMapping):"",K.dithering?"#define DITHERING":"",K.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",K.outputColorSpace),getLuminanceFunction(),K.useDepthPacking?"#define DEPTH_PACKING "+K.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),se=resolveIncludes(se),se=replaceLightNums(se,K),se=replaceClippingPlaneNums(se,K),oe=resolveIncludes(oe),oe=replaceLightNums(oe,K),oe=replaceClippingPlaneNums(oe,K),se=unrollLoops(se),oe=unrollLoops(oe),K.isRawShaderMaterial!==!0&&(be=`#version 300 es
`,Ee=[ge,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Ee,ye=["#define varying in",K.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",K.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ye);const we=be+Ee+se,Pe=be+ye+oe,Oe=WebGLShader(te,te.VERTEX_SHADER,we),Be=WebGLShader(te,te.FRAGMENT_SHADER,Pe);te.attachShader(Se,Oe),te.attachShader(Se,Be),K.index0AttributeName!==void 0?te.bindAttribLocation(Se,0,K.index0AttributeName):K.morphTargets===!0&&te.bindAttribLocation(Se,0,"position"),te.linkProgram(Se);function Ue(Ge){if(ne.debug.checkShaderErrors){const Je=te.getProgramInfoLog(Se)||"",Ye=te.getShaderInfoLog(Oe)||"",Qe=te.getShaderInfoLog(Be)||"",rt=Je.trim(),ot=Ye.trim(),ct=Qe.trim();let je=!0,st=!0;if(te.getProgramParameter(Se,te.LINK_STATUS)===!1)if(je=!1,typeof ne.debug.onShaderError=="function")ne.debug.onShaderError(te,Se,Oe,Be);else{const nt=getShaderErrors(te,Oe,"vertex"),qe=getShaderErrors(te,Be,"fragment");console.error("THREE.WebGLProgram: Shader Error "+te.getError()+" - VALIDATE_STATUS "+te.getProgramParameter(Se,te.VALIDATE_STATUS)+`

Material Name: `+Ge.name+`
Material Type: `+Ge.type+`

Program Info Log: `+rt+`
`+nt+`
`+qe)}else rt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",rt):(ot===""||ct==="")&&(st=!1);st&&(Ge.diagnostics={runnable:je,programLog:rt,vertexShader:{log:ot,prefix:Ee},fragmentShader:{log:ct,prefix:ye}})}te.deleteShader(Oe),te.deleteShader(Be),$e=new WebGLUniforms(te,Se),De=fetchAttributeLocations(te,Se)}let $e;this.getUniforms=function(){return $e===void 0&&Ue(this),$e};let De;this.getAttributes=function(){return De===void 0&&Ue(this),De};let ke=K.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return ke===!1&&(ke=te.getProgramParameter(Se,COMPLETION_STATUS_KHR)),ke},this.destroy=function(){Z.releaseStatesOfProgram(this),te.deleteProgram(Se),this.program=void 0},this.type=K.shaderType,this.name=K.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=Se,this.vertexShader=Oe,this.fragmentShader=Be,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const K=_.vertexShader,Z=_.fragmentShader,te=this._getShaderStage(K),ie=this._getShaderStage(Z),se=this._getShaderCacheForMaterial(_);return se.has(te)===!1&&(se.add(te),te.usedTimes++),se.has(ie)===!1&&(se.add(ie),ie.usedTimes++),this}remove(_){const K=this.materialCache.get(_);for(const Z of K)Z.usedTimes--,Z.usedTimes===0&&this.shaderCache.delete(Z.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const K=this.materialCache;let Z=K.get(_);return Z===void 0&&(Z=new Set,K.set(_,Z)),Z}_getShaderStage(_){const K=this.shaderCache;let Z=K.get(_);return Z===void 0&&(Z=new WebGLShaderStage(_),K.set(_,Z)),Z}}class WebGLShaderStage{constructor(_){this.id=_id++,this.code=_,this.usedTimes=0}}function WebGLPrograms(ne,_,K,Z,te,ie,se){const oe=new Layers,ae=new WebGLShaderCache,le=new Set,ue=[],fe=te.logarithmicDepthBuffer,he=te.vertexTextures;let ge=te.precision;const _e={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Se(De){return le.add(De),De===0?"uv":`uv${De}`}function Ee(De,ke,Ge,Je,Ye){const Qe=Je.fog,rt=Ye.geometry,ot=De.isMeshStandardMaterial?Je.environment:null,ct=(De.isMeshStandardMaterial?K:_).get(De.envMap||ot),je=ct&&ct.mapping===CubeUVReflectionMapping?ct.image.height:null,st=_e[De.type];De.precision!==null&&(ge=te.getMaxPrecision(De.precision),ge!==De.precision&&console.warn("THREE.WebGLProgram.getParameters:",De.precision,"not supported, using",ge,"instead."));const nt=rt.morphAttributes.position||rt.morphAttributes.normal||rt.morphAttributes.color,qe=nt!==void 0?nt.length:0;let lt=0;rt.morphAttributes.position!==void 0&&(lt=1),rt.morphAttributes.normal!==void 0&&(lt=2),rt.morphAttributes.color!==void 0&&(lt=3);let Pt,Gt,pt,yt;if(st){const Hn=ShaderLib[st];Pt=Hn.vertexShader,Gt=Hn.fragmentShader}else Pt=De.vertexShader,Gt=De.fragmentShader,ae.update(De),pt=ae.getVertexShaderID(De),yt=ae.getFragmentShaderID(De);const Bt=ne.getRenderTarget(),Wt=ne.state.buffers.depth.getReversed(),jt=Ye.isInstancedMesh===!0,nn=Ye.isBatchedMesh===!0,an=!!De.map,mn=!!De.matcap,tt=!!ct,Ut=!!De.aoMap,Dt=!!De.lightMap,Vt=!!De.bumpMap,It=!!De.normalMap,Qt=!!De.displacementMap,kt=!!De.emissiveMap,qt=!!De.metalnessMap,Tn=!!De.roughnessMap,Sn=De.anisotropy>0,We=De.clearcoat>0,Ve=De.dispersion>0,ft=De.iridescence>0,Et=De.sheen>0,Ft=De.transmission>0,Ct=Sn&&!!De.anisotropyMap,un=We&&!!De.clearcoatMap,Yt=We&&!!De.clearcoatNormalMap,fn=We&&!!De.clearcoatRoughnessMap,gn=ft&&!!De.iridescenceMap,$t=ft&&!!De.iridescenceThicknessMap,mt=Et&&!!De.sheenColorMap,xt=Et&&!!De.sheenRoughnessMap,Xe=!!De.specularMap,at=!!De.specularColorMap,At=!!De.specularIntensityMap,Ze=Ft&&!!De.transmissionMap,Ot=Ft&&!!De.thicknessMap,Ht=!!De.gradientMap,en=!!De.alphaMap,Kt=De.alphaTest>0,zt=!!De.alphaHash,ln=!!De.extensions;let Pn=NoToneMapping;De.toneMapped&&(Bt===null||Bt.isXRRenderTarget===!0)&&(Pn=ne.toneMapping);const Jn={shaderID:st,shaderType:De.type,shaderName:De.name,vertexShader:Pt,fragmentShader:Gt,defines:De.defines,customVertexShaderID:pt,customFragmentShaderID:yt,isRawShaderMaterial:De.isRawShaderMaterial===!0,glslVersion:De.glslVersion,precision:ge,batching:nn,batchingColor:nn&&Ye._colorsTexture!==null,instancing:jt,instancingColor:jt&&Ye.instanceColor!==null,instancingMorph:jt&&Ye.morphTexture!==null,supportsVertexTextures:he,outputColorSpace:Bt===null?ne.outputColorSpace:Bt.isXRRenderTarget===!0?Bt.texture.colorSpace:LinearSRGBColorSpace$1,alphaToCoverage:!!De.alphaToCoverage,map:an,matcap:mn,envMap:tt,envMapMode:tt&&ct.mapping,envMapCubeUVHeight:je,aoMap:Ut,lightMap:Dt,bumpMap:Vt,normalMap:It,displacementMap:he&&Qt,emissiveMap:kt,normalMapObjectSpace:It&&De.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:It&&De.normalMapType===TangentSpaceNormalMap,metalnessMap:qt,roughnessMap:Tn,anisotropy:Sn,anisotropyMap:Ct,clearcoat:We,clearcoatMap:un,clearcoatNormalMap:Yt,clearcoatRoughnessMap:fn,dispersion:Ve,iridescence:ft,iridescenceMap:gn,iridescenceThicknessMap:$t,sheen:Et,sheenColorMap:mt,sheenRoughnessMap:xt,specularMap:Xe,specularColorMap:at,specularIntensityMap:At,transmission:Ft,transmissionMap:Ze,thicknessMap:Ot,gradientMap:Ht,opaque:De.transparent===!1&&De.blending===NormalBlending&&De.alphaToCoverage===!1,alphaMap:en,alphaTest:Kt,alphaHash:zt,combine:De.combine,mapUv:an&&Se(De.map.channel),aoMapUv:Ut&&Se(De.aoMap.channel),lightMapUv:Dt&&Se(De.lightMap.channel),bumpMapUv:Vt&&Se(De.bumpMap.channel),normalMapUv:It&&Se(De.normalMap.channel),displacementMapUv:Qt&&Se(De.displacementMap.channel),emissiveMapUv:kt&&Se(De.emissiveMap.channel),metalnessMapUv:qt&&Se(De.metalnessMap.channel),roughnessMapUv:Tn&&Se(De.roughnessMap.channel),anisotropyMapUv:Ct&&Se(De.anisotropyMap.channel),clearcoatMapUv:un&&Se(De.clearcoatMap.channel),clearcoatNormalMapUv:Yt&&Se(De.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:fn&&Se(De.clearcoatRoughnessMap.channel),iridescenceMapUv:gn&&Se(De.iridescenceMap.channel),iridescenceThicknessMapUv:$t&&Se(De.iridescenceThicknessMap.channel),sheenColorMapUv:mt&&Se(De.sheenColorMap.channel),sheenRoughnessMapUv:xt&&Se(De.sheenRoughnessMap.channel),specularMapUv:Xe&&Se(De.specularMap.channel),specularColorMapUv:at&&Se(De.specularColorMap.channel),specularIntensityMapUv:At&&Se(De.specularIntensityMap.channel),transmissionMapUv:Ze&&Se(De.transmissionMap.channel),thicknessMapUv:Ot&&Se(De.thicknessMap.channel),alphaMapUv:en&&Se(De.alphaMap.channel),vertexTangents:!!rt.attributes.tangent&&(It||Sn),vertexColors:De.vertexColors,vertexAlphas:De.vertexColors===!0&&!!rt.attributes.color&&rt.attributes.color.itemSize===4,pointsUvs:Ye.isPoints===!0&&!!rt.attributes.uv&&(an||en),fog:!!Qe,useFog:De.fog===!0,fogExp2:!!Qe&&Qe.isFogExp2,flatShading:De.flatShading===!0&&De.wireframe===!1,sizeAttenuation:De.sizeAttenuation===!0,logarithmicDepthBuffer:fe,reversedDepthBuffer:Wt,skinning:Ye.isSkinnedMesh===!0,morphTargets:rt.morphAttributes.position!==void 0,morphNormals:rt.morphAttributes.normal!==void 0,morphColors:rt.morphAttributes.color!==void 0,morphTargetsCount:qe,morphTextureStride:lt,numDirLights:ke.directional.length,numPointLights:ke.point.length,numSpotLights:ke.spot.length,numSpotLightMaps:ke.spotLightMap.length,numRectAreaLights:ke.rectArea.length,numHemiLights:ke.hemi.length,numDirLightShadows:ke.directionalShadowMap.length,numPointLightShadows:ke.pointShadowMap.length,numSpotLightShadows:ke.spotShadowMap.length,numSpotLightShadowsWithMaps:ke.numSpotLightShadowsWithMaps,numLightProbes:ke.numLightProbes,numClippingPlanes:se.numPlanes,numClipIntersection:se.numIntersection,dithering:De.dithering,shadowMapEnabled:ne.shadowMap.enabled&&Ge.length>0,shadowMapType:ne.shadowMap.type,toneMapping:Pn,decodeVideoTexture:an&&De.map.isVideoTexture===!0&&ColorManagement.getTransfer(De.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:kt&&De.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(De.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:De.premultipliedAlpha,doubleSided:De.side===DoubleSide,flipSided:De.side===BackSide,useDepthPacking:De.depthPacking>=0,depthPacking:De.depthPacking||0,index0AttributeName:De.index0AttributeName,extensionClipCullDistance:ln&&De.extensions.clipCullDistance===!0&&Z.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ln&&De.extensions.multiDraw===!0||nn)&&Z.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:Z.has("KHR_parallel_shader_compile"),customProgramCacheKey:De.customProgramCacheKey()};return Jn.vertexUv1s=le.has(1),Jn.vertexUv2s=le.has(2),Jn.vertexUv3s=le.has(3),le.clear(),Jn}function ye(De){const ke=[];if(De.shaderID?ke.push(De.shaderID):(ke.push(De.customVertexShaderID),ke.push(De.customFragmentShaderID)),De.defines!==void 0)for(const Ge in De.defines)ke.push(Ge),ke.push(De.defines[Ge]);return De.isRawShaderMaterial===!1&&(be(ke,De),we(ke,De),ke.push(ne.outputColorSpace)),ke.push(De.customProgramCacheKey),ke.join()}function be(De,ke){De.push(ke.precision),De.push(ke.outputColorSpace),De.push(ke.envMapMode),De.push(ke.envMapCubeUVHeight),De.push(ke.mapUv),De.push(ke.alphaMapUv),De.push(ke.lightMapUv),De.push(ke.aoMapUv),De.push(ke.bumpMapUv),De.push(ke.normalMapUv),De.push(ke.displacementMapUv),De.push(ke.emissiveMapUv),De.push(ke.metalnessMapUv),De.push(ke.roughnessMapUv),De.push(ke.anisotropyMapUv),De.push(ke.clearcoatMapUv),De.push(ke.clearcoatNormalMapUv),De.push(ke.clearcoatRoughnessMapUv),De.push(ke.iridescenceMapUv),De.push(ke.iridescenceThicknessMapUv),De.push(ke.sheenColorMapUv),De.push(ke.sheenRoughnessMapUv),De.push(ke.specularMapUv),De.push(ke.specularColorMapUv),De.push(ke.specularIntensityMapUv),De.push(ke.transmissionMapUv),De.push(ke.thicknessMapUv),De.push(ke.combine),De.push(ke.fogExp2),De.push(ke.sizeAttenuation),De.push(ke.morphTargetsCount),De.push(ke.morphAttributeCount),De.push(ke.numDirLights),De.push(ke.numPointLights),De.push(ke.numSpotLights),De.push(ke.numSpotLightMaps),De.push(ke.numHemiLights),De.push(ke.numRectAreaLights),De.push(ke.numDirLightShadows),De.push(ke.numPointLightShadows),De.push(ke.numSpotLightShadows),De.push(ke.numSpotLightShadowsWithMaps),De.push(ke.numLightProbes),De.push(ke.shadowMapType),De.push(ke.toneMapping),De.push(ke.numClippingPlanes),De.push(ke.numClipIntersection),De.push(ke.depthPacking)}function we(De,ke){oe.disableAll(),ke.supportsVertexTextures&&oe.enable(0),ke.instancing&&oe.enable(1),ke.instancingColor&&oe.enable(2),ke.instancingMorph&&oe.enable(3),ke.matcap&&oe.enable(4),ke.envMap&&oe.enable(5),ke.normalMapObjectSpace&&oe.enable(6),ke.normalMapTangentSpace&&oe.enable(7),ke.clearcoat&&oe.enable(8),ke.iridescence&&oe.enable(9),ke.alphaTest&&oe.enable(10),ke.vertexColors&&oe.enable(11),ke.vertexAlphas&&oe.enable(12),ke.vertexUv1s&&oe.enable(13),ke.vertexUv2s&&oe.enable(14),ke.vertexUv3s&&oe.enable(15),ke.vertexTangents&&oe.enable(16),ke.anisotropy&&oe.enable(17),ke.alphaHash&&oe.enable(18),ke.batching&&oe.enable(19),ke.dispersion&&oe.enable(20),ke.batchingColor&&oe.enable(21),ke.gradientMap&&oe.enable(22),De.push(oe.mask),oe.disableAll(),ke.fog&&oe.enable(0),ke.useFog&&oe.enable(1),ke.flatShading&&oe.enable(2),ke.logarithmicDepthBuffer&&oe.enable(3),ke.reversedDepthBuffer&&oe.enable(4),ke.skinning&&oe.enable(5),ke.morphTargets&&oe.enable(6),ke.morphNormals&&oe.enable(7),ke.morphColors&&oe.enable(8),ke.premultipliedAlpha&&oe.enable(9),ke.shadowMapEnabled&&oe.enable(10),ke.doubleSided&&oe.enable(11),ke.flipSided&&oe.enable(12),ke.useDepthPacking&&oe.enable(13),ke.dithering&&oe.enable(14),ke.transmission&&oe.enable(15),ke.sheen&&oe.enable(16),ke.opaque&&oe.enable(17),ke.pointsUvs&&oe.enable(18),ke.decodeVideoTexture&&oe.enable(19),ke.decodeVideoTextureEmissive&&oe.enable(20),ke.alphaToCoverage&&oe.enable(21),De.push(oe.mask)}function Pe(De){const ke=_e[De.type];let Ge;if(ke){const Je=ShaderLib[ke];Ge=UniformsUtils.clone(Je.uniforms)}else Ge=De.uniforms;return Ge}function Oe(De,ke){let Ge;for(let Je=0,Ye=ue.length;Je<Ye;Je++){const Qe=ue[Je];if(Qe.cacheKey===ke){Ge=Qe,++Ge.usedTimes;break}}return Ge===void 0&&(Ge=new WebGLProgram(ne,ke,De,ie),ue.push(Ge)),Ge}function Be(De){if(--De.usedTimes===0){const ke=ue.indexOf(De);ue[ke]=ue[ue.length-1],ue.pop(),De.destroy()}}function Ue(De){ae.remove(De)}function $e(){ae.dispose()}return{getParameters:Ee,getProgramCacheKey:ye,getUniforms:Pe,acquireProgram:Oe,releaseProgram:Be,releaseShaderCache:Ue,programs:ue,dispose:$e}}function WebGLProperties(){let ne=new WeakMap;function _(se){return ne.has(se)}function K(se){let oe=ne.get(se);return oe===void 0&&(oe={},ne.set(se,oe)),oe}function Z(se){ne.delete(se)}function te(se,oe,ae){ne.get(se)[oe]=ae}function ie(){ne=new WeakMap}return{has:_,get:K,remove:Z,update:te,dispose:ie}}function painterSortStable(ne,_){return ne.groupOrder!==_.groupOrder?ne.groupOrder-_.groupOrder:ne.renderOrder!==_.renderOrder?ne.renderOrder-_.renderOrder:ne.material.id!==_.material.id?ne.material.id-_.material.id:ne.z!==_.z?ne.z-_.z:ne.id-_.id}function reversePainterSortStable(ne,_){return ne.groupOrder!==_.groupOrder?ne.groupOrder-_.groupOrder:ne.renderOrder!==_.renderOrder?ne.renderOrder-_.renderOrder:ne.z!==_.z?_.z-ne.z:ne.id-_.id}function WebGLRenderList(){const ne=[];let _=0;const K=[],Z=[],te=[];function ie(){_=0,K.length=0,Z.length=0,te.length=0}function se(fe,he,ge,_e,Se,Ee){let ye=ne[_];return ye===void 0?(ye={id:fe.id,object:fe,geometry:he,material:ge,groupOrder:_e,renderOrder:fe.renderOrder,z:Se,group:Ee},ne[_]=ye):(ye.id=fe.id,ye.object=fe,ye.geometry=he,ye.material=ge,ye.groupOrder=_e,ye.renderOrder=fe.renderOrder,ye.z=Se,ye.group=Ee),_++,ye}function oe(fe,he,ge,_e,Se,Ee){const ye=se(fe,he,ge,_e,Se,Ee);ge.transmission>0?Z.push(ye):ge.transparent===!0?te.push(ye):K.push(ye)}function ae(fe,he,ge,_e,Se,Ee){const ye=se(fe,he,ge,_e,Se,Ee);ge.transmission>0?Z.unshift(ye):ge.transparent===!0?te.unshift(ye):K.unshift(ye)}function le(fe,he){K.length>1&&K.sort(fe||painterSortStable),Z.length>1&&Z.sort(he||reversePainterSortStable),te.length>1&&te.sort(he||reversePainterSortStable)}function ue(){for(let fe=_,he=ne.length;fe<he;fe++){const ge=ne[fe];if(ge.id===null)break;ge.id=null,ge.object=null,ge.geometry=null,ge.material=null,ge.group=null}}return{opaque:K,transmissive:Z,transparent:te,init:ie,push:oe,unshift:ae,finish:ue,sort:le}}function WebGLRenderLists(){let ne=new WeakMap;function _(Z,te){const ie=ne.get(Z);let se;return ie===void 0?(se=new WebGLRenderList,ne.set(Z,[se])):te>=ie.length?(se=new WebGLRenderList,ie.push(se)):se=ie[te],se}function K(){ne=new WeakMap}return{get:_,dispose:K}}function UniformsCache(){const ne={};return{get:function(_){if(ne[_.id]!==void 0)return ne[_.id];let K;switch(_.type){case"DirectionalLight":K={direction:new Vector3,color:new Color$1};break;case"SpotLight":K={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":K={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":K={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":K={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ne[_.id]=K,K}}}function ShadowUniformsCache(){const ne={};return{get:function(_){if(ne[_.id]!==void 0)return ne[_.id];let K;switch(_.type){case"DirectionalLight":K={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":K={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":K={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ne[_.id]=K,K}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(ne,_){return(_.castShadow?2:0)-(ne.castShadow?2:0)+(_.map?1:0)-(ne.map?1:0)}function WebGLLights(ne){const _=new UniformsCache,K=ShadowUniformsCache(),Z={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let le=0;le<9;le++)Z.probe.push(new Vector3);const te=new Vector3,ie=new Matrix4,se=new Matrix4;function oe(le){let ue=0,fe=0,he=0;for(let De=0;De<9;De++)Z.probe[De].set(0,0,0);let ge=0,_e=0,Se=0,Ee=0,ye=0,be=0,we=0,Pe=0,Oe=0,Be=0,Ue=0;le.sort(shadowCastingAndTexturingLightsFirst);for(let De=0,ke=le.length;De<ke;De++){const Ge=le[De],Je=Ge.color,Ye=Ge.intensity,Qe=Ge.distance,rt=Ge.shadow&&Ge.shadow.map?Ge.shadow.map.texture:null;if(Ge.isAmbientLight)ue+=Je.r*Ye,fe+=Je.g*Ye,he+=Je.b*Ye;else if(Ge.isLightProbe){for(let ot=0;ot<9;ot++)Z.probe[ot].addScaledVector(Ge.sh.coefficients[ot],Ye);Ue++}else if(Ge.isDirectionalLight){const ot=_.get(Ge);if(ot.color.copy(Ge.color).multiplyScalar(Ge.intensity),Ge.castShadow){const ct=Ge.shadow,je=K.get(Ge);je.shadowIntensity=ct.intensity,je.shadowBias=ct.bias,je.shadowNormalBias=ct.normalBias,je.shadowRadius=ct.radius,je.shadowMapSize=ct.mapSize,Z.directionalShadow[ge]=je,Z.directionalShadowMap[ge]=rt,Z.directionalShadowMatrix[ge]=Ge.shadow.matrix,be++}Z.directional[ge]=ot,ge++}else if(Ge.isSpotLight){const ot=_.get(Ge);ot.position.setFromMatrixPosition(Ge.matrixWorld),ot.color.copy(Je).multiplyScalar(Ye),ot.distance=Qe,ot.coneCos=Math.cos(Ge.angle),ot.penumbraCos=Math.cos(Ge.angle*(1-Ge.penumbra)),ot.decay=Ge.decay,Z.spot[Se]=ot;const ct=Ge.shadow;if(Ge.map&&(Z.spotLightMap[Oe]=Ge.map,Oe++,ct.updateMatrices(Ge),Ge.castShadow&&Be++),Z.spotLightMatrix[Se]=ct.matrix,Ge.castShadow){const je=K.get(Ge);je.shadowIntensity=ct.intensity,je.shadowBias=ct.bias,je.shadowNormalBias=ct.normalBias,je.shadowRadius=ct.radius,je.shadowMapSize=ct.mapSize,Z.spotShadow[Se]=je,Z.spotShadowMap[Se]=rt,Pe++}Se++}else if(Ge.isRectAreaLight){const ot=_.get(Ge);ot.color.copy(Je).multiplyScalar(Ye),ot.halfWidth.set(Ge.width*.5,0,0),ot.halfHeight.set(0,Ge.height*.5,0),Z.rectArea[Ee]=ot,Ee++}else if(Ge.isPointLight){const ot=_.get(Ge);if(ot.color.copy(Ge.color).multiplyScalar(Ge.intensity),ot.distance=Ge.distance,ot.decay=Ge.decay,Ge.castShadow){const ct=Ge.shadow,je=K.get(Ge);je.shadowIntensity=ct.intensity,je.shadowBias=ct.bias,je.shadowNormalBias=ct.normalBias,je.shadowRadius=ct.radius,je.shadowMapSize=ct.mapSize,je.shadowCameraNear=ct.camera.near,je.shadowCameraFar=ct.camera.far,Z.pointShadow[_e]=je,Z.pointShadowMap[_e]=rt,Z.pointShadowMatrix[_e]=Ge.shadow.matrix,we++}Z.point[_e]=ot,_e++}else if(Ge.isHemisphereLight){const ot=_.get(Ge);ot.skyColor.copy(Ge.color).multiplyScalar(Ye),ot.groundColor.copy(Ge.groundColor).multiplyScalar(Ye),Z.hemi[ye]=ot,ye++}}Ee>0&&(ne.has("OES_texture_float_linear")===!0?(Z.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,Z.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(Z.rectAreaLTC1=UniformsLib.LTC_HALF_1,Z.rectAreaLTC2=UniformsLib.LTC_HALF_2)),Z.ambient[0]=ue,Z.ambient[1]=fe,Z.ambient[2]=he;const $e=Z.hash;($e.directionalLength!==ge||$e.pointLength!==_e||$e.spotLength!==Se||$e.rectAreaLength!==Ee||$e.hemiLength!==ye||$e.numDirectionalShadows!==be||$e.numPointShadows!==we||$e.numSpotShadows!==Pe||$e.numSpotMaps!==Oe||$e.numLightProbes!==Ue)&&(Z.directional.length=ge,Z.spot.length=Se,Z.rectArea.length=Ee,Z.point.length=_e,Z.hemi.length=ye,Z.directionalShadow.length=be,Z.directionalShadowMap.length=be,Z.pointShadow.length=we,Z.pointShadowMap.length=we,Z.spotShadow.length=Pe,Z.spotShadowMap.length=Pe,Z.directionalShadowMatrix.length=be,Z.pointShadowMatrix.length=we,Z.spotLightMatrix.length=Pe+Oe-Be,Z.spotLightMap.length=Oe,Z.numSpotLightShadowsWithMaps=Be,Z.numLightProbes=Ue,$e.directionalLength=ge,$e.pointLength=_e,$e.spotLength=Se,$e.rectAreaLength=Ee,$e.hemiLength=ye,$e.numDirectionalShadows=be,$e.numPointShadows=we,$e.numSpotShadows=Pe,$e.numSpotMaps=Oe,$e.numLightProbes=Ue,Z.version=nextVersion++)}function ae(le,ue){let fe=0,he=0,ge=0,_e=0,Se=0;const Ee=ue.matrixWorldInverse;for(let ye=0,be=le.length;ye<be;ye++){const we=le[ye];if(we.isDirectionalLight){const Pe=Z.directional[fe];Pe.direction.setFromMatrixPosition(we.matrixWorld),te.setFromMatrixPosition(we.target.matrixWorld),Pe.direction.sub(te),Pe.direction.transformDirection(Ee),fe++}else if(we.isSpotLight){const Pe=Z.spot[ge];Pe.position.setFromMatrixPosition(we.matrixWorld),Pe.position.applyMatrix4(Ee),Pe.direction.setFromMatrixPosition(we.matrixWorld),te.setFromMatrixPosition(we.target.matrixWorld),Pe.direction.sub(te),Pe.direction.transformDirection(Ee),ge++}else if(we.isRectAreaLight){const Pe=Z.rectArea[_e];Pe.position.setFromMatrixPosition(we.matrixWorld),Pe.position.applyMatrix4(Ee),se.identity(),ie.copy(we.matrixWorld),ie.premultiply(Ee),se.extractRotation(ie),Pe.halfWidth.set(we.width*.5,0,0),Pe.halfHeight.set(0,we.height*.5,0),Pe.halfWidth.applyMatrix4(se),Pe.halfHeight.applyMatrix4(se),_e++}else if(we.isPointLight){const Pe=Z.point[he];Pe.position.setFromMatrixPosition(we.matrixWorld),Pe.position.applyMatrix4(Ee),he++}else if(we.isHemisphereLight){const Pe=Z.hemi[Se];Pe.direction.setFromMatrixPosition(we.matrixWorld),Pe.direction.transformDirection(Ee),Se++}}}return{setup:oe,setupView:ae,state:Z}}function WebGLRenderState(ne){const _=new WebGLLights(ne),K=[],Z=[];function te(ue){le.camera=ue,K.length=0,Z.length=0}function ie(ue){K.push(ue)}function se(ue){Z.push(ue)}function oe(){_.setup(K)}function ae(ue){_.setupView(K,ue)}const le={lightsArray:K,shadowsArray:Z,camera:null,lights:_,transmissionRenderTarget:{}};return{init:te,state:le,setupLights:oe,setupLightsView:ae,pushLight:ie,pushShadow:se}}function WebGLRenderStates(ne){let _=new WeakMap;function K(te,ie=0){const se=_.get(te);let oe;return se===void 0?(oe=new WebGLRenderState(ne),_.set(te,[oe])):ie>=se.length?(oe=new WebGLRenderState(ne),se.push(oe)):oe=se[ie],oe}function Z(){_=new WeakMap}return{get:K,dispose:Z}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(ne,_,K){let Z=new Frustum;const te=new Vector2,ie=new Vector2,se=new Vector4,oe=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ae=new MeshDistanceMaterial,le={},ue=K.maxTextureSize,fe={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},he=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),ge=he.clone();ge.defines.HORIZONTAL_PASS=1;const _e=new BufferGeometry;_e.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Se=new Mesh(_e,he),Ee=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let ye=this.type;this.render=function(Be,Ue,$e){if(Ee.enabled===!1||Ee.autoUpdate===!1&&Ee.needsUpdate===!1||Be.length===0)return;const De=ne.getRenderTarget(),ke=ne.getActiveCubeFace(),Ge=ne.getActiveMipmapLevel(),Je=ne.state;Je.setBlending(NoBlending),Je.buffers.depth.getReversed()?Je.buffers.color.setClear(0,0,0,0):Je.buffers.color.setClear(1,1,1,1),Je.buffers.depth.setTest(!0),Je.setScissorTest(!1);const Ye=ye!==VSMShadowMap&&this.type===VSMShadowMap,Qe=ye===VSMShadowMap&&this.type!==VSMShadowMap;for(let rt=0,ot=Be.length;rt<ot;rt++){const ct=Be[rt],je=ct.shadow;if(je===void 0){console.warn("THREE.WebGLShadowMap:",ct,"has no shadow.");continue}if(je.autoUpdate===!1&&je.needsUpdate===!1)continue;te.copy(je.mapSize);const st=je.getFrameExtents();if(te.multiply(st),ie.copy(je.mapSize),(te.x>ue||te.y>ue)&&(te.x>ue&&(ie.x=Math.floor(ue/st.x),te.x=ie.x*st.x,je.mapSize.x=ie.x),te.y>ue&&(ie.y=Math.floor(ue/st.y),te.y=ie.y*st.y,je.mapSize.y=ie.y)),je.map===null||Ye===!0||Qe===!0){const qe=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};je.map!==null&&je.map.dispose(),je.map=new WebGLRenderTarget(te.x,te.y,qe),je.map.texture.name=ct.name+".shadowMap",je.camera.updateProjectionMatrix()}ne.setRenderTarget(je.map),ne.clear();const nt=je.getViewportCount();for(let qe=0;qe<nt;qe++){const lt=je.getViewport(qe);se.set(ie.x*lt.x,ie.y*lt.y,ie.x*lt.z,ie.y*lt.w),Je.viewport(se),je.updateMatrices(ct,qe),Z=je.getFrustum(),Pe(Ue,$e,je.camera,ct,this.type)}je.isPointLightShadow!==!0&&this.type===VSMShadowMap&&be(je,$e),je.needsUpdate=!1}ye=this.type,Ee.needsUpdate=!1,ne.setRenderTarget(De,ke,Ge)};function be(Be,Ue){const $e=_.update(Se);he.defines.VSM_SAMPLES!==Be.blurSamples&&(he.defines.VSM_SAMPLES=Be.blurSamples,ge.defines.VSM_SAMPLES=Be.blurSamples,he.needsUpdate=!0,ge.needsUpdate=!0),Be.mapPass===null&&(Be.mapPass=new WebGLRenderTarget(te.x,te.y)),he.uniforms.shadow_pass.value=Be.map.texture,he.uniforms.resolution.value=Be.mapSize,he.uniforms.radius.value=Be.radius,ne.setRenderTarget(Be.mapPass),ne.clear(),ne.renderBufferDirect(Ue,null,$e,he,Se,null),ge.uniforms.shadow_pass.value=Be.mapPass.texture,ge.uniforms.resolution.value=Be.mapSize,ge.uniforms.radius.value=Be.radius,ne.setRenderTarget(Be.map),ne.clear(),ne.renderBufferDirect(Ue,null,$e,ge,Se,null)}function we(Be,Ue,$e,De){let ke=null;const Ge=$e.isPointLight===!0?Be.customDistanceMaterial:Be.customDepthMaterial;if(Ge!==void 0)ke=Ge;else if(ke=$e.isPointLight===!0?ae:oe,ne.localClippingEnabled&&Ue.clipShadows===!0&&Array.isArray(Ue.clippingPlanes)&&Ue.clippingPlanes.length!==0||Ue.displacementMap&&Ue.displacementScale!==0||Ue.alphaMap&&Ue.alphaTest>0||Ue.map&&Ue.alphaTest>0||Ue.alphaToCoverage===!0){const Je=ke.uuid,Ye=Ue.uuid;let Qe=le[Je];Qe===void 0&&(Qe={},le[Je]=Qe);let rt=Qe[Ye];rt===void 0&&(rt=ke.clone(),Qe[Ye]=rt,Ue.addEventListener("dispose",Oe)),ke=rt}if(ke.visible=Ue.visible,ke.wireframe=Ue.wireframe,De===VSMShadowMap?ke.side=Ue.shadowSide!==null?Ue.shadowSide:Ue.side:ke.side=Ue.shadowSide!==null?Ue.shadowSide:fe[Ue.side],ke.alphaMap=Ue.alphaMap,ke.alphaTest=Ue.alphaToCoverage===!0?.5:Ue.alphaTest,ke.map=Ue.map,ke.clipShadows=Ue.clipShadows,ke.clippingPlanes=Ue.clippingPlanes,ke.clipIntersection=Ue.clipIntersection,ke.displacementMap=Ue.displacementMap,ke.displacementScale=Ue.displacementScale,ke.displacementBias=Ue.displacementBias,ke.wireframeLinewidth=Ue.wireframeLinewidth,ke.linewidth=Ue.linewidth,$e.isPointLight===!0&&ke.isMeshDistanceMaterial===!0){const Je=ne.properties.get(ke);Je.light=$e}return ke}function Pe(Be,Ue,$e,De,ke){if(Be.visible===!1)return;if(Be.layers.test(Ue.layers)&&(Be.isMesh||Be.isLine||Be.isPoints)&&(Be.castShadow||Be.receiveShadow&&ke===VSMShadowMap)&&(!Be.frustumCulled||Z.intersectsObject(Be))){Be.modelViewMatrix.multiplyMatrices($e.matrixWorldInverse,Be.matrixWorld);const Ye=_.update(Be),Qe=Be.material;if(Array.isArray(Qe)){const rt=Ye.groups;for(let ot=0,ct=rt.length;ot<ct;ot++){const je=rt[ot],st=Qe[je.materialIndex];if(st&&st.visible){const nt=we(Be,st,De,ke);Be.onBeforeShadow(ne,Be,Ue,$e,Ye,nt,je),ne.renderBufferDirect($e,null,Ye,nt,Be,je),Be.onAfterShadow(ne,Be,Ue,$e,Ye,nt,je)}}}else if(Qe.visible){const rt=we(Be,Qe,De,ke);Be.onBeforeShadow(ne,Be,Ue,$e,Ye,rt,null),ne.renderBufferDirect($e,null,Ye,rt,Be,null),Be.onAfterShadow(ne,Be,Ue,$e,Ye,rt,null)}}const Je=Be.children;for(let Ye=0,Qe=Je.length;Ye<Qe;Ye++)Pe(Je[Ye],Ue,$e,De,ke)}function Oe(Be){Be.target.removeEventListener("dispose",Oe);for(const $e in le){const De=le[$e],ke=Be.target.uuid;ke in De&&(De[ke].dispose(),delete De[ke])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(ne,_){function K(){let Ze=!1;const Ot=new Vector4;let Ht=null;const en=new Vector4(0,0,0,0);return{setMask:function(Kt){Ht!==Kt&&!Ze&&(ne.colorMask(Kt,Kt,Kt,Kt),Ht=Kt)},setLocked:function(Kt){Ze=Kt},setClear:function(Kt,zt,ln,Pn,Jn){Jn===!0&&(Kt*=Pn,zt*=Pn,ln*=Pn),Ot.set(Kt,zt,ln,Pn),en.equals(Ot)===!1&&(ne.clearColor(Kt,zt,ln,Pn),en.copy(Ot))},reset:function(){Ze=!1,Ht=null,en.set(-1,0,0,0)}}}function Z(){let Ze=!1,Ot=!1,Ht=null,en=null,Kt=null;return{setReversed:function(zt){if(Ot!==zt){const ln=_.get("EXT_clip_control");zt?ln.clipControlEXT(ln.LOWER_LEFT_EXT,ln.ZERO_TO_ONE_EXT):ln.clipControlEXT(ln.LOWER_LEFT_EXT,ln.NEGATIVE_ONE_TO_ONE_EXT),Ot=zt;const Pn=Kt;Kt=null,this.setClear(Pn)}},getReversed:function(){return Ot},setTest:function(zt){zt?Bt(ne.DEPTH_TEST):Wt(ne.DEPTH_TEST)},setMask:function(zt){Ht!==zt&&!Ze&&(ne.depthMask(zt),Ht=zt)},setFunc:function(zt){if(Ot&&(zt=reversedFuncs[zt]),en!==zt){switch(zt){case NeverDepth:ne.depthFunc(ne.NEVER);break;case AlwaysDepth:ne.depthFunc(ne.ALWAYS);break;case LessDepth:ne.depthFunc(ne.LESS);break;case LessEqualDepth:ne.depthFunc(ne.LEQUAL);break;case EqualDepth:ne.depthFunc(ne.EQUAL);break;case GreaterEqualDepth:ne.depthFunc(ne.GEQUAL);break;case GreaterDepth:ne.depthFunc(ne.GREATER);break;case NotEqualDepth:ne.depthFunc(ne.NOTEQUAL);break;default:ne.depthFunc(ne.LEQUAL)}en=zt}},setLocked:function(zt){Ze=zt},setClear:function(zt){Kt!==zt&&(Ot&&(zt=1-zt),ne.clearDepth(zt),Kt=zt)},reset:function(){Ze=!1,Ht=null,en=null,Kt=null,Ot=!1}}}function te(){let Ze=!1,Ot=null,Ht=null,en=null,Kt=null,zt=null,ln=null,Pn=null,Jn=null;return{setTest:function(Hn){Ze||(Hn?Bt(ne.STENCIL_TEST):Wt(ne.STENCIL_TEST))},setMask:function(Hn){Ot!==Hn&&!Ze&&(ne.stencilMask(Hn),Ot=Hn)},setFunc:function(Hn,Rr,Er){(Ht!==Hn||en!==Rr||Kt!==Er)&&(ne.stencilFunc(Hn,Rr,Er),Ht=Hn,en=Rr,Kt=Er)},setOp:function(Hn,Rr,Er){(zt!==Hn||ln!==Rr||Pn!==Er)&&(ne.stencilOp(Hn,Rr,Er),zt=Hn,ln=Rr,Pn=Er)},setLocked:function(Hn){Ze=Hn},setClear:function(Hn){Jn!==Hn&&(ne.clearStencil(Hn),Jn=Hn)},reset:function(){Ze=!1,Ot=null,Ht=null,en=null,Kt=null,zt=null,ln=null,Pn=null,Jn=null}}}const ie=new K,se=new Z,oe=new te,ae=new WeakMap,le=new WeakMap;let ue={},fe={},he=new WeakMap,ge=[],_e=null,Se=!1,Ee=null,ye=null,be=null,we=null,Pe=null,Oe=null,Be=null,Ue=new Color$1(0,0,0),$e=0,De=!1,ke=null,Ge=null,Je=null,Ye=null,Qe=null;const rt=ne.getParameter(ne.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ot=!1,ct=0;const je=ne.getParameter(ne.VERSION);je.indexOf("WebGL")!==-1?(ct=parseFloat(/^WebGL (\d)/.exec(je)[1]),ot=ct>=1):je.indexOf("OpenGL ES")!==-1&&(ct=parseFloat(/^OpenGL ES (\d)/.exec(je)[1]),ot=ct>=2);let st=null,nt={};const qe=ne.getParameter(ne.SCISSOR_BOX),lt=ne.getParameter(ne.VIEWPORT),Pt=new Vector4().fromArray(qe),Gt=new Vector4().fromArray(lt);function pt(Ze,Ot,Ht,en){const Kt=new Uint8Array(4),zt=ne.createTexture();ne.bindTexture(Ze,zt),ne.texParameteri(Ze,ne.TEXTURE_MIN_FILTER,ne.NEAREST),ne.texParameteri(Ze,ne.TEXTURE_MAG_FILTER,ne.NEAREST);for(let ln=0;ln<Ht;ln++)Ze===ne.TEXTURE_3D||Ze===ne.TEXTURE_2D_ARRAY?ne.texImage3D(Ot,0,ne.RGBA,1,1,en,0,ne.RGBA,ne.UNSIGNED_BYTE,Kt):ne.texImage2D(Ot+ln,0,ne.RGBA,1,1,0,ne.RGBA,ne.UNSIGNED_BYTE,Kt);return zt}const yt={};yt[ne.TEXTURE_2D]=pt(ne.TEXTURE_2D,ne.TEXTURE_2D,1),yt[ne.TEXTURE_CUBE_MAP]=pt(ne.TEXTURE_CUBE_MAP,ne.TEXTURE_CUBE_MAP_POSITIVE_X,6),yt[ne.TEXTURE_2D_ARRAY]=pt(ne.TEXTURE_2D_ARRAY,ne.TEXTURE_2D_ARRAY,1,1),yt[ne.TEXTURE_3D]=pt(ne.TEXTURE_3D,ne.TEXTURE_3D,1,1),ie.setClear(0,0,0,1),se.setClear(1),oe.setClear(0),Bt(ne.DEPTH_TEST),se.setFunc(LessEqualDepth),Vt(!1),It(CullFaceBack),Bt(ne.CULL_FACE),Ut(NoBlending);function Bt(Ze){ue[Ze]!==!0&&(ne.enable(Ze),ue[Ze]=!0)}function Wt(Ze){ue[Ze]!==!1&&(ne.disable(Ze),ue[Ze]=!1)}function jt(Ze,Ot){return fe[Ze]!==Ot?(ne.bindFramebuffer(Ze,Ot),fe[Ze]=Ot,Ze===ne.DRAW_FRAMEBUFFER&&(fe[ne.FRAMEBUFFER]=Ot),Ze===ne.FRAMEBUFFER&&(fe[ne.DRAW_FRAMEBUFFER]=Ot),!0):!1}function nn(Ze,Ot){let Ht=ge,en=!1;if(Ze){Ht=he.get(Ot),Ht===void 0&&(Ht=[],he.set(Ot,Ht));const Kt=Ze.textures;if(Ht.length!==Kt.length||Ht[0]!==ne.COLOR_ATTACHMENT0){for(let zt=0,ln=Kt.length;zt<ln;zt++)Ht[zt]=ne.COLOR_ATTACHMENT0+zt;Ht.length=Kt.length,en=!0}}else Ht[0]!==ne.BACK&&(Ht[0]=ne.BACK,en=!0);en&&ne.drawBuffers(Ht)}function an(Ze){return _e!==Ze?(ne.useProgram(Ze),_e=Ze,!0):!1}const mn={[AddEquation]:ne.FUNC_ADD,[SubtractEquation]:ne.FUNC_SUBTRACT,[ReverseSubtractEquation]:ne.FUNC_REVERSE_SUBTRACT};mn[MinEquation]=ne.MIN,mn[MaxEquation]=ne.MAX;const tt={[ZeroFactor]:ne.ZERO,[OneFactor]:ne.ONE,[SrcColorFactor]:ne.SRC_COLOR,[SrcAlphaFactor]:ne.SRC_ALPHA,[SrcAlphaSaturateFactor]:ne.SRC_ALPHA_SATURATE,[DstColorFactor]:ne.DST_COLOR,[DstAlphaFactor]:ne.DST_ALPHA,[OneMinusSrcColorFactor]:ne.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:ne.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:ne.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:ne.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:ne.CONSTANT_COLOR,[OneMinusConstantColorFactor]:ne.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:ne.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:ne.ONE_MINUS_CONSTANT_ALPHA};function Ut(Ze,Ot,Ht,en,Kt,zt,ln,Pn,Jn,Hn){if(Ze===NoBlending){Se===!0&&(Wt(ne.BLEND),Se=!1);return}if(Se===!1&&(Bt(ne.BLEND),Se=!0),Ze!==CustomBlending){if(Ze!==Ee||Hn!==De){if((ye!==AddEquation||Pe!==AddEquation)&&(ne.blendEquation(ne.FUNC_ADD),ye=AddEquation,Pe=AddEquation),Hn)switch(Ze){case NormalBlending:ne.blendFuncSeparate(ne.ONE,ne.ONE_MINUS_SRC_ALPHA,ne.ONE,ne.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:ne.blendFunc(ne.ONE,ne.ONE);break;case SubtractiveBlending:ne.blendFuncSeparate(ne.ZERO,ne.ONE_MINUS_SRC_COLOR,ne.ZERO,ne.ONE);break;case MultiplyBlending:ne.blendFuncSeparate(ne.DST_COLOR,ne.ONE_MINUS_SRC_ALPHA,ne.ZERO,ne.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ze);break}else switch(Ze){case NormalBlending:ne.blendFuncSeparate(ne.SRC_ALPHA,ne.ONE_MINUS_SRC_ALPHA,ne.ONE,ne.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:ne.blendFuncSeparate(ne.SRC_ALPHA,ne.ONE,ne.ONE,ne.ONE);break;case SubtractiveBlending:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MultiplyBlending:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Ze);break}be=null,we=null,Oe=null,Be=null,Ue.set(0,0,0),$e=0,Ee=Ze,De=Hn}return}Kt=Kt||Ot,zt=zt||Ht,ln=ln||en,(Ot!==ye||Kt!==Pe)&&(ne.blendEquationSeparate(mn[Ot],mn[Kt]),ye=Ot,Pe=Kt),(Ht!==be||en!==we||zt!==Oe||ln!==Be)&&(ne.blendFuncSeparate(tt[Ht],tt[en],tt[zt],tt[ln]),be=Ht,we=en,Oe=zt,Be=ln),(Pn.equals(Ue)===!1||Jn!==$e)&&(ne.blendColor(Pn.r,Pn.g,Pn.b,Jn),Ue.copy(Pn),$e=Jn),Ee=Ze,De=!1}function Dt(Ze,Ot){Ze.side===DoubleSide?Wt(ne.CULL_FACE):Bt(ne.CULL_FACE);let Ht=Ze.side===BackSide;Ot&&(Ht=!Ht),Vt(Ht),Ze.blending===NormalBlending&&Ze.transparent===!1?Ut(NoBlending):Ut(Ze.blending,Ze.blendEquation,Ze.blendSrc,Ze.blendDst,Ze.blendEquationAlpha,Ze.blendSrcAlpha,Ze.blendDstAlpha,Ze.blendColor,Ze.blendAlpha,Ze.premultipliedAlpha),se.setFunc(Ze.depthFunc),se.setTest(Ze.depthTest),se.setMask(Ze.depthWrite),ie.setMask(Ze.colorWrite);const en=Ze.stencilWrite;oe.setTest(en),en&&(oe.setMask(Ze.stencilWriteMask),oe.setFunc(Ze.stencilFunc,Ze.stencilRef,Ze.stencilFuncMask),oe.setOp(Ze.stencilFail,Ze.stencilZFail,Ze.stencilZPass)),kt(Ze.polygonOffset,Ze.polygonOffsetFactor,Ze.polygonOffsetUnits),Ze.alphaToCoverage===!0?Bt(ne.SAMPLE_ALPHA_TO_COVERAGE):Wt(ne.SAMPLE_ALPHA_TO_COVERAGE)}function Vt(Ze){ke!==Ze&&(Ze?ne.frontFace(ne.CW):ne.frontFace(ne.CCW),ke=Ze)}function It(Ze){Ze!==CullFaceNone?(Bt(ne.CULL_FACE),Ze!==Ge&&(Ze===CullFaceBack?ne.cullFace(ne.BACK):Ze===CullFaceFront?ne.cullFace(ne.FRONT):ne.cullFace(ne.FRONT_AND_BACK))):Wt(ne.CULL_FACE),Ge=Ze}function Qt(Ze){Ze!==Je&&(ot&&ne.lineWidth(Ze),Je=Ze)}function kt(Ze,Ot,Ht){Ze?(Bt(ne.POLYGON_OFFSET_FILL),(Ye!==Ot||Qe!==Ht)&&(ne.polygonOffset(Ot,Ht),Ye=Ot,Qe=Ht)):Wt(ne.POLYGON_OFFSET_FILL)}function qt(Ze){Ze?Bt(ne.SCISSOR_TEST):Wt(ne.SCISSOR_TEST)}function Tn(Ze){Ze===void 0&&(Ze=ne.TEXTURE0+rt-1),st!==Ze&&(ne.activeTexture(Ze),st=Ze)}function Sn(Ze,Ot,Ht){Ht===void 0&&(st===null?Ht=ne.TEXTURE0+rt-1:Ht=st);let en=nt[Ht];en===void 0&&(en={type:void 0,texture:void 0},nt[Ht]=en),(en.type!==Ze||en.texture!==Ot)&&(st!==Ht&&(ne.activeTexture(Ht),st=Ht),ne.bindTexture(Ze,Ot||yt[Ze]),en.type=Ze,en.texture=Ot)}function We(){const Ze=nt[st];Ze!==void 0&&Ze.type!==void 0&&(ne.bindTexture(Ze.type,null),Ze.type=void 0,Ze.texture=void 0)}function Ve(){try{ne.compressedTexImage2D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function ft(){try{ne.compressedTexImage3D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function Et(){try{ne.texSubImage2D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function Ft(){try{ne.texSubImage3D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function Ct(){try{ne.compressedTexSubImage2D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function un(){try{ne.compressedTexSubImage3D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function Yt(){try{ne.texStorage2D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function fn(){try{ne.texStorage3D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function gn(){try{ne.texImage2D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function $t(){try{ne.texImage3D(...arguments)}catch(Ze){console.error("THREE.WebGLState:",Ze)}}function mt(Ze){Pt.equals(Ze)===!1&&(ne.scissor(Ze.x,Ze.y,Ze.z,Ze.w),Pt.copy(Ze))}function xt(Ze){Gt.equals(Ze)===!1&&(ne.viewport(Ze.x,Ze.y,Ze.z,Ze.w),Gt.copy(Ze))}function Xe(Ze,Ot){let Ht=le.get(Ot);Ht===void 0&&(Ht=new WeakMap,le.set(Ot,Ht));let en=Ht.get(Ze);en===void 0&&(en=ne.getUniformBlockIndex(Ot,Ze.name),Ht.set(Ze,en))}function at(Ze,Ot){const en=le.get(Ot).get(Ze);ae.get(Ot)!==en&&(ne.uniformBlockBinding(Ot,en,Ze.__bindingPointIndex),ae.set(Ot,en))}function At(){ne.disable(ne.BLEND),ne.disable(ne.CULL_FACE),ne.disable(ne.DEPTH_TEST),ne.disable(ne.POLYGON_OFFSET_FILL),ne.disable(ne.SCISSOR_TEST),ne.disable(ne.STENCIL_TEST),ne.disable(ne.SAMPLE_ALPHA_TO_COVERAGE),ne.blendEquation(ne.FUNC_ADD),ne.blendFunc(ne.ONE,ne.ZERO),ne.blendFuncSeparate(ne.ONE,ne.ZERO,ne.ONE,ne.ZERO),ne.blendColor(0,0,0,0),ne.colorMask(!0,!0,!0,!0),ne.clearColor(0,0,0,0),ne.depthMask(!0),ne.depthFunc(ne.LESS),se.setReversed(!1),ne.clearDepth(1),ne.stencilMask(4294967295),ne.stencilFunc(ne.ALWAYS,0,4294967295),ne.stencilOp(ne.KEEP,ne.KEEP,ne.KEEP),ne.clearStencil(0),ne.cullFace(ne.BACK),ne.frontFace(ne.CCW),ne.polygonOffset(0,0),ne.activeTexture(ne.TEXTURE0),ne.bindFramebuffer(ne.FRAMEBUFFER,null),ne.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null),ne.bindFramebuffer(ne.READ_FRAMEBUFFER,null),ne.useProgram(null),ne.lineWidth(1),ne.scissor(0,0,ne.canvas.width,ne.canvas.height),ne.viewport(0,0,ne.canvas.width,ne.canvas.height),ue={},st=null,nt={},fe={},he=new WeakMap,ge=[],_e=null,Se=!1,Ee=null,ye=null,be=null,we=null,Pe=null,Oe=null,Be=null,Ue=new Color$1(0,0,0),$e=0,De=!1,ke=null,Ge=null,Je=null,Ye=null,Qe=null,Pt.set(0,0,ne.canvas.width,ne.canvas.height),Gt.set(0,0,ne.canvas.width,ne.canvas.height),ie.reset(),se.reset(),oe.reset()}return{buffers:{color:ie,depth:se,stencil:oe},enable:Bt,disable:Wt,bindFramebuffer:jt,drawBuffers:nn,useProgram:an,setBlending:Ut,setMaterial:Dt,setFlipSided:Vt,setCullFace:It,setLineWidth:Qt,setPolygonOffset:kt,setScissorTest:qt,activeTexture:Tn,bindTexture:Sn,unbindTexture:We,compressedTexImage2D:Ve,compressedTexImage3D:ft,texImage2D:gn,texImage3D:$t,updateUBOMapping:Xe,uniformBlockBinding:at,texStorage2D:Yt,texStorage3D:fn,texSubImage2D:Et,texSubImage3D:Ft,compressedTexSubImage2D:Ct,compressedTexSubImage3D:un,scissor:mt,viewport:xt,reset:At}}function WebGLTextures(ne,_,K,Z,te,ie,se){const oe=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,ae=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),le=new Vector2,ue=new WeakMap;let fe;const he=new WeakMap;let ge=!1;try{ge=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _e(We,Ve){return ge?new OffscreenCanvas(We,Ve):createElementNS("canvas")}function Se(We,Ve,ft){let Et=1;const Ft=Sn(We);if((Ft.width>ft||Ft.height>ft)&&(Et=ft/Math.max(Ft.width,Ft.height)),Et<1)if(typeof HTMLImageElement<"u"&&We instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&We instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&We instanceof ImageBitmap||typeof VideoFrame<"u"&&We instanceof VideoFrame){const Ct=Math.floor(Et*Ft.width),un=Math.floor(Et*Ft.height);fe===void 0&&(fe=_e(Ct,un));const Yt=Ve?_e(Ct,un):fe;return Yt.width=Ct,Yt.height=un,Yt.getContext("2d").drawImage(We,0,0,Ct,un),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ft.width+"x"+Ft.height+") to ("+Ct+"x"+un+")."),Yt}else return"data"in We&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ft.width+"x"+Ft.height+")."),We;return We}function Ee(We){return We.generateMipmaps}function ye(We){ne.generateMipmap(We)}function be(We){return We.isWebGLCubeRenderTarget?ne.TEXTURE_CUBE_MAP:We.isWebGL3DRenderTarget?ne.TEXTURE_3D:We.isWebGLArrayRenderTarget||We.isCompressedArrayTexture?ne.TEXTURE_2D_ARRAY:ne.TEXTURE_2D}function we(We,Ve,ft,Et,Ft=!1){if(We!==null){if(ne[We]!==void 0)return ne[We];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+We+"'")}let Ct=Ve;if(Ve===ne.RED&&(ft===ne.FLOAT&&(Ct=ne.R32F),ft===ne.HALF_FLOAT&&(Ct=ne.R16F),ft===ne.UNSIGNED_BYTE&&(Ct=ne.R8)),Ve===ne.RED_INTEGER&&(ft===ne.UNSIGNED_BYTE&&(Ct=ne.R8UI),ft===ne.UNSIGNED_SHORT&&(Ct=ne.R16UI),ft===ne.UNSIGNED_INT&&(Ct=ne.R32UI),ft===ne.BYTE&&(Ct=ne.R8I),ft===ne.SHORT&&(Ct=ne.R16I),ft===ne.INT&&(Ct=ne.R32I)),Ve===ne.RG&&(ft===ne.FLOAT&&(Ct=ne.RG32F),ft===ne.HALF_FLOAT&&(Ct=ne.RG16F),ft===ne.UNSIGNED_BYTE&&(Ct=ne.RG8)),Ve===ne.RG_INTEGER&&(ft===ne.UNSIGNED_BYTE&&(Ct=ne.RG8UI),ft===ne.UNSIGNED_SHORT&&(Ct=ne.RG16UI),ft===ne.UNSIGNED_INT&&(Ct=ne.RG32UI),ft===ne.BYTE&&(Ct=ne.RG8I),ft===ne.SHORT&&(Ct=ne.RG16I),ft===ne.INT&&(Ct=ne.RG32I)),Ve===ne.RGB_INTEGER&&(ft===ne.UNSIGNED_BYTE&&(Ct=ne.RGB8UI),ft===ne.UNSIGNED_SHORT&&(Ct=ne.RGB16UI),ft===ne.UNSIGNED_INT&&(Ct=ne.RGB32UI),ft===ne.BYTE&&(Ct=ne.RGB8I),ft===ne.SHORT&&(Ct=ne.RGB16I),ft===ne.INT&&(Ct=ne.RGB32I)),Ve===ne.RGBA_INTEGER&&(ft===ne.UNSIGNED_BYTE&&(Ct=ne.RGBA8UI),ft===ne.UNSIGNED_SHORT&&(Ct=ne.RGBA16UI),ft===ne.UNSIGNED_INT&&(Ct=ne.RGBA32UI),ft===ne.BYTE&&(Ct=ne.RGBA8I),ft===ne.SHORT&&(Ct=ne.RGBA16I),ft===ne.INT&&(Ct=ne.RGBA32I)),Ve===ne.RGB&&ft===ne.UNSIGNED_INT_5_9_9_9_REV&&(Ct=ne.RGB9_E5),Ve===ne.RGBA){const un=Ft?LinearTransfer:ColorManagement.getTransfer(Et);ft===ne.FLOAT&&(Ct=ne.RGBA32F),ft===ne.HALF_FLOAT&&(Ct=ne.RGBA16F),ft===ne.UNSIGNED_BYTE&&(Ct=un===SRGBTransfer?ne.SRGB8_ALPHA8:ne.RGBA8),ft===ne.UNSIGNED_SHORT_4_4_4_4&&(Ct=ne.RGBA4),ft===ne.UNSIGNED_SHORT_5_5_5_1&&(Ct=ne.RGB5_A1)}return(Ct===ne.R16F||Ct===ne.R32F||Ct===ne.RG16F||Ct===ne.RG32F||Ct===ne.RGBA16F||Ct===ne.RGBA32F)&&_.get("EXT_color_buffer_float"),Ct}function Pe(We,Ve){let ft;return We?Ve===null||Ve===UnsignedIntType||Ve===UnsignedInt248Type?ft=ne.DEPTH24_STENCIL8:Ve===FloatType?ft=ne.DEPTH32F_STENCIL8:Ve===UnsignedShortType&&(ft=ne.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Ve===null||Ve===UnsignedIntType||Ve===UnsignedInt248Type?ft=ne.DEPTH_COMPONENT24:Ve===FloatType?ft=ne.DEPTH_COMPONENT32F:Ve===UnsignedShortType&&(ft=ne.DEPTH_COMPONENT16),ft}function Oe(We,Ve){return Ee(We)===!0||We.isFramebufferTexture&&We.minFilter!==NearestFilter&&We.minFilter!==LinearFilter?Math.log2(Math.max(Ve.width,Ve.height))+1:We.mipmaps!==void 0&&We.mipmaps.length>0?We.mipmaps.length:We.isCompressedTexture&&Array.isArray(We.image)?Ve.mipmaps.length:1}function Be(We){const Ve=We.target;Ve.removeEventListener("dispose",Be),$e(Ve),Ve.isVideoTexture&&ue.delete(Ve)}function Ue(We){const Ve=We.target;Ve.removeEventListener("dispose",Ue),ke(Ve)}function $e(We){const Ve=Z.get(We);if(Ve.__webglInit===void 0)return;const ft=We.source,Et=he.get(ft);if(Et){const Ft=Et[Ve.__cacheKey];Ft.usedTimes--,Ft.usedTimes===0&&De(We),Object.keys(Et).length===0&&he.delete(ft)}Z.remove(We)}function De(We){const Ve=Z.get(We);ne.deleteTexture(Ve.__webglTexture);const ft=We.source,Et=he.get(ft);delete Et[Ve.__cacheKey],se.memory.textures--}function ke(We){const Ve=Z.get(We);if(We.depthTexture&&(We.depthTexture.dispose(),Z.remove(We.depthTexture)),We.isWebGLCubeRenderTarget)for(let Et=0;Et<6;Et++){if(Array.isArray(Ve.__webglFramebuffer[Et]))for(let Ft=0;Ft<Ve.__webglFramebuffer[Et].length;Ft++)ne.deleteFramebuffer(Ve.__webglFramebuffer[Et][Ft]);else ne.deleteFramebuffer(Ve.__webglFramebuffer[Et]);Ve.__webglDepthbuffer&&ne.deleteRenderbuffer(Ve.__webglDepthbuffer[Et])}else{if(Array.isArray(Ve.__webglFramebuffer))for(let Et=0;Et<Ve.__webglFramebuffer.length;Et++)ne.deleteFramebuffer(Ve.__webglFramebuffer[Et]);else ne.deleteFramebuffer(Ve.__webglFramebuffer);if(Ve.__webglDepthbuffer&&ne.deleteRenderbuffer(Ve.__webglDepthbuffer),Ve.__webglMultisampledFramebuffer&&ne.deleteFramebuffer(Ve.__webglMultisampledFramebuffer),Ve.__webglColorRenderbuffer)for(let Et=0;Et<Ve.__webglColorRenderbuffer.length;Et++)Ve.__webglColorRenderbuffer[Et]&&ne.deleteRenderbuffer(Ve.__webglColorRenderbuffer[Et]);Ve.__webglDepthRenderbuffer&&ne.deleteRenderbuffer(Ve.__webglDepthRenderbuffer)}const ft=We.textures;for(let Et=0,Ft=ft.length;Et<Ft;Et++){const Ct=Z.get(ft[Et]);Ct.__webglTexture&&(ne.deleteTexture(Ct.__webglTexture),se.memory.textures--),Z.remove(ft[Et])}Z.remove(We)}let Ge=0;function Je(){Ge=0}function Ye(){const We=Ge;return We>=te.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+We+" texture units while this GPU supports only "+te.maxTextures),Ge+=1,We}function Qe(We){const Ve=[];return Ve.push(We.wrapS),Ve.push(We.wrapT),Ve.push(We.wrapR||0),Ve.push(We.magFilter),Ve.push(We.minFilter),Ve.push(We.anisotropy),Ve.push(We.internalFormat),Ve.push(We.format),Ve.push(We.type),Ve.push(We.generateMipmaps),Ve.push(We.premultiplyAlpha),Ve.push(We.flipY),Ve.push(We.unpackAlignment),Ve.push(We.colorSpace),Ve.join()}function rt(We,Ve){const ft=Z.get(We);if(We.isVideoTexture&&qt(We),We.isRenderTargetTexture===!1&&We.isExternalTexture!==!0&&We.version>0&&ft.__version!==We.version){const Et=We.image;if(Et===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Et.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{yt(ft,We,Ve);return}}else We.isExternalTexture&&(ft.__webglTexture=We.sourceTexture?We.sourceTexture:null);K.bindTexture(ne.TEXTURE_2D,ft.__webglTexture,ne.TEXTURE0+Ve)}function ot(We,Ve){const ft=Z.get(We);if(We.isRenderTargetTexture===!1&&We.version>0&&ft.__version!==We.version){yt(ft,We,Ve);return}K.bindTexture(ne.TEXTURE_2D_ARRAY,ft.__webglTexture,ne.TEXTURE0+Ve)}function ct(We,Ve){const ft=Z.get(We);if(We.isRenderTargetTexture===!1&&We.version>0&&ft.__version!==We.version){yt(ft,We,Ve);return}K.bindTexture(ne.TEXTURE_3D,ft.__webglTexture,ne.TEXTURE0+Ve)}function je(We,Ve){const ft=Z.get(We);if(We.version>0&&ft.__version!==We.version){Bt(ft,We,Ve);return}K.bindTexture(ne.TEXTURE_CUBE_MAP,ft.__webglTexture,ne.TEXTURE0+Ve)}const st={[RepeatWrapping]:ne.REPEAT,[ClampToEdgeWrapping]:ne.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:ne.MIRRORED_REPEAT},nt={[NearestFilter]:ne.NEAREST,[NearestMipmapNearestFilter]:ne.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:ne.NEAREST_MIPMAP_LINEAR,[LinearFilter]:ne.LINEAR,[LinearMipmapNearestFilter]:ne.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:ne.LINEAR_MIPMAP_LINEAR},qe={[NeverCompare]:ne.NEVER,[AlwaysCompare]:ne.ALWAYS,[LessCompare]:ne.LESS,[LessEqualCompare]:ne.LEQUAL,[EqualCompare]:ne.EQUAL,[GreaterEqualCompare]:ne.GEQUAL,[GreaterCompare]:ne.GREATER,[NotEqualCompare]:ne.NOTEQUAL};function lt(We,Ve){if(Ve.type===FloatType&&_.has("OES_texture_float_linear")===!1&&(Ve.magFilter===LinearFilter||Ve.magFilter===LinearMipmapNearestFilter||Ve.magFilter===NearestMipmapLinearFilter||Ve.magFilter===LinearMipmapLinearFilter||Ve.minFilter===LinearFilter||Ve.minFilter===LinearMipmapNearestFilter||Ve.minFilter===NearestMipmapLinearFilter||Ve.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ne.texParameteri(We,ne.TEXTURE_WRAP_S,st[Ve.wrapS]),ne.texParameteri(We,ne.TEXTURE_WRAP_T,st[Ve.wrapT]),(We===ne.TEXTURE_3D||We===ne.TEXTURE_2D_ARRAY)&&ne.texParameteri(We,ne.TEXTURE_WRAP_R,st[Ve.wrapR]),ne.texParameteri(We,ne.TEXTURE_MAG_FILTER,nt[Ve.magFilter]),ne.texParameteri(We,ne.TEXTURE_MIN_FILTER,nt[Ve.minFilter]),Ve.compareFunction&&(ne.texParameteri(We,ne.TEXTURE_COMPARE_MODE,ne.COMPARE_REF_TO_TEXTURE),ne.texParameteri(We,ne.TEXTURE_COMPARE_FUNC,qe[Ve.compareFunction])),_.has("EXT_texture_filter_anisotropic")===!0){if(Ve.magFilter===NearestFilter||Ve.minFilter!==NearestMipmapLinearFilter&&Ve.minFilter!==LinearMipmapLinearFilter||Ve.type===FloatType&&_.has("OES_texture_float_linear")===!1)return;if(Ve.anisotropy>1||Z.get(Ve).__currentAnisotropy){const ft=_.get("EXT_texture_filter_anisotropic");ne.texParameterf(We,ft.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ve.anisotropy,te.getMaxAnisotropy())),Z.get(Ve).__currentAnisotropy=Ve.anisotropy}}}function Pt(We,Ve){let ft=!1;We.__webglInit===void 0&&(We.__webglInit=!0,Ve.addEventListener("dispose",Be));const Et=Ve.source;let Ft=he.get(Et);Ft===void 0&&(Ft={},he.set(Et,Ft));const Ct=Qe(Ve);if(Ct!==We.__cacheKey){Ft[Ct]===void 0&&(Ft[Ct]={texture:ne.createTexture(),usedTimes:0},se.memory.textures++,ft=!0),Ft[Ct].usedTimes++;const un=Ft[We.__cacheKey];un!==void 0&&(Ft[We.__cacheKey].usedTimes--,un.usedTimes===0&&De(Ve)),We.__cacheKey=Ct,We.__webglTexture=Ft[Ct].texture}return ft}function Gt(We,Ve,ft){return Math.floor(Math.floor(We/ft)/Ve)}function pt(We,Ve,ft,Et){const Ct=We.updateRanges;if(Ct.length===0)K.texSubImage2D(ne.TEXTURE_2D,0,0,0,Ve.width,Ve.height,ft,Et,Ve.data);else{Ct.sort(($t,mt)=>$t.start-mt.start);let un=0;for(let $t=1;$t<Ct.length;$t++){const mt=Ct[un],xt=Ct[$t],Xe=mt.start+mt.count,at=Gt(xt.start,Ve.width,4),At=Gt(mt.start,Ve.width,4);xt.start<=Xe+1&&at===At&&Gt(xt.start+xt.count-1,Ve.width,4)===at?mt.count=Math.max(mt.count,xt.start+xt.count-mt.start):(++un,Ct[un]=xt)}Ct.length=un+1;const Yt=ne.getParameter(ne.UNPACK_ROW_LENGTH),fn=ne.getParameter(ne.UNPACK_SKIP_PIXELS),gn=ne.getParameter(ne.UNPACK_SKIP_ROWS);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Ve.width);for(let $t=0,mt=Ct.length;$t<mt;$t++){const xt=Ct[$t],Xe=Math.floor(xt.start/4),at=Math.ceil(xt.count/4),At=Xe%Ve.width,Ze=Math.floor(Xe/Ve.width),Ot=at,Ht=1;ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,At),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Ze),K.texSubImage2D(ne.TEXTURE_2D,0,At,Ze,Ot,Ht,ft,Et,Ve.data)}We.clearUpdateRanges(),ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Yt),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,fn),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,gn)}}function yt(We,Ve,ft){let Et=ne.TEXTURE_2D;(Ve.isDataArrayTexture||Ve.isCompressedArrayTexture)&&(Et=ne.TEXTURE_2D_ARRAY),Ve.isData3DTexture&&(Et=ne.TEXTURE_3D);const Ft=Pt(We,Ve),Ct=Ve.source;K.bindTexture(Et,We.__webglTexture,ne.TEXTURE0+ft);const un=Z.get(Ct);if(Ct.version!==un.__version||Ft===!0){K.activeTexture(ne.TEXTURE0+ft);const Yt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),fn=Ve.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Ve.colorSpace),gn=Ve.colorSpace===NoColorSpace||Yt===fn?ne.NONE:ne.BROWSER_DEFAULT_WEBGL;ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,Ve.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,Ve.unpackAlignment),ne.pixelStorei(ne.UNPACK_COLORSPACE_CONVERSION_WEBGL,gn);let $t=Se(Ve.image,!1,te.maxTextureSize);$t=Tn(Ve,$t);const mt=ie.convert(Ve.format,Ve.colorSpace),xt=ie.convert(Ve.type);let Xe=we(Ve.internalFormat,mt,xt,Ve.colorSpace,Ve.isVideoTexture);lt(Et,Ve);let at;const At=Ve.mipmaps,Ze=Ve.isVideoTexture!==!0,Ot=un.__version===void 0||Ft===!0,Ht=Ct.dataReady,en=Oe(Ve,$t);if(Ve.isDepthTexture)Xe=Pe(Ve.format===DepthStencilFormat,Ve.type),Ot&&(Ze?K.texStorage2D(ne.TEXTURE_2D,1,Xe,$t.width,$t.height):K.texImage2D(ne.TEXTURE_2D,0,Xe,$t.width,$t.height,0,mt,xt,null));else if(Ve.isDataTexture)if(At.length>0){Ze&&Ot&&K.texStorage2D(ne.TEXTURE_2D,en,Xe,At[0].width,At[0].height);for(let Kt=0,zt=At.length;Kt<zt;Kt++)at=At[Kt],Ze?Ht&&K.texSubImage2D(ne.TEXTURE_2D,Kt,0,0,at.width,at.height,mt,xt,at.data):K.texImage2D(ne.TEXTURE_2D,Kt,Xe,at.width,at.height,0,mt,xt,at.data);Ve.generateMipmaps=!1}else Ze?(Ot&&K.texStorage2D(ne.TEXTURE_2D,en,Xe,$t.width,$t.height),Ht&&pt(Ve,$t,mt,xt)):K.texImage2D(ne.TEXTURE_2D,0,Xe,$t.width,$t.height,0,mt,xt,$t.data);else if(Ve.isCompressedTexture)if(Ve.isCompressedArrayTexture){Ze&&Ot&&K.texStorage3D(ne.TEXTURE_2D_ARRAY,en,Xe,At[0].width,At[0].height,$t.depth);for(let Kt=0,zt=At.length;Kt<zt;Kt++)if(at=At[Kt],Ve.format!==RGBAFormat)if(mt!==null)if(Ze){if(Ht)if(Ve.layerUpdates.size>0){const ln=getByteLength(at.width,at.height,Ve.format,Ve.type);for(const Pn of Ve.layerUpdates){const Jn=at.data.subarray(Pn*ln/at.data.BYTES_PER_ELEMENT,(Pn+1)*ln/at.data.BYTES_PER_ELEMENT);K.compressedTexSubImage3D(ne.TEXTURE_2D_ARRAY,Kt,0,0,Pn,at.width,at.height,1,mt,Jn)}Ve.clearLayerUpdates()}else K.compressedTexSubImage3D(ne.TEXTURE_2D_ARRAY,Kt,0,0,0,at.width,at.height,$t.depth,mt,at.data)}else K.compressedTexImage3D(ne.TEXTURE_2D_ARRAY,Kt,Xe,at.width,at.height,$t.depth,0,at.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ze?Ht&&K.texSubImage3D(ne.TEXTURE_2D_ARRAY,Kt,0,0,0,at.width,at.height,$t.depth,mt,xt,at.data):K.texImage3D(ne.TEXTURE_2D_ARRAY,Kt,Xe,at.width,at.height,$t.depth,0,mt,xt,at.data)}else{Ze&&Ot&&K.texStorage2D(ne.TEXTURE_2D,en,Xe,At[0].width,At[0].height);for(let Kt=0,zt=At.length;Kt<zt;Kt++)at=At[Kt],Ve.format!==RGBAFormat?mt!==null?Ze?Ht&&K.compressedTexSubImage2D(ne.TEXTURE_2D,Kt,0,0,at.width,at.height,mt,at.data):K.compressedTexImage2D(ne.TEXTURE_2D,Kt,Xe,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ze?Ht&&K.texSubImage2D(ne.TEXTURE_2D,Kt,0,0,at.width,at.height,mt,xt,at.data):K.texImage2D(ne.TEXTURE_2D,Kt,Xe,at.width,at.height,0,mt,xt,at.data)}else if(Ve.isDataArrayTexture)if(Ze){if(Ot&&K.texStorage3D(ne.TEXTURE_2D_ARRAY,en,Xe,$t.width,$t.height,$t.depth),Ht)if(Ve.layerUpdates.size>0){const Kt=getByteLength($t.width,$t.height,Ve.format,Ve.type);for(const zt of Ve.layerUpdates){const ln=$t.data.subarray(zt*Kt/$t.data.BYTES_PER_ELEMENT,(zt+1)*Kt/$t.data.BYTES_PER_ELEMENT);K.texSubImage3D(ne.TEXTURE_2D_ARRAY,0,0,0,zt,$t.width,$t.height,1,mt,xt,ln)}Ve.clearLayerUpdates()}else K.texSubImage3D(ne.TEXTURE_2D_ARRAY,0,0,0,0,$t.width,$t.height,$t.depth,mt,xt,$t.data)}else K.texImage3D(ne.TEXTURE_2D_ARRAY,0,Xe,$t.width,$t.height,$t.depth,0,mt,xt,$t.data);else if(Ve.isData3DTexture)Ze?(Ot&&K.texStorage3D(ne.TEXTURE_3D,en,Xe,$t.width,$t.height,$t.depth),Ht&&K.texSubImage3D(ne.TEXTURE_3D,0,0,0,0,$t.width,$t.height,$t.depth,mt,xt,$t.data)):K.texImage3D(ne.TEXTURE_3D,0,Xe,$t.width,$t.height,$t.depth,0,mt,xt,$t.data);else if(Ve.isFramebufferTexture){if(Ot)if(Ze)K.texStorage2D(ne.TEXTURE_2D,en,Xe,$t.width,$t.height);else{let Kt=$t.width,zt=$t.height;for(let ln=0;ln<en;ln++)K.texImage2D(ne.TEXTURE_2D,ln,Xe,Kt,zt,0,mt,xt,null),Kt>>=1,zt>>=1}}else if(At.length>0){if(Ze&&Ot){const Kt=Sn(At[0]);K.texStorage2D(ne.TEXTURE_2D,en,Xe,Kt.width,Kt.height)}for(let Kt=0,zt=At.length;Kt<zt;Kt++)at=At[Kt],Ze?Ht&&K.texSubImage2D(ne.TEXTURE_2D,Kt,0,0,mt,xt,at):K.texImage2D(ne.TEXTURE_2D,Kt,Xe,mt,xt,at);Ve.generateMipmaps=!1}else if(Ze){if(Ot){const Kt=Sn($t);K.texStorage2D(ne.TEXTURE_2D,en,Xe,Kt.width,Kt.height)}Ht&&K.texSubImage2D(ne.TEXTURE_2D,0,0,0,mt,xt,$t)}else K.texImage2D(ne.TEXTURE_2D,0,Xe,mt,xt,$t);Ee(Ve)&&ye(Et),un.__version=Ct.version,Ve.onUpdate&&Ve.onUpdate(Ve)}We.__version=Ve.version}function Bt(We,Ve,ft){if(Ve.image.length!==6)return;const Et=Pt(We,Ve),Ft=Ve.source;K.bindTexture(ne.TEXTURE_CUBE_MAP,We.__webglTexture,ne.TEXTURE0+ft);const Ct=Z.get(Ft);if(Ft.version!==Ct.__version||Et===!0){K.activeTexture(ne.TEXTURE0+ft);const un=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Yt=Ve.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Ve.colorSpace),fn=Ve.colorSpace===NoColorSpace||un===Yt?ne.NONE:ne.BROWSER_DEFAULT_WEBGL;ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,Ve.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,Ve.unpackAlignment),ne.pixelStorei(ne.UNPACK_COLORSPACE_CONVERSION_WEBGL,fn);const gn=Ve.isCompressedTexture||Ve.image[0].isCompressedTexture,$t=Ve.image[0]&&Ve.image[0].isDataTexture,mt=[];for(let zt=0;zt<6;zt++)!gn&&!$t?mt[zt]=Se(Ve.image[zt],!0,te.maxCubemapSize):mt[zt]=$t?Ve.image[zt].image:Ve.image[zt],mt[zt]=Tn(Ve,mt[zt]);const xt=mt[0],Xe=ie.convert(Ve.format,Ve.colorSpace),at=ie.convert(Ve.type),At=we(Ve.internalFormat,Xe,at,Ve.colorSpace),Ze=Ve.isVideoTexture!==!0,Ot=Ct.__version===void 0||Et===!0,Ht=Ft.dataReady;let en=Oe(Ve,xt);lt(ne.TEXTURE_CUBE_MAP,Ve);let Kt;if(gn){Ze&&Ot&&K.texStorage2D(ne.TEXTURE_CUBE_MAP,en,At,xt.width,xt.height);for(let zt=0;zt<6;zt++){Kt=mt[zt].mipmaps;for(let ln=0;ln<Kt.length;ln++){const Pn=Kt[ln];Ve.format!==RGBAFormat?Xe!==null?Ze?Ht&&K.compressedTexSubImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln,0,0,Pn.width,Pn.height,Xe,Pn.data):K.compressedTexImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln,At,Pn.width,Pn.height,0,Pn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?Ht&&K.texSubImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln,0,0,Pn.width,Pn.height,Xe,at,Pn.data):K.texImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln,At,Pn.width,Pn.height,0,Xe,at,Pn.data)}}}else{if(Kt=Ve.mipmaps,Ze&&Ot){Kt.length>0&&en++;const zt=Sn(mt[0]);K.texStorage2D(ne.TEXTURE_CUBE_MAP,en,At,zt.width,zt.height)}for(let zt=0;zt<6;zt++)if($t){Ze?Ht&&K.texSubImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,0,0,0,mt[zt].width,mt[zt].height,Xe,at,mt[zt].data):K.texImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,0,At,mt[zt].width,mt[zt].height,0,Xe,at,mt[zt].data);for(let ln=0;ln<Kt.length;ln++){const Jn=Kt[ln].image[zt].image;Ze?Ht&&K.texSubImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln+1,0,0,Jn.width,Jn.height,Xe,at,Jn.data):K.texImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln+1,At,Jn.width,Jn.height,0,Xe,at,Jn.data)}}else{Ze?Ht&&K.texSubImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,0,0,0,Xe,at,mt[zt]):K.texImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,0,At,Xe,at,mt[zt]);for(let ln=0;ln<Kt.length;ln++){const Pn=Kt[ln];Ze?Ht&&K.texSubImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln+1,0,0,Xe,at,Pn.image[zt]):K.texImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+zt,ln+1,At,Xe,at,Pn.image[zt])}}}Ee(Ve)&&ye(ne.TEXTURE_CUBE_MAP),Ct.__version=Ft.version,Ve.onUpdate&&Ve.onUpdate(Ve)}We.__version=Ve.version}function Wt(We,Ve,ft,Et,Ft,Ct){const un=ie.convert(ft.format,ft.colorSpace),Yt=ie.convert(ft.type),fn=we(ft.internalFormat,un,Yt,ft.colorSpace),gn=Z.get(Ve),$t=Z.get(ft);if($t.__renderTarget=Ve,!gn.__hasExternalTextures){const mt=Math.max(1,Ve.width>>Ct),xt=Math.max(1,Ve.height>>Ct);Ft===ne.TEXTURE_3D||Ft===ne.TEXTURE_2D_ARRAY?K.texImage3D(Ft,Ct,fn,mt,xt,Ve.depth,0,un,Yt,null):K.texImage2D(Ft,Ct,fn,mt,xt,0,un,Yt,null)}K.bindFramebuffer(ne.FRAMEBUFFER,We),kt(Ve)?oe.framebufferTexture2DMultisampleEXT(ne.FRAMEBUFFER,Et,Ft,$t.__webglTexture,0,Qt(Ve)):(Ft===ne.TEXTURE_2D||Ft>=ne.TEXTURE_CUBE_MAP_POSITIVE_X&&Ft<=ne.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&ne.framebufferTexture2D(ne.FRAMEBUFFER,Et,Ft,$t.__webglTexture,Ct),K.bindFramebuffer(ne.FRAMEBUFFER,null)}function jt(We,Ve,ft){if(ne.bindRenderbuffer(ne.RENDERBUFFER,We),Ve.depthBuffer){const Et=Ve.depthTexture,Ft=Et&&Et.isDepthTexture?Et.type:null,Ct=Pe(Ve.stencilBuffer,Ft),un=Ve.stencilBuffer?ne.DEPTH_STENCIL_ATTACHMENT:ne.DEPTH_ATTACHMENT,Yt=Qt(Ve);kt(Ve)?oe.renderbufferStorageMultisampleEXT(ne.RENDERBUFFER,Yt,Ct,Ve.width,Ve.height):ft?ne.renderbufferStorageMultisample(ne.RENDERBUFFER,Yt,Ct,Ve.width,Ve.height):ne.renderbufferStorage(ne.RENDERBUFFER,Ct,Ve.width,Ve.height),ne.framebufferRenderbuffer(ne.FRAMEBUFFER,un,ne.RENDERBUFFER,We)}else{const Et=Ve.textures;for(let Ft=0;Ft<Et.length;Ft++){const Ct=Et[Ft],un=ie.convert(Ct.format,Ct.colorSpace),Yt=ie.convert(Ct.type),fn=we(Ct.internalFormat,un,Yt,Ct.colorSpace),gn=Qt(Ve);ft&&kt(Ve)===!1?ne.renderbufferStorageMultisample(ne.RENDERBUFFER,gn,fn,Ve.width,Ve.height):kt(Ve)?oe.renderbufferStorageMultisampleEXT(ne.RENDERBUFFER,gn,fn,Ve.width,Ve.height):ne.renderbufferStorage(ne.RENDERBUFFER,fn,Ve.width,Ve.height)}}ne.bindRenderbuffer(ne.RENDERBUFFER,null)}function nn(We,Ve){if(Ve&&Ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(K.bindFramebuffer(ne.FRAMEBUFFER,We),!(Ve.depthTexture&&Ve.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Et=Z.get(Ve.depthTexture);Et.__renderTarget=Ve,(!Et.__webglTexture||Ve.depthTexture.image.width!==Ve.width||Ve.depthTexture.image.height!==Ve.height)&&(Ve.depthTexture.image.width=Ve.width,Ve.depthTexture.image.height=Ve.height,Ve.depthTexture.needsUpdate=!0),rt(Ve.depthTexture,0);const Ft=Et.__webglTexture,Ct=Qt(Ve);if(Ve.depthTexture.format===DepthFormat)kt(Ve)?oe.framebufferTexture2DMultisampleEXT(ne.FRAMEBUFFER,ne.DEPTH_ATTACHMENT,ne.TEXTURE_2D,Ft,0,Ct):ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.DEPTH_ATTACHMENT,ne.TEXTURE_2D,Ft,0);else if(Ve.depthTexture.format===DepthStencilFormat)kt(Ve)?oe.framebufferTexture2DMultisampleEXT(ne.FRAMEBUFFER,ne.DEPTH_STENCIL_ATTACHMENT,ne.TEXTURE_2D,Ft,0,Ct):ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.DEPTH_STENCIL_ATTACHMENT,ne.TEXTURE_2D,Ft,0);else throw new Error("Unknown depthTexture format")}function an(We){const Ve=Z.get(We),ft=We.isWebGLCubeRenderTarget===!0;if(Ve.__boundDepthTexture!==We.depthTexture){const Et=We.depthTexture;if(Ve.__depthDisposeCallback&&Ve.__depthDisposeCallback(),Et){const Ft=()=>{delete Ve.__boundDepthTexture,delete Ve.__depthDisposeCallback,Et.removeEventListener("dispose",Ft)};Et.addEventListener("dispose",Ft),Ve.__depthDisposeCallback=Ft}Ve.__boundDepthTexture=Et}if(We.depthTexture&&!Ve.__autoAllocateDepthBuffer){if(ft)throw new Error("target.depthTexture not supported in Cube render targets");const Et=We.texture.mipmaps;Et&&Et.length>0?nn(Ve.__webglFramebuffer[0],We):nn(Ve.__webglFramebuffer,We)}else if(ft){Ve.__webglDepthbuffer=[];for(let Et=0;Et<6;Et++)if(K.bindFramebuffer(ne.FRAMEBUFFER,Ve.__webglFramebuffer[Et]),Ve.__webglDepthbuffer[Et]===void 0)Ve.__webglDepthbuffer[Et]=ne.createRenderbuffer(),jt(Ve.__webglDepthbuffer[Et],We,!1);else{const Ft=We.stencilBuffer?ne.DEPTH_STENCIL_ATTACHMENT:ne.DEPTH_ATTACHMENT,Ct=Ve.__webglDepthbuffer[Et];ne.bindRenderbuffer(ne.RENDERBUFFER,Ct),ne.framebufferRenderbuffer(ne.FRAMEBUFFER,Ft,ne.RENDERBUFFER,Ct)}}else{const Et=We.texture.mipmaps;if(Et&&Et.length>0?K.bindFramebuffer(ne.FRAMEBUFFER,Ve.__webglFramebuffer[0]):K.bindFramebuffer(ne.FRAMEBUFFER,Ve.__webglFramebuffer),Ve.__webglDepthbuffer===void 0)Ve.__webglDepthbuffer=ne.createRenderbuffer(),jt(Ve.__webglDepthbuffer,We,!1);else{const Ft=We.stencilBuffer?ne.DEPTH_STENCIL_ATTACHMENT:ne.DEPTH_ATTACHMENT,Ct=Ve.__webglDepthbuffer;ne.bindRenderbuffer(ne.RENDERBUFFER,Ct),ne.framebufferRenderbuffer(ne.FRAMEBUFFER,Ft,ne.RENDERBUFFER,Ct)}}K.bindFramebuffer(ne.FRAMEBUFFER,null)}function mn(We,Ve,ft){const Et=Z.get(We);Ve!==void 0&&Wt(Et.__webglFramebuffer,We,We.texture,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,0),ft!==void 0&&an(We)}function tt(We){const Ve=We.texture,ft=Z.get(We),Et=Z.get(Ve);We.addEventListener("dispose",Ue);const Ft=We.textures,Ct=We.isWebGLCubeRenderTarget===!0,un=Ft.length>1;if(un||(Et.__webglTexture===void 0&&(Et.__webglTexture=ne.createTexture()),Et.__version=Ve.version,se.memory.textures++),Ct){ft.__webglFramebuffer=[];for(let Yt=0;Yt<6;Yt++)if(Ve.mipmaps&&Ve.mipmaps.length>0){ft.__webglFramebuffer[Yt]=[];for(let fn=0;fn<Ve.mipmaps.length;fn++)ft.__webglFramebuffer[Yt][fn]=ne.createFramebuffer()}else ft.__webglFramebuffer[Yt]=ne.createFramebuffer()}else{if(Ve.mipmaps&&Ve.mipmaps.length>0){ft.__webglFramebuffer=[];for(let Yt=0;Yt<Ve.mipmaps.length;Yt++)ft.__webglFramebuffer[Yt]=ne.createFramebuffer()}else ft.__webglFramebuffer=ne.createFramebuffer();if(un)for(let Yt=0,fn=Ft.length;Yt<fn;Yt++){const gn=Z.get(Ft[Yt]);gn.__webglTexture===void 0&&(gn.__webglTexture=ne.createTexture(),se.memory.textures++)}if(We.samples>0&&kt(We)===!1){ft.__webglMultisampledFramebuffer=ne.createFramebuffer(),ft.__webglColorRenderbuffer=[],K.bindFramebuffer(ne.FRAMEBUFFER,ft.__webglMultisampledFramebuffer);for(let Yt=0;Yt<Ft.length;Yt++){const fn=Ft[Yt];ft.__webglColorRenderbuffer[Yt]=ne.createRenderbuffer(),ne.bindRenderbuffer(ne.RENDERBUFFER,ft.__webglColorRenderbuffer[Yt]);const gn=ie.convert(fn.format,fn.colorSpace),$t=ie.convert(fn.type),mt=we(fn.internalFormat,gn,$t,fn.colorSpace,We.isXRRenderTarget===!0),xt=Qt(We);ne.renderbufferStorageMultisample(ne.RENDERBUFFER,xt,mt,We.width,We.height),ne.framebufferRenderbuffer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0+Yt,ne.RENDERBUFFER,ft.__webglColorRenderbuffer[Yt])}ne.bindRenderbuffer(ne.RENDERBUFFER,null),We.depthBuffer&&(ft.__webglDepthRenderbuffer=ne.createRenderbuffer(),jt(ft.__webglDepthRenderbuffer,We,!0)),K.bindFramebuffer(ne.FRAMEBUFFER,null)}}if(Ct){K.bindTexture(ne.TEXTURE_CUBE_MAP,Et.__webglTexture),lt(ne.TEXTURE_CUBE_MAP,Ve);for(let Yt=0;Yt<6;Yt++)if(Ve.mipmaps&&Ve.mipmaps.length>0)for(let fn=0;fn<Ve.mipmaps.length;fn++)Wt(ft.__webglFramebuffer[Yt][fn],We,Ve,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,fn);else Wt(ft.__webglFramebuffer[Yt],We,Ve,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0);Ee(Ve)&&ye(ne.TEXTURE_CUBE_MAP),K.unbindTexture()}else if(un){for(let Yt=0,fn=Ft.length;Yt<fn;Yt++){const gn=Ft[Yt],$t=Z.get(gn);let mt=ne.TEXTURE_2D;(We.isWebGL3DRenderTarget||We.isWebGLArrayRenderTarget)&&(mt=We.isWebGL3DRenderTarget?ne.TEXTURE_3D:ne.TEXTURE_2D_ARRAY),K.bindTexture(mt,$t.__webglTexture),lt(mt,gn),Wt(ft.__webglFramebuffer,We,gn,ne.COLOR_ATTACHMENT0+Yt,mt,0),Ee(gn)&&ye(mt)}K.unbindTexture()}else{let Yt=ne.TEXTURE_2D;if((We.isWebGL3DRenderTarget||We.isWebGLArrayRenderTarget)&&(Yt=We.isWebGL3DRenderTarget?ne.TEXTURE_3D:ne.TEXTURE_2D_ARRAY),K.bindTexture(Yt,Et.__webglTexture),lt(Yt,Ve),Ve.mipmaps&&Ve.mipmaps.length>0)for(let fn=0;fn<Ve.mipmaps.length;fn++)Wt(ft.__webglFramebuffer[fn],We,Ve,ne.COLOR_ATTACHMENT0,Yt,fn);else Wt(ft.__webglFramebuffer,We,Ve,ne.COLOR_ATTACHMENT0,Yt,0);Ee(Ve)&&ye(Yt),K.unbindTexture()}We.depthBuffer&&an(We)}function Ut(We){const Ve=We.textures;for(let ft=0,Et=Ve.length;ft<Et;ft++){const Ft=Ve[ft];if(Ee(Ft)){const Ct=be(We),un=Z.get(Ft).__webglTexture;K.bindTexture(Ct,un),ye(Ct),K.unbindTexture()}}}const Dt=[],Vt=[];function It(We){if(We.samples>0){if(kt(We)===!1){const Ve=We.textures,ft=We.width,Et=We.height;let Ft=ne.COLOR_BUFFER_BIT;const Ct=We.stencilBuffer?ne.DEPTH_STENCIL_ATTACHMENT:ne.DEPTH_ATTACHMENT,un=Z.get(We),Yt=Ve.length>1;if(Yt)for(let gn=0;gn<Ve.length;gn++)K.bindFramebuffer(ne.FRAMEBUFFER,un.__webglMultisampledFramebuffer),ne.framebufferRenderbuffer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0+gn,ne.RENDERBUFFER,null),K.bindFramebuffer(ne.FRAMEBUFFER,un.__webglFramebuffer),ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0+gn,ne.TEXTURE_2D,null,0);K.bindFramebuffer(ne.READ_FRAMEBUFFER,un.__webglMultisampledFramebuffer);const fn=We.texture.mipmaps;fn&&fn.length>0?K.bindFramebuffer(ne.DRAW_FRAMEBUFFER,un.__webglFramebuffer[0]):K.bindFramebuffer(ne.DRAW_FRAMEBUFFER,un.__webglFramebuffer);for(let gn=0;gn<Ve.length;gn++){if(We.resolveDepthBuffer&&(We.depthBuffer&&(Ft|=ne.DEPTH_BUFFER_BIT),We.stencilBuffer&&We.resolveStencilBuffer&&(Ft|=ne.STENCIL_BUFFER_BIT)),Yt){ne.framebufferRenderbuffer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.RENDERBUFFER,un.__webglColorRenderbuffer[gn]);const $t=Z.get(Ve[gn]).__webglTexture;ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,$t,0)}ne.blitFramebuffer(0,0,ft,Et,0,0,ft,Et,Ft,ne.NEAREST),ae===!0&&(Dt.length=0,Vt.length=0,Dt.push(ne.COLOR_ATTACHMENT0+gn),We.depthBuffer&&We.resolveDepthBuffer===!1&&(Dt.push(Ct),Vt.push(Ct),ne.invalidateFramebuffer(ne.DRAW_FRAMEBUFFER,Vt)),ne.invalidateFramebuffer(ne.READ_FRAMEBUFFER,Dt))}if(K.bindFramebuffer(ne.READ_FRAMEBUFFER,null),K.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null),Yt)for(let gn=0;gn<Ve.length;gn++){K.bindFramebuffer(ne.FRAMEBUFFER,un.__webglMultisampledFramebuffer),ne.framebufferRenderbuffer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0+gn,ne.RENDERBUFFER,un.__webglColorRenderbuffer[gn]);const $t=Z.get(Ve[gn]).__webglTexture;K.bindFramebuffer(ne.FRAMEBUFFER,un.__webglFramebuffer),ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0+gn,ne.TEXTURE_2D,$t,0)}K.bindFramebuffer(ne.DRAW_FRAMEBUFFER,un.__webglMultisampledFramebuffer)}else if(We.depthBuffer&&We.resolveDepthBuffer===!1&&ae){const Ve=We.stencilBuffer?ne.DEPTH_STENCIL_ATTACHMENT:ne.DEPTH_ATTACHMENT;ne.invalidateFramebuffer(ne.DRAW_FRAMEBUFFER,[Ve])}}}function Qt(We){return Math.min(te.maxSamples,We.samples)}function kt(We){const Ve=Z.get(We);return We.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&Ve.__useRenderToTexture!==!1}function qt(We){const Ve=se.render.frame;ue.get(We)!==Ve&&(ue.set(We,Ve),We.update())}function Tn(We,Ve){const ft=We.colorSpace,Et=We.format,Ft=We.type;return We.isCompressedTexture===!0||We.isVideoTexture===!0||ft!==LinearSRGBColorSpace$1&&ft!==NoColorSpace&&(ColorManagement.getTransfer(ft)===SRGBTransfer?(Et!==RGBAFormat||Ft!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ft)),Ve}function Sn(We){return typeof HTMLImageElement<"u"&&We instanceof HTMLImageElement?(le.width=We.naturalWidth||We.width,le.height=We.naturalHeight||We.height):typeof VideoFrame<"u"&&We instanceof VideoFrame?(le.width=We.displayWidth,le.height=We.displayHeight):(le.width=We.width,le.height=We.height),le}this.allocateTextureUnit=Ye,this.resetTextureUnits=Je,this.setTexture2D=rt,this.setTexture2DArray=ot,this.setTexture3D=ct,this.setTextureCube=je,this.rebindTextures=mn,this.setupRenderTarget=tt,this.updateRenderTargetMipmap=Ut,this.updateMultisampleRenderTarget=It,this.setupDepthRenderbuffer=an,this.setupFrameBufferTexture=Wt,this.useMultisampledRTT=kt}function WebGLUtils(ne,_){function K(Z,te=NoColorSpace){let ie;const se=ColorManagement.getTransfer(te);if(Z===UnsignedByteType)return ne.UNSIGNED_BYTE;if(Z===UnsignedShort4444Type)return ne.UNSIGNED_SHORT_4_4_4_4;if(Z===UnsignedShort5551Type)return ne.UNSIGNED_SHORT_5_5_5_1;if(Z===UnsignedInt5999Type)return ne.UNSIGNED_INT_5_9_9_9_REV;if(Z===ByteType)return ne.BYTE;if(Z===ShortType)return ne.SHORT;if(Z===UnsignedShortType)return ne.UNSIGNED_SHORT;if(Z===IntType)return ne.INT;if(Z===UnsignedIntType)return ne.UNSIGNED_INT;if(Z===FloatType)return ne.FLOAT;if(Z===HalfFloatType)return ne.HALF_FLOAT;if(Z===AlphaFormat)return ne.ALPHA;if(Z===RGBFormat)return ne.RGB;if(Z===RGBAFormat)return ne.RGBA;if(Z===DepthFormat)return ne.DEPTH_COMPONENT;if(Z===DepthStencilFormat)return ne.DEPTH_STENCIL;if(Z===RedFormat)return ne.RED;if(Z===RedIntegerFormat)return ne.RED_INTEGER;if(Z===RGFormat)return ne.RG;if(Z===RGIntegerFormat)return ne.RG_INTEGER;if(Z===RGBAIntegerFormat)return ne.RGBA_INTEGER;if(Z===RGB_S3TC_DXT1_Format||Z===RGBA_S3TC_DXT1_Format||Z===RGBA_S3TC_DXT3_Format||Z===RGBA_S3TC_DXT5_Format)if(se===SRGBTransfer)if(ie=_.get("WEBGL_compressed_texture_s3tc_srgb"),ie!==null){if(Z===RGB_S3TC_DXT1_Format)return ie.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT1_Format)return ie.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT3_Format)return ie.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Z===RGBA_S3TC_DXT5_Format)return ie.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ie=_.get("WEBGL_compressed_texture_s3tc"),ie!==null){if(Z===RGB_S3TC_DXT1_Format)return ie.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT1_Format)return ie.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Z===RGBA_S3TC_DXT3_Format)return ie.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Z===RGBA_S3TC_DXT5_Format)return ie.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Z===RGB_PVRTC_4BPPV1_Format||Z===RGB_PVRTC_2BPPV1_Format||Z===RGBA_PVRTC_4BPPV1_Format||Z===RGBA_PVRTC_2BPPV1_Format)if(ie=_.get("WEBGL_compressed_texture_pvrtc"),ie!==null){if(Z===RGB_PVRTC_4BPPV1_Format)return ie.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Z===RGB_PVRTC_2BPPV1_Format)return ie.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Z===RGBA_PVRTC_4BPPV1_Format)return ie.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Z===RGBA_PVRTC_2BPPV1_Format)return ie.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Z===RGB_ETC1_Format||Z===RGB_ETC2_Format||Z===RGBA_ETC2_EAC_Format)if(ie=_.get("WEBGL_compressed_texture_etc"),ie!==null){if(Z===RGB_ETC1_Format||Z===RGB_ETC2_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ETC2:ie.COMPRESSED_RGB8_ETC2;if(Z===RGBA_ETC2_EAC_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ie.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Z===RGBA_ASTC_4x4_Format||Z===RGBA_ASTC_5x4_Format||Z===RGBA_ASTC_5x5_Format||Z===RGBA_ASTC_6x5_Format||Z===RGBA_ASTC_6x6_Format||Z===RGBA_ASTC_8x5_Format||Z===RGBA_ASTC_8x6_Format||Z===RGBA_ASTC_8x8_Format||Z===RGBA_ASTC_10x5_Format||Z===RGBA_ASTC_10x6_Format||Z===RGBA_ASTC_10x8_Format||Z===RGBA_ASTC_10x10_Format||Z===RGBA_ASTC_12x10_Format||Z===RGBA_ASTC_12x12_Format)if(ie=_.get("WEBGL_compressed_texture_astc"),ie!==null){if(Z===RGBA_ASTC_4x4_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ie.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Z===RGBA_ASTC_5x4_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ie.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Z===RGBA_ASTC_5x5_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ie.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Z===RGBA_ASTC_6x5_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ie.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Z===RGBA_ASTC_6x6_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ie.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Z===RGBA_ASTC_8x5_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ie.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Z===RGBA_ASTC_8x6_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ie.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Z===RGBA_ASTC_8x8_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ie.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Z===RGBA_ASTC_10x5_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ie.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Z===RGBA_ASTC_10x6_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ie.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Z===RGBA_ASTC_10x8_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ie.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Z===RGBA_ASTC_10x10_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ie.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Z===RGBA_ASTC_12x10_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ie.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Z===RGBA_ASTC_12x12_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ie.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Z===RGBA_BPTC_Format||Z===RGB_BPTC_SIGNED_Format||Z===RGB_BPTC_UNSIGNED_Format)if(ie=_.get("EXT_texture_compression_bptc"),ie!==null){if(Z===RGBA_BPTC_Format)return se===SRGBTransfer?ie.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ie.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(Z===RGB_BPTC_SIGNED_Format)return ie.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(Z===RGB_BPTC_UNSIGNED_Format)return ie.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(Z===RED_RGTC1_Format||Z===SIGNED_RED_RGTC1_Format||Z===RED_GREEN_RGTC2_Format||Z===SIGNED_RED_GREEN_RGTC2_Format)if(ie=_.get("EXT_texture_compression_rgtc"),ie!==null){if(Z===RGBA_BPTC_Format)return ie.COMPRESSED_RED_RGTC1_EXT;if(Z===SIGNED_RED_RGTC1_Format)return ie.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Z===RED_GREEN_RGTC2_Format)return ie.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Z===SIGNED_RED_GREEN_RGTC2_Format)return ie.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return Z===UnsignedInt248Type?ne.UNSIGNED_INT_24_8:ne[Z]!==void 0?ne[Z]:null}return{convert:K}}class ExternalTexture extends Texture{constructor(_=null){super(),this.sourceTexture=_,this.isExternalTexture=!0}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(_,K){if(this.texture===null){const Z=new ExternalTexture(_.texture);(_.depthNear!==K.depthNear||_.depthFar!==K.depthFar)&&(this.depthNear=_.depthNear,this.depthFar=_.depthFar),this.texture=Z}}getMesh(_){if(this.texture!==null&&this.mesh===null){const K=_.cameras[0].viewport,Z=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:K.z},depthHeight:{value:K.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),Z)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher$1{constructor(_,K){super();const Z=this;let te=null,ie=1,se=null,oe="local-floor",ae=1,le=null,ue=null,fe=null,he=null,ge=null,_e=null;const Se=new WebXRDepthSensing,Ee={},ye=K.getContextAttributes();let be=null,we=null;const Pe=[],Oe=[],Be=new Vector2;let Ue=null;const $e=new PerspectiveCamera;$e.viewport=new Vector4;const De=new PerspectiveCamera;De.viewport=new Vector4;const ke=[$e,De],Ge=new ArrayCamera;let Je=null,Ye=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pt){let yt=Pe[pt];return yt===void 0&&(yt=new WebXRController,Pe[pt]=yt),yt.getTargetRaySpace()},this.getControllerGrip=function(pt){let yt=Pe[pt];return yt===void 0&&(yt=new WebXRController,Pe[pt]=yt),yt.getGripSpace()},this.getHand=function(pt){let yt=Pe[pt];return yt===void 0&&(yt=new WebXRController,Pe[pt]=yt),yt.getHandSpace()};function Qe(pt){const yt=Oe.indexOf(pt.inputSource);if(yt===-1)return;const Bt=Pe[yt];Bt!==void 0&&(Bt.update(pt.inputSource,pt.frame,le||se),Bt.dispatchEvent({type:pt.type,data:pt.inputSource}))}function rt(){te.removeEventListener("select",Qe),te.removeEventListener("selectstart",Qe),te.removeEventListener("selectend",Qe),te.removeEventListener("squeeze",Qe),te.removeEventListener("squeezestart",Qe),te.removeEventListener("squeezeend",Qe),te.removeEventListener("end",rt),te.removeEventListener("inputsourceschange",ot);for(let pt=0;pt<Pe.length;pt++){const yt=Oe[pt];yt!==null&&(Oe[pt]=null,Pe[pt].disconnect(yt))}Je=null,Ye=null,Se.reset();for(const pt in Ee)delete Ee[pt];_.setRenderTarget(be),ge=null,he=null,fe=null,te=null,we=null,Gt.stop(),Z.isPresenting=!1,_.setPixelRatio(Ue),_.setSize(Be.width,Be.height,!1),Z.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(pt){ie=pt,Z.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pt){oe=pt,Z.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return le||se},this.setReferenceSpace=function(pt){le=pt},this.getBaseLayer=function(){return he!==null?he:ge},this.getBinding=function(){return fe},this.getFrame=function(){return _e},this.getSession=function(){return te},this.setSession=async function(pt){if(te=pt,te!==null){if(be=_.getRenderTarget(),te.addEventListener("select",Qe),te.addEventListener("selectstart",Qe),te.addEventListener("selectend",Qe),te.addEventListener("squeeze",Qe),te.addEventListener("squeezestart",Qe),te.addEventListener("squeezeend",Qe),te.addEventListener("end",rt),te.addEventListener("inputsourceschange",ot),ye.xrCompatible!==!0&&await K.makeXRCompatible(),Ue=_.getPixelRatio(),_.getSize(Be),typeof XRWebGLBinding<"u"&&(fe=new XRWebGLBinding(te,K)),fe!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Wt=null,jt=null;ye.depth&&(jt=ye.stencil?K.DEPTH24_STENCIL8:K.DEPTH_COMPONENT24,Bt=ye.stencil?DepthStencilFormat:DepthFormat,Wt=ye.stencil?UnsignedInt248Type:UnsignedIntType);const nn={colorFormat:K.RGBA8,depthFormat:jt,scaleFactor:ie};he=fe.createProjectionLayer(nn),te.updateRenderState({layers:[he]}),_.setPixelRatio(1),_.setSize(he.textureWidth,he.textureHeight,!1),we=new WebGLRenderTarget(he.textureWidth,he.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(he.textureWidth,he.textureHeight,Wt,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:ye.stencil,colorSpace:_.outputColorSpace,samples:ye.antialias?4:0,resolveDepthBuffer:he.ignoreDepthValues===!1,resolveStencilBuffer:he.ignoreDepthValues===!1})}else{const Bt={antialias:ye.antialias,alpha:!0,depth:ye.depth,stencil:ye.stencil,framebufferScaleFactor:ie};ge=new XRWebGLLayer(te,K,Bt),te.updateRenderState({baseLayer:ge}),_.setPixelRatio(1),_.setSize(ge.framebufferWidth,ge.framebufferHeight,!1),we=new WebGLRenderTarget(ge.framebufferWidth,ge.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:_.outputColorSpace,stencilBuffer:ye.stencil,resolveDepthBuffer:ge.ignoreDepthValues===!1,resolveStencilBuffer:ge.ignoreDepthValues===!1})}we.isXRRenderTarget=!0,this.setFoveation(ae),le=null,se=await te.requestReferenceSpace(oe),Gt.setContext(te),Gt.start(),Z.isPresenting=!0,Z.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(te!==null)return te.environmentBlendMode},this.getDepthTexture=function(){return Se.getDepthTexture()};function ot(pt){for(let yt=0;yt<pt.removed.length;yt++){const Bt=pt.removed[yt],Wt=Oe.indexOf(Bt);Wt>=0&&(Oe[Wt]=null,Pe[Wt].disconnect(Bt))}for(let yt=0;yt<pt.added.length;yt++){const Bt=pt.added[yt];let Wt=Oe.indexOf(Bt);if(Wt===-1){for(let nn=0;nn<Pe.length;nn++)if(nn>=Oe.length){Oe.push(Bt),Wt=nn;break}else if(Oe[nn]===null){Oe[nn]=Bt,Wt=nn;break}if(Wt===-1)break}const jt=Pe[Wt];jt&&jt.connect(Bt)}}const ct=new Vector3,je=new Vector3;function st(pt,yt,Bt){ct.setFromMatrixPosition(yt.matrixWorld),je.setFromMatrixPosition(Bt.matrixWorld);const Wt=ct.distanceTo(je),jt=yt.projectionMatrix.elements,nn=Bt.projectionMatrix.elements,an=jt[14]/(jt[10]-1),mn=jt[14]/(jt[10]+1),tt=(jt[9]+1)/jt[5],Ut=(jt[9]-1)/jt[5],Dt=(jt[8]-1)/jt[0],Vt=(nn[8]+1)/nn[0],It=an*Dt,Qt=an*Vt,kt=Wt/(-Dt+Vt),qt=kt*-Dt;if(yt.matrixWorld.decompose(pt.position,pt.quaternion,pt.scale),pt.translateX(qt),pt.translateZ(kt),pt.matrixWorld.compose(pt.position,pt.quaternion,pt.scale),pt.matrixWorldInverse.copy(pt.matrixWorld).invert(),jt[10]===-1)pt.projectionMatrix.copy(yt.projectionMatrix),pt.projectionMatrixInverse.copy(yt.projectionMatrixInverse);else{const Tn=an+kt,Sn=mn+kt,We=It-qt,Ve=Qt+(Wt-qt),ft=tt*mn/Sn*Tn,Et=Ut*mn/Sn*Tn;pt.projectionMatrix.makePerspective(We,Ve,ft,Et,Tn,Sn),pt.projectionMatrixInverse.copy(pt.projectionMatrix).invert()}}function nt(pt,yt){yt===null?pt.matrixWorld.copy(pt.matrix):pt.matrixWorld.multiplyMatrices(yt.matrixWorld,pt.matrix),pt.matrixWorldInverse.copy(pt.matrixWorld).invert()}this.updateCamera=function(pt){if(te===null)return;let yt=pt.near,Bt=pt.far;Se.texture!==null&&(Se.depthNear>0&&(yt=Se.depthNear),Se.depthFar>0&&(Bt=Se.depthFar)),Ge.near=De.near=$e.near=yt,Ge.far=De.far=$e.far=Bt,(Je!==Ge.near||Ye!==Ge.far)&&(te.updateRenderState({depthNear:Ge.near,depthFar:Ge.far}),Je=Ge.near,Ye=Ge.far),Ge.layers.mask=pt.layers.mask|6,$e.layers.mask=Ge.layers.mask&3,De.layers.mask=Ge.layers.mask&5;const Wt=pt.parent,jt=Ge.cameras;nt(Ge,Wt);for(let nn=0;nn<jt.length;nn++)nt(jt[nn],Wt);jt.length===2?st(Ge,$e,De):Ge.projectionMatrix.copy($e.projectionMatrix),qe(pt,Ge,Wt)};function qe(pt,yt,Bt){Bt===null?pt.matrix.copy(yt.matrixWorld):(pt.matrix.copy(Bt.matrixWorld),pt.matrix.invert(),pt.matrix.multiply(yt.matrixWorld)),pt.matrix.decompose(pt.position,pt.quaternion,pt.scale),pt.updateMatrixWorld(!0),pt.projectionMatrix.copy(yt.projectionMatrix),pt.projectionMatrixInverse.copy(yt.projectionMatrixInverse),pt.isPerspectiveCamera&&(pt.fov=RAD2DEG*2*Math.atan(1/pt.projectionMatrix.elements[5]),pt.zoom=1)}this.getCamera=function(){return Ge},this.getFoveation=function(){if(!(he===null&&ge===null))return ae},this.setFoveation=function(pt){ae=pt,he!==null&&(he.fixedFoveation=pt),ge!==null&&ge.fixedFoveation!==void 0&&(ge.fixedFoveation=pt)},this.hasDepthSensing=function(){return Se.texture!==null},this.getDepthSensingMesh=function(){return Se.getMesh(Ge)},this.getCameraTexture=function(pt){return Ee[pt]};let lt=null;function Pt(pt,yt){if(ue=yt.getViewerPose(le||se),_e=yt,ue!==null){const Bt=ue.views;ge!==null&&(_.setRenderTargetFramebuffer(we,ge.framebuffer),_.setRenderTarget(we));let Wt=!1;Bt.length!==Ge.cameras.length&&(Ge.cameras.length=0,Wt=!0);for(let mn=0;mn<Bt.length;mn++){const tt=Bt[mn];let Ut=null;if(ge!==null)Ut=ge.getViewport(tt);else{const Vt=fe.getViewSubImage(he,tt);Ut=Vt.viewport,mn===0&&(_.setRenderTargetTextures(we,Vt.colorTexture,Vt.depthStencilTexture),_.setRenderTarget(we))}let Dt=ke[mn];Dt===void 0&&(Dt=new PerspectiveCamera,Dt.layers.enable(mn),Dt.viewport=new Vector4,ke[mn]=Dt),Dt.matrix.fromArray(tt.transform.matrix),Dt.matrix.decompose(Dt.position,Dt.quaternion,Dt.scale),Dt.projectionMatrix.fromArray(tt.projectionMatrix),Dt.projectionMatrixInverse.copy(Dt.projectionMatrix).invert(),Dt.viewport.set(Ut.x,Ut.y,Ut.width,Ut.height),mn===0&&(Ge.matrix.copy(Dt.matrix),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale)),Wt===!0&&Ge.cameras.push(Dt)}const jt=te.enabledFeatures;if(jt&&jt.includes("depth-sensing")&&te.depthUsage=="gpu-optimized"&&fe){const mn=fe.getDepthInformation(Bt[0]);mn&&mn.isValid&&mn.texture&&Se.init(mn,te.renderState)}if(jt&&jt.includes("camera-access")&&(_.state.unbindTexture(),fe))for(let mn=0;mn<Bt.length;mn++){const tt=Bt[mn].camera;if(tt){let Ut=Ee[tt];Ut||(Ut=new ExternalTexture,Ee[tt]=Ut);const Dt=fe.getCameraImage(tt);Ut.sourceTexture=Dt}}}for(let Bt=0;Bt<Pe.length;Bt++){const Wt=Oe[Bt],jt=Pe[Bt];Wt!==null&&jt!==void 0&&jt.update(Wt,yt,le||se)}lt&&lt(pt,yt),yt.detectedPlanes&&Z.dispatchEvent({type:"planesdetected",data:yt}),_e=null}const Gt=new WebGLAnimation;Gt.setAnimationLoop(Pt),this.setAnimationLoop=function(pt){lt=pt},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(ne,_){function K(Ee,ye){Ee.matrixAutoUpdate===!0&&Ee.updateMatrix(),ye.value.copy(Ee.matrix)}function Z(Ee,ye){ye.color.getRGB(Ee.fogColor.value,getUnlitUniformColorSpace(ne)),ye.isFog?(Ee.fogNear.value=ye.near,Ee.fogFar.value=ye.far):ye.isFogExp2&&(Ee.fogDensity.value=ye.density)}function te(Ee,ye,be,we,Pe){ye.isMeshBasicMaterial||ye.isMeshLambertMaterial?ie(Ee,ye):ye.isMeshToonMaterial?(ie(Ee,ye),fe(Ee,ye)):ye.isMeshPhongMaterial?(ie(Ee,ye),ue(Ee,ye)):ye.isMeshStandardMaterial?(ie(Ee,ye),he(Ee,ye),ye.isMeshPhysicalMaterial&&ge(Ee,ye,Pe)):ye.isMeshMatcapMaterial?(ie(Ee,ye),_e(Ee,ye)):ye.isMeshDepthMaterial?ie(Ee,ye):ye.isMeshDistanceMaterial?(ie(Ee,ye),Se(Ee,ye)):ye.isMeshNormalMaterial?ie(Ee,ye):ye.isLineBasicMaterial?(se(Ee,ye),ye.isLineDashedMaterial&&oe(Ee,ye)):ye.isPointsMaterial?ae(Ee,ye,be,we):ye.isSpriteMaterial?le(Ee,ye):ye.isShadowMaterial?(Ee.color.value.copy(ye.color),Ee.opacity.value=ye.opacity):ye.isShaderMaterial&&(ye.uniformsNeedUpdate=!1)}function ie(Ee,ye){Ee.opacity.value=ye.opacity,ye.color&&Ee.diffuse.value.copy(ye.color),ye.emissive&&Ee.emissive.value.copy(ye.emissive).multiplyScalar(ye.emissiveIntensity),ye.map&&(Ee.map.value=ye.map,K(ye.map,Ee.mapTransform)),ye.alphaMap&&(Ee.alphaMap.value=ye.alphaMap,K(ye.alphaMap,Ee.alphaMapTransform)),ye.bumpMap&&(Ee.bumpMap.value=ye.bumpMap,K(ye.bumpMap,Ee.bumpMapTransform),Ee.bumpScale.value=ye.bumpScale,ye.side===BackSide&&(Ee.bumpScale.value*=-1)),ye.normalMap&&(Ee.normalMap.value=ye.normalMap,K(ye.normalMap,Ee.normalMapTransform),Ee.normalScale.value.copy(ye.normalScale),ye.side===BackSide&&Ee.normalScale.value.negate()),ye.displacementMap&&(Ee.displacementMap.value=ye.displacementMap,K(ye.displacementMap,Ee.displacementMapTransform),Ee.displacementScale.value=ye.displacementScale,Ee.displacementBias.value=ye.displacementBias),ye.emissiveMap&&(Ee.emissiveMap.value=ye.emissiveMap,K(ye.emissiveMap,Ee.emissiveMapTransform)),ye.specularMap&&(Ee.specularMap.value=ye.specularMap,K(ye.specularMap,Ee.specularMapTransform)),ye.alphaTest>0&&(Ee.alphaTest.value=ye.alphaTest);const be=_.get(ye),we=be.envMap,Pe=be.envMapRotation;we&&(Ee.envMap.value=we,_e1.copy(Pe),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,we.isCubeTexture&&we.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),Ee.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),Ee.flipEnvMap.value=we.isCubeTexture&&we.isRenderTargetTexture===!1?-1:1,Ee.reflectivity.value=ye.reflectivity,Ee.ior.value=ye.ior,Ee.refractionRatio.value=ye.refractionRatio),ye.lightMap&&(Ee.lightMap.value=ye.lightMap,Ee.lightMapIntensity.value=ye.lightMapIntensity,K(ye.lightMap,Ee.lightMapTransform)),ye.aoMap&&(Ee.aoMap.value=ye.aoMap,Ee.aoMapIntensity.value=ye.aoMapIntensity,K(ye.aoMap,Ee.aoMapTransform))}function se(Ee,ye){Ee.diffuse.value.copy(ye.color),Ee.opacity.value=ye.opacity,ye.map&&(Ee.map.value=ye.map,K(ye.map,Ee.mapTransform))}function oe(Ee,ye){Ee.dashSize.value=ye.dashSize,Ee.totalSize.value=ye.dashSize+ye.gapSize,Ee.scale.value=ye.scale}function ae(Ee,ye,be,we){Ee.diffuse.value.copy(ye.color),Ee.opacity.value=ye.opacity,Ee.size.value=ye.size*be,Ee.scale.value=we*.5,ye.map&&(Ee.map.value=ye.map,K(ye.map,Ee.uvTransform)),ye.alphaMap&&(Ee.alphaMap.value=ye.alphaMap,K(ye.alphaMap,Ee.alphaMapTransform)),ye.alphaTest>0&&(Ee.alphaTest.value=ye.alphaTest)}function le(Ee,ye){Ee.diffuse.value.copy(ye.color),Ee.opacity.value=ye.opacity,Ee.rotation.value=ye.rotation,ye.map&&(Ee.map.value=ye.map,K(ye.map,Ee.mapTransform)),ye.alphaMap&&(Ee.alphaMap.value=ye.alphaMap,K(ye.alphaMap,Ee.alphaMapTransform)),ye.alphaTest>0&&(Ee.alphaTest.value=ye.alphaTest)}function ue(Ee,ye){Ee.specular.value.copy(ye.specular),Ee.shininess.value=Math.max(ye.shininess,1e-4)}function fe(Ee,ye){ye.gradientMap&&(Ee.gradientMap.value=ye.gradientMap)}function he(Ee,ye){Ee.metalness.value=ye.metalness,ye.metalnessMap&&(Ee.metalnessMap.value=ye.metalnessMap,K(ye.metalnessMap,Ee.metalnessMapTransform)),Ee.roughness.value=ye.roughness,ye.roughnessMap&&(Ee.roughnessMap.value=ye.roughnessMap,K(ye.roughnessMap,Ee.roughnessMapTransform)),ye.envMap&&(Ee.envMapIntensity.value=ye.envMapIntensity)}function ge(Ee,ye,be){Ee.ior.value=ye.ior,ye.sheen>0&&(Ee.sheenColor.value.copy(ye.sheenColor).multiplyScalar(ye.sheen),Ee.sheenRoughness.value=ye.sheenRoughness,ye.sheenColorMap&&(Ee.sheenColorMap.value=ye.sheenColorMap,K(ye.sheenColorMap,Ee.sheenColorMapTransform)),ye.sheenRoughnessMap&&(Ee.sheenRoughnessMap.value=ye.sheenRoughnessMap,K(ye.sheenRoughnessMap,Ee.sheenRoughnessMapTransform))),ye.clearcoat>0&&(Ee.clearcoat.value=ye.clearcoat,Ee.clearcoatRoughness.value=ye.clearcoatRoughness,ye.clearcoatMap&&(Ee.clearcoatMap.value=ye.clearcoatMap,K(ye.clearcoatMap,Ee.clearcoatMapTransform)),ye.clearcoatRoughnessMap&&(Ee.clearcoatRoughnessMap.value=ye.clearcoatRoughnessMap,K(ye.clearcoatRoughnessMap,Ee.clearcoatRoughnessMapTransform)),ye.clearcoatNormalMap&&(Ee.clearcoatNormalMap.value=ye.clearcoatNormalMap,K(ye.clearcoatNormalMap,Ee.clearcoatNormalMapTransform),Ee.clearcoatNormalScale.value.copy(ye.clearcoatNormalScale),ye.side===BackSide&&Ee.clearcoatNormalScale.value.negate())),ye.dispersion>0&&(Ee.dispersion.value=ye.dispersion),ye.iridescence>0&&(Ee.iridescence.value=ye.iridescence,Ee.iridescenceIOR.value=ye.iridescenceIOR,Ee.iridescenceThicknessMinimum.value=ye.iridescenceThicknessRange[0],Ee.iridescenceThicknessMaximum.value=ye.iridescenceThicknessRange[1],ye.iridescenceMap&&(Ee.iridescenceMap.value=ye.iridescenceMap,K(ye.iridescenceMap,Ee.iridescenceMapTransform)),ye.iridescenceThicknessMap&&(Ee.iridescenceThicknessMap.value=ye.iridescenceThicknessMap,K(ye.iridescenceThicknessMap,Ee.iridescenceThicknessMapTransform))),ye.transmission>0&&(Ee.transmission.value=ye.transmission,Ee.transmissionSamplerMap.value=be.texture,Ee.transmissionSamplerSize.value.set(be.width,be.height),ye.transmissionMap&&(Ee.transmissionMap.value=ye.transmissionMap,K(ye.transmissionMap,Ee.transmissionMapTransform)),Ee.thickness.value=ye.thickness,ye.thicknessMap&&(Ee.thicknessMap.value=ye.thicknessMap,K(ye.thicknessMap,Ee.thicknessMapTransform)),Ee.attenuationDistance.value=ye.attenuationDistance,Ee.attenuationColor.value.copy(ye.attenuationColor)),ye.anisotropy>0&&(Ee.anisotropyVector.value.set(ye.anisotropy*Math.cos(ye.anisotropyRotation),ye.anisotropy*Math.sin(ye.anisotropyRotation)),ye.anisotropyMap&&(Ee.anisotropyMap.value=ye.anisotropyMap,K(ye.anisotropyMap,Ee.anisotropyMapTransform))),Ee.specularIntensity.value=ye.specularIntensity,Ee.specularColor.value.copy(ye.specularColor),ye.specularColorMap&&(Ee.specularColorMap.value=ye.specularColorMap,K(ye.specularColorMap,Ee.specularColorMapTransform)),ye.specularIntensityMap&&(Ee.specularIntensityMap.value=ye.specularIntensityMap,K(ye.specularIntensityMap,Ee.specularIntensityMapTransform))}function _e(Ee,ye){ye.matcap&&(Ee.matcap.value=ye.matcap)}function Se(Ee,ye){const be=_.get(ye).light;Ee.referencePosition.value.setFromMatrixPosition(be.matrixWorld),Ee.nearDistance.value=be.shadow.camera.near,Ee.farDistance.value=be.shadow.camera.far}return{refreshFogUniforms:Z,refreshMaterialUniforms:te}}function WebGLUniformsGroups(ne,_,K,Z){let te={},ie={},se=[];const oe=ne.getParameter(ne.MAX_UNIFORM_BUFFER_BINDINGS);function ae(be,we){const Pe=we.program;Z.uniformBlockBinding(be,Pe)}function le(be,we){let Pe=te[be.id];Pe===void 0&&(_e(be),Pe=ue(be),te[be.id]=Pe,be.addEventListener("dispose",Ee));const Oe=we.program;Z.updateUBOMapping(be,Oe);const Be=_.render.frame;ie[be.id]!==Be&&(he(be),ie[be.id]=Be)}function ue(be){const we=fe();be.__bindingPointIndex=we;const Pe=ne.createBuffer(),Oe=be.__size,Be=be.usage;return ne.bindBuffer(ne.UNIFORM_BUFFER,Pe),ne.bufferData(ne.UNIFORM_BUFFER,Oe,Be),ne.bindBuffer(ne.UNIFORM_BUFFER,null),ne.bindBufferBase(ne.UNIFORM_BUFFER,we,Pe),Pe}function fe(){for(let be=0;be<oe;be++)if(se.indexOf(be)===-1)return se.push(be),be;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function he(be){const we=te[be.id],Pe=be.uniforms,Oe=be.__cache;ne.bindBuffer(ne.UNIFORM_BUFFER,we);for(let Be=0,Ue=Pe.length;Be<Ue;Be++){const $e=Array.isArray(Pe[Be])?Pe[Be]:[Pe[Be]];for(let De=0,ke=$e.length;De<ke;De++){const Ge=$e[De];if(ge(Ge,Be,De,Oe)===!0){const Je=Ge.__offset,Ye=Array.isArray(Ge.value)?Ge.value:[Ge.value];let Qe=0;for(let rt=0;rt<Ye.length;rt++){const ot=Ye[rt],ct=Se(ot);typeof ot=="number"||typeof ot=="boolean"?(Ge.__data[0]=ot,ne.bufferSubData(ne.UNIFORM_BUFFER,Je+Qe,Ge.__data)):ot.isMatrix3?(Ge.__data[0]=ot.elements[0],Ge.__data[1]=ot.elements[1],Ge.__data[2]=ot.elements[2],Ge.__data[3]=0,Ge.__data[4]=ot.elements[3],Ge.__data[5]=ot.elements[4],Ge.__data[6]=ot.elements[5],Ge.__data[7]=0,Ge.__data[8]=ot.elements[6],Ge.__data[9]=ot.elements[7],Ge.__data[10]=ot.elements[8],Ge.__data[11]=0):(ot.toArray(Ge.__data,Qe),Qe+=ct.storage/Float32Array.BYTES_PER_ELEMENT)}ne.bufferSubData(ne.UNIFORM_BUFFER,Je,Ge.__data)}}}ne.bindBuffer(ne.UNIFORM_BUFFER,null)}function ge(be,we,Pe,Oe){const Be=be.value,Ue=we+"_"+Pe;if(Oe[Ue]===void 0)return typeof Be=="number"||typeof Be=="boolean"?Oe[Ue]=Be:Oe[Ue]=Be.clone(),!0;{const $e=Oe[Ue];if(typeof Be=="number"||typeof Be=="boolean"){if($e!==Be)return Oe[Ue]=Be,!0}else if($e.equals(Be)===!1)return $e.copy(Be),!0}return!1}function _e(be){const we=be.uniforms;let Pe=0;const Oe=16;for(let Ue=0,$e=we.length;Ue<$e;Ue++){const De=Array.isArray(we[Ue])?we[Ue]:[we[Ue]];for(let ke=0,Ge=De.length;ke<Ge;ke++){const Je=De[ke],Ye=Array.isArray(Je.value)?Je.value:[Je.value];for(let Qe=0,rt=Ye.length;Qe<rt;Qe++){const ot=Ye[Qe],ct=Se(ot),je=Pe%Oe,st=je%ct.boundary,nt=je+st;Pe+=st,nt!==0&&Oe-nt<ct.storage&&(Pe+=Oe-nt),Je.__data=new Float32Array(ct.storage/Float32Array.BYTES_PER_ELEMENT),Je.__offset=Pe,Pe+=ct.storage}}}const Be=Pe%Oe;return Be>0&&(Pe+=Oe-Be),be.__size=Pe,be.__cache={},this}function Se(be){const we={boundary:0,storage:0};return typeof be=="number"||typeof be=="boolean"?(we.boundary=4,we.storage=4):be.isVector2?(we.boundary=8,we.storage=8):be.isVector3||be.isColor?(we.boundary=16,we.storage=12):be.isVector4?(we.boundary=16,we.storage=16):be.isMatrix3?(we.boundary=48,we.storage=48):be.isMatrix4?(we.boundary=64,we.storage=64):be.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",be),we}function Ee(be){const we=be.target;we.removeEventListener("dispose",Ee);const Pe=se.indexOf(we.__bindingPointIndex);se.splice(Pe,1),ne.deleteBuffer(te[we.id]),delete te[we.id],delete ie[we.id]}function ye(){for(const be in te)ne.deleteBuffer(te[be]);se=[],te={},ie={}}return{bind:ae,update:le,dispose:ye}}class WebGLRenderer{constructor(_={}){const{canvas:K=createCanvasElement(),context:Z=null,depth:te=!0,stencil:ie=!1,alpha:se=!1,antialias:oe=!1,premultipliedAlpha:ae=!0,preserveDrawingBuffer:le=!1,powerPreference:ue="default",failIfMajorPerformanceCaveat:fe=!1,reversedDepthBuffer:he=!1}=_;this.isWebGLRenderer=!0;let ge;if(Z!==null){if(typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ge=Z.getContextAttributes().alpha}else ge=se;const _e=new Uint32Array(4),Se=new Int32Array(4);let Ee=null,ye=null;const be=[],we=[];this.domElement=K,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const Pe=this;let Oe=!1;this._outputColorSpace=SRGBColorSpace$1;let Be=0,Ue=0,$e=null,De=-1,ke=null;const Ge=new Vector4,Je=new Vector4;let Ye=null;const Qe=new Color$1(0);let rt=0,ot=K.width,ct=K.height,je=1,st=null,nt=null;const qe=new Vector4(0,0,ot,ct),lt=new Vector4(0,0,ot,ct);let Pt=!1;const Gt=new Frustum;let pt=!1,yt=!1;const Bt=new Matrix4,Wt=new Vector3,jt=new Vector4,nn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let an=!1;function mn(){return $e===null?je:1}let tt=Z;function Ut(Ke,vt){return K.getContext(Ke,vt)}try{const Ke={alpha:!0,depth:te,stencil:ie,antialias:oe,premultipliedAlpha:ae,preserveDrawingBuffer:le,powerPreference:ue,failIfMajorPerformanceCaveat:fe};if("setAttribute"in K&&K.setAttribute("data-engine",`three.js r${REVISION}`),K.addEventListener("webglcontextlost",Ht,!1),K.addEventListener("webglcontextrestored",en,!1),K.addEventListener("webglcontextcreationerror",Kt,!1),tt===null){const vt="webgl2";if(tt=Ut(vt,Ke),tt===null)throw Ut(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ke){throw console.error("THREE.WebGLRenderer: "+Ke.message),Ke}let Dt,Vt,It,Qt,kt,qt,Tn,Sn,We,Ve,ft,Et,Ft,Ct,un,Yt,fn,gn,$t,mt,xt,Xe,at,At;function Ze(){Dt=new WebGLExtensions(tt),Dt.init(),Xe=new WebGLUtils(tt,Dt),Vt=new WebGLCapabilities(tt,Dt,_,Xe),It=new WebGLState(tt,Dt),Vt.reversedDepthBuffer&&he&&It.buffers.depth.setReversed(!0),Qt=new WebGLInfo(tt),kt=new WebGLProperties,qt=new WebGLTextures(tt,Dt,It,kt,Vt,Xe,Qt),Tn=new WebGLCubeMaps(Pe),Sn=new WebGLCubeUVMaps(Pe),We=new WebGLAttributes(tt),at=new WebGLBindingStates(tt,We),Ve=new WebGLGeometries(tt,We,Qt,at),ft=new WebGLObjects(tt,Ve,We,Qt),$t=new WebGLMorphtargets(tt,Vt,qt),Yt=new WebGLClipping(kt),Et=new WebGLPrograms(Pe,Tn,Sn,Dt,Vt,at,Yt),Ft=new WebGLMaterials(Pe,kt),Ct=new WebGLRenderLists,un=new WebGLRenderStates(Dt),gn=new WebGLBackground(Pe,Tn,Sn,It,ft,ge,ae),fn=new WebGLShadowMap(Pe,ft,Vt),At=new WebGLUniformsGroups(tt,Qt,Vt,It),mt=new WebGLBufferRenderer(tt,Dt,Qt),xt=new WebGLIndexedBufferRenderer(tt,Dt,Qt),Qt.programs=Et.programs,Pe.capabilities=Vt,Pe.extensions=Dt,Pe.properties=kt,Pe.renderLists=Ct,Pe.shadowMap=fn,Pe.state=It,Pe.info=Qt}Ze();const Ot=new WebXRManager(Pe,tt);this.xr=Ot,this.getContext=function(){return tt},this.getContextAttributes=function(){return tt.getContextAttributes()},this.forceContextLoss=function(){const Ke=Dt.get("WEBGL_lose_context");Ke&&Ke.loseContext()},this.forceContextRestore=function(){const Ke=Dt.get("WEBGL_lose_context");Ke&&Ke.restoreContext()},this.getPixelRatio=function(){return je},this.setPixelRatio=function(Ke){Ke!==void 0&&(je=Ke,this.setSize(ot,ct,!1))},this.getSize=function(Ke){return Ke.set(ot,ct)},this.setSize=function(Ke,vt,Mt=!0){if(Ot.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ot=Ke,ct=vt,K.width=Math.floor(Ke*je),K.height=Math.floor(vt*je),Mt===!0&&(K.style.width=Ke+"px",K.style.height=vt+"px"),this.setViewport(0,0,Ke,vt)},this.getDrawingBufferSize=function(Ke){return Ke.set(ot*je,ct*je).floor()},this.setDrawingBufferSize=function(Ke,vt,Mt){ot=Ke,ct=vt,je=Mt,K.width=Math.floor(Ke*Mt),K.height=Math.floor(vt*Mt),this.setViewport(0,0,Ke,vt)},this.getCurrentViewport=function(Ke){return Ke.copy(Ge)},this.getViewport=function(Ke){return Ke.copy(qe)},this.setViewport=function(Ke,vt,Mt,Rt){Ke.isVector4?qe.set(Ke.x,Ke.y,Ke.z,Ke.w):qe.set(Ke,vt,Mt,Rt),It.viewport(Ge.copy(qe).multiplyScalar(je).round())},this.getScissor=function(Ke){return Ke.copy(lt)},this.setScissor=function(Ke,vt,Mt,Rt){Ke.isVector4?lt.set(Ke.x,Ke.y,Ke.z,Ke.w):lt.set(Ke,vt,Mt,Rt),It.scissor(Je.copy(lt).multiplyScalar(je).round())},this.getScissorTest=function(){return Pt},this.setScissorTest=function(Ke){It.setScissorTest(Pt=Ke)},this.setOpaqueSort=function(Ke){st=Ke},this.setTransparentSort=function(Ke){nt=Ke},this.getClearColor=function(Ke){return Ke.copy(gn.getClearColor())},this.setClearColor=function(){gn.setClearColor(...arguments)},this.getClearAlpha=function(){return gn.getClearAlpha()},this.setClearAlpha=function(){gn.setClearAlpha(...arguments)},this.clear=function(Ke=!0,vt=!0,Mt=!0){let Rt=0;if(Ke){let dt=!1;if($e!==null){const Zt=$e.texture.format;dt=Zt===RGBAIntegerFormat||Zt===RGIntegerFormat||Zt===RedIntegerFormat}if(dt){const Zt=$e.texture.type,cn=Zt===UnsignedByteType||Zt===UnsignedIntType||Zt===UnsignedShortType||Zt===UnsignedInt248Type||Zt===UnsignedShort4444Type||Zt===UnsignedShort5551Type,yn=gn.getClearColor(),_n=gn.getClearAlpha(),Ln=yn.r,In=yn.g,En=yn.b;cn?(_e[0]=Ln,_e[1]=In,_e[2]=En,_e[3]=_n,tt.clearBufferuiv(tt.COLOR,0,_e)):(Se[0]=Ln,Se[1]=In,Se[2]=En,Se[3]=_n,tt.clearBufferiv(tt.COLOR,0,Se))}else Rt|=tt.COLOR_BUFFER_BIT}vt&&(Rt|=tt.DEPTH_BUFFER_BIT),Mt&&(Rt|=tt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),tt.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){K.removeEventListener("webglcontextlost",Ht,!1),K.removeEventListener("webglcontextrestored",en,!1),K.removeEventListener("webglcontextcreationerror",Kt,!1),gn.dispose(),Ct.dispose(),un.dispose(),kt.dispose(),Tn.dispose(),Sn.dispose(),ft.dispose(),at.dispose(),At.dispose(),Et.dispose(),Ot.dispose(),Ot.removeEventListener("sessionstart",Er),Ot.removeEventListener("sessionend",Co),gi.stop()};function Ht(Ke){Ke.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Oe=!0}function en(){console.log("THREE.WebGLRenderer: Context Restored."),Oe=!1;const Ke=Qt.autoReset,vt=fn.enabled,Mt=fn.autoUpdate,Rt=fn.needsUpdate,dt=fn.type;Ze(),Qt.autoReset=Ke,fn.enabled=vt,fn.autoUpdate=Mt,fn.needsUpdate=Rt,fn.type=dt}function Kt(Ke){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ke.statusMessage)}function zt(Ke){const vt=Ke.target;vt.removeEventListener("dispose",zt),ln(vt)}function ln(Ke){Pn(Ke),kt.remove(Ke)}function Pn(Ke){const vt=kt.get(Ke).programs;vt!==void 0&&(vt.forEach(function(Mt){Et.releaseProgram(Mt)}),Ke.isShaderMaterial&&Et.releaseShaderCache(Ke))}this.renderBufferDirect=function(Ke,vt,Mt,Rt,dt,Zt){vt===null&&(vt=nn);const cn=dt.isMesh&&dt.matrixWorld.determinant()<0,yn=fs(Ke,vt,Mt,Rt,dt);It.setMaterial(Rt,cn);let _n=Mt.index,Ln=1;if(Rt.wireframe===!0){if(_n=Ve.getWireframeAttribute(Mt),_n===void 0)return;Ln=2}const In=Mt.drawRange,En=Mt.attributes.position;let hn=In.start*Ln,Bn=(In.start+In.count)*Ln;Zt!==null&&(hn=Math.max(hn,Zt.start*Ln),Bn=Math.min(Bn,(Zt.start+Zt.count)*Ln)),_n!==null?(hn=Math.max(hn,0),Bn=Math.min(Bn,_n.count)):En!=null&&(hn=Math.max(hn,0),Bn=Math.min(Bn,En.count));const Wn=Bn-hn;if(Wn<0||Wn===1/0)return;at.setup(dt,Rt,yn,Mt,_n);let Gn,zn=mt;if(_n!==null&&(Gn=We.get(_n),zn=xt,zn.setIndex(Gn)),dt.isMesh)Rt.wireframe===!0?(It.setLineWidth(Rt.wireframeLinewidth*mn()),zn.setMode(tt.LINES)):zn.setMode(tt.TRIANGLES);else if(dt.isLine){let wn=Rt.linewidth;wn===void 0&&(wn=1),It.setLineWidth(wn*mn()),dt.isLineSegments?zn.setMode(tt.LINES):dt.isLineLoop?zn.setMode(tt.LINE_LOOP):zn.setMode(tt.LINE_STRIP)}else dt.isPoints?zn.setMode(tt.POINTS):dt.isSprite&&zn.setMode(tt.TRIANGLES);if(dt.isBatchedMesh)if(dt._multiDrawInstances!==null)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),zn.renderMultiDrawInstances(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount,dt._multiDrawInstances);else if(Dt.get("WEBGL_multi_draw"))zn.renderMultiDraw(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount);else{const wn=dt._multiDrawStarts,Qn=dt._multiDrawCounts,On=dt._multiDrawCount,vr=_n?We.get(_n).bytesPerElement:1,Ci=kt.get(Rt).currentProgram.getUniforms();for(let jr=0;jr<On;jr++)Ci.setValue(tt,"_gl_DrawID",jr),zn.render(wn[jr]/vr,Qn[jr])}else if(dt.isInstancedMesh)zn.renderInstances(hn,Wn,dt.count);else if(Mt.isInstancedBufferGeometry){const wn=Mt._maxInstanceCount!==void 0?Mt._maxInstanceCount:1/0,Qn=Math.min(Mt.instanceCount,wn);zn.renderInstances(hn,Wn,Qn)}else zn.render(hn,Wn)};function Jn(Ke,vt,Mt){Ke.transparent===!0&&Ke.side===DoubleSide&&Ke.forceSinglePass===!1?(Ke.side=BackSide,Ke.needsUpdate=!0,Io(Ke,vt,Mt),Ke.side=FrontSide,Ke.needsUpdate=!0,Io(Ke,vt,Mt),Ke.side=DoubleSide):Io(Ke,vt,Mt)}this.compile=function(Ke,vt,Mt=null){Mt===null&&(Mt=Ke),ye=un.get(Mt),ye.init(vt),we.push(ye),Mt.traverseVisible(function(dt){dt.isLight&&dt.layers.test(vt.layers)&&(ye.pushLight(dt),dt.castShadow&&ye.pushShadow(dt))}),Ke!==Mt&&Ke.traverseVisible(function(dt){dt.isLight&&dt.layers.test(vt.layers)&&(ye.pushLight(dt),dt.castShadow&&ye.pushShadow(dt))}),ye.setupLights();const Rt=new Set;return Ke.traverse(function(dt){if(!(dt.isMesh||dt.isPoints||dt.isLine||dt.isSprite))return;const Zt=dt.material;if(Zt)if(Array.isArray(Zt))for(let cn=0;cn<Zt.length;cn++){const yn=Zt[cn];Jn(yn,Mt,dt),Rt.add(yn)}else Jn(Zt,Mt,dt),Rt.add(Zt)}),ye=we.pop(),Rt},this.compileAsync=function(Ke,vt,Mt=null){const Rt=this.compile(Ke,vt,Mt);return new Promise(dt=>{function Zt(){if(Rt.forEach(function(cn){kt.get(cn).currentProgram.isReady()&&Rt.delete(cn)}),Rt.size===0){dt(Ke);return}setTimeout(Zt,10)}Dt.get("KHR_parallel_shader_compile")!==null?Zt():setTimeout(Zt,10)})};let Hn=null;function Rr(Ke){Hn&&Hn(Ke)}function Er(){gi.stop()}function Co(){gi.start()}const gi=new WebGLAnimation;gi.setAnimationLoop(Rr),typeof self<"u"&&gi.setContext(self),this.setAnimationLoop=function(Ke){Hn=Ke,Ot.setAnimationLoop(Ke),Ke===null?gi.stop():gi.start()},Ot.addEventListener("sessionstart",Er),Ot.addEventListener("sessionend",Co),this.render=function(Ke,vt){if(vt!==void 0&&vt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Oe===!0)return;if(Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),vt.parent===null&&vt.matrixWorldAutoUpdate===!0&&vt.updateMatrixWorld(),Ot.enabled===!0&&Ot.isPresenting===!0&&(Ot.cameraAutoUpdate===!0&&Ot.updateCamera(vt),vt=Ot.getCamera()),Ke.isScene===!0&&Ke.onBeforeRender(Pe,Ke,vt,$e),ye=un.get(Ke,we.length),ye.init(vt),we.push(ye),Bt.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),Gt.setFromProjectionMatrix(Bt,WebGLCoordinateSystem,vt.reversedDepth),yt=this.localClippingEnabled,pt=Yt.init(this.clippingPlanes,yt),Ee=Ct.get(Ke,be.length),Ee.init(),be.push(Ee),Ot.enabled===!0&&Ot.isPresenting===!0){const Zt=Pe.xr.getDepthSensingMesh();Zt!==null&&Ro(Zt,vt,-1/0,Pe.sortObjects)}Ro(Ke,vt,0,Pe.sortObjects),Ee.finish(),Pe.sortObjects===!0&&Ee.sort(st,nt),an=Ot.enabled===!1||Ot.isPresenting===!1||Ot.hasDepthSensing()===!1,an&&gn.addToRenderList(Ee,Ke),this.info.render.frame++,pt===!0&&Yt.beginShadows();const Mt=ye.state.shadowsArray;fn.render(Mt,Ke,vt),pt===!0&&Yt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Rt=Ee.opaque,dt=Ee.transmissive;if(ye.setupLights(),vt.isArrayCamera){const Zt=vt.cameras;if(dt.length>0)for(let cn=0,yn=Zt.length;cn<yn;cn++){const _n=Zt[cn];Xs(Rt,dt,Ke,_n)}an&&gn.render(Ke);for(let cn=0,yn=Zt.length;cn<yn;cn++){const _n=Zt[cn];Ji(Ee,Ke,_n,_n.viewport)}}else dt.length>0&&Xs(Rt,dt,Ke,vt),an&&gn.render(Ke),Ji(Ee,Ke,vt);$e!==null&&Ue===0&&(qt.updateMultisampleRenderTarget($e),qt.updateRenderTargetMipmap($e)),Ke.isScene===!0&&Ke.onAfterRender(Pe,Ke,vt),at.resetDefaultState(),De=-1,ke=null,we.pop(),we.length>0?(ye=we[we.length-1],pt===!0&&Yt.setGlobalState(Pe.clippingPlanes,ye.state.camera)):ye=null,be.pop(),be.length>0?Ee=be[be.length-1]:Ee=null};function Ro(Ke,vt,Mt,Rt){if(Ke.visible===!1)return;if(Ke.layers.test(vt.layers)){if(Ke.isGroup)Mt=Ke.renderOrder;else if(Ke.isLOD)Ke.autoUpdate===!0&&Ke.update(vt);else if(Ke.isLight)ye.pushLight(Ke),Ke.castShadow&&ye.pushShadow(Ke);else if(Ke.isSprite){if(!Ke.frustumCulled||Gt.intersectsSprite(Ke)){Rt&&jt.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Bt);const cn=ft.update(Ke),yn=Ke.material;yn.visible&&Ee.push(Ke,cn,yn,Mt,jt.z,null)}}else if((Ke.isMesh||Ke.isLine||Ke.isPoints)&&(!Ke.frustumCulled||Gt.intersectsObject(Ke))){const cn=ft.update(Ke),yn=Ke.material;if(Rt&&(Ke.boundingSphere!==void 0?(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),jt.copy(Ke.boundingSphere.center)):(cn.boundingSphere===null&&cn.computeBoundingSphere(),jt.copy(cn.boundingSphere.center)),jt.applyMatrix4(Ke.matrixWorld).applyMatrix4(Bt)),Array.isArray(yn)){const _n=cn.groups;for(let Ln=0,In=_n.length;Ln<In;Ln++){const En=_n[Ln],hn=yn[En.materialIndex];hn&&hn.visible&&Ee.push(Ke,cn,hn,Mt,jt.z,En)}}else yn.visible&&Ee.push(Ke,cn,yn,Mt,jt.z,null)}}const Zt=Ke.children;for(let cn=0,yn=Zt.length;cn<yn;cn++)Ro(Zt[cn],vt,Mt,Rt)}function Ji(Ke,vt,Mt,Rt){const dt=Ke.opaque,Zt=Ke.transmissive,cn=Ke.transparent;ye.setupLightsView(Mt),pt===!0&&Yt.setGlobalState(Pe.clippingPlanes,Mt),Rt&&It.viewport(Ge.copy(Rt)),dt.length>0&&_i(dt,vt,Mt),Zt.length>0&&_i(Zt,vt,Mt),cn.length>0&&_i(cn,vt,Mt),It.buffers.depth.setTest(!0),It.buffers.depth.setMask(!0),It.buffers.color.setMask(!0),It.setPolygonOffset(!1)}function Xs(Ke,vt,Mt,Rt){if((Mt.isScene===!0?Mt.overrideMaterial:null)!==null)return;ye.state.transmissionRenderTarget[Rt.id]===void 0&&(ye.state.transmissionRenderTarget[Rt.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Dt.has("EXT_color_buffer_half_float")||Dt.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:ie,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const Zt=ye.state.transmissionRenderTarget[Rt.id],cn=Rt.viewport||Ge;Zt.setSize(cn.z*Pe.transmissionResolutionScale,cn.w*Pe.transmissionResolutionScale);const yn=Pe.getRenderTarget(),_n=Pe.getActiveCubeFace(),Ln=Pe.getActiveMipmapLevel();Pe.setRenderTarget(Zt),Pe.getClearColor(Qe),rt=Pe.getClearAlpha(),rt<1&&Pe.setClearColor(16777215,.5),Pe.clear(),an&&gn.render(Mt);const In=Pe.toneMapping;Pe.toneMapping=NoToneMapping;const En=Rt.viewport;if(Rt.viewport!==void 0&&(Rt.viewport=void 0),ye.setupLightsView(Rt),pt===!0&&Yt.setGlobalState(Pe.clippingPlanes,Rt),_i(Ke,Mt,Rt),qt.updateMultisampleRenderTarget(Zt),qt.updateRenderTargetMipmap(Zt),Dt.has("WEBGL_multisampled_render_to_texture")===!1){let hn=!1;for(let Bn=0,Wn=vt.length;Bn<Wn;Bn++){const Gn=vt[Bn],zn=Gn.object,wn=Gn.geometry,Qn=Gn.material,On=Gn.group;if(Qn.side===DoubleSide&&zn.layers.test(Rt.layers)){const vr=Qn.side;Qn.side=BackSide,Qn.needsUpdate=!0,Po(zn,Mt,Rt,wn,Qn,On),Qn.side=vr,Qn.needsUpdate=!0,hn=!0}}hn===!0&&(qt.updateMultisampleRenderTarget(Zt),qt.updateRenderTargetMipmap(Zt))}Pe.setRenderTarget(yn,_n,Ln),Pe.setClearColor(Qe,rt),En!==void 0&&(Rt.viewport=En),Pe.toneMapping=In}function _i(Ke,vt,Mt){const Rt=vt.isScene===!0?vt.overrideMaterial:null;for(let dt=0,Zt=Ke.length;dt<Zt;dt++){const cn=Ke[dt],yn=cn.object,_n=cn.geometry,Ln=cn.group;let In=cn.material;In.allowOverride===!0&&Rt!==null&&(In=Rt),yn.layers.test(Mt.layers)&&Po(yn,vt,Mt,_n,In,Ln)}}function Po(Ke,vt,Mt,Rt,dt,Zt){Ke.onBeforeRender(Pe,vt,Mt,Rt,dt,Zt),Ke.modelViewMatrix.multiplyMatrices(Mt.matrixWorldInverse,Ke.matrixWorld),Ke.normalMatrix.getNormalMatrix(Ke.modelViewMatrix),dt.onBeforeRender(Pe,vt,Mt,Rt,Ke,Zt),dt.transparent===!0&&dt.side===DoubleSide&&dt.forceSinglePass===!1?(dt.side=BackSide,dt.needsUpdate=!0,Pe.renderBufferDirect(Mt,vt,Rt,dt,Ke,Zt),dt.side=FrontSide,dt.needsUpdate=!0,Pe.renderBufferDirect(Mt,vt,Rt,dt,Ke,Zt),dt.side=DoubleSide):Pe.renderBufferDirect(Mt,vt,Rt,dt,Ke,Zt),Ke.onAfterRender(Pe,vt,Mt,Rt,dt,Zt)}function Io(Ke,vt,Mt){vt.isScene!==!0&&(vt=nn);const Rt=kt.get(Ke),dt=ye.state.lights,Zt=ye.state.shadowsArray,cn=dt.state.version,yn=Et.getParameters(Ke,dt.state,Zt,vt,Mt),_n=Et.getProgramCacheKey(yn);let Ln=Rt.programs;Rt.environment=Ke.isMeshStandardMaterial?vt.environment:null,Rt.fog=vt.fog,Rt.envMap=(Ke.isMeshStandardMaterial?Sn:Tn).get(Ke.envMap||Rt.environment),Rt.envMapRotation=Rt.environment!==null&&Ke.envMap===null?vt.environmentRotation:Ke.envMapRotation,Ln===void 0&&(Ke.addEventListener("dispose",zt),Ln=new Map,Rt.programs=Ln);let In=Ln.get(_n);if(In!==void 0){if(Rt.currentProgram===In&&Rt.lightsStateVersion===cn)return Ja(Ke,yn),In}else yn.uniforms=Et.getUniforms(Ke),Ke.onBeforeCompile(yn,Pe),In=Et.acquireProgram(yn,_n),Ln.set(_n,In),Rt.uniforms=yn.uniforms;const En=Rt.uniforms;return(!Ke.isShaderMaterial&&!Ke.isRawShaderMaterial||Ke.clipping===!0)&&(En.clippingPlanes=Yt.uniform),Ja(Ke,yn),Rt.needsLights=Qa(Ke),Rt.lightsStateVersion=cn,Rt.needsLights&&(En.ambientLightColor.value=dt.state.ambient,En.lightProbe.value=dt.state.probe,En.directionalLights.value=dt.state.directional,En.directionalLightShadows.value=dt.state.directionalShadow,En.spotLights.value=dt.state.spot,En.spotLightShadows.value=dt.state.spotShadow,En.rectAreaLights.value=dt.state.rectArea,En.ltc_1.value=dt.state.rectAreaLTC1,En.ltc_2.value=dt.state.rectAreaLTC2,En.pointLights.value=dt.state.point,En.pointLightShadows.value=dt.state.pointShadow,En.hemisphereLights.value=dt.state.hemi,En.directionalShadowMap.value=dt.state.directionalShadowMap,En.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,En.spotShadowMap.value=dt.state.spotShadowMap,En.spotLightMatrix.value=dt.state.spotLightMatrix,En.spotLightMap.value=dt.state.spotLightMap,En.pointShadowMap.value=dt.state.pointShadowMap,En.pointShadowMatrix.value=dt.state.pointShadowMatrix),Rt.currentProgram=In,Rt.uniformsList=null,In}function Ka(Ke){if(Ke.uniformsList===null){const vt=Ke.currentProgram.getUniforms();Ke.uniformsList=WebGLUniforms.seqWithValue(vt.seq,Ke.uniforms)}return Ke.uniformsList}function Ja(Ke,vt){const Mt=kt.get(Ke);Mt.outputColorSpace=vt.outputColorSpace,Mt.batching=vt.batching,Mt.batchingColor=vt.batchingColor,Mt.instancing=vt.instancing,Mt.instancingColor=vt.instancingColor,Mt.instancingMorph=vt.instancingMorph,Mt.skinning=vt.skinning,Mt.morphTargets=vt.morphTargets,Mt.morphNormals=vt.morphNormals,Mt.morphColors=vt.morphColors,Mt.morphTargetsCount=vt.morphTargetsCount,Mt.numClippingPlanes=vt.numClippingPlanes,Mt.numIntersection=vt.numClipIntersection,Mt.vertexAlphas=vt.vertexAlphas,Mt.vertexTangents=vt.vertexTangents,Mt.toneMapping=vt.toneMapping}function fs(Ke,vt,Mt,Rt,dt){vt.isScene!==!0&&(vt=nn),qt.resetTextureUnits();const Zt=vt.fog,cn=Rt.isMeshStandardMaterial?vt.environment:null,yn=$e===null?Pe.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:LinearSRGBColorSpace$1,_n=(Rt.isMeshStandardMaterial?Sn:Tn).get(Rt.envMap||cn),Ln=Rt.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,In=!!Mt.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),En=!!Mt.morphAttributes.position,hn=!!Mt.morphAttributes.normal,Bn=!!Mt.morphAttributes.color;let Wn=NoToneMapping;Rt.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(Wn=Pe.toneMapping);const Gn=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,zn=Gn!==void 0?Gn.length:0,wn=kt.get(Rt),Qn=ye.state.lights;if(pt===!0&&(yt===!0||Ke!==ke)){const Ar=Ke===ke&&Rt.id===De;Yt.setState(Rt,Ke,Ar)}let On=!1;Rt.version===wn.__version?(wn.needsLights&&wn.lightsStateVersion!==Qn.state.version||wn.outputColorSpace!==yn||dt.isBatchedMesh&&wn.batching===!1||!dt.isBatchedMesh&&wn.batching===!0||dt.isBatchedMesh&&wn.batchingColor===!0&&dt.colorTexture===null||dt.isBatchedMesh&&wn.batchingColor===!1&&dt.colorTexture!==null||dt.isInstancedMesh&&wn.instancing===!1||!dt.isInstancedMesh&&wn.instancing===!0||dt.isSkinnedMesh&&wn.skinning===!1||!dt.isSkinnedMesh&&wn.skinning===!0||dt.isInstancedMesh&&wn.instancingColor===!0&&dt.instanceColor===null||dt.isInstancedMesh&&wn.instancingColor===!1&&dt.instanceColor!==null||dt.isInstancedMesh&&wn.instancingMorph===!0&&dt.morphTexture===null||dt.isInstancedMesh&&wn.instancingMorph===!1&&dt.morphTexture!==null||wn.envMap!==_n||Rt.fog===!0&&wn.fog!==Zt||wn.numClippingPlanes!==void 0&&(wn.numClippingPlanes!==Yt.numPlanes||wn.numIntersection!==Yt.numIntersection)||wn.vertexAlphas!==Ln||wn.vertexTangents!==In||wn.morphTargets!==En||wn.morphNormals!==hn||wn.morphColors!==Bn||wn.toneMapping!==Wn||wn.morphTargetsCount!==zn)&&(On=!0):(On=!0,wn.__version=Rt.version);let vr=wn.currentProgram;On===!0&&(vr=Io(Rt,vt,dt));let Ci=!1,jr=!1,Yi=!1;const rr=vr.getUniforms(),ur=wn.uniforms;if(It.useProgram(vr.program)&&(Ci=!0,jr=!0,Yi=!0),Rt.id!==De&&(De=Rt.id,jr=!0),Ci||ke!==Ke){It.buffers.depth.getReversed()&&Ke.reversedDepth!==!0&&(Ke._reversedDepth=!0,Ke.updateProjectionMatrix()),rr.setValue(tt,"projectionMatrix",Ke.projectionMatrix),rr.setValue(tt,"viewMatrix",Ke.matrixWorldInverse);const Xr=rr.map.cameraPosition;Xr!==void 0&&Xr.setValue(tt,Wt.setFromMatrixPosition(Ke.matrixWorld)),Vt.logarithmicDepthBuffer&&rr.setValue(tt,"logDepthBufFC",2/(Math.log(Ke.far+1)/Math.LN2)),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&rr.setValue(tt,"isOrthographic",Ke.isOrthographicCamera===!0),ke!==Ke&&(ke=Ke,jr=!0,Yi=!0)}if(dt.isSkinnedMesh){rr.setOptional(tt,dt,"bindMatrix"),rr.setOptional(tt,dt,"bindMatrixInverse");const Ar=dt.skeleton;Ar&&(Ar.boneTexture===null&&Ar.computeBoneTexture(),rr.setValue(tt,"boneTexture",Ar.boneTexture,qt))}dt.isBatchedMesh&&(rr.setOptional(tt,dt,"batchingTexture"),rr.setValue(tt,"batchingTexture",dt._matricesTexture,qt),rr.setOptional(tt,dt,"batchingIdTexture"),rr.setValue(tt,"batchingIdTexture",dt._indirectTexture,qt),rr.setOptional(tt,dt,"batchingColorTexture"),dt._colorsTexture!==null&&rr.setValue(tt,"batchingColorTexture",dt._colorsTexture,qt));const qr=Mt.morphAttributes;if((qr.position!==void 0||qr.normal!==void 0||qr.color!==void 0)&&$t.update(dt,Mt,vr),(jr||wn.receiveShadow!==dt.receiveShadow)&&(wn.receiveShadow=dt.receiveShadow,rr.setValue(tt,"receiveShadow",dt.receiveShadow)),Rt.isMeshGouraudMaterial&&Rt.envMap!==null&&(ur.envMap.value=_n,ur.flipEnvMap.value=_n.isCubeTexture&&_n.isRenderTargetTexture===!1?-1:1),Rt.isMeshStandardMaterial&&Rt.envMap===null&&vt.environment!==null&&(ur.envMapIntensity.value=vt.environmentIntensity),jr&&(rr.setValue(tt,"toneMappingExposure",Pe.toneMappingExposure),wn.needsLights&&Ya(ur,Yi),Zt&&Rt.fog===!0&&Ft.refreshFogUniforms(ur,Zt),Ft.refreshMaterialUniforms(ur,Rt,je,ct,ye.state.transmissionRenderTarget[Ke.id]),WebGLUniforms.upload(tt,Ka(wn),ur,qt)),Rt.isShaderMaterial&&Rt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(tt,Ka(wn),ur,qt),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&rr.setValue(tt,"center",dt.center),rr.setValue(tt,"modelViewMatrix",dt.modelViewMatrix),rr.setValue(tt,"normalMatrix",dt.normalMatrix),rr.setValue(tt,"modelMatrix",dt.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const Ar=Rt.uniformsGroups;for(let Xr=0,Qi=Ar.length;Xr<Qi;Xr++){const qn=Ar[Xr];At.update(qn,vr),At.bind(qn,vr)}}return vr}function Ya(Ke,vt){Ke.ambientLightColor.needsUpdate=vt,Ke.lightProbe.needsUpdate=vt,Ke.directionalLights.needsUpdate=vt,Ke.directionalLightShadows.needsUpdate=vt,Ke.pointLights.needsUpdate=vt,Ke.pointLightShadows.needsUpdate=vt,Ke.spotLights.needsUpdate=vt,Ke.spotLightShadows.needsUpdate=vt,Ke.rectAreaLights.needsUpdate=vt,Ke.hemisphereLights.needsUpdate=vt}function Qa(Ke){return Ke.isMeshLambertMaterial||Ke.isMeshToonMaterial||Ke.isMeshPhongMaterial||Ke.isMeshStandardMaterial||Ke.isShadowMaterial||Ke.isShaderMaterial&&Ke.lights===!0}this.getActiveCubeFace=function(){return Be},this.getActiveMipmapLevel=function(){return Ue},this.getRenderTarget=function(){return $e},this.setRenderTargetTextures=function(Ke,vt,Mt){const Rt=kt.get(Ke);Rt.__autoAllocateDepthBuffer=Ke.resolveDepthBuffer===!1,Rt.__autoAllocateDepthBuffer===!1&&(Rt.__useRenderToTexture=!1),kt.get(Ke.texture).__webglTexture=vt,kt.get(Ke.depthTexture).__webglTexture=Rt.__autoAllocateDepthBuffer?void 0:Mt,Rt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Ke,vt){const Mt=kt.get(Ke);Mt.__webglFramebuffer=vt,Mt.__useDefaultFramebuffer=vt===void 0};const Za=tt.createFramebuffer();this.setRenderTarget=function(Ke,vt=0,Mt=0){$e=Ke,Be=vt,Ue=Mt;let Rt=!0,dt=null,Zt=!1,cn=!1;if(Ke){const _n=kt.get(Ke);if(_n.__useDefaultFramebuffer!==void 0)It.bindFramebuffer(tt.FRAMEBUFFER,null),Rt=!1;else if(_n.__webglFramebuffer===void 0)qt.setupRenderTarget(Ke);else if(_n.__hasExternalTextures)qt.rebindTextures(Ke,kt.get(Ke.texture).__webglTexture,kt.get(Ke.depthTexture).__webglTexture);else if(Ke.depthBuffer){const En=Ke.depthTexture;if(_n.__boundDepthTexture!==En){if(En!==null&&kt.has(En)&&(Ke.width!==En.image.width||Ke.height!==En.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");qt.setupDepthRenderbuffer(Ke)}}const Ln=Ke.texture;(Ln.isData3DTexture||Ln.isDataArrayTexture||Ln.isCompressedArrayTexture)&&(cn=!0);const In=kt.get(Ke).__webglFramebuffer;Ke.isWebGLCubeRenderTarget?(Array.isArray(In[vt])?dt=In[vt][Mt]:dt=In[vt],Zt=!0):Ke.samples>0&&qt.useMultisampledRTT(Ke)===!1?dt=kt.get(Ke).__webglMultisampledFramebuffer:Array.isArray(In)?dt=In[Mt]:dt=In,Ge.copy(Ke.viewport),Je.copy(Ke.scissor),Ye=Ke.scissorTest}else Ge.copy(qe).multiplyScalar(je).floor(),Je.copy(lt).multiplyScalar(je).floor(),Ye=Pt;if(Mt!==0&&(dt=Za),It.bindFramebuffer(tt.FRAMEBUFFER,dt)&&Rt&&It.drawBuffers(Ke,dt),It.viewport(Ge),It.scissor(Je),It.setScissorTest(Ye),Zt){const _n=kt.get(Ke.texture);tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_CUBE_MAP_POSITIVE_X+vt,_n.__webglTexture,Mt)}else if(cn){const _n=vt;for(let Ln=0;Ln<Ke.textures.length;Ln++){const In=kt.get(Ke.textures[Ln]);tt.framebufferTextureLayer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+Ln,In.__webglTexture,Mt,_n)}}else if(Ke!==null&&Mt!==0){const _n=kt.get(Ke.texture);tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,_n.__webglTexture,Mt)}De=-1},this.readRenderTargetPixels=function(Ke,vt,Mt,Rt,dt,Zt,cn,yn=0){if(!(Ke&&Ke.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _n=kt.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&cn!==void 0&&(_n=_n[cn]),_n){It.bindFramebuffer(tt.FRAMEBUFFER,_n);try{const Ln=Ke.textures[yn],In=Ln.format,En=Ln.type;if(!Vt.textureFormatReadable(In)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Vt.textureTypeReadable(En)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}vt>=0&&vt<=Ke.width-Rt&&Mt>=0&&Mt<=Ke.height-dt&&(Ke.textures.length>1&&tt.readBuffer(tt.COLOR_ATTACHMENT0+yn),tt.readPixels(vt,Mt,Rt,dt,Xe.convert(In),Xe.convert(En),Zt))}finally{const Ln=$e!==null?kt.get($e).__webglFramebuffer:null;It.bindFramebuffer(tt.FRAMEBUFFER,Ln)}}},this.readRenderTargetPixelsAsync=async function(Ke,vt,Mt,Rt,dt,Zt,cn,yn=0){if(!(Ke&&Ke.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _n=kt.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&cn!==void 0&&(_n=_n[cn]),_n)if(vt>=0&&vt<=Ke.width-Rt&&Mt>=0&&Mt<=Ke.height-dt){It.bindFramebuffer(tt.FRAMEBUFFER,_n);const Ln=Ke.textures[yn],In=Ln.format,En=Ln.type;if(!Vt.textureFormatReadable(In))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Vt.textureTypeReadable(En))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const hn=tt.createBuffer();tt.bindBuffer(tt.PIXEL_PACK_BUFFER,hn),tt.bufferData(tt.PIXEL_PACK_BUFFER,Zt.byteLength,tt.STREAM_READ),Ke.textures.length>1&&tt.readBuffer(tt.COLOR_ATTACHMENT0+yn),tt.readPixels(vt,Mt,Rt,dt,Xe.convert(In),Xe.convert(En),0);const Bn=$e!==null?kt.get($e).__webglFramebuffer:null;It.bindFramebuffer(tt.FRAMEBUFFER,Bn);const Wn=tt.fenceSync(tt.SYNC_GPU_COMMANDS_COMPLETE,0);return tt.flush(),await probeAsync(tt,Wn,4),tt.bindBuffer(tt.PIXEL_PACK_BUFFER,hn),tt.getBufferSubData(tt.PIXEL_PACK_BUFFER,0,Zt),tt.deleteBuffer(hn),tt.deleteSync(Wn),Zt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Ke,vt=null,Mt=0){const Rt=Math.pow(2,-Mt),dt=Math.floor(Ke.image.width*Rt),Zt=Math.floor(Ke.image.height*Rt),cn=vt!==null?vt.x:0,yn=vt!==null?vt.y:0;qt.setTexture2D(Ke,0),tt.copyTexSubImage2D(tt.TEXTURE_2D,Mt,0,0,cn,yn,dt,Zt),It.unbindTexture()};const el=tt.createFramebuffer(),tl=tt.createFramebuffer();this.copyTextureToTexture=function(Ke,vt,Mt=null,Rt=null,dt=0,Zt=null){Zt===null&&(dt!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Zt=dt,dt=0):Zt=0);let cn,yn,_n,Ln,In,En,hn,Bn,Wn;const Gn=Ke.isCompressedTexture?Ke.mipmaps[Zt]:Ke.image;if(Mt!==null)cn=Mt.max.x-Mt.min.x,yn=Mt.max.y-Mt.min.y,_n=Mt.isBox3?Mt.max.z-Mt.min.z:1,Ln=Mt.min.x,In=Mt.min.y,En=Mt.isBox3?Mt.min.z:0;else{const qr=Math.pow(2,-dt);cn=Math.floor(Gn.width*qr),yn=Math.floor(Gn.height*qr),Ke.isDataArrayTexture?_n=Gn.depth:Ke.isData3DTexture?_n=Math.floor(Gn.depth*qr):_n=1,Ln=0,In=0,En=0}Rt!==null?(hn=Rt.x,Bn=Rt.y,Wn=Rt.z):(hn=0,Bn=0,Wn=0);const zn=Xe.convert(vt.format),wn=Xe.convert(vt.type);let Qn;vt.isData3DTexture?(qt.setTexture3D(vt,0),Qn=tt.TEXTURE_3D):vt.isDataArrayTexture||vt.isCompressedArrayTexture?(qt.setTexture2DArray(vt,0),Qn=tt.TEXTURE_2D_ARRAY):(qt.setTexture2D(vt,0),Qn=tt.TEXTURE_2D),tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,vt.flipY),tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,vt.premultiplyAlpha),tt.pixelStorei(tt.UNPACK_ALIGNMENT,vt.unpackAlignment);const On=tt.getParameter(tt.UNPACK_ROW_LENGTH),vr=tt.getParameter(tt.UNPACK_IMAGE_HEIGHT),Ci=tt.getParameter(tt.UNPACK_SKIP_PIXELS),jr=tt.getParameter(tt.UNPACK_SKIP_ROWS),Yi=tt.getParameter(tt.UNPACK_SKIP_IMAGES);tt.pixelStorei(tt.UNPACK_ROW_LENGTH,Gn.width),tt.pixelStorei(tt.UNPACK_IMAGE_HEIGHT,Gn.height),tt.pixelStorei(tt.UNPACK_SKIP_PIXELS,Ln),tt.pixelStorei(tt.UNPACK_SKIP_ROWS,In),tt.pixelStorei(tt.UNPACK_SKIP_IMAGES,En);const rr=Ke.isDataArrayTexture||Ke.isData3DTexture,ur=vt.isDataArrayTexture||vt.isData3DTexture;if(Ke.isDepthTexture){const qr=kt.get(Ke),Ar=kt.get(vt),Xr=kt.get(qr.__renderTarget),Qi=kt.get(Ar.__renderTarget);It.bindFramebuffer(tt.READ_FRAMEBUFFER,Xr.__webglFramebuffer),It.bindFramebuffer(tt.DRAW_FRAMEBUFFER,Qi.__webglFramebuffer);for(let qn=0;qn<_n;qn++)rr&&(tt.framebufferTextureLayer(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,kt.get(Ke).__webglTexture,dt,En+qn),tt.framebufferTextureLayer(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,kt.get(vt).__webglTexture,Zt,Wn+qn)),tt.blitFramebuffer(Ln,In,cn,yn,hn,Bn,cn,yn,tt.DEPTH_BUFFER_BIT,tt.NEAREST);It.bindFramebuffer(tt.READ_FRAMEBUFFER,null),It.bindFramebuffer(tt.DRAW_FRAMEBUFFER,null)}else if(dt!==0||Ke.isRenderTargetTexture||kt.has(Ke)){const qr=kt.get(Ke),Ar=kt.get(vt);It.bindFramebuffer(tt.READ_FRAMEBUFFER,el),It.bindFramebuffer(tt.DRAW_FRAMEBUFFER,tl);for(let Xr=0;Xr<_n;Xr++)rr?tt.framebufferTextureLayer(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,qr.__webglTexture,dt,En+Xr):tt.framebufferTexture2D(tt.READ_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,qr.__webglTexture,dt),ur?tt.framebufferTextureLayer(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,Ar.__webglTexture,Zt,Wn+Xr):tt.framebufferTexture2D(tt.DRAW_FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_2D,Ar.__webglTexture,Zt),dt!==0?tt.blitFramebuffer(Ln,In,cn,yn,hn,Bn,cn,yn,tt.COLOR_BUFFER_BIT,tt.NEAREST):ur?tt.copyTexSubImage3D(Qn,Zt,hn,Bn,Wn+Xr,Ln,In,cn,yn):tt.copyTexSubImage2D(Qn,Zt,hn,Bn,Ln,In,cn,yn);It.bindFramebuffer(tt.READ_FRAMEBUFFER,null),It.bindFramebuffer(tt.DRAW_FRAMEBUFFER,null)}else ur?Ke.isDataTexture||Ke.isData3DTexture?tt.texSubImage3D(Qn,Zt,hn,Bn,Wn,cn,yn,_n,zn,wn,Gn.data):vt.isCompressedArrayTexture?tt.compressedTexSubImage3D(Qn,Zt,hn,Bn,Wn,cn,yn,_n,zn,Gn.data):tt.texSubImage3D(Qn,Zt,hn,Bn,Wn,cn,yn,_n,zn,wn,Gn):Ke.isDataTexture?tt.texSubImage2D(tt.TEXTURE_2D,Zt,hn,Bn,cn,yn,zn,wn,Gn.data):Ke.isCompressedTexture?tt.compressedTexSubImage2D(tt.TEXTURE_2D,Zt,hn,Bn,Gn.width,Gn.height,zn,Gn.data):tt.texSubImage2D(tt.TEXTURE_2D,Zt,hn,Bn,cn,yn,zn,wn,Gn);tt.pixelStorei(tt.UNPACK_ROW_LENGTH,On),tt.pixelStorei(tt.UNPACK_IMAGE_HEIGHT,vr),tt.pixelStorei(tt.UNPACK_SKIP_PIXELS,Ci),tt.pixelStorei(tt.UNPACK_SKIP_ROWS,jr),tt.pixelStorei(tt.UNPACK_SKIP_IMAGES,Yi),Zt===0&&vt.generateMipmaps&&tt.generateMipmap(Qn),It.unbindTexture()},this.copyTextureToTexture3D=function(Ke,vt,Mt=null,Rt=null,dt=0){return warnOnce('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Ke,vt,Mt,Rt,dt)},this.initRenderTarget=function(Ke){kt.get(Ke).__webglFramebuffer===void 0&&qt.setupRenderTarget(Ke)},this.initTexture=function(Ke){Ke.isCubeTexture?qt.setTextureCube(Ke,0):Ke.isData3DTexture?qt.setTexture3D(Ke,0):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?qt.setTexture2DArray(Ke,0):qt.setTexture2D(Ke,0),It.unbindTexture()},this.resetState=function(){Be=0,Ue=0,$e=null,It.reset(),at.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(_){this._outputColorSpace=_;const K=this.getContext();K.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(_),K.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera:Camera$1,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color:Color$1,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$1,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,FrustumArray,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InterpolationSamplingMode,InterpolationSamplingType,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace:LinearSRGBColorSpace$1,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace:SRGBColorSpace$1,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,Timer,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement},Symbol.toStringTag,{value:"Module"}));function convertPosition(ne){return new Vector3(ne.x,ne.z,-ne.y)}function convertRotation(ne){const _=new Quaternion(ne.w,ne.x,ne.y,ne.z),K=new Quaternion().setFromEuler(new Euler(0,0,Math.PI*1.5,"XYZ")),Z=new Quaternion().setFromAxisAngle(new Vector3(0,0,0),Math.PI);return _.premultiply(K).premultiply(Z).normalize(),{x:_.x,y:_.z,z:_.y,w:_.w}}var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconcilerConstants_production_min;function requireReactReconcilerConstants_production_min(){return hasRequiredReactReconcilerConstants_production_min||(hasRequiredReactReconcilerConstants_production_min=1,reactReconcilerConstants_production_min.ConcurrentRoot=1,reactReconcilerConstants_production_min.ContinuousEventPriority=4,reactReconcilerConstants_production_min.DefaultEventPriority=16,reactReconcilerConstants_production_min.DiscreteEventPriority=1,reactReconcilerConstants_production_min.IdleEventPriority=536870912,reactReconcilerConstants_production_min.LegacyRoot=0),reactReconcilerConstants_production_min}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production_min()),constants.exports}var constantsExports=requireConstants();function createStore$2(ne){let _;const K=new Set,Z=(le,ue)=>{const fe=typeof le=="function"?le(_):le;if(fe!==_){const he=_;_=ue?fe:Object.assign({},_,fe),K.forEach(ge=>ge(_,he))}},te=()=>_,ie=(le,ue=te,fe=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let he=ue(_);function ge(){const _e=ue(_);if(!fe(he,_e)){const Se=he;le(he=_e,Se)}}return K.add(ge),()=>K.delete(ge)},ae={setState:Z,getState:te,subscribe:(le,ue,fe)=>ue||fe?ie(le,ue,fe):(K.add(le),()=>K.delete(le)),destroy:()=>K.clear()};return _=ne(Z,te,ae),ae}const isSSR$1=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$2=isSSR$1?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(ne){const _=typeof ne=="function"?createStore$2(ne):ne,K=(Z=_.getState,te=Object.is)=>{const[,ie]=reactExports.useReducer(Ee=>Ee+1,0),se=_.getState(),oe=reactExports.useRef(se),ae=reactExports.useRef(Z),le=reactExports.useRef(te),ue=reactExports.useRef(!1),fe=reactExports.useRef();fe.current===void 0&&(fe.current=Z(se));let he,ge=!1;(oe.current!==se||ae.current!==Z||le.current!==te||ue.current)&&(he=Z(se),ge=!te(fe.current,he)),useIsomorphicLayoutEffect$2(()=>{ge&&(fe.current=he),oe.current=se,ae.current=Z,le.current=te,ue.current=!1});const _e=reactExports.useRef(se);useIsomorphicLayoutEffect$2(()=>{const Ee=()=>{try{const be=_.getState(),we=ae.current(be);le.current(fe.current,we)||(oe.current=be,fe.current=we,ie())}catch{ue.current=!0,ie()}},ye=_.subscribe(Ee);return _.getState()!==_e.current&&Ee(),ye},[]);const Se=ge?he:fe.current;return reactExports.useDebugValue(Se),Se};return Object.assign(K,_),K[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const Z=[K,_];return{next(){const te=Z.length<=0;return{value:Z.shift(),done:te}}}},K}const isPromise=ne=>typeof ne=="object"&&typeof ne.then=="function",globalCache=[];function shallowEqualArrays(ne,_,K=(Z,te)=>Z===te){if(ne===_)return!0;if(!ne||!_)return!1;const Z=ne.length;if(_.length!==Z)return!1;for(let te=0;te<Z;te++)if(!K(ne[te],_[te]))return!1;return!0}function query(ne,_=null,K=!1,Z={}){_===null&&(_=[ne]);for(const ie of globalCache)if(shallowEqualArrays(_,ie.keys,ie.equal)){if(K)return;if(Object.prototype.hasOwnProperty.call(ie,"error"))throw ie.error;if(Object.prototype.hasOwnProperty.call(ie,"response"))return Z.lifespan&&Z.lifespan>0&&(ie.timeout&&clearTimeout(ie.timeout),ie.timeout=setTimeout(ie.remove,Z.lifespan)),ie.response;if(!K)throw ie.promise}const te={keys:_,equal:Z.equal,remove:()=>{const ie=globalCache.indexOf(te);ie!==-1&&globalCache.splice(ie,1)},promise:(isPromise(ne)?ne:ne(..._)).then(ie=>{te.response=ie,Z.lifespan&&Z.lifespan>0&&(te.timeout=setTimeout(te.remove,Z.lifespan))}).catch(ie=>te.error=ie)};if(globalCache.push(te),!K)throw te.promise}const suspend=(ne,_,K)=>query(ne,_,!1,K),preload=(ne,_,K)=>void query(ne,_,!0,K),clear=ne=>{if(ne===void 0||ne.length===0)globalCache.splice(0,globalCache.length);else{const _=globalCache.find(K=>shallowEqualArrays(ne,K.keys,K.equal));_&&_.remove()}};var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(ne){function _(je,st){var nt=je.length;je.push(st);e:for(;0<nt;){var qe=nt-1>>>1,lt=je[qe];if(0<te(lt,st))je[qe]=st,je[nt]=lt,nt=qe;else break e}}function K(je){return je.length===0?null:je[0]}function Z(je){if(je.length===0)return null;var st=je[0],nt=je.pop();if(nt!==st){je[0]=nt;e:for(var qe=0,lt=je.length,Pt=lt>>>1;qe<Pt;){var Gt=2*(qe+1)-1,pt=je[Gt],yt=Gt+1,Bt=je[yt];if(0>te(pt,nt))yt<lt&&0>te(Bt,pt)?(je[qe]=Bt,je[yt]=nt,qe=yt):(je[qe]=pt,je[Gt]=nt,qe=Gt);else if(yt<lt&&0>te(Bt,nt))je[qe]=Bt,je[yt]=nt,qe=yt;else break e}}return st}function te(je,st){var nt=je.sortIndex-st.sortIndex;return nt!==0?nt:je.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ie=performance;ne.unstable_now=function(){return ie.now()}}else{var se=Date,oe=se.now();ne.unstable_now=function(){return se.now()-oe}}var ae=[],le=[],ue=1,fe=null,he=3,ge=!1,_e=!1,Se=!1,Ee=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function we(je){for(var st=K(le);st!==null;){if(st.callback===null)Z(le);else if(st.startTime<=je)Z(le),st.sortIndex=st.expirationTime,_(ae,st);else break;st=K(le)}}function Pe(je){if(Se=!1,we(je),!_e)if(K(ae)!==null)_e=!0,ot(Oe);else{var st=K(le);st!==null&&ct(Pe,st.startTime-je)}}function Oe(je,st){_e=!1,Se&&(Se=!1,ye($e),$e=-1),ge=!0;var nt=he;try{for(we(st),fe=K(ae);fe!==null&&(!(fe.expirationTime>st)||je&&!Ge());){var qe=fe.callback;if(typeof qe=="function"){fe.callback=null,he=fe.priorityLevel;var lt=qe(fe.expirationTime<=st);st=ne.unstable_now(),typeof lt=="function"?fe.callback=lt:fe===K(ae)&&Z(ae),we(st)}else Z(ae);fe=K(ae)}if(fe!==null)var Pt=!0;else{var Gt=K(le);Gt!==null&&ct(Pe,Gt.startTime-st),Pt=!1}return Pt}finally{fe=null,he=nt,ge=!1}}var Be=!1,Ue=null,$e=-1,De=5,ke=-1;function Ge(){return!(ne.unstable_now()-ke<De)}function Je(){if(Ue!==null){var je=ne.unstable_now();ke=je;var st=!0;try{st=Ue(!0,je)}finally{st?Ye():(Be=!1,Ue=null)}}else Be=!1}var Ye;if(typeof be=="function")Ye=function(){be(Je)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,rt=Qe.port2;Qe.port1.onmessage=Je,Ye=function(){rt.postMessage(null)}}else Ye=function(){Ee(Je,0)};function ot(je){Ue=je,Be||(Be=!0,Ye())}function ct(je,st){$e=Ee(function(){je(ne.unstable_now())},st)}ne.unstable_IdlePriority=5,ne.unstable_ImmediatePriority=1,ne.unstable_LowPriority=4,ne.unstable_NormalPriority=3,ne.unstable_Profiling=null,ne.unstable_UserBlockingPriority=2,ne.unstable_cancelCallback=function(je){je.callback=null},ne.unstable_continueExecution=function(){_e||ge||(_e=!0,ot(Oe))},ne.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<je?Math.floor(1e3/je):5},ne.unstable_getCurrentPriorityLevel=function(){return he},ne.unstable_getFirstCallbackNode=function(){return K(ae)},ne.unstable_next=function(je){switch(he){case 1:case 2:case 3:var st=3;break;default:st=he}var nt=he;he=st;try{return je()}finally{he=nt}},ne.unstable_pauseExecution=function(){},ne.unstable_requestPaint=function(){},ne.unstable_runWithPriority=function(je,st){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var nt=he;he=je;try{return st()}finally{he=nt}},ne.unstable_scheduleCallback=function(je,st,nt){var qe=ne.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?qe+nt:qe):nt=qe,je){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=nt+lt,je={id:ue++,callback:st,priorityLevel:je,startTime:nt,expirationTime:lt,sortIndex:-1},nt>qe?(je.sortIndex=nt,_(le,je),K(ae)===null&&je===K(le)&&(Se?(ye($e),$e=-1):Se=!0,ct(Pe,nt-qe))):(je.sortIndex=lt,_(ae,je),_e||ge||(_e=!0,ot(Oe))),je},ne.unstable_shouldYield=Ge,ne.unstable_wrapCallback=function(je){var st=he;return function(){var nt=he;he=st;try{return je.apply(this,arguments)}finally{he=nt}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min,hasRequiredReactReconciler_production_min;function requireReactReconciler_production_min(){return hasRequiredReactReconciler_production_min||(hasRequiredReactReconciler_production_min=1,reactReconciler_production_min=function(_){var K={},Z=requireReact(),te=requireScheduler(),ie=Object.assign;function se(pe){for(var me="https://reactjs.org/docs/error-decoder.html?invariant="+pe,Ae=1;Ae<arguments.length;Ae++)me+="&args[]="+encodeURIComponent(arguments[Ae]);return"Minified React error #"+pe+"; visit "+me+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oe=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),le=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),_e=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),Oe=Symbol.iterator;function Be(pe){return pe===null||typeof pe!="object"?null:(pe=Oe&&pe[Oe]||pe["@@iterator"],typeof pe=="function"?pe:null)}function Ue(pe){if(pe==null)return null;if(typeof pe=="function")return pe.displayName||pe.name||null;if(typeof pe=="string")return pe;switch(pe){case ue:return"Fragment";case le:return"Portal";case he:return"Profiler";case fe:return"StrictMode";case Ee:return"Suspense";case ye:return"SuspenseList"}if(typeof pe=="object")switch(pe.$$typeof){case _e:return(pe.displayName||"Context")+".Consumer";case ge:return(pe._context.displayName||"Context")+".Provider";case Se:var me=pe.render;return pe=pe.displayName,pe||(pe=me.displayName||me.name||"",pe=pe!==""?"ForwardRef("+pe+")":"ForwardRef"),pe;case be:return me=pe.displayName||null,me!==null?me:Ue(pe.type)||"Memo";case we:me=pe._payload,pe=pe._init;try{return Ue(pe(me))}catch{}}return null}function $e(pe){var me=pe.type;switch(pe.tag){case 24:return"Cache";case 9:return(me.displayName||"Context")+".Consumer";case 10:return(me._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return pe=me.render,pe=pe.displayName||pe.name||"",me.displayName||(pe!==""?"ForwardRef("+pe+")":"ForwardRef");case 7:return"Fragment";case 5:return me;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(me);case 8:return me===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof me=="function")return me.displayName||me.name||null;if(typeof me=="string")return me}return null}function De(pe){var me=pe,Ae=pe;if(pe.alternate)for(;me.return;)me=me.return;else{pe=me;do me=pe,(me.flags&4098)!==0&&(Ae=me.return),pe=me.return;while(pe)}return me.tag===3?Ae:null}function ke(pe){if(De(pe)!==pe)throw Error(se(188))}function Ge(pe){var me=pe.alternate;if(!me){if(me=De(pe),me===null)throw Error(se(188));return me!==pe?null:pe}for(var Ae=pe,Re=me;;){var Le=Ae.return;if(Le===null)break;var ze=Le.alternate;if(ze===null){if(Re=Le.return,Re!==null){Ae=Re;continue}break}if(Le.child===ze.child){for(ze=Le.child;ze;){if(ze===Ae)return ke(Le),pe;if(ze===Re)return ke(Le),me;ze=ze.sibling}throw Error(se(188))}if(Ae.return!==Re.return)Ae=Le,Re=ze;else{for(var et=!1,gt=Le.child;gt;){if(gt===Ae){et=!0,Ae=Le,Re=ze;break}if(gt===Re){et=!0,Re=Le,Ae=ze;break}gt=gt.sibling}if(!et){for(gt=ze.child;gt;){if(gt===Ae){et=!0,Ae=ze,Re=Le;break}if(gt===Re){et=!0,Re=ze,Ae=Le;break}gt=gt.sibling}if(!et)throw Error(se(189))}}if(Ae.alternate!==Re)throw Error(se(190))}if(Ae.tag!==3)throw Error(se(188));return Ae.stateNode.current===Ae?pe:me}function Je(pe){return pe=Ge(pe),pe!==null?Ye(pe):null}function Ye(pe){if(pe.tag===5||pe.tag===6)return pe;for(pe=pe.child;pe!==null;){var me=Ye(pe);if(me!==null)return me;pe=pe.sibling}return null}function Qe(pe){if(pe.tag===5||pe.tag===6)return pe;for(pe=pe.child;pe!==null;){if(pe.tag!==4){var me=Qe(pe);if(me!==null)return me}pe=pe.sibling}return null}var rt=Array.isArray,ot=_.getPublicInstance,ct=_.getRootHostContext,je=_.getChildHostContext,st=_.prepareForCommit,nt=_.resetAfterCommit,qe=_.createInstance,lt=_.appendInitialChild,Pt=_.finalizeInitialChildren,Gt=_.prepareUpdate,pt=_.shouldSetTextContent,yt=_.createTextInstance,Bt=_.scheduleTimeout,Wt=_.cancelTimeout,jt=_.noTimeout,nn=_.isPrimaryRenderer,an=_.supportsMutation,mn=_.supportsPersistence,tt=_.supportsHydration,Ut=_.getInstanceFromNode,Dt=_.preparePortalMount,Vt=_.getCurrentEventPriority,It=_.detachDeletedInstance,Qt=_.supportsMicrotasks,kt=_.scheduleMicrotask,qt=_.supportsTestSelectors,Tn=_.findFiberRoot,Sn=_.getBoundingRect,We=_.getTextContent,Ve=_.isHiddenSubtree,ft=_.matchAccessibilityRole,Et=_.setFocusIfFocusable,Ft=_.setupIntersectionObserver,Ct=_.appendChild,un=_.appendChildToContainer,Yt=_.commitTextUpdate,fn=_.commitMount,gn=_.commitUpdate,$t=_.insertBefore,mt=_.insertInContainerBefore,xt=_.removeChild,Xe=_.removeChildFromContainer,at=_.resetTextContent,At=_.hideInstance,Ze=_.hideTextInstance,Ot=_.unhideInstance,Ht=_.unhideTextInstance,en=_.clearContainer,Kt=_.cloneInstance,zt=_.createContainerChildSet,ln=_.appendChildToContainerChildSet,Pn=_.finalizeContainerChildren,Jn=_.replaceContainerChildren,Hn=_.cloneHiddenInstance,Rr=_.cloneHiddenTextInstance,Er=_.canHydrateInstance,Co=_.canHydrateTextInstance,gi=_.canHydrateSuspenseInstance,Ro=_.isSuspenseInstancePending,Ji=_.isSuspenseInstanceFallback,Xs=_.registerSuspenseInstanceRetry,_i=_.getNextHydratableSibling,Po=_.getFirstHydratableChild,Io=_.getFirstHydratableChildWithinContainer,Ka=_.getFirstHydratableChildWithinSuspenseInstance,Ja=_.hydrateInstance,fs=_.hydrateTextInstance,Ya=_.hydrateSuspenseInstance,Qa=_.getNextHydratableInstanceAfterSuspenseInstance,Za=_.commitHydratedContainer,el=_.commitHydratedSuspenseInstance,tl=_.clearSuspenseBoundary,Ke=_.clearSuspenseBoundaryFromContainer,vt=_.shouldDeleteUnhydratedTailInstances,Mt=_.didNotMatchHydratedContainerTextInstance,Rt=_.didNotMatchHydratedTextInstance,dt;function Zt(pe){if(dt===void 0)try{throw Error()}catch(Ae){var me=Ae.stack.trim().match(/\n( *(at )?)/);dt=me&&me[1]||""}return`
`+dt+pe}var cn=!1;function yn(pe,me){if(!pe||cn)return"";cn=!0;var Ae=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(me)if(me=function(){throw Error()},Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(rn){var Re=rn}Reflect.construct(pe,[],me)}else{try{me.call()}catch(rn){Re=rn}pe.call(me.prototype)}else{try{throw Error()}catch(rn){Re=rn}pe()}}catch(rn){if(rn&&Re&&typeof rn.stack=="string"){for(var Le=rn.stack.split(`
`),ze=Re.stack.split(`
`),et=Le.length-1,gt=ze.length-1;1<=et&&0<=gt&&Le[et]!==ze[gt];)gt--;for(;1<=et&&0<=gt;et--,gt--)if(Le[et]!==ze[gt]){if(et!==1||gt!==1)do if(et--,gt--,0>gt||Le[et]!==ze[gt]){var Nt=`
`+Le[et].replace(" at new "," at ");return pe.displayName&&Nt.includes("<anonymous>")&&(Nt=Nt.replace("<anonymous>",pe.displayName)),Nt}while(1<=et&&0<=gt);break}}}finally{cn=!1,Error.prepareStackTrace=Ae}return(pe=pe?pe.displayName||pe.name:"")?Zt(pe):""}var _n=Object.prototype.hasOwnProperty,Ln=[],In=-1;function En(pe){return{current:pe}}function hn(pe){0>In||(pe.current=Ln[In],Ln[In]=null,In--)}function Bn(pe,me){In++,Ln[In]=pe.current,pe.current=me}var Wn={},Gn=En(Wn),zn=En(!1),wn=Wn;function Qn(pe,me){var Ae=pe.type.contextTypes;if(!Ae)return Wn;var Re=pe.stateNode;if(Re&&Re.__reactInternalMemoizedUnmaskedChildContext===me)return Re.__reactInternalMemoizedMaskedChildContext;var Le={},ze;for(ze in Ae)Le[ze]=me[ze];return Re&&(pe=pe.stateNode,pe.__reactInternalMemoizedUnmaskedChildContext=me,pe.__reactInternalMemoizedMaskedChildContext=Le),Le}function On(pe){return pe=pe.childContextTypes,pe!=null}function vr(){hn(zn),hn(Gn)}function Ci(pe,me,Ae){if(Gn.current!==Wn)throw Error(se(168));Bn(Gn,me),Bn(zn,Ae)}function jr(pe,me,Ae){var Re=pe.stateNode;if(me=me.childContextTypes,typeof Re.getChildContext!="function")return Ae;Re=Re.getChildContext();for(var Le in Re)if(!(Le in me))throw Error(se(108,$e(pe)||"Unknown",Le));return ie({},Ae,Re)}function Yi(pe){return pe=(pe=pe.stateNode)&&pe.__reactInternalMemoizedMergedChildContext||Wn,wn=Gn.current,Bn(Gn,pe),Bn(zn,zn.current),!0}function rr(pe,me,Ae){var Re=pe.stateNode;if(!Re)throw Error(se(169));Ae?(pe=jr(pe,me,wn),Re.__reactInternalMemoizedMergedChildContext=pe,hn(zn),hn(Gn),Bn(Gn,pe)):hn(zn),Bn(zn,Ae)}var ur=Math.clz32?Math.clz32:Xr,qr=Math.log,Ar=Math.LN2;function Xr(pe){return pe>>>=0,pe===0?32:31-(qr(pe)/Ar|0)|0}var Qi=64,qn=4194304;function Bo(pe){switch(pe&-pe){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return pe&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return pe&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return pe}}function ca(pe,me){var Ae=pe.pendingLanes;if(Ae===0)return 0;var Re=0,Le=pe.suspendedLanes,ze=pe.pingedLanes,et=Ae&268435455;if(et!==0){var gt=et&~Le;gt!==0?Re=Bo(gt):(ze&=et,ze!==0&&(Re=Bo(ze)))}else et=Ae&~Le,et!==0?Re=Bo(et):ze!==0&&(Re=Bo(ze));if(Re===0)return 0;if(me!==0&&me!==Re&&(me&Le)===0&&(Le=Re&-Re,ze=me&-me,Le>=ze||Le===16&&(ze&4194240)!==0))return me;if((Re&4)!==0&&(Re|=Ae&16),me=pe.entangledLanes,me!==0)for(pe=pe.entanglements,me&=Re;0<me;)Ae=31-ur(me),Le=1<<Ae,Re|=pe[Ae],me&=~Le;return Re}function Zl(pe,me){switch(pe){case 1:case 2:case 4:return me+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return me+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(pe,me){for(var Ae=pe.suspendedLanes,Re=pe.pingedLanes,Le=pe.expirationTimes,ze=pe.pendingLanes;0<ze;){var et=31-ur(ze),gt=1<<et,Nt=Le[et];Nt===-1?((gt&Ae)===0||(gt&Re)!==0)&&(Le[et]=Zl(gt,me)):Nt<=me&&(pe.expiredLanes|=gt),ze&=~gt}}function nl(pe){return pe=pe.pendingLanes&-1073741825,pe!==0?pe:pe&1073741824?1073741824:0}function rl(pe){for(var me=[],Ae=0;31>Ae;Ae++)me.push(pe);return me}function Ks(pe,me,Ae){pe.pendingLanes|=me,me!==536870912&&(pe.suspendedLanes=0,pe.pingedLanes=0),pe=pe.eventTimes,me=31-ur(me),pe[me]=Ae}function il(pe,me){var Ae=pe.pendingLanes&~me;pe.pendingLanes=me,pe.suspendedLanes=0,pe.pingedLanes=0,pe.expiredLanes&=me,pe.mutableReadLanes&=me,pe.entangledLanes&=me,me=pe.entanglements;var Re=pe.eventTimes;for(pe=pe.expirationTimes;0<Ae;){var Le=31-ur(Ae),ze=1<<Le;me[Le]=0,Re[Le]=-1,pe[Le]=-1,Ae&=~ze}}function Zi(pe,me){var Ae=pe.entangledLanes|=me;for(pe=pe.entanglements;Ae;){var Re=31-ur(Ae),Le=1<<Re;Le&me|pe[Re]&me&&(pe[Re]|=me),Ae&=~Le}}var Kn=0;function ds(pe){return pe&=-pe,1<pe?4<pe?(pe&268435455)!==0?16:536870912:4:1}var Js=te.unstable_scheduleCallback,Lo=te.unstable_cancelCallback,Os=te.unstable_shouldYield,Uu=te.unstable_requestPaint,Pr=te.unstable_now,Ys=te.unstable_ImmediatePriority,$u=te.unstable_UserBlockingPriority,sl=te.unstable_NormalPriority,ol=te.unstable_IdlePriority,ua=null,ts=null;function fa(pe){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(ua,pe,void 0,(pe.current.flags&128)===128)}catch{}}function da(pe,me){return pe===me&&(pe!==0||1/pe===1/me)||pe!==pe&&me!==me}var ei=typeof Object.is=="function"?Object.is:da,Ri=null,al=!1,ec=!1;function ll(pe){Ri===null?Ri=[pe]:Ri.push(pe)}function cl(pe){al=!0,ll(pe)}function Pi(){if(!ec&&Ri!==null){ec=!0;var pe=0,me=Kn;try{var Ae=Ri;for(Kn=1;pe<Ae.length;pe++){var Re=Ae[pe];do Re=Re(!0);while(Re!==null)}Ri=null,al=!1}catch(Le){throw Ri!==null&&(Ri=Ri.slice(pe+1)),Js(Ys,Pi),Le}finally{Kn=me,ec=!1}}return null}var Xc=oe.ReactCurrentBatchConfig;function $i(pe,me){if(ei(pe,me))return!0;if(typeof pe!="object"||pe===null||typeof me!="object"||me===null)return!1;var Ae=Object.keys(pe),Re=Object.keys(me);if(Ae.length!==Re.length)return!1;for(Re=0;Re<Ae.length;Re++){var Le=Ae[Re];if(!_n.call(me,Le)||!ei(pe[Le],me[Le]))return!1}return!0}function tc(pe){switch(pe.tag){case 5:return Zt(pe.type);case 16:return Zt("Lazy");case 13:return Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 2:case 15:return pe=yn(pe.type,!1),pe;case 11:return pe=yn(pe.type.render,!1),pe;case 1:return pe=yn(pe.type,!0),pe;default:return""}}function ci(pe,me){if(pe&&pe.defaultProps){me=ie({},me),pe=pe.defaultProps;for(var Ae in pe)me[Ae]===void 0&&(me[Ae]=pe[Ae]);return me}return me}var ha=En(null),Qs=null,hs=null,ul=null;function ti(){ul=hs=Qs=null}function Zs(pe,me,Ae){nn?(Bn(ha,me._currentValue),me._currentValue=Ae):(Bn(ha,me._currentValue2),me._currentValue2=Ae)}function pa(pe){var me=ha.current;hn(ha),nn?pe._currentValue=me:pe._currentValue2=me}function eo(pe,me,Ae){for(;pe!==null;){var Re=pe.alternate;if((pe.childLanes&me)!==me?(pe.childLanes|=me,Re!==null&&(Re.childLanes|=me)):Re!==null&&(Re.childLanes&me)!==me&&(Re.childLanes|=me),pe===Ae)break;pe=pe.return}}function Do(pe,me){Qs=pe,ul=hs=null,pe=pe.dependencies,pe!==null&&pe.firstContext!==null&&((pe.lanes&me)!==0&&(Fr=!0),pe.firstContext=null)}function ui(pe){var me=nn?pe._currentValue:pe._currentValue2;if(ul!==pe)if(pe={context:pe,memoizedValue:me,next:null},hs===null){if(Qs===null)throw Error(se(308));hs=pe,Qs.dependencies={lanes:0,firstContext:pe}}else hs=hs.next=pe;return me}var Ii=null,Bi=!1;function Oo(pe){pe.updateQueue={baseState:pe.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nc(pe,me){pe=pe.updateQueue,me.updateQueue===pe&&(me.updateQueue={baseState:pe.baseState,firstBaseUpdate:pe.firstBaseUpdate,lastBaseUpdate:pe.lastBaseUpdate,shared:pe.shared,effects:pe.effects})}function ps(pe,me){return{eventTime:pe,lane:me,tag:0,payload:null,callback:null,next:null}}function Fs(pe,me){var Ae=pe.updateQueue;Ae!==null&&(Ae=Ae.shared,br!==null&&(pe.mode&1)!==0&&(jn&2)===0?(pe=Ae.interleaved,pe===null?(me.next=me,Ii===null?Ii=[Ae]:Ii.push(Ae)):(me.next=pe.next,pe.next=me),Ae.interleaved=me):(pe=Ae.pending,pe===null?me.next=me:(me.next=pe.next,pe.next=me),Ae.pending=me))}function fl(pe,me,Ae){if(me=me.updateQueue,me!==null&&(me=me.shared,(Ae&4194240)!==0)){var Re=me.lanes;Re&=pe.pendingLanes,Ae|=Re,me.lanes=Ae,Zi(pe,Ae)}}function dl(pe,me){var Ae=pe.updateQueue,Re=pe.alternate;if(Re!==null&&(Re=Re.updateQueue,Ae===Re)){var Le=null,ze=null;if(Ae=Ae.firstBaseUpdate,Ae!==null){do{var et={eventTime:Ae.eventTime,lane:Ae.lane,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null};ze===null?Le=ze=et:ze=ze.next=et,Ae=Ae.next}while(Ae!==null);ze===null?Le=ze=me:ze=ze.next=me}else Le=ze=me;Ae={baseState:Re.baseState,firstBaseUpdate:Le,lastBaseUpdate:ze,shared:Re.shared,effects:Re.effects},pe.updateQueue=Ae;return}pe=Ae.lastBaseUpdate,pe===null?Ae.firstBaseUpdate=me:pe.next=me,Ae.lastBaseUpdate=me}function hl(pe,me,Ae,Re){var Le=pe.updateQueue;Bi=!1;var ze=Le.firstBaseUpdate,et=Le.lastBaseUpdate,gt=Le.shared.pending;if(gt!==null){Le.shared.pending=null;var Nt=gt,rn=Nt.next;Nt.next=null,et===null?ze=rn:et.next=rn,et=Nt;var xn=pe.alternate;xn!==null&&(xn=xn.updateQueue,gt=xn.lastBaseUpdate,gt!==et&&(gt===null?xn.firstBaseUpdate=rn:gt.next=rn,xn.lastBaseUpdate=Nt))}if(ze!==null){var Un=Le.baseState;et=0,xn=rn=Nt=null,gt=ze;do{var Dn=gt.lane,Xn=gt.eventTime;if((Re&Dn)===Dn){xn!==null&&(xn=xn.next={eventTime:Xn,lane:0,tag:gt.tag,payload:gt.payload,callback:gt.callback,next:null});e:{var pn=pe,Hr=gt;switch(Dn=me,Xn=Ae,Hr.tag){case 1:if(pn=Hr.payload,typeof pn=="function"){Un=pn.call(Xn,Un,Dn);break e}Un=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=Hr.payload,Dn=typeof pn=="function"?pn.call(Xn,Un,Dn):pn,Dn==null)break e;Un=ie({},Un,Dn);break e;case 2:Bi=!0}}gt.callback!==null&&gt.lane!==0&&(pe.flags|=64,Dn=Le.effects,Dn===null?Le.effects=[gt]:Dn.push(gt))}else Xn={eventTime:Xn,lane:Dn,tag:gt.tag,payload:gt.payload,callback:gt.callback,next:null},xn===null?(rn=xn=Xn,Nt=Un):xn=xn.next=Xn,et|=Dn;if(gt=gt.next,gt===null){if(gt=Le.shared.pending,gt===null)break;Dn=gt,gt=Dn.next,Dn.next=null,Le.lastBaseUpdate=Dn,Le.shared.pending=null}}while(!0);if(xn===null&&(Nt=Un),Le.baseState=Nt,Le.firstBaseUpdate=rn,Le.lastBaseUpdate=xn,me=Le.shared.interleaved,me!==null){Le=me;do et|=Le.lane,Le=Le.next;while(Le!==me)}else ze===null&&(Le.shared.lanes=0);os|=et,pe.lanes=et,pe.memoizedState=Un}}function Kc(pe,me,Ae){if(pe=me.effects,me.effects=null,pe!==null)for(me=0;me<pe.length;me++){var Re=pe[me],Le=Re.callback;if(Le!==null){if(Re.callback=null,Re=Ae,typeof Le!="function")throw Error(se(191,Le));Le.call(Re)}}}var Jc=new Z.Component().refs;function rc(pe,me,Ae,Re){me=pe.memoizedState,Ae=Ae(Re,me),Ae=Ae==null?me:ie({},me,Ae),pe.memoizedState=Ae,pe.lanes===0&&(pe.updateQueue.baseState=Ae)}var pl={isMounted:function(pe){return(pe=pe._reactInternals)?De(pe)===pe:!1},enqueueSetState:function(pe,me,Ae){pe=pe._reactInternals;var Re=er(),Le=qi(pe),ze=ps(Re,Le);ze.payload=me,Ae!=null&&(ze.callback=Ae),Fs(pe,ze),me=Yr(pe,Le,Re),me!==null&&fl(me,pe,Le)},enqueueReplaceState:function(pe,me,Ae){pe=pe._reactInternals;var Re=er(),Le=qi(pe),ze=ps(Re,Le);ze.tag=1,ze.payload=me,Ae!=null&&(ze.callback=Ae),Fs(pe,ze),me=Yr(pe,Le,Re),me!==null&&fl(me,pe,Le)},enqueueForceUpdate:function(pe,me){pe=pe._reactInternals;var Ae=er(),Re=qi(pe),Le=ps(Ae,Re);Le.tag=2,me!=null&&(Le.callback=me),Fs(pe,Le),me=Yr(pe,Re,Ae),me!==null&&fl(me,pe,Re)}};function ic(pe,me,Ae,Re,Le,ze,et){return pe=pe.stateNode,typeof pe.shouldComponentUpdate=="function"?pe.shouldComponentUpdate(Re,ze,et):me.prototype&&me.prototype.isPureReactComponent?!$i(Ae,Re)||!$i(Le,ze):!0}function Yc(pe,me,Ae){var Re=!1,Le=Wn,ze=me.contextType;return typeof ze=="object"&&ze!==null?ze=ui(ze):(Le=On(me)?wn:Gn.current,Re=me.contextTypes,ze=(Re=Re!=null)?Qn(pe,Le):Wn),me=new me(Ae,ze),pe.memoizedState=me.state!==null&&me.state!==void 0?me.state:null,me.updater=pl,pe.stateNode=me,me._reactInternals=pe,Re&&(pe=pe.stateNode,pe.__reactInternalMemoizedUnmaskedChildContext=Le,pe.__reactInternalMemoizedMaskedChildContext=ze),me}function Qc(pe,me,Ae,Re){pe=me.state,typeof me.componentWillReceiveProps=="function"&&me.componentWillReceiveProps(Ae,Re),typeof me.UNSAFE_componentWillReceiveProps=="function"&&me.UNSAFE_componentWillReceiveProps(Ae,Re),me.state!==pe&&pl.enqueueReplaceState(me,me.state,null)}function sc(pe,me,Ae,Re){var Le=pe.stateNode;Le.props=Ae,Le.state=pe.memoizedState,Le.refs=Jc,Oo(pe);var ze=me.contextType;typeof ze=="object"&&ze!==null?Le.context=ui(ze):(ze=On(me)?wn:Gn.current,Le.context=Qn(pe,ze)),Le.state=pe.memoizedState,ze=me.getDerivedStateFromProps,typeof ze=="function"&&(rc(pe,me,ze,Ae),Le.state=pe.memoizedState),typeof me.getDerivedStateFromProps=="function"||typeof Le.getSnapshotBeforeUpdate=="function"||typeof Le.UNSAFE_componentWillMount!="function"&&typeof Le.componentWillMount!="function"||(me=Le.state,typeof Le.componentWillMount=="function"&&Le.componentWillMount(),typeof Le.UNSAFE_componentWillMount=="function"&&Le.UNSAFE_componentWillMount(),me!==Le.state&&pl.enqueueReplaceState(Le,Le.state,null),hl(pe,Ae,Le,Re),Le.state=pe.memoizedState),typeof Le.componentDidMount=="function"&&(pe.flags|=4194308)}var Fo=[],Ns=0,ml=null,gl=0,Li=[],vi=0,to=null,ms=1,gs="";function no(pe,me){Fo[Ns++]=gl,Fo[Ns++]=ml,ml=pe,gl=me}function Zc(pe,me,Ae){Li[vi++]=ms,Li[vi++]=gs,Li[vi++]=to,to=pe;var Re=ms;pe=gs;var Le=32-ur(Re)-1;Re&=~(1<<Le),Ae+=1;var ze=32-ur(me)+Le;if(30<ze){var et=Le-Le%5;ze=(Re&(1<<et)-1).toString(32),Re>>=et,Le-=et,ms=1<<32-ur(me)+Le|Ae<<Le|Re,gs=ze+pe}else ms=1<<ze|Ae<<Le|Re,gs=pe}function oc(pe){pe.return!==null&&(no(pe,1),Zc(pe,1,0))}function ac(pe){for(;pe===ml;)ml=Fo[--Ns],Fo[Ns]=null,gl=Fo[--Ns],Fo[Ns]=null;for(;pe===to;)to=Li[--vi],Li[vi]=null,gs=Li[--vi],Li[vi]=null,ms=Li[--vi],Li[vi]=null}var ni=null,Ur=null,hr=!1,No=!1,Di=null;function lc(pe,me){var Ae=bi(5,null,null,0);Ae.elementType="DELETED",Ae.stateNode=me,Ae.return=pe,me=pe.deletions,me===null?(pe.deletions=[Ae],pe.flags|=16):me.push(Ae)}function cc(pe,me){switch(pe.tag){case 5:return me=Er(me,pe.type,pe.pendingProps),me!==null?(pe.stateNode=me,ni=pe,Ur=Po(me),!0):!1;case 6:return me=Co(me,pe.pendingProps),me!==null?(pe.stateNode=me,ni=pe,Ur=null,!0):!1;case 13:if(me=gi(me),me!==null){var Ae=to!==null?{id:ms,overflow:gs}:null;return pe.memoizedState={dehydrated:me,treeContext:Ae,retryLane:1073741824},Ae=bi(18,null,null,0),Ae.stateNode=me,Ae.return=pe,pe.child=Ae,ni=pe,Ur=null,!0}return!1;default:return!1}}function _l(pe){return(pe.mode&1)!==0&&(pe.flags&128)===0}function ks(pe){if(hr){var me=Ur;if(me){var Ae=me;if(!cc(pe,me)){if(_l(pe))throw Error(se(418));me=_i(Ae);var Re=ni;me&&cc(pe,me)?lc(Re,Ae):(pe.flags=pe.flags&-4097|2,hr=!1,ni=pe)}}else{if(_l(pe))throw Error(se(418));pe.flags=pe.flags&-4097|2,hr=!1,ni=pe}}}function eu(pe){for(pe=pe.return;pe!==null&&pe.tag!==5&&pe.tag!==3&&pe.tag!==13;)pe=pe.return;ni=pe}function ma(pe){if(!tt||pe!==ni)return!1;if(!hr)return eu(pe),hr=!0,!1;if(pe.tag!==3&&(pe.tag!==5||vt(pe.type)&&!pt(pe.type,pe.memoizedProps))){var me=Ur;if(me){if(_l(pe)){for(pe=Ur;pe;)pe=_i(pe);throw Error(se(418))}for(;me;)lc(pe,me),me=_i(me)}}if(eu(pe),pe.tag===13){if(!tt)throw Error(se(316));if(pe=pe.memoizedState,pe=pe!==null?pe.dehydrated:null,!pe)throw Error(se(317));Ur=Qa(pe)}else Ur=ni?_i(pe.stateNode):null;return!0}function ko(){tt&&(Ur=ni=null,No=hr=!1)}function vl(pe){Di===null?Di=[pe]:Di.push(pe)}function Uo(pe,me,Ae){if(pe=Ae.ref,pe!==null&&typeof pe!="function"&&typeof pe!="object"){if(Ae._owner){if(Ae=Ae._owner,Ae){if(Ae.tag!==1)throw Error(se(309));var Re=Ae.stateNode}if(!Re)throw Error(se(147,pe));var Le=Re,ze=""+pe;return me!==null&&me.ref!==null&&typeof me.ref=="function"&&me.ref._stringRef===ze?me.ref:(me=function(et){var gt=Le.refs;gt===Jc&&(gt=Le.refs={}),et===null?delete gt[ze]:gt[ze]=et},me._stringRef=ze,me)}if(typeof pe!="string")throw Error(se(284));if(!Ae._owner)throw Error(se(290,pe))}return pe}function Us(pe,me){throw pe=Object.prototype.toString.call(me),Error(se(31,pe==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":pe))}function $o(pe){var me=pe._init;return me(pe._payload)}function tu(pe){function me(bt,_t){if(pe){var Lt=bt.deletions;Lt===null?(bt.deletions=[_t],bt.flags|=16):Lt.push(_t)}}function Ae(bt,_t){if(!pe)return null;for(;_t!==null;)me(bt,_t),_t=_t.sibling;return null}function Re(bt,_t){for(bt=new Map;_t!==null;)_t.key!==null?bt.set(_t.key,_t):bt.set(_t.index,_t),_t=_t.sibling;return bt}function Le(bt,_t){return bt=Ps(bt,_t),bt.index=0,bt.sibling=null,bt}function ze(bt,_t,Lt){return bt.index=Lt,pe?(Lt=bt.alternate,Lt!==null?(Lt=Lt.index,Lt<_t?(bt.flags|=2,_t):Lt):(bt.flags|=2,_t)):(bt.flags|=1048576,_t)}function et(bt){return pe&&bt.alternate===null&&(bt.flags|=2),bt}function gt(bt,_t,Lt,dn){return _t===null||_t.tag!==6?(_t=Wl(Lt,bt.mode,dn),_t.return=bt,_t):(_t=Le(_t,Lt),_t.return=bt,_t)}function Nt(bt,_t,Lt,dn){var Cn=Lt.type;return Cn===ue?xn(bt,_t,Lt.props.children,dn,Lt.key):_t!==null&&(_t.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===we&&$o(Cn)===_t.type)?(dn=Le(_t,Lt.props),dn.ref=Uo(bt,_t,Lt),dn.return=bt,dn):(dn=Hl(Lt.type,Lt.key,Lt.props,null,bt.mode,dn),dn.ref=Uo(bt,_t,Lt),dn.return=bt,dn)}function rn(bt,_t,Lt,dn){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==Lt.containerInfo||_t.stateNode.implementation!==Lt.implementation?(_t=jl(Lt,bt.mode,dn),_t.return=bt,_t):(_t=Le(_t,Lt.children||[]),_t.return=bt,_t)}function xn(bt,_t,Lt,dn,Cn){return _t===null||_t.tag!==7?(_t=bo(Lt,bt.mode,dn,Cn),_t.return=bt,_t):(_t=Le(_t,Lt),_t.return=bt,_t)}function Un(bt,_t,Lt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return _t=Wl(""+_t,bt.mode,Lt),_t.return=bt,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case ae:return Lt=Hl(_t.type,_t.key,_t.props,null,bt.mode,Lt),Lt.ref=Uo(bt,null,_t),Lt.return=bt,Lt;case le:return _t=jl(_t,bt.mode,Lt),_t.return=bt,_t;case we:var dn=_t._init;return Un(bt,dn(_t._payload),Lt)}if(rt(_t)||Be(_t))return _t=bo(_t,bt.mode,Lt,null),_t.return=bt,_t;Us(bt,_t)}return null}function Dn(bt,_t,Lt,dn){var Cn=_t!==null?_t.key:null;if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return Cn!==null?null:gt(bt,_t,""+Lt,dn);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case ae:return Lt.key===Cn?Nt(bt,_t,Lt,dn):null;case le:return Lt.key===Cn?rn(bt,_t,Lt,dn):null;case we:return Cn=Lt._init,Dn(bt,_t,Cn(Lt._payload),dn)}if(rt(Lt)||Be(Lt))return Cn!==null?null:xn(bt,_t,Lt,dn,null);Us(bt,Lt)}return null}function Xn(bt,_t,Lt,dn,Cn){if(typeof dn=="string"&&dn!==""||typeof dn=="number")return bt=bt.get(Lt)||null,gt(_t,bt,""+dn,Cn);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case ae:return bt=bt.get(dn.key===null?Lt:dn.key)||null,Nt(_t,bt,dn,Cn);case le:return bt=bt.get(dn.key===null?Lt:dn.key)||null,rn(_t,bt,dn,Cn);case we:var Vn=dn._init;return Xn(bt,_t,Lt,Vn(dn._payload),Cn)}if(rt(dn)||Be(dn))return bt=bt.get(Lt)||null,xn(_t,bt,dn,Cn,null);Us(_t,dn)}return null}function pn(bt,_t,Lt,dn){for(var Cn=null,Vn=null,$n=_t,Zn=_t=0,wr=null;$n!==null&&Zn<Lt.length;Zn++){$n.index>Zn?(wr=$n,$n=null):wr=$n.sibling;var Yn=Dn(bt,$n,Lt[Zn],dn);if(Yn===null){$n===null&&($n=wr);break}pe&&$n&&Yn.alternate===null&&me(bt,$n),_t=ze(Yn,_t,Zn),Vn===null?Cn=Yn:Vn.sibling=Yn,Vn=Yn,$n=wr}if(Zn===Lt.length)return Ae(bt,$n),hr&&no(bt,Zn),Cn;if($n===null){for(;Zn<Lt.length;Zn++)$n=Un(bt,Lt[Zn],dn),$n!==null&&(_t=ze($n,_t,Zn),Vn===null?Cn=$n:Vn.sibling=$n,Vn=$n);return hr&&no(bt,Zn),Cn}for($n=Re(bt,$n);Zn<Lt.length;Zn++)wr=Xn($n,bt,Zn,Lt[Zn],dn),wr!==null&&(pe&&wr.alternate!==null&&$n.delete(wr.key===null?Zn:wr.key),_t=ze(wr,_t,Zn),Vn===null?Cn=wr:Vn.sibling=wr,Vn=wr);return pe&&$n.forEach(function(Is){return me(bt,Is)}),hr&&no(bt,Zn),Cn}function Hr(bt,_t,Lt,dn){var Cn=Be(Lt);if(typeof Cn!="function")throw Error(se(150));if(Lt=Cn.call(Lt),Lt==null)throw Error(se(151));for(var Vn=Cn=null,$n=_t,Zn=_t=0,wr=null,Yn=Lt.next();$n!==null&&!Yn.done;Zn++,Yn=Lt.next()){$n.index>Zn?(wr=$n,$n=null):wr=$n.sibling;var Is=Dn(bt,$n,Yn.value,dn);if(Is===null){$n===null&&($n=wr);break}pe&&$n&&Is.alternate===null&&me(bt,$n),_t=ze(Is,_t,Zn),Vn===null?Cn=Is:Vn.sibling=Is,Vn=Is,$n=wr}if(Yn.done)return Ae(bt,$n),hr&&no(bt,Zn),Cn;if($n===null){for(;!Yn.done;Zn++,Yn=Lt.next())Yn=Un(bt,Yn.value,dn),Yn!==null&&(_t=ze(Yn,_t,Zn),Vn===null?Cn=Yn:Vn.sibling=Yn,Vn=Yn);return hr&&no(bt,Zn),Cn}for($n=Re(bt,$n);!Yn.done;Zn++,Yn=Lt.next())Yn=Xn($n,bt,Zn,Yn.value,dn),Yn!==null&&(pe&&Yn.alternate!==null&&$n.delete(Yn.key===null?Zn:Yn.key),_t=ze(Yn,_t,Zn),Vn===null?Cn=Yn:Vn.sibling=Yn,Vn=Yn);return pe&&$n.forEach(function($c){return me(bt,$c)}),hr&&no(bt,Zn),Cn}function Mi(bt,_t,Lt,dn){if(typeof Lt=="object"&&Lt!==null&&Lt.type===ue&&Lt.key===null&&(Lt=Lt.props.children),typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case ae:e:{for(var Cn=Lt.key,Vn=_t;Vn!==null;){if(Vn.key===Cn){if(Cn=Lt.type,Cn===ue){if(Vn.tag===7){Ae(bt,Vn.sibling),_t=Le(Vn,Lt.props.children),_t.return=bt,bt=_t;break e}}else if(Vn.elementType===Cn||typeof Cn=="object"&&Cn!==null&&Cn.$$typeof===we&&$o(Cn)===Vn.type){Ae(bt,Vn.sibling),_t=Le(Vn,Lt.props),_t.ref=Uo(bt,Vn,Lt),_t.return=bt,bt=_t;break e}Ae(bt,Vn);break}else me(bt,Vn);Vn=Vn.sibling}Lt.type===ue?(_t=bo(Lt.props.children,bt.mode,dn,Lt.key),_t.return=bt,bt=_t):(dn=Hl(Lt.type,Lt.key,Lt.props,null,bt.mode,dn),dn.ref=Uo(bt,_t,Lt),dn.return=bt,bt=dn)}return et(bt);case le:e:{for(Vn=Lt.key;_t!==null;){if(_t.key===Vn)if(_t.tag===4&&_t.stateNode.containerInfo===Lt.containerInfo&&_t.stateNode.implementation===Lt.implementation){Ae(bt,_t.sibling),_t=Le(_t,Lt.children||[]),_t.return=bt,bt=_t;break e}else{Ae(bt,_t);break}else me(bt,_t);_t=_t.sibling}_t=jl(Lt,bt.mode,dn),_t.return=bt,bt=_t}return et(bt);case we:return Vn=Lt._init,Mi(bt,_t,Vn(Lt._payload),dn)}if(rt(Lt))return pn(bt,_t,Lt,dn);if(Be(Lt))return Hr(bt,_t,Lt,dn);Us(bt,Lt)}return typeof Lt=="string"&&Lt!==""||typeof Lt=="number"?(Lt=""+Lt,_t!==null&&_t.tag===6?(Ae(bt,_t.sibling),_t=Le(_t,Lt),_t.return=bt,bt=_t):(Ae(bt,_t),_t=Wl(Lt,bt.mode,dn),_t.return=bt,bt=_t),et(bt)):Ae(bt,_t)}return Mi}var _s=tu(!0),nu=tu(!1),Go={},fi=En(Go),ro=En(Go),io=En(Go);function Gi(pe){if(pe===Go)throw Error(se(174));return pe}function yl(pe,me){Bn(io,me),Bn(ro,pe),Bn(fi,Go),pe=ct(me),hn(fi),Bn(fi,pe)}function zo(){hn(fi),hn(ro),hn(io)}function ru(pe){var me=Gi(io.current),Ae=Gi(fi.current);me=je(Ae,pe.type,me),Ae!==me&&(Bn(ro,pe),Bn(fi,me))}function uc(pe){ro.current===pe&&(hn(fi),hn(ro))}var mr=En(0);function xl(pe){for(var me=pe;me!==null;){if(me.tag===13){var Ae=me.memoizedState;if(Ae!==null&&(Ae=Ae.dehydrated,Ae===null||Ro(Ae)||Ji(Ae)))return me}else if(me.tag===19&&me.memoizedProps.revealOrder!==void 0){if((me.flags&128)!==0)return me}else if(me.child!==null){me.child.return=me,me=me.child;continue}if(me===pe)break;for(;me.sibling===null;){if(me.return===null||me.return===pe)return null;me=me.return}me.sibling.return=me.return,me=me.sibling}return null}var yi=[];function so(){for(var pe=0;pe<yi.length;pe++){var me=yi[pe];nn?me._workInProgressVersionPrimary=null:me._workInProgressVersionSecondary=null}yi.length=0}var ga=oe.ReactCurrentDispatcher,xi=oe.ReactCurrentBatchConfig,oo=0,gr=null,Lr=null,Dr=null,Sl=!1,ns=!1,ao=0,va=0;function Or(){throw Error(se(321))}function El(pe,me){if(me===null)return!1;for(var Ae=0;Ae<me.length&&Ae<pe.length;Ae++)if(!ei(pe[Ae],me[Ae]))return!1;return!0}function Vo(pe,me,Ae,Re,Le,ze){if(oo=ze,gr=me,me.memoizedState=null,me.updateQueue=null,me.lanes=0,ga.current=pe===null||pe.memoizedState===null?gc:_c,pe=Ae(Re,Le),ns){ze=0;do{if(ns=!1,ao=0,25<=ze)throw Error(se(301));ze+=1,Dr=Lr=null,me.updateQueue=null,ga.current=vc,pe=Ae(Re,Le)}while(ns)}if(ga.current=qo,me=Lr!==null&&Lr.next!==null,oo=0,Dr=Lr=gr=null,Sl=!1,me)throw Error(se(300));return pe}function $s(){var pe=ao!==0;return ao=0,pe}function zi(){var pe={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?gr.memoizedState=Dr=pe:Dr=Dr.next=pe,Dr}function Vi(){if(Lr===null){var pe=gr.alternate;pe=pe!==null?pe.memoizedState:null}else pe=Lr.next;var me=Dr===null?gr.memoizedState:Dr.next;if(me!==null)Dr=me,Lr=pe;else{if(pe===null)throw Error(se(310));Lr=pe,pe={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Dr===null?gr.memoizedState=Dr=pe:Dr=Dr.next=pe}return Dr}function rs(pe,me){return typeof me=="function"?me(pe):me}function ya(pe){var me=Vi(),Ae=me.queue;if(Ae===null)throw Error(se(311));Ae.lastRenderedReducer=pe;var Re=Lr,Le=Re.baseQueue,ze=Ae.pending;if(ze!==null){if(Le!==null){var et=Le.next;Le.next=ze.next,ze.next=et}Re.baseQueue=Le=ze,Ae.pending=null}if(Le!==null){ze=Le.next,Re=Re.baseState;var gt=et=null,Nt=null,rn=ze;do{var xn=rn.lane;if((oo&xn)===xn)Nt!==null&&(Nt=Nt.next={lane:0,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null}),Re=rn.hasEagerState?rn.eagerState:pe(Re,rn.action);else{var Un={lane:xn,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null};Nt===null?(gt=Nt=Un,et=Re):Nt=Nt.next=Un,gr.lanes|=xn,os|=xn}rn=rn.next}while(rn!==null&&rn!==ze);Nt===null?et=Re:Nt.next=gt,ei(Re,me.memoizedState)||(Fr=!0),me.memoizedState=Re,me.baseState=et,me.baseQueue=Nt,Ae.lastRenderedState=Re}if(pe=Ae.interleaved,pe!==null){Le=pe;do ze=Le.lane,gr.lanes|=ze,os|=ze,Le=Le.next;while(Le!==pe)}else Le===null&&(Ae.lanes=0);return[me.memoizedState,Ae.dispatch]}function xa(pe){var me=Vi(),Ae=me.queue;if(Ae===null)throw Error(se(311));Ae.lastRenderedReducer=pe;var Re=Ae.dispatch,Le=Ae.pending,ze=me.memoizedState;if(Le!==null){Ae.pending=null;var et=Le=Le.next;do ze=pe(ze,et.action),et=et.next;while(et!==Le);ei(ze,me.memoizedState)||(Fr=!0),me.memoizedState=ze,me.baseQueue===null&&(me.baseState=ze),Ae.lastRenderedState=ze}return[ze,Re]}function fc(){}function dc(pe,me){var Ae=gr,Re=Vi(),Le=me(),ze=!ei(Re.memoizedState,Le);if(ze&&(Re.memoizedState=Le,Fr=!0),Re=Re.queue,Ho(vs.bind(null,Ae,Re,pe),[pe]),Re.getSnapshot!==me||ze||Dr!==null&&Dr.memoizedState.tag&1){if(Ae.flags|=2048,Ea(9,pc.bind(null,Ae,Re,Le,me),void 0,null),br===null)throw Error(se(349));(oo&30)!==0||hc(Ae,me,Le)}return Le}function hc(pe,me,Ae){pe.flags|=16384,pe={getSnapshot:me,value:Ae},me=gr.updateQueue,me===null?(me={lastEffect:null,stores:null},gr.updateQueue=me,me.stores=[pe]):(Ae=me.stores,Ae===null?me.stores=[pe]:Ae.push(pe))}function pc(pe,me,Ae,Re){me.value=Ae,me.getSnapshot=Re,Al(me)&&Yr(pe,1,-1)}function vs(pe,me,Ae){return Ae(function(){Al(me)&&Yr(pe,1,-1)})}function Al(pe){var me=pe.getSnapshot;pe=pe.value;try{var Ae=me();return!ei(pe,Ae)}catch{return!0}}function Sa(pe){var me=zi();return typeof pe=="function"&&(pe=pe()),me.memoizedState=me.baseState=pe,pe={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:pe},me.queue=pe,pe=pe.dispatch=Gu.bind(null,gr,pe),[me.memoizedState,pe]}function Ea(pe,me,Ae,Re){return pe={tag:pe,create:me,destroy:Ae,deps:Re,next:null},me=gr.updateQueue,me===null?(me={lastEffect:null,stores:null},gr.updateQueue=me,me.lastEffect=pe.next=pe):(Ae=me.lastEffect,Ae===null?me.lastEffect=pe.next=pe:(Re=Ae.next,Ae.next=pe,pe.next=Re,me.lastEffect=pe)),pe}function iu(){return Vi().memoizedState}function Gs(pe,me,Ae,Re){var Le=zi();gr.flags|=pe,Le.memoizedState=Ea(1|me,Ae,void 0,Re===void 0?null:Re)}function Tl(pe,me,Ae,Re){var Le=Vi();Re=Re===void 0?null:Re;var ze=void 0;if(Lr!==null){var et=Lr.memoizedState;if(ze=et.destroy,Re!==null&&El(Re,et.deps)){Le.memoizedState=Ea(me,Ae,ze,Re);return}}gr.flags|=pe,Le.memoizedState=Ea(1|me,Ae,ze,Re)}function bl(pe,me){return Gs(8390656,8,pe,me)}function Ho(pe,me){return Tl(2048,8,pe,me)}function ar(pe,me){return Tl(4,2,pe,me)}function Ml(pe,me){return Tl(4,4,pe,me)}function Aa(pe,me){if(typeof me=="function")return pe=pe(),me(pe),function(){me(null)};if(me!=null)return pe=pe(),me.current=pe,function(){me.current=null}}function Wo(pe,me,Ae){return Ae=Ae!=null?Ae.concat([pe]):null,Tl(4,4,Aa.bind(null,me,pe),Ae)}function wl(){}function Cl(pe,me){var Ae=Vi();me=me===void 0?null:me;var Re=Ae.memoizedState;return Re!==null&&me!==null&&El(me,Re[1])?Re[0]:(Ae.memoizedState=[pe,me],pe)}function jo(pe,me){var Ae=Vi();me=me===void 0?null:me;var Re=Ae.memoizedState;return Re!==null&&me!==null&&El(me,Re[1])?Re[0]:(pe=pe(),Ae.memoizedState=[pe,me],pe)}function Rl(pe,me){var Ae=Kn;Kn=Ae!==0&&4>Ae?Ae:4,pe(!0);var Re=xi.transition;xi.transition={};try{pe(!1),me()}finally{Kn=Ae,xi.transition=Re}}function lo(){return Vi().memoizedState}function su(pe,me,Ae){var Re=qi(pe);Ae={lane:Re,action:Ae,hasEagerState:!1,eagerState:null,next:null},ou(pe)?mc(me,Ae):(Ta(pe,me,Ae),Ae=er(),pe=Yr(pe,Re,Ae),pe!==null&&ba(pe,me,Re))}function Gu(pe,me,Ae){var Re=qi(pe),Le={lane:Re,action:Ae,hasEagerState:!1,eagerState:null,next:null};if(ou(pe))mc(me,Le);else{Ta(pe,me,Le);var ze=pe.alternate;if(pe.lanes===0&&(ze===null||ze.lanes===0)&&(ze=me.lastRenderedReducer,ze!==null))try{var et=me.lastRenderedState,gt=ze(et,Ae);if(Le.hasEagerState=!0,Le.eagerState=gt,ei(gt,et))return}catch{}finally{}Ae=er(),pe=Yr(pe,Re,Ae),pe!==null&&ba(pe,me,Re)}}function ou(pe){var me=pe.alternate;return pe===gr||me!==null&&me===gr}function mc(pe,me){ns=Sl=!0;var Ae=pe.pending;Ae===null?me.next=me:(me.next=Ae.next,Ae.next=me),pe.pending=me}function Ta(pe,me,Ae){br!==null&&(pe.mode&1)!==0&&(jn&2)===0?(pe=me.interleaved,pe===null?(Ae.next=Ae,Ii===null?Ii=[me]:Ii.push(me)):(Ae.next=pe.next,pe.next=Ae),me.interleaved=Ae):(pe=me.pending,pe===null?Ae.next=Ae:(Ae.next=pe.next,pe.next=Ae),me.pending=Ae)}function ba(pe,me,Ae){if((Ae&4194240)!==0){var Re=me.lanes;Re&=pe.pendingLanes,Ae|=Re,me.lanes=Ae,Zi(pe,Ae)}}var qo={readContext:ui,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},gc={readContext:ui,useCallback:function(pe,me){return zi().memoizedState=[pe,me===void 0?null:me],pe},useContext:ui,useEffect:bl,useImperativeHandle:function(pe,me,Ae){return Ae=Ae!=null?Ae.concat([pe]):null,Gs(4194308,4,Aa.bind(null,me,pe),Ae)},useLayoutEffect:function(pe,me){return Gs(4194308,4,pe,me)},useInsertionEffect:function(pe,me){return Gs(4,2,pe,me)},useMemo:function(pe,me){var Ae=zi();return me=me===void 0?null:me,pe=pe(),Ae.memoizedState=[pe,me],pe},useReducer:function(pe,me,Ae){var Re=zi();return me=Ae!==void 0?Ae(me):me,Re.memoizedState=Re.baseState=me,pe={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pe,lastRenderedState:me},Re.queue=pe,pe=pe.dispatch=su.bind(null,gr,pe),[Re.memoizedState,pe]},useRef:function(pe){var me=zi();return pe={current:pe},me.memoizedState=pe},useState:Sa,useDebugValue:wl,useDeferredValue:function(pe){var me=Sa(pe),Ae=me[0],Re=me[1];return bl(function(){var Le=xi.transition;xi.transition={};try{Re(pe)}finally{xi.transition=Le}},[pe]),Ae},useTransition:function(){var pe=Sa(!1),me=pe[0];return pe=Rl.bind(null,pe[1]),zi().memoizedState=pe,[me,pe]},useMutableSource:function(){},useSyncExternalStore:function(pe,me,Ae){var Re=gr,Le=zi();if(hr){if(Ae===void 0)throw Error(se(407));Ae=Ae()}else{if(Ae=me(),br===null)throw Error(se(349));(oo&30)!==0||hc(Re,me,Ae)}Le.memoizedState=Ae;var ze={value:Ae,getSnapshot:me};return Le.queue=ze,bl(vs.bind(null,Re,ze,pe),[pe]),Re.flags|=2048,Ea(9,pc.bind(null,Re,ze,Ae,me),void 0,null),Ae},useId:function(){var pe=zi(),me=br.identifierPrefix;if(hr){var Ae=gs,Re=ms;Ae=(Re&~(1<<32-ur(Re)-1)).toString(32)+Ae,me=":"+me+"R"+Ae,Ae=ao++,0<Ae&&(me+="H"+Ae.toString(32)),me+=":"}else Ae=va++,me=":"+me+"r"+Ae.toString(32)+":";return pe.memoizedState=me},unstable_isNewReconciler:!1},_c={readContext:ui,useCallback:Cl,useContext:ui,useEffect:Ho,useImperativeHandle:Wo,useInsertionEffect:ar,useLayoutEffect:Ml,useMemo:jo,useReducer:ya,useRef:iu,useState:function(){return ya(rs)},useDebugValue:wl,useDeferredValue:function(pe){var me=ya(rs),Ae=me[0],Re=me[1];return Ho(function(){var Le=xi.transition;xi.transition={};try{Re(pe)}finally{xi.transition=Le}},[pe]),Ae},useTransition:function(){var pe=ya(rs)[0],me=Vi().memoizedState;return[pe,me]},useMutableSource:fc,useSyncExternalStore:dc,useId:lo,unstable_isNewReconciler:!1},vc={readContext:ui,useCallback:Cl,useContext:ui,useEffect:Ho,useImperativeHandle:Wo,useInsertionEffect:ar,useLayoutEffect:Ml,useMemo:jo,useReducer:xa,useRef:iu,useState:function(){return xa(rs)},useDebugValue:wl,useDeferredValue:function(pe){var me=xa(rs),Ae=me[0],Re=me[1];return Ho(function(){var Le=xi.transition;xi.transition={};try{Re(pe)}finally{xi.transition=Le}},[pe]),Ae},useTransition:function(){var pe=xa(rs)[0],me=Vi().memoizedState;return[pe,me]},useMutableSource:fc,useSyncExternalStore:dc,useId:lo,unstable_isNewReconciler:!1};function yc(pe,me){try{var Ae="",Re=me;do Ae+=tc(Re),Re=Re.return;while(Re);var Le=Ae}catch(ze){Le=`
Error generating stack: `+ze.message+`
`+ze.stack}return{value:pe,source:me,stack:Le}}function Pl(pe,me){try{console.error(me.value)}catch(Ae){setTimeout(function(){throw Ae})}}var zu=typeof WeakMap=="function"?WeakMap:Map;function au(pe,me,Ae){Ae=ps(-1,Ae),Ae.tag=3,Ae.payload={element:null};var Re=me.value;return Ae.callback=function(){Zo||(Zo=!0,dr=Re),Pl(pe,me)},Ae}function Il(pe,me,Ae){Ae=ps(-1,Ae),Ae.tag=3;var Re=pe.type.getDerivedStateFromError;if(typeof Re=="function"){var Le=me.value;Ae.payload=function(){return Re(Le)},Ae.callback=function(){Pl(pe,me)}}var ze=pe.stateNode;return ze!==null&&typeof ze.componentDidCatch=="function"&&(Ae.callback=function(){Pl(pe,me),typeof Re!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var et=me.stack;this.componentDidCatch(me.value,{componentStack:et!==null?et:""})}),Ae}function ys(pe,me,Ae){var Re=pe.pingCache;if(Re===null){Re=pe.pingCache=new zu;var Le=new Set;Re.set(me,Le)}else Le=Re.get(me),Le===void 0&&(Le=new Set,Re.set(me,Le));Le.has(Ae)||(Le.add(Ae),pe=Nc.bind(null,pe,me,Ae),me.then(pe,pe))}function xc(pe){do{var me;if((me=pe.tag===13)&&(me=pe.memoizedState,me=me!==null?me.dehydrated!==null:!0),me)return pe;pe=pe.return}while(pe!==null);return null}function co(pe,me,Ae,Re,Le){return(pe.mode&1)===0?(pe===me?pe.flags|=65536:(pe.flags|=128,Ae.flags|=131072,Ae.flags&=-52805,Ae.tag===1&&(Ae.alternate===null?Ae.tag=17:(me=ps(-1,1),me.tag=2,Fs(Ae,me))),Ae.lanes|=1),pe):(pe.flags|=65536,pe.lanes=Le,pe)}function Ir(pe){pe.flags|=4}function Xo(pe,me){if(pe!==null&&pe.child===me.child)return!0;if((me.flags&16)!==0)return!1;for(pe=me.child;pe!==null;){if((pe.flags&12854)!==0||(pe.subtreeFlags&12854)!==0)return!1;pe=pe.sibling}return!0}var Si,uo,Bl,Ll;if(an)Si=function(pe,me){for(var Ae=me.child;Ae!==null;){if(Ae.tag===5||Ae.tag===6)lt(pe,Ae.stateNode);else if(Ae.tag!==4&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===me)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===me)return;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}},uo=function(){},Bl=function(pe,me,Ae,Re,Le){if(pe=pe.memoizedProps,pe!==Re){var ze=me.stateNode,et=Gi(fi.current);Ae=Gt(ze,Ae,pe,Re,Le,et),(me.updateQueue=Ae)&&Ir(me)}},Ll=function(pe,me,Ae,Re){Ae!==Re&&Ir(me)};else if(mn){Si=function(pe,me,Ae,Re){for(var Le=me.child;Le!==null;){if(Le.tag===5){var ze=Le.stateNode;Ae&&Re&&(ze=Hn(ze,Le.type,Le.memoizedProps,Le)),lt(pe,ze)}else if(Le.tag===6)ze=Le.stateNode,Ae&&Re&&(ze=Rr(ze,Le.memoizedProps,Le)),lt(pe,ze);else if(Le.tag!==4){if(Le.tag===22&&Le.memoizedState!==null)ze=Le.child,ze!==null&&(ze.return=Le),Si(pe,Le,!0,!0);else if(Le.child!==null){Le.child.return=Le,Le=Le.child;continue}}if(Le===me)break;for(;Le.sibling===null;){if(Le.return===null||Le.return===me)return;Le=Le.return}Le.sibling.return=Le.return,Le=Le.sibling}};var zs=function(pe,me,Ae,Re){for(var Le=me.child;Le!==null;){if(Le.tag===5){var ze=Le.stateNode;Ae&&Re&&(ze=Hn(ze,Le.type,Le.memoizedProps,Le)),ln(pe,ze)}else if(Le.tag===6)ze=Le.stateNode,Ae&&Re&&(ze=Rr(ze,Le.memoizedProps,Le)),ln(pe,ze);else if(Le.tag!==4){if(Le.tag===22&&Le.memoizedState!==null)ze=Le.child,ze!==null&&(ze.return=Le),zs(pe,Le,!0,!0);else if(Le.child!==null){Le.child.return=Le,Le=Le.child;continue}}if(Le===me)break;for(;Le.sibling===null;){if(Le.return===null||Le.return===me)return;Le=Le.return}Le.sibling.return=Le.return,Le=Le.sibling}};uo=function(pe,me){var Ae=me.stateNode;if(!Xo(pe,me)){pe=Ae.containerInfo;var Re=zt(pe);zs(Re,me,!1,!1),Ae.pendingChildren=Re,Ir(me),Pn(pe,Re)}},Bl=function(pe,me,Ae,Re,Le){var ze=pe.stateNode,et=pe.memoizedProps;if((pe=Xo(pe,me))&&et===Re)me.stateNode=ze;else{var gt=me.stateNode,Nt=Gi(fi.current),rn=null;et!==Re&&(rn=Gt(gt,Ae,et,Re,Le,Nt)),pe&&rn===null?me.stateNode=ze:(ze=Kt(ze,rn,Ae,et,Re,me,pe,gt),Pt(ze,Ae,Re,Le,Nt)&&Ir(me),me.stateNode=ze,pe?Ir(me):Si(ze,me,!1,!1))}},Ll=function(pe,me,Ae,Re){Ae!==Re?(pe=Gi(io.current),Ae=Gi(fi.current),me.stateNode=yt(Re,pe,Ae,me),Ir(me)):me.stateNode=pe.stateNode}}else uo=function(){},Bl=function(){},Ll=function(){};function xs(pe,me){if(!hr)switch(pe.tailMode){case"hidden":me=pe.tail;for(var Ae=null;me!==null;)me.alternate!==null&&(Ae=me),me=me.sibling;Ae===null?pe.tail=null:Ae.sibling=null;break;case"collapsed":Ae=pe.tail;for(var Re=null;Ae!==null;)Ae.alternate!==null&&(Re=Ae),Ae=Ae.sibling;Re===null?me||pe.tail===null?pe.tail=null:pe.tail.sibling=null:Re.sibling=null}}function Tr(pe){var me=pe.alternate!==null&&pe.alternate.child===pe.child,Ae=0,Re=0;if(me)for(var Le=pe.child;Le!==null;)Ae|=Le.lanes|Le.childLanes,Re|=Le.subtreeFlags&14680064,Re|=Le.flags&14680064,Le.return=pe,Le=Le.sibling;else for(Le=pe.child;Le!==null;)Ae|=Le.lanes|Le.childLanes,Re|=Le.subtreeFlags,Re|=Le.flags,Le.return=pe,Le=Le.sibling;return pe.subtreeFlags|=Re,pe.childLanes=Ae,me}function Dl(pe,me,Ae){var Re=me.pendingProps;switch(ac(me),me.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(me),null;case 1:return On(me.type)&&vr(),Tr(me),null;case 3:return Re=me.stateNode,zo(),hn(zn),hn(Gn),so(),Re.pendingContext&&(Re.context=Re.pendingContext,Re.pendingContext=null),(pe===null||pe.child===null)&&(ma(me)?Ir(me):pe===null||pe.memoizedState.isDehydrated&&(me.flags&256)===0||(me.flags|=1024,Di!==null&&(ka(Di),Di=null))),uo(pe,me),Tr(me),null;case 5:uc(me),Ae=Gi(io.current);var Le=me.type;if(pe!==null&&me.stateNode!=null)Bl(pe,me,Le,Re,Ae),pe.ref!==me.ref&&(me.flags|=512,me.flags|=2097152);else{if(!Re){if(me.stateNode===null)throw Error(se(166));return Tr(me),null}if(pe=Gi(fi.current),ma(me)){if(!tt)throw Error(se(175));pe=Ja(me.stateNode,me.type,me.memoizedProps,Ae,pe,me,!No),me.updateQueue=pe,pe!==null&&Ir(me)}else{var ze=qe(Le,Re,Ae,pe,me);Si(ze,me,!1,!1),me.stateNode=ze,Pt(ze,Le,Re,Ae,pe)&&Ir(me)}me.ref!==null&&(me.flags|=512,me.flags|=2097152)}return Tr(me),null;case 6:if(pe&&me.stateNode!=null)Ll(pe,me,pe.memoizedProps,Re);else{if(typeof Re!="string"&&me.stateNode===null)throw Error(se(166));if(pe=Gi(io.current),Ae=Gi(fi.current),ma(me)){if(!tt)throw Error(se(176));if(pe=me.stateNode,Re=me.memoizedProps,(Ae=fs(pe,Re,me,!No))&&(Le=ni,Le!==null))switch(ze=(Le.mode&1)!==0,Le.tag){case 3:Mt(Le.stateNode.containerInfo,pe,Re,ze);break;case 5:Rt(Le.type,Le.memoizedProps,Le.stateNode,pe,Re,ze)}Ae&&Ir(me)}else me.stateNode=yt(Re,pe,Ae,me)}return Tr(me),null;case 13:if(hn(mr),Re=me.memoizedState,hr&&Ur!==null&&(me.mode&1)!==0&&(me.flags&128)===0){for(pe=Ur;pe;)pe=_i(pe);return ko(),me.flags|=98560,me}if(Re!==null&&Re.dehydrated!==null){if(Re=ma(me),pe===null){if(!Re)throw Error(se(318));if(!tt)throw Error(se(344));if(pe=me.memoizedState,pe=pe!==null?pe.dehydrated:null,!pe)throw Error(se(317));Ya(pe,me)}else ko(),(me.flags&128)===0&&(me.memoizedState=null),me.flags|=4;return Tr(me),null}return Di!==null&&(ka(Di),Di=null),(me.flags&128)!==0?(me.lanes=Ae,me):(Re=Re!==null,Ae=!1,pe===null?ma(me):Ae=pe.memoizedState!==null,Re&&!Ae&&(me.child.flags|=8192,(me.mode&1)!==0&&(pe===null||(mr.current&1)!==0?xr===0&&(xr=3):Gl())),me.updateQueue!==null&&(me.flags|=4),Tr(me),null);case 4:return zo(),uo(pe,me),pe===null&&Dt(me.stateNode.containerInfo),Tr(me),null;case 10:return pa(me.type._context),Tr(me),null;case 17:return On(me.type)&&vr(),Tr(me),null;case 19:if(hn(mr),Le=me.memoizedState,Le===null)return Tr(me),null;if(Re=(me.flags&128)!==0,ze=Le.rendering,ze===null)if(Re)xs(Le,!1);else{if(xr!==0||pe!==null&&(pe.flags&128)!==0)for(pe=me.child;pe!==null;){if(ze=xl(pe),ze!==null){for(me.flags|=128,xs(Le,!1),pe=ze.updateQueue,pe!==null&&(me.updateQueue=pe,me.flags|=4),me.subtreeFlags=0,pe=Ae,Re=me.child;Re!==null;)Ae=Re,Le=pe,Ae.flags&=14680066,ze=Ae.alternate,ze===null?(Ae.childLanes=0,Ae.lanes=Le,Ae.child=null,Ae.subtreeFlags=0,Ae.memoizedProps=null,Ae.memoizedState=null,Ae.updateQueue=null,Ae.dependencies=null,Ae.stateNode=null):(Ae.childLanes=ze.childLanes,Ae.lanes=ze.lanes,Ae.child=ze.child,Ae.subtreeFlags=0,Ae.deletions=null,Ae.memoizedProps=ze.memoizedProps,Ae.memoizedState=ze.memoizedState,Ae.updateQueue=ze.updateQueue,Ae.type=ze.type,Le=ze.dependencies,Ae.dependencies=Le===null?null:{lanes:Le.lanes,firstContext:Le.firstContext}),Re=Re.sibling;return Bn(mr,mr.current&1|2),me.child}pe=pe.sibling}Le.tail!==null&&Pr()>Ws&&(me.flags|=128,Re=!0,xs(Le,!1),me.lanes=4194304)}else{if(!Re)if(pe=xl(ze),pe!==null){if(me.flags|=128,Re=!0,pe=pe.updateQueue,pe!==null&&(me.updateQueue=pe,me.flags|=4),xs(Le,!0),Le.tail===null&&Le.tailMode==="hidden"&&!ze.alternate&&!hr)return Tr(me),null}else 2*Pr()-Le.renderingStartTime>Ws&&Ae!==1073741824&&(me.flags|=128,Re=!0,xs(Le,!1),me.lanes=4194304);Le.isBackwards?(ze.sibling=me.child,me.child=ze):(pe=Le.last,pe!==null?pe.sibling=ze:me.child=ze,Le.last=ze)}return Le.tail!==null?(me=Le.tail,Le.rendering=me,Le.tail=me.sibling,Le.renderingStartTime=Pr(),me.sibling=null,pe=mr.current,Bn(mr,Re?pe&1|2:pe&1),me):(Tr(me),null);case 22:case 23:return Ua(),Re=me.memoizedState!==null,pe!==null&&pe.memoizedState!==null!==Re&&(me.flags|=8192),Re&&(me.mode&1)!==0?(Jr&1073741824)!==0&&(Tr(me),an&&me.subtreeFlags&6&&(me.flags|=8192)):Tr(me),null;case 24:return null;case 25:return null}throw Error(se(156,me.tag))}var Sc=oe.ReactCurrentOwner,Fr=!1;function yr(pe,me,Ae,Re){me.child=pe===null?nu(me,null,Ae,Re):_s(me,pe.child,Ae,Re)}function lr(pe,me,Ae,Re,Le){Ae=Ae.render;var ze=me.ref;return Do(me,Le),Re=Vo(pe,me,Ae,Re,ze,Le),Ae=$s(),pe!==null&&!Fr?(me.updateQueue=pe.updateQueue,me.flags&=-2053,pe.lanes&=~Le,di(pe,me,Le)):(hr&&Ae&&oc(me),me.flags|=1,yr(pe,me,Re,Le),me.child)}function or(pe,me,Ae,Re,Le){if(pe===null){var ze=Ae.type;return typeof ze=="function"&&!Vl(ze)&&ze.defaultProps===void 0&&Ae.compare===null&&Ae.defaultProps===void 0?(me.tag=15,me.type=ze,Ss(pe,me,ze,Re,Le)):(pe=Hl(Ae.type,null,Re,me,me.mode,Le),pe.ref=me.ref,pe.return=me,me.child=pe)}if(ze=pe.child,(pe.lanes&Le)===0){var et=ze.memoizedProps;if(Ae=Ae.compare,Ae=Ae!==null?Ae:$i,Ae(et,Re)&&pe.ref===me.ref)return di(pe,me,Le)}return me.flags|=1,pe=Ps(ze,Re),pe.ref=me.ref,pe.return=me,me.child=pe}function Ss(pe,me,Ae,Re,Le){if(pe!==null&&$i(pe.memoizedProps,Re)&&pe.ref===me.ref)if(Fr=!1,(pe.lanes&Le)!==0)(pe.flags&131072)!==0&&(Fr=!0);else return me.lanes=pe.lanes,di(pe,me,Le);return Es(pe,me,Ae,Re,Le)}function $r(pe,me,Ae){var Re=me.pendingProps,Le=Re.children,ze=pe!==null?pe.memoizedState:null;if(Re.mode==="hidden")if((me.mode&1)===0)me.memoizedState={baseLanes:0,cachePool:null},Bn(xo,Jr),Jr|=Ae;else if((Ae&1073741824)!==0)me.memoizedState={baseLanes:0,cachePool:null},Re=ze!==null?ze.baseLanes:Ae,Bn(xo,Jr),Jr|=Re;else return pe=ze!==null?ze.baseLanes|Ae:Ae,me.lanes=me.childLanes=1073741824,me.memoizedState={baseLanes:pe,cachePool:null},me.updateQueue=null,Bn(xo,Jr),Jr|=pe,null;else ze!==null?(Re=ze.baseLanes|Ae,me.memoizedState=null):Re=Ae,Bn(xo,Jr),Jr|=Re;return yr(pe,me,Le,Ae),me.child}function ri(pe,me){var Ae=me.ref;(pe===null&&Ae!==null||pe!==null&&pe.ref!==Ae)&&(me.flags|=512,me.flags|=2097152)}function Es(pe,me,Ae,Re,Le){var ze=On(Ae)?wn:Gn.current;return ze=Qn(me,ze),Do(me,Le),Ae=Vo(pe,me,Ae,Re,ze,Le),Re=$s(),pe!==null&&!Fr?(me.updateQueue=pe.updateQueue,me.flags&=-2053,pe.lanes&=~Le,di(pe,me,Le)):(hr&&Re&&oc(me),me.flags|=1,yr(pe,me,Ae,Le),me.child)}function fo(pe,me,Ae,Re,Le){if(On(Ae)){var ze=!0;Yi(me)}else ze=!1;if(Do(me,Le),me.stateNode===null)pe!==null&&(pe.alternate=null,me.alternate=null,me.flags|=2),Yc(me,Ae,Re),sc(me,Ae,Re,Le),Re=!0;else if(pe===null){var et=me.stateNode,gt=me.memoizedProps;et.props=gt;var Nt=et.context,rn=Ae.contextType;typeof rn=="object"&&rn!==null?rn=ui(rn):(rn=On(Ae)?wn:Gn.current,rn=Qn(me,rn));var xn=Ae.getDerivedStateFromProps,Un=typeof xn=="function"||typeof et.getSnapshotBeforeUpdate=="function";Un||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(gt!==Re||Nt!==rn)&&Qc(me,et,Re,rn),Bi=!1;var Dn=me.memoizedState;et.state=Dn,hl(me,Re,et,Le),Nt=me.memoizedState,gt!==Re||Dn!==Nt||zn.current||Bi?(typeof xn=="function"&&(rc(me,Ae,xn,Re),Nt=me.memoizedState),(gt=Bi||ic(me,Ae,gt,Re,Dn,Nt,rn))?(Un||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount()),typeof et.componentDidMount=="function"&&(me.flags|=4194308)):(typeof et.componentDidMount=="function"&&(me.flags|=4194308),me.memoizedProps=Re,me.memoizedState=Nt),et.props=Re,et.state=Nt,et.context=rn,Re=gt):(typeof et.componentDidMount=="function"&&(me.flags|=4194308),Re=!1)}else{et=me.stateNode,nc(pe,me),gt=me.memoizedProps,rn=me.type===me.elementType?gt:ci(me.type,gt),et.props=rn,Un=me.pendingProps,Dn=et.context,Nt=Ae.contextType,typeof Nt=="object"&&Nt!==null?Nt=ui(Nt):(Nt=On(Ae)?wn:Gn.current,Nt=Qn(me,Nt));var Xn=Ae.getDerivedStateFromProps;(xn=typeof Xn=="function"||typeof et.getSnapshotBeforeUpdate=="function")||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(gt!==Un||Dn!==Nt)&&Qc(me,et,Re,Nt),Bi=!1,Dn=me.memoizedState,et.state=Dn,hl(me,Re,et,Le);var pn=me.memoizedState;gt!==Un||Dn!==pn||zn.current||Bi?(typeof Xn=="function"&&(rc(me,Ae,Xn,Re),pn=me.memoizedState),(rn=Bi||ic(me,Ae,rn,Re,Dn,pn,Nt)||!1)?(xn||typeof et.UNSAFE_componentWillUpdate!="function"&&typeof et.componentWillUpdate!="function"||(typeof et.componentWillUpdate=="function"&&et.componentWillUpdate(Re,pn,Nt),typeof et.UNSAFE_componentWillUpdate=="function"&&et.UNSAFE_componentWillUpdate(Re,pn,Nt)),typeof et.componentDidUpdate=="function"&&(me.flags|=4),typeof et.getSnapshotBeforeUpdate=="function"&&(me.flags|=1024)):(typeof et.componentDidUpdate!="function"||gt===pe.memoizedProps&&Dn===pe.memoizedState||(me.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||gt===pe.memoizedProps&&Dn===pe.memoizedState||(me.flags|=1024),me.memoizedProps=Re,me.memoizedState=pn),et.props=Re,et.state=pn,et.context=Nt,Re=rn):(typeof et.componentDidUpdate!="function"||gt===pe.memoizedProps&&Dn===pe.memoizedState||(me.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||gt===pe.memoizedProps&&Dn===pe.memoizedState||(me.flags|=1024),Re=!1)}return Kr(pe,me,Ae,Re,ze,Le)}function Kr(pe,me,Ae,Re,Le,ze){ri(pe,me);var et=(me.flags&128)!==0;if(!Re&&!et)return Le&&rr(me,Ae,!1),di(pe,me,ze);Re=me.stateNode,Sc.current=me;var gt=et&&typeof Ae.getDerivedStateFromError!="function"?null:Re.render();return me.flags|=1,pe!==null&&et?(me.child=_s(me,pe.child,null,ze),me.child=_s(me,null,gt,ze)):yr(pe,me,gt,ze),me.memoizedState=Re.state,Le&&rr(me,Ae,!0),me.child}function Ma(pe){var me=pe.stateNode;me.pendingContext?Ci(pe,me.pendingContext,me.pendingContext!==me.context):me.context&&Ci(pe,me.context,!1),yl(pe,me.containerInfo)}function Ec(pe,me,Ae,Re,Le){return ko(),vl(Le),me.flags|=256,yr(pe,me,Ae,Re),me.child}var wa={dehydrated:null,treeContext:null,retryLane:0};function ho(pe){return{baseLanes:pe,cachePool:null}}function Ac(pe,me,Ae){var Re=me.pendingProps,Le=mr.current,ze=!1,et=(me.flags&128)!==0,gt;if((gt=et)||(gt=pe!==null&&pe.memoizedState===null?!1:(Le&2)!==0),gt?(ze=!0,me.flags&=-129):(pe===null||pe.memoizedState!==null)&&(Le|=1),Bn(mr,Le&1),pe===null)return ks(me),pe=me.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null)?((me.mode&1)===0?me.lanes=1:Ji(pe)?me.lanes=8:me.lanes=1073741824,null):(Le=Re.children,pe=Re.fallback,ze?(Re=me.mode,ze=me.child,Le={mode:"hidden",children:Le},(Re&1)===0&&ze!==null?(ze.childLanes=0,ze.pendingProps=Le):ze=za(Le,Re,0,null),pe=bo(pe,Re,Ae,null),ze.return=me,pe.return=me,ze.sibling=pe,me.child=ze,me.child.memoizedState=ho(Ae),me.memoizedState=wa,pe):Hi(me,Le));if(Le=pe.memoizedState,Le!==null){if(gt=Le.dehydrated,gt!==null){if(et)return me.flags&256?(me.flags&=-257,Ra(pe,me,Ae,Error(se(422)))):me.memoizedState!==null?(me.child=pe.child,me.flags|=128,null):(ze=Re.fallback,Le=me.mode,Re=za({mode:"visible",children:Re.children},Le,0,null),ze=bo(ze,Le,Ae,null),ze.flags|=2,Re.return=me,ze.return=me,Re.sibling=ze,me.child=Re,(me.mode&1)!==0&&_s(me,pe.child,null,Ae),me.child.memoizedState=ho(Ae),me.memoizedState=wa,ze);if((me.mode&1)===0)me=Ra(pe,me,Ae,null);else if(Ji(gt))me=Ra(pe,me,Ae,Error(se(419)));else if(Re=(Ae&pe.childLanes)!==0,Fr||Re){if(Re=br,Re!==null){switch(Ae&-Ae){case 4:ze=2;break;case 16:ze=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ze=32;break;case 536870912:ze=268435456;break;default:ze=0}Re=(ze&(Re.suspendedLanes|Ae))!==0?0:ze,Re!==0&&Re!==Le.retryLane&&(Le.retryLane=Re,Yr(pe,Re,-1))}Gl(),me=Ra(pe,me,Ae,Error(se(421)))}else Ro(gt)?(me.flags|=128,me.child=pe.child,me=du.bind(null,pe),Xs(gt,me),me=null):(Ae=Le.treeContext,tt&&(Ur=Ka(gt),ni=me,hr=!0,Di=null,No=!1,Ae!==null&&(Li[vi++]=ms,Li[vi++]=gs,Li[vi++]=to,ms=Ae.id,gs=Ae.overflow,to=me)),me=Hi(me,me.pendingProps.children),me.flags|=4096);return me}return ze?(Re=Ol(pe,me,Re.children,Re.fallback,Ae),ze=me.child,Le=pe.child.memoizedState,ze.memoizedState=Le===null?ho(Ae):{baseLanes:Le.baseLanes|Ae,cachePool:null},ze.childLanes=pe.childLanes&~Ae,me.memoizedState=wa,Re):(Ae=Ca(pe,me,Re.children,Ae),me.memoizedState=null,Ae)}return ze?(Re=Ol(pe,me,Re.children,Re.fallback,Ae),ze=me.child,Le=pe.child.memoizedState,ze.memoizedState=Le===null?ho(Ae):{baseLanes:Le.baseLanes|Ae,cachePool:null},ze.childLanes=pe.childLanes&~Ae,me.memoizedState=wa,Re):(Ae=Ca(pe,me,Re.children,Ae),me.memoizedState=null,Ae)}function Hi(pe,me){return me=za({mode:"visible",children:me},pe.mode,0,null),me.return=pe,pe.child=me}function Ca(pe,me,Ae,Re){var Le=pe.child;return pe=Le.sibling,Ae=Ps(Le,{mode:"visible",children:Ae}),(me.mode&1)===0&&(Ae.lanes=Re),Ae.return=me,Ae.sibling=null,pe!==null&&(Re=me.deletions,Re===null?(me.deletions=[pe],me.flags|=16):Re.push(pe)),me.child=Ae}function Ol(pe,me,Ae,Re,Le){var ze=me.mode;pe=pe.child;var et=pe.sibling,gt={mode:"hidden",children:Ae};return(ze&1)===0&&me.child!==pe?(Ae=me.child,Ae.childLanes=0,Ae.pendingProps=gt,me.deletions=null):(Ae=Ps(pe,gt),Ae.subtreeFlags=pe.subtreeFlags&14680064),et!==null?Re=Ps(et,Re):(Re=bo(Re,ze,Le,null),Re.flags|=2),Re.return=me,Ae.return=me,Ae.sibling=Re,me.child=Ae,Re}function Ra(pe,me,Ae,Re){return Re!==null&&vl(Re),_s(me,pe.child,null,Ae),pe=Hi(me,me.pendingProps.children),pe.flags|=2,me.memoizedState=null,pe}function lu(pe,me,Ae){pe.lanes|=me;var Re=pe.alternate;Re!==null&&(Re.lanes|=me),eo(pe.return,me,Ae)}function ss(pe,me,Ae,Re,Le){var ze=pe.memoizedState;ze===null?pe.memoizedState={isBackwards:me,rendering:null,renderingStartTime:0,last:Re,tail:Ae,tailMode:Le}:(ze.isBackwards=me,ze.rendering=null,ze.renderingStartTime=0,ze.last=Re,ze.tail=Ae,ze.tailMode=Le)}function po(pe,me,Ae){var Re=me.pendingProps,Le=Re.revealOrder,ze=Re.tail;if(yr(pe,me,Re.children,Ae),Re=mr.current,(Re&2)!==0)Re=Re&1|2,me.flags|=128;else{if(pe!==null&&(pe.flags&128)!==0)e:for(pe=me.child;pe!==null;){if(pe.tag===13)pe.memoizedState!==null&&lu(pe,Ae,me);else if(pe.tag===19)lu(pe,Ae,me);else if(pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===me)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===me)break e;pe=pe.return}pe.sibling.return=pe.return,pe=pe.sibling}Re&=1}if(Bn(mr,Re),(me.mode&1)===0)me.memoizedState=null;else switch(Le){case"forwards":for(Ae=me.child,Le=null;Ae!==null;)pe=Ae.alternate,pe!==null&&xl(pe)===null&&(Le=Ae),Ae=Ae.sibling;Ae=Le,Ae===null?(Le=me.child,me.child=null):(Le=Ae.sibling,Ae.sibling=null),ss(me,!1,Le,Ae,ze);break;case"backwards":for(Ae=null,Le=me.child,me.child=null;Le!==null;){if(pe=Le.alternate,pe!==null&&xl(pe)===null){me.child=Le;break}pe=Le.sibling,Le.sibling=Ae,Ae=Le,Le=pe}ss(me,!0,Ae,null,ze);break;case"together":ss(me,!1,null,null,void 0);break;default:me.memoizedState=null}return me.child}function di(pe,me,Ae){if(pe!==null&&(me.dependencies=pe.dependencies),os|=me.lanes,(Ae&me.childLanes)===0)return null;if(pe!==null&&me.child!==pe.child)throw Error(se(153));if(me.child!==null){for(pe=me.child,Ae=Ps(pe,pe.pendingProps),me.child=Ae,Ae.return=me;pe.sibling!==null;)pe=pe.sibling,Ae=Ae.sibling=Ps(pe,pe.pendingProps),Ae.return=me;Ae.sibling=null}return me.child}function Fl(pe,me,Ae){switch(me.tag){case 3:Ma(me),ko();break;case 5:ru(me);break;case 1:On(me.type)&&Yi(me);break;case 4:yl(me,me.stateNode.containerInfo);break;case 10:Zs(me,me.type._context,me.memoizedProps.value);break;case 13:var Re=me.memoizedState;if(Re!==null)return Re.dehydrated!==null?(Bn(mr,mr.current&1),me.flags|=128,null):(Ae&me.child.childLanes)!==0?Ac(pe,me,Ae):(Bn(mr,mr.current&1),pe=di(pe,me,Ae),pe!==null?pe.sibling:null);Bn(mr,mr.current&1);break;case 19:if(Re=(Ae&me.childLanes)!==0,(pe.flags&128)!==0){if(Re)return po(pe,me,Ae);me.flags|=128}var Le=me.memoizedState;if(Le!==null&&(Le.rendering=null,Le.tail=null,Le.lastEffect=null),Bn(mr,mr.current),Re)break;return null;case 22:case 23:return me.lanes=0,$r(pe,me,Ae)}return di(pe,me,Ae)}function Nl(pe,me){switch(ac(me),me.tag){case 1:return On(me.type)&&vr(),pe=me.flags,pe&65536?(me.flags=pe&-65537|128,me):null;case 3:return zo(),hn(zn),hn(Gn),so(),pe=me.flags,(pe&65536)!==0&&(pe&128)===0?(me.flags=pe&-65537|128,me):null;case 5:return uc(me),null;case 13:if(hn(mr),pe=me.memoizedState,pe!==null&&pe.dehydrated!==null){if(me.alternate===null)throw Error(se(340));ko()}return pe=me.flags,pe&65536?(me.flags=pe&-65537|128,me):null;case 19:return hn(mr),null;case 4:return zo(),null;case 10:return pa(me.type._context),null;case 22:case 23:return Ua(),null;case 24:return null;default:return null}}var ii=!1,Nr=!1,mo=typeof WeakSet=="function"?WeakSet:Set,on=null;function Oi(pe,me){var Ae=pe.ref;if(Ae!==null)if(typeof Ae=="function")try{Ae(null)}catch(Re){oi(pe,me,Re)}else Ae.current=null}function As(pe,me,Ae){try{Ae()}catch(Re){oi(pe,me,Re)}}var Tc=!1;function bc(pe,me){for(st(pe.containerInfo),on=me;on!==null;)if(pe=on,me=pe.child,(pe.subtreeFlags&1028)!==0&&me!==null)me.return=pe,on=me;else for(;on!==null;){pe=on;try{var Ae=pe.alternate;if((pe.flags&1024)!==0)switch(pe.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Re=Ae.memoizedProps,Le=Ae.memoizedState,ze=pe.stateNode,et=ze.getSnapshotBeforeUpdate(pe.elementType===pe.type?Re:ci(pe.type,Re),Le);ze.__reactInternalSnapshotBeforeUpdate=et}break;case 3:an&&en(pe.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(gt){oi(pe,pe.return,gt)}if(me=pe.sibling,me!==null){me.return=pe.return,on=me;break}on=pe.return}return Ae=Tc,Tc=!1,Ae}function Ts(pe,me,Ae){var Re=me.updateQueue;if(Re=Re!==null?Re.lastEffect:null,Re!==null){var Le=Re=Re.next;do{if((Le.tag&pe)===pe){var ze=Le.destroy;Le.destroy=void 0,ze!==void 0&&As(me,Ae,ze)}Le=Le.next}while(Le!==Re)}}function Gr(pe,me){if(me=me.updateQueue,me=me!==null?me.lastEffect:null,me!==null){var Ae=me=me.next;do{if((Ae.tag&pe)===pe){var Re=Ae.create;Ae.destroy=Re()}Ae=Ae.next}while(Ae!==me)}}function si(pe){var me=pe.ref;if(me!==null){var Ae=pe.stateNode;switch(pe.tag){case 5:pe=ot(Ae);break;default:pe=Ae}typeof me=="function"?me(pe):me.current=pe}}function fr(pe,me,Ae){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(ua,me)}catch{}switch(me.tag){case 0:case 11:case 14:case 15:if(pe=me.updateQueue,pe!==null&&(pe=pe.lastEffect,pe!==null)){var Re=pe=pe.next;do{var Le=Re,ze=Le.destroy;Le=Le.tag,ze!==void 0&&((Le&2)!==0||(Le&4)!==0)&&As(me,Ae,ze),Re=Re.next}while(Re!==pe)}break;case 1:if(Oi(me,Ae),pe=me.stateNode,typeof pe.componentWillUnmount=="function")try{pe.props=me.memoizedProps,pe.state=me.memoizedState,pe.componentWillUnmount()}catch(et){oi(me,Ae,et)}break;case 5:Oi(me,Ae);break;case 4:an?Cc(pe,me,Ae):mn&&mn&&(me=me.stateNode.containerInfo,Ae=zt(me),Jn(me,Ae))}}function Fi(pe,me,Ae){for(var Re=me;;)if(fr(pe,Re,Ae),Re.child===null||an&&Re.tag===4){if(Re===me)break;for(;Re.sibling===null;){if(Re.return===null||Re.return===me)return;Re=Re.return}Re.sibling.return=Re.return,Re=Re.sibling}else Re.child.return=Re,Re=Re.child}function Mc(pe){var me=pe.alternate;me!==null&&(pe.alternate=null,Mc(me)),pe.child=null,pe.deletions=null,pe.sibling=null,pe.tag===5&&(me=pe.stateNode,me!==null&&It(me)),pe.stateNode=null,pe.return=null,pe.dependencies=null,pe.memoizedProps=null,pe.memoizedState=null,pe.pendingProps=null,pe.stateNode=null,pe.updateQueue=null}function wc(pe){return pe.tag===5||pe.tag===3||pe.tag===4}function kl(pe){e:for(;;){for(;pe.sibling===null;){if(pe.return===null||wc(pe.return))return null;pe=pe.return}for(pe.sibling.return=pe.return,pe=pe.sibling;pe.tag!==5&&pe.tag!==6&&pe.tag!==18;){if(pe.flags&2||pe.child===null||pe.tag===4)continue e;pe.child.return=pe,pe=pe.child}if(!(pe.flags&2))return pe.stateNode}}function Ul(pe){if(an){e:{for(var me=pe.return;me!==null;){if(wc(me))break e;me=me.return}throw Error(se(160))}var Ae=me;switch(Ae.tag){case 5:me=Ae.stateNode,Ae.flags&32&&(at(me),Ae.flags&=-33),Ae=kl(pe),Ko(pe,Ae,me);break;case 3:case 4:me=Ae.stateNode.containerInfo,Ae=kl(pe),$l(pe,Ae,me);break;default:throw Error(se(161))}}}function $l(pe,me,Ae){var Re=pe.tag;if(Re===5||Re===6)pe=pe.stateNode,me?mt(Ae,pe,me):un(Ae,pe);else if(Re!==4&&(pe=pe.child,pe!==null))for($l(pe,me,Ae),pe=pe.sibling;pe!==null;)$l(pe,me,Ae),pe=pe.sibling}function Ko(pe,me,Ae){var Re=pe.tag;if(Re===5||Re===6)pe=pe.stateNode,me?$t(Ae,pe,me):Ct(Ae,pe);else if(Re!==4&&(pe=pe.child,pe!==null))for(Ko(pe,me,Ae),pe=pe.sibling;pe!==null;)Ko(pe,me,Ae),pe=pe.sibling}function Cc(pe,me,Ae){for(var Re=me,Le=!1,ze,et;;){if(!Le){Le=Re.return;e:for(;;){if(Le===null)throw Error(se(160));switch(ze=Le.stateNode,Le.tag){case 5:et=!1;break e;case 3:ze=ze.containerInfo,et=!0;break e;case 4:ze=ze.containerInfo,et=!0;break e}Le=Le.return}Le=!0}if(Re.tag===5||Re.tag===6)Fi(pe,Re,Ae),et?Xe(ze,Re.stateNode):xt(ze,Re.stateNode);else if(Re.tag===18)et?Ke(ze,Re.stateNode):tl(ze,Re.stateNode);else if(Re.tag===4){if(Re.child!==null){ze=Re.stateNode.containerInfo,et=!0,Re.child.return=Re,Re=Re.child;continue}}else if(fr(pe,Re,Ae),Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===me)break;for(;Re.sibling===null;){if(Re.return===null||Re.return===me)return;Re=Re.return,Re.tag===4&&(Le=!1)}Re.sibling.return=Re.return,Re=Re.sibling}}function Vs(pe,me){if(an){switch(me.tag){case 0:case 11:case 14:case 15:Ts(3,me,me.return),Gr(3,me),Ts(5,me,me.return);return;case 1:return;case 5:var Ae=me.stateNode;if(Ae!=null){var Re=me.memoizedProps;pe=pe!==null?pe.memoizedProps:Re;var Le=me.type,ze=me.updateQueue;me.updateQueue=null,ze!==null&&gn(Ae,ze,Le,pe,Re,me)}return;case 6:if(me.stateNode===null)throw Error(se(162));Ae=me.memoizedProps,Yt(me.stateNode,pe!==null?pe.memoizedProps:Ae,Ae);return;case 3:tt&&pe!==null&&pe.memoizedState.isDehydrated&&Za(me.stateNode.containerInfo);return;case 12:return;case 13:Jo(me);return;case 19:Jo(me);return;case 17:return}throw Error(se(163))}switch(me.tag){case 0:case 11:case 14:case 15:Ts(3,me,me.return),Gr(3,me),Ts(5,me,me.return);return;case 12:return;case 13:Jo(me);return;case 19:Jo(me);return;case 3:tt&&pe!==null&&pe.memoizedState.isDehydrated&&Za(me.stateNode.containerInfo);break;case 22:case 23:return}e:if(mn){switch(me.tag){case 1:case 5:case 6:break e;case 3:case 4:me=me.stateNode,Jn(me.containerInfo,me.pendingChildren);break e}throw Error(se(163))}}function Jo(pe){var me=pe.updateQueue;if(me!==null){pe.updateQueue=null;var Ae=pe.stateNode;Ae===null&&(Ae=pe.stateNode=new mo),me.forEach(function(Re){var Le=hu.bind(null,pe,Re);Ae.has(Re)||(Ae.add(Re),Re.then(Le,Le))})}}function Vu(pe,me){for(on=me;on!==null;){me=on;var Ae=me.deletions;if(Ae!==null)for(var Re=0;Re<Ae.length;Re++){var Le=Ae[Re];try{var ze=pe;an?Cc(ze,Le,me):Fi(ze,Le,me);var et=Le.alternate;et!==null&&(et.return=null),Le.return=null}catch(Cn){oi(Le,me,Cn)}}if(Ae=me.child,(me.subtreeFlags&12854)!==0&&Ae!==null)Ae.return=me,on=Ae;else for(;on!==null;){me=on;try{var gt=me.flags;if(gt&32&&an&&at(me.stateNode),gt&512){var Nt=me.alternate;if(Nt!==null){var rn=Nt.ref;rn!==null&&(typeof rn=="function"?rn(null):rn.current=null)}}if(gt&8192)switch(me.tag){case 13:if(me.memoizedState!==null){var xn=me.alternate;(xn===null||xn.memoizedState===null)&&(Fa=Pr())}break;case 22:var Un=me.memoizedState!==null,Dn=me.alternate,Xn=Dn!==null&&Dn.memoizedState!==null;if(Ae=me,an){e:if(Re=Ae,Le=Un,ze=null,an)for(var pn=Re;;){if(pn.tag===5){if(ze===null){ze=pn;var Hr=pn.stateNode;Le?At(Hr):Ot(pn.stateNode,pn.memoizedProps)}}else if(pn.tag===6){if(ze===null){var Mi=pn.stateNode;Le?Ze(Mi):Ht(Mi,pn.memoizedProps)}}else if((pn.tag!==22&&pn.tag!==23||pn.memoizedState===null||pn===Re)&&pn.child!==null){pn.child.return=pn,pn=pn.child;continue}if(pn===Re)break;for(;pn.sibling===null;){if(pn.return===null||pn.return===Re)break e;ze===pn&&(ze=null),pn=pn.return}ze===pn&&(ze=null),pn.sibling.return=pn.return,pn=pn.sibling}}if(Un&&!Xn&&(Ae.mode&1)!==0){on=Ae;for(var bt=Ae.child;bt!==null;){for(Ae=on=bt;on!==null;){Re=on;var _t=Re.child;switch(Re.tag){case 0:case 11:case 14:case 15:Ts(4,Re,Re.return);break;case 1:Oi(Re,Re.return);var Lt=Re.stateNode;if(typeof Lt.componentWillUnmount=="function"){var dn=Re.return;try{Lt.props=Re.memoizedProps,Lt.state=Re.memoizedState,Lt.componentWillUnmount()}catch(Cn){oi(Re,dn,Cn)}}break;case 5:Oi(Re,Re.return);break;case 22:if(Re.memoizedState!==null){Pc(Ae);continue}}_t!==null?(_t.return=Re,on=_t):Pc(Ae)}bt=bt.sibling}}}switch(gt&4102){case 2:Ul(me),me.flags&=-3;break;case 6:Ul(me),me.flags&=-3,Vs(me.alternate,me);break;case 4096:me.flags&=-4097;break;case 4100:me.flags&=-4097,Vs(me.alternate,me);break;case 4:Vs(me.alternate,me)}}catch(Cn){oi(me,me.return,Cn)}if(Ae=me.sibling,Ae!==null){Ae.return=me.return,on=Ae;break}on=me.return}}}function Pa(pe,me,Ae){on=pe,Ia(pe)}function Ia(pe,me,Ae){for(var Re=(pe.mode&1)!==0;on!==null;){var Le=on,ze=Le.child;if(Le.tag===22&&Re){var et=Le.memoizedState!==null||ii;if(!et){var gt=Le.alternate,Nt=gt!==null&&gt.memoizedState!==null||Nr;gt=ii;var rn=Nr;if(ii=et,(Nr=Nt)&&!rn)for(on=Le;on!==null;)et=on,Nt=et.child,et.tag===22&&et.memoizedState!==null?go(Le):Nt!==null?(Nt.return=et,on=Nt):go(Le);for(;ze!==null;)on=ze,Ia(ze),ze=ze.sibling;on=Le,ii=gt,Nr=rn}Rc(pe)}else(Le.subtreeFlags&8772)!==0&&ze!==null?(ze.return=Le,on=ze):Rc(pe)}}function Rc(pe){for(;on!==null;){var me=on;if((me.flags&8772)!==0){var Ae=me.alternate;try{if((me.flags&8772)!==0)switch(me.tag){case 0:case 11:case 15:Nr||Gr(5,me);break;case 1:var Re=me.stateNode;if(me.flags&4&&!Nr)if(Ae===null)Re.componentDidMount();else{var Le=me.elementType===me.type?Ae.memoizedProps:ci(me.type,Ae.memoizedProps);Re.componentDidUpdate(Le,Ae.memoizedState,Re.__reactInternalSnapshotBeforeUpdate)}var ze=me.updateQueue;ze!==null&&Kc(me,ze,Re);break;case 3:var et=me.updateQueue;if(et!==null){if(Ae=null,me.child!==null)switch(me.child.tag){case 5:Ae=ot(me.child.stateNode);break;case 1:Ae=me.child.stateNode}Kc(me,et,Ae)}break;case 5:var gt=me.stateNode;Ae===null&&me.flags&4&&fn(gt,me.type,me.memoizedProps,me);break;case 6:break;case 4:break;case 12:break;case 13:if(tt&&me.memoizedState===null){var Nt=me.alternate;if(Nt!==null){var rn=Nt.memoizedState;if(rn!==null){var xn=rn.dehydrated;xn!==null&&el(xn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(se(163))}Nr||me.flags&512&&si(me)}catch(Un){oi(me,me.return,Un)}}if(me===pe){on=null;break}if(Ae=me.sibling,Ae!==null){Ae.return=me.return,on=Ae;break}on=me.return}}function Pc(pe){for(;on!==null;){var me=on;if(me===pe){on=null;break}var Ae=me.sibling;if(Ae!==null){Ae.return=me.return,on=Ae;break}on=me.return}}function go(pe){for(;on!==null;){var me=on;try{switch(me.tag){case 0:case 11:case 15:var Ae=me.return;try{Gr(4,me)}catch(Nt){oi(me,Ae,Nt)}break;case 1:var Re=me.stateNode;if(typeof Re.componentDidMount=="function"){var Le=me.return;try{Re.componentDidMount()}catch(Nt){oi(me,Le,Nt)}}var ze=me.return;try{si(me)}catch(Nt){oi(me,ze,Nt)}break;case 5:var et=me.return;try{si(me)}catch(Nt){oi(me,et,Nt)}}}catch(Nt){oi(me,me.return,Nt)}if(me===pe){on=null;break}var gt=me.sibling;if(gt!==null){gt.return=me.return,on=gt;break}on=me.return}}var Ba=0,_o=1,vo=2,bs=3,Yo=4;if(typeof Symbol=="function"&&Symbol.for){var yo=Symbol.for;Ba=yo("selector.component"),_o=yo("selector.has_pseudo_class"),vo=yo("selector.role"),bs=yo("selector.test_id"),Yo=yo("selector.text")}function La(pe){var me=Ut(pe);if(me!=null){if(typeof me.memoizedProps["data-testname"]!="string")throw Error(se(364));return me}if(pe=Tn(pe),pe===null)throw Error(se(362));return pe.stateNode.current}function Da(pe,me){switch(me.$$typeof){case Ba:if(pe.type===me.value)return!0;break;case _o:e:{me=me.value,pe=[pe,0];for(var Ae=0;Ae<pe.length;){var Re=pe[Ae++],Le=pe[Ae++],ze=me[Le];if(Re.tag!==5||!Ve(Re)){for(;ze!=null&&Da(Re,ze);)Le++,ze=me[Le];if(Le===me.length){me=!0;break e}else for(Re=Re.child;Re!==null;)pe.push(Re,Le),Re=Re.sibling}}me=!1}return me;case vo:if(pe.tag===5&&ft(pe.stateNode,me.value))return!0;break;case Yo:if((pe.tag===5||pe.tag===6)&&(pe=We(pe),pe!==null&&0<=pe.indexOf(me.value)))return!0;break;case bs:if(pe.tag===5&&(pe=pe.memoizedProps["data-testname"],typeof pe=="string"&&pe.toLowerCase()===me.value.toLowerCase()))return!0;break;default:throw Error(se(365))}return!1}function Hs(pe){switch(pe.$$typeof){case Ba:return"<"+(Ue(pe.value)||"Unknown")+">";case _o:return":has("+(Hs(pe)||"")+")";case vo:return'[role="'+pe.value+'"]';case Yo:return'"'+pe.value+'"';case bs:return'[data-testname="'+pe.value+'"]';default:throw Error(se(365))}}function Ei(pe,me){var Ae=[];pe=[pe,0];for(var Re=0;Re<pe.length;){var Le=pe[Re++],ze=pe[Re++],et=me[ze];if(Le.tag!==5||!Ve(Le)){for(;et!=null&&Da(Le,et);)ze++,et=me[ze];if(ze===me.length)Ae.push(Le);else for(Le=Le.child;Le!==null;)pe.push(Le,ze),Le=Le.sibling}}return Ae}function Ms(pe,me){if(!qt)throw Error(se(363));pe=La(pe),pe=Ei(pe,me),me=[],pe=Array.from(pe);for(var Ae=0;Ae<pe.length;){var Re=pe[Ae++];if(Re.tag===5)Ve(Re)||me.push(Re.stateNode);else for(Re=Re.child;Re!==null;)pe.push(Re),Re=Re.sibling}return me}var Ic=Math.ceil,Oa=oe.ReactCurrentDispatcher,Wi=oe.ReactCurrentOwner,ir=oe.ReactCurrentBatchConfig,jn=0,br=null,sr=null,pr=0,Jr=0,xo=En(0),xr=0,Qo=null,os=0,Ai=0,So=0,ws=null,Mr=null,Fa=0,Ws=1/0;function Eo(){Ws=Pr()+500}var Zo=!1,dr=null,ji=null,ea=!1,as=null,Ao=0,To=0,Cs=null,cr=-1,Sr=0;function er(){return(jn&6)!==0?Pr():cr!==-1?cr:cr=Pr()}function qi(pe){return(pe.mode&1)===0?1:(jn&2)!==0&&pr!==0?pr&-pr:Xc.transition!==null?(Sr===0&&(pe=Qi,Qi<<=1,(Qi&4194240)===0&&(Qi=64),Sr=pe),Sr):(pe=Kn,pe!==0?pe:Vt())}function Yr(pe,me,Ae){if(50<To)throw To=0,Cs=null,Error(se(185));var Re=js(pe,me);return Re===null?null:(Ks(Re,me,Ae),((jn&2)===0||Re!==br)&&(Re===br&&((jn&2)===0&&(Ai|=me),xr===4&&Vr(Re,pr)),hi(Re,Ae),me===1&&jn===0&&(pe.mode&1)===0&&(Eo(),al&&Pi())),Re)}function js(pe,me){pe.lanes|=me;var Ae=pe.alternate;for(Ae!==null&&(Ae.lanes|=me),Ae=pe,pe=pe.return;pe!==null;)pe.childLanes|=me,Ae=pe.alternate,Ae!==null&&(Ae.childLanes|=me),Ae=pe,pe=pe.return;return Ae.tag===3?Ae.stateNode:null}function hi(pe,me){var Ae=pe.callbackNode;qc(pe,me);var Re=ca(pe,pe===br?pr:0);if(Re===0)Ae!==null&&Lo(Ae),pe.callbackNode=null,pe.callbackPriority=0;else if(me=Re&-Re,pe.callbackPriority!==me){if(Ae!=null&&Lo(Ae),me===1)pe.tag===0?cl(Ti.bind(null,pe)):ll(Ti.bind(null,pe)),Qt?kt(function(){jn===0&&Pi()}):Js(Ys,Pi),Ae=null;else{switch(ds(Re)){case 1:Ae=Ys;break;case 4:Ae=$u;break;case 16:Ae=sl;break;case 536870912:Ae=ol;break;default:Ae=sl}Ae=zl(Ae,zr.bind(null,pe))}pe.callbackPriority=me,pe.callbackNode=Ae}}function zr(pe,me){if(cr=-1,Sr=0,(jn&6)!==0)throw Error(se(327));var Ae=pe.callbackNode;if(ls()&&pe.callbackNode!==Ae)return null;var Re=ca(pe,pe===br?pr:0);if(Re===0)return null;if((Re&30)!==0||(Re&pe.expiredLanes)!==0||me)me=$a(pe,Re);else{me=Re;var Le=jn;jn|=2;var ze=Dc();(br!==pe||pr!==me)&&(Eo(),Rs(pe,me));do try{uu();break}catch(gt){Lc(pe,gt)}while(!0);ti(),Oa.current=ze,jn=Le,sr!==null?me=0:(br=null,pr=0,me=xr)}if(me!==0){if(me===2&&(Le=nl(pe),Le!==0&&(Re=Le,me=Na(pe,Le))),me===1)throw Ae=Qo,Rs(pe,0),Vr(pe,Re),hi(pe,Pr()),Ae;if(me===6)Vr(pe,Re);else{if(Le=pe.current.alternate,(Re&30)===0&&!Bc(Le)&&(me=$a(pe,Re),me===2&&(ze=nl(pe),ze!==0&&(Re=ze,me=Na(pe,ze))),me===1))throw Ae=Qo,Rs(pe,0),Vr(pe,Re),hi(pe,Pr()),Ae;switch(pe.finishedWork=Le,pe.finishedLanes=Re,me){case 0:case 1:throw Error(se(345));case 2:Xi(pe,Mr);break;case 3:if(Vr(pe,Re),(Re&130023424)===Re&&(me=Fa+500-Pr(),10<me)){if(ca(pe,0)!==0)break;if(Le=pe.suspendedLanes,(Le&Re)!==Re){er(),pe.pingedLanes|=pe.suspendedLanes&Le;break}pe.timeoutHandle=Bt(Xi.bind(null,pe,Mr),me);break}Xi(pe,Mr);break;case 4:if(Vr(pe,Re),(Re&4194240)===Re)break;for(me=pe.eventTimes,Le=-1;0<Re;){var et=31-ur(Re);ze=1<<et,et=me[et],et>Le&&(Le=et),Re&=~ze}if(Re=Le,Re=Pr()-Re,Re=(120>Re?120:480>Re?480:1080>Re?1080:1920>Re?1920:3e3>Re?3e3:4320>Re?4320:1960*Ic(Re/1960))-Re,10<Re){pe.timeoutHandle=Bt(Xi.bind(null,pe,Mr),Re);break}Xi(pe,Mr);break;case 5:Xi(pe,Mr);break;default:throw Error(se(329))}}}return hi(pe,Pr()),pe.callbackNode===Ae?zr.bind(null,pe):null}function Na(pe,me){var Ae=ws;return pe.current.memoizedState.isDehydrated&&(Rs(pe,me).flags|=256),pe=$a(pe,me),pe!==2&&(me=Mr,Mr=Ae,me!==null&&ka(me)),pe}function ka(pe){Mr===null?Mr=pe:Mr.push.apply(Mr,pe)}function Bc(pe){for(var me=pe;;){if(me.flags&16384){var Ae=me.updateQueue;if(Ae!==null&&(Ae=Ae.stores,Ae!==null))for(var Re=0;Re<Ae.length;Re++){var Le=Ae[Re],ze=Le.getSnapshot;Le=Le.value;try{if(!ei(ze(),Le))return!1}catch{return!1}}}if(Ae=me.child,me.subtreeFlags&16384&&Ae!==null)Ae.return=me,me=Ae;else{if(me===pe)break;for(;me.sibling===null;){if(me.return===null||me.return===pe)return!0;me=me.return}me.sibling.return=me.return,me=me.sibling}}return!0}function Vr(pe,me){for(me&=~So,me&=~Ai,pe.suspendedLanes|=me,pe.pingedLanes&=~me,pe=pe.expirationTimes;0<me;){var Ae=31-ur(me),Re=1<<Ae;pe[Ae]=-1,me&=~Re}}function Ti(pe){if((jn&6)!==0)throw Error(se(327));ls();var me=ca(pe,0);if((me&1)===0)return hi(pe,Pr()),null;var Ae=$a(pe,me);if(pe.tag!==0&&Ae===2){var Re=nl(pe);Re!==0&&(me=Re,Ae=Na(pe,Re))}if(Ae===1)throw Ae=Qo,Rs(pe,0),Vr(pe,me),hi(pe,Pr()),Ae;if(Ae===6)throw Error(se(345));return pe.finishedWork=pe.current.alternate,pe.finishedLanes=me,Xi(pe,Mr),hi(pe,Pr()),null}function ta(pe){as!==null&&as.tag===0&&(jn&6)===0&&ls();var me=jn;jn|=1;var Ae=ir.transition,Re=Kn;try{if(ir.transition=null,Kn=1,pe)return pe()}finally{Kn=Re,ir.transition=Ae,jn=me,(jn&6)===0&&Pi()}}function Ua(){Jr=xo.current,hn(xo)}function Rs(pe,me){pe.finishedWork=null,pe.finishedLanes=0;var Ae=pe.timeoutHandle;if(Ae!==jt&&(pe.timeoutHandle=jt,Wt(Ae)),sr!==null)for(Ae=sr.return;Ae!==null;){var Re=Ae;switch(ac(Re),Re.tag){case 1:Re=Re.type.childContextTypes,Re!=null&&vr();break;case 3:zo(),hn(zn),hn(Gn),so();break;case 5:uc(Re);break;case 4:zo();break;case 13:hn(mr);break;case 19:hn(mr);break;case 10:pa(Re.type._context);break;case 22:case 23:Ua()}Ae=Ae.return}if(br=pe,sr=pe=Ps(pe.current,null),pr=Jr=me,xr=0,Qo=null,So=Ai=os=0,Mr=ws=null,Ii!==null){for(me=0;me<Ii.length;me++)if(Ae=Ii[me],Re=Ae.interleaved,Re!==null){Ae.interleaved=null;var Le=Re.next,ze=Ae.pending;if(ze!==null){var et=ze.next;ze.next=Le,Re.next=et}Ae.pending=Re}Ii=null}return pe}function Lc(pe,me){do{var Ae=sr;try{if(ti(),ga.current=qo,Sl){for(var Re=gr.memoizedState;Re!==null;){var Le=Re.queue;Le!==null&&(Le.pending=null),Re=Re.next}Sl=!1}if(oo=0,Dr=Lr=gr=null,ns=!1,ao=0,Wi.current=null,Ae===null||Ae.return===null){xr=1,Qo=me,sr=null;break}e:{var ze=pe,et=Ae.return,gt=Ae,Nt=me;if(me=pr,gt.flags|=32768,Nt!==null&&typeof Nt=="object"&&typeof Nt.then=="function"){var rn=Nt,xn=gt,Un=xn.tag;if((xn.mode&1)===0&&(Un===0||Un===11||Un===15)){var Dn=xn.alternate;Dn?(xn.updateQueue=Dn.updateQueue,xn.memoizedState=Dn.memoizedState,xn.lanes=Dn.lanes):(xn.updateQueue=null,xn.memoizedState=null)}var Xn=xc(et);if(Xn!==null){Xn.flags&=-257,co(Xn,et,gt,ze,me),Xn.mode&1&&ys(ze,rn,me),me=Xn,Nt=rn;var pn=me.updateQueue;if(pn===null){var Hr=new Set;Hr.add(Nt),me.updateQueue=Hr}else pn.add(Nt);break e}else{if((me&1)===0){ys(ze,rn,me),Gl();break e}Nt=Error(se(426))}}else if(hr&&gt.mode&1){var Mi=xc(et);if(Mi!==null){(Mi.flags&65536)===0&&(Mi.flags|=256),co(Mi,et,gt,ze,me),vl(Nt);break e}}ze=Nt,xr!==4&&(xr=2),ws===null?ws=[ze]:ws.push(ze),Nt=yc(Nt,gt),gt=et;do{switch(gt.tag){case 3:gt.flags|=65536,me&=-me,gt.lanes|=me;var bt=au(gt,Nt,me);dl(gt,bt);break e;case 1:ze=Nt;var _t=gt.type,Lt=gt.stateNode;if((gt.flags&128)===0&&(typeof _t.getDerivedStateFromError=="function"||Lt!==null&&typeof Lt.componentDidCatch=="function"&&(ji===null||!ji.has(Lt)))){gt.flags|=65536,me&=-me,gt.lanes|=me;var dn=Il(gt,ze,me);dl(gt,dn);break e}}gt=gt.return}while(gt!==null)}Fc(Ae)}catch(Cn){me=Cn,sr===Ae&&Ae!==null&&(sr=Ae=Ae.return);continue}break}while(!0)}function Dc(){var pe=Oa.current;return Oa.current=qo,pe===null?qo:pe}function Gl(){(xr===0||xr===3||xr===2)&&(xr=4),br===null||(os&268435455)===0&&(Ai&268435455)===0||Vr(br,pr)}function $a(pe,me){var Ae=jn;jn|=2;var Re=Dc();br===pe&&pr===me||Rs(pe,me);do try{cu();break}catch(Le){Lc(pe,Le)}while(!0);if(ti(),jn=Ae,Oa.current=Re,sr!==null)throw Error(se(261));return br=null,pr=0,xr}function cu(){for(;sr!==null;)Oc(sr)}function uu(){for(;sr!==null&&!Os();)Oc(sr)}function Oc(pe){var me=Uc(pe.alternate,pe,Jr);pe.memoizedProps=pe.pendingProps,me===null?Fc(pe):sr=me,Wi.current=null}function Fc(pe){var me=pe;do{var Ae=me.alternate;if(pe=me.return,(me.flags&32768)===0){if(Ae=Dl(Ae,me,Jr),Ae!==null){sr=Ae;return}}else{if(Ae=Nl(Ae,me),Ae!==null){Ae.flags&=32767,sr=Ae;return}if(pe!==null)pe.flags|=32768,pe.subtreeFlags=0,pe.deletions=null;else{xr=6,sr=null;return}}if(me=me.sibling,me!==null){sr=me;return}sr=me=pe}while(me!==null);xr===0&&(xr=5)}function Xi(pe,me){var Ae=Kn,Re=ir.transition;try{ir.transition=null,Kn=1,fu(pe,me,Ae)}finally{ir.transition=Re,Kn=Ae}return null}function fu(pe,me,Ae){do ls();while(as!==null);if((jn&6)!==0)throw Error(se(327));var Re=pe.finishedWork,Le=pe.finishedLanes;if(Re===null)return null;if(pe.finishedWork=null,pe.finishedLanes=0,Re===pe.current)throw Error(se(177));pe.callbackNode=null,pe.callbackPriority=0;var ze=Re.lanes|Re.childLanes;if(il(pe,ze),pe===br&&(sr=br=null,pr=0),(Re.subtreeFlags&2064)===0&&(Re.flags&2064)===0||ea||(ea=!0,zl(sl,function(){return ls(),null})),ze=(Re.flags&15990)!==0,(Re.subtreeFlags&15990)!==0||ze){ze=ir.transition,ir.transition=null;var et=Kn;Kn=1;var gt=jn;jn|=4,Wi.current=null,bc(pe,Re),Vu(pe,Re),nt(pe.containerInfo),pe.current=Re,Pa(Re),Uu(),jn=gt,Kn=et,ir.transition=ze}else pe.current=Re;if(ea&&(ea=!1,as=pe,Ao=Le),ze=pe.pendingLanes,ze===0&&(ji=null),fa(Re.stateNode),hi(pe,Pr()),me!==null)for(Ae=pe.onRecoverableError,Re=0;Re<me.length;Re++)Ae(me[Re]);if(Zo)throw Zo=!1,pe=dr,dr=null,pe;return(Ao&1)!==0&&pe.tag!==0&&ls(),ze=pe.pendingLanes,(ze&1)!==0?pe===Cs?To++:(To=0,Cs=pe):To=0,Pi(),null}function ls(){if(as!==null){var pe=ds(Ao),me=ir.transition,Ae=Kn;try{if(ir.transition=null,Kn=16>pe?16:pe,as===null)var Re=!1;else{if(pe=as,as=null,Ao=0,(jn&6)!==0)throw Error(se(331));var Le=jn;for(jn|=4,on=pe.current;on!==null;){var ze=on,et=ze.child;if((on.flags&16)!==0){var gt=ze.deletions;if(gt!==null){for(var Nt=0;Nt<gt.length;Nt++){var rn=gt[Nt];for(on=rn;on!==null;){var xn=on;switch(xn.tag){case 0:case 11:case 15:Ts(8,xn,ze)}var Un=xn.child;if(Un!==null)Un.return=xn,on=Un;else for(;on!==null;){xn=on;var Dn=xn.sibling,Xn=xn.return;if(Mc(xn),xn===rn){on=null;break}if(Dn!==null){Dn.return=Xn,on=Dn;break}on=Xn}}}var pn=ze.alternate;if(pn!==null){var Hr=pn.child;if(Hr!==null){pn.child=null;do{var Mi=Hr.sibling;Hr.sibling=null,Hr=Mi}while(Hr!==null)}}on=ze}}if((ze.subtreeFlags&2064)!==0&&et!==null)et.return=ze,on=et;else e:for(;on!==null;){if(ze=on,(ze.flags&2048)!==0)switch(ze.tag){case 0:case 11:case 15:Ts(9,ze,ze.return)}var bt=ze.sibling;if(bt!==null){bt.return=ze.return,on=bt;break e}on=ze.return}}var _t=pe.current;for(on=_t;on!==null;){et=on;var Lt=et.child;if((et.subtreeFlags&2064)!==0&&Lt!==null)Lt.return=et,on=Lt;else e:for(et=_t;on!==null;){if(gt=on,(gt.flags&2048)!==0)try{switch(gt.tag){case 0:case 11:case 15:Gr(9,gt)}}catch(Cn){oi(gt,gt.return,Cn)}if(gt===et){on=null;break e}var dn=gt.sibling;if(dn!==null){dn.return=gt.return,on=dn;break e}on=gt.return}}if(jn=Le,Pi(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(ua,pe)}catch{}Re=!0}return Re}finally{Kn=Ae,ir.transition=me}}return!1}function Ga(pe,me,Ae){me=yc(Ae,me),me=au(pe,me,1),Fs(pe,me),me=er(),pe=js(pe,1),pe!==null&&(Ks(pe,1,me),hi(pe,me))}function oi(pe,me,Ae){if(pe.tag===3)Ga(pe,pe,Ae);else for(;me!==null;){if(me.tag===3){Ga(me,pe,Ae);break}else if(me.tag===1){var Re=me.stateNode;if(typeof me.type.getDerivedStateFromError=="function"||typeof Re.componentDidCatch=="function"&&(ji===null||!ji.has(Re))){pe=yc(Ae,pe),pe=Il(me,pe,1),Fs(me,pe),pe=er(),me=js(me,1),me!==null&&(Ks(me,1,pe),hi(me,pe));break}}me=me.return}}function Nc(pe,me,Ae){var Re=pe.pingCache;Re!==null&&Re.delete(me),me=er(),pe.pingedLanes|=pe.suspendedLanes&Ae,br===pe&&(pr&Ae)===Ae&&(xr===4||xr===3&&(pr&130023424)===pr&&500>Pr()-Fa?Rs(pe,0):So|=Ae),hi(pe,me)}function kc(pe,me){me===0&&((pe.mode&1)===0?me=1:(me=qn,qn<<=1,(qn&130023424)===0&&(qn=4194304)));var Ae=er();pe=js(pe,me),pe!==null&&(Ks(pe,me,Ae),hi(pe,Ae))}function du(pe){var me=pe.memoizedState,Ae=0;me!==null&&(Ae=me.retryLane),kc(pe,Ae)}function hu(pe,me){var Ae=0;switch(pe.tag){case 13:var Re=pe.stateNode,Le=pe.memoizedState;Le!==null&&(Ae=Le.retryLane);break;case 19:Re=pe.stateNode;break;default:throw Error(se(314))}Re!==null&&Re.delete(me),kc(pe,Ae)}var Uc;Uc=function(pe,me,Ae){if(pe!==null)if(pe.memoizedProps!==me.pendingProps||zn.current)Fr=!0;else{if((pe.lanes&Ae)===0&&(me.flags&128)===0)return Fr=!1,Fl(pe,me,Ae);Fr=(pe.flags&131072)!==0}else Fr=!1,hr&&(me.flags&1048576)!==0&&Zc(me,gl,me.index);switch(me.lanes=0,me.tag){case 2:var Re=me.type;pe!==null&&(pe.alternate=null,me.alternate=null,me.flags|=2),pe=me.pendingProps;var Le=Qn(me,Gn.current);Do(me,Ae),Le=Vo(null,me,Re,pe,Le,Ae);var ze=$s();return me.flags|=1,typeof Le=="object"&&Le!==null&&typeof Le.render=="function"&&Le.$$typeof===void 0?(me.tag=1,me.memoizedState=null,me.updateQueue=null,On(Re)?(ze=!0,Yi(me)):ze=!1,me.memoizedState=Le.state!==null&&Le.state!==void 0?Le.state:null,Oo(me),Le.updater=pl,me.stateNode=Le,Le._reactInternals=me,sc(me,Re,pe,Ae),me=Kr(null,me,Re,!0,ze,Ae)):(me.tag=0,hr&&ze&&oc(me),yr(null,me,Le,Ae),me=me.child),me;case 16:Re=me.elementType;e:{switch(pe!==null&&(pe.alternate=null,me.alternate=null,me.flags|=2),pe=me.pendingProps,Le=Re._init,Re=Le(Re._payload),me.type=Re,Le=me.tag=Hu(Re),pe=ci(Re,pe),Le){case 0:me=Es(null,me,Re,pe,Ae);break e;case 1:me=fo(null,me,Re,pe,Ae);break e;case 11:me=lr(null,me,Re,pe,Ae);break e;case 14:me=or(null,me,Re,ci(Re.type,pe),Ae);break e}throw Error(se(306,Re,""))}return me;case 0:return Re=me.type,Le=me.pendingProps,Le=me.elementType===Re?Le:ci(Re,Le),Es(pe,me,Re,Le,Ae);case 1:return Re=me.type,Le=me.pendingProps,Le=me.elementType===Re?Le:ci(Re,Le),fo(pe,me,Re,Le,Ae);case 3:e:{if(Ma(me),pe===null)throw Error(se(387));Re=me.pendingProps,ze=me.memoizedState,Le=ze.element,nc(pe,me),hl(me,Re,null,Ae);var et=me.memoizedState;if(Re=et.element,tt&&ze.isDehydrated)if(ze={element:Re,isDehydrated:!1,cache:et.cache,transitions:et.transitions},me.updateQueue.baseState=ze,me.memoizedState=ze,me.flags&256){Le=Error(se(423)),me=Ec(pe,me,Re,Ae,Le);break e}else if(Re!==Le){Le=Error(se(424)),me=Ec(pe,me,Re,Ae,Le);break e}else for(tt&&(Ur=Io(me.stateNode.containerInfo),ni=me,hr=!0,Di=null,No=!1),Ae=nu(me,null,Re,Ae),me.child=Ae;Ae;)Ae.flags=Ae.flags&-3|4096,Ae=Ae.sibling;else{if(ko(),Re===Le){me=di(pe,me,Ae);break e}yr(pe,me,Re,Ae)}me=me.child}return me;case 5:return ru(me),pe===null&&ks(me),Re=me.type,Le=me.pendingProps,ze=pe!==null?pe.memoizedProps:null,et=Le.children,pt(Re,Le)?et=null:ze!==null&&pt(Re,ze)&&(me.flags|=32),ri(pe,me),yr(pe,me,et,Ae),me.child;case 6:return pe===null&&ks(me),null;case 13:return Ac(pe,me,Ae);case 4:return yl(me,me.stateNode.containerInfo),Re=me.pendingProps,pe===null?me.child=_s(me,null,Re,Ae):yr(pe,me,Re,Ae),me.child;case 11:return Re=me.type,Le=me.pendingProps,Le=me.elementType===Re?Le:ci(Re,Le),lr(pe,me,Re,Le,Ae);case 7:return yr(pe,me,me.pendingProps,Ae),me.child;case 8:return yr(pe,me,me.pendingProps.children,Ae),me.child;case 12:return yr(pe,me,me.pendingProps.children,Ae),me.child;case 10:e:{if(Re=me.type._context,Le=me.pendingProps,ze=me.memoizedProps,et=Le.value,Zs(me,Re,et),ze!==null)if(ei(ze.value,et)){if(ze.children===Le.children&&!zn.current){me=di(pe,me,Ae);break e}}else for(ze=me.child,ze!==null&&(ze.return=me);ze!==null;){var gt=ze.dependencies;if(gt!==null){et=ze.child;for(var Nt=gt.firstContext;Nt!==null;){if(Nt.context===Re){if(ze.tag===1){Nt=ps(-1,Ae&-Ae),Nt.tag=2;var rn=ze.updateQueue;if(rn!==null){rn=rn.shared;var xn=rn.pending;xn===null?Nt.next=Nt:(Nt.next=xn.next,xn.next=Nt),rn.pending=Nt}}ze.lanes|=Ae,Nt=ze.alternate,Nt!==null&&(Nt.lanes|=Ae),eo(ze.return,Ae,me),gt.lanes|=Ae;break}Nt=Nt.next}}else if(ze.tag===10)et=ze.type===me.type?null:ze.child;else if(ze.tag===18){if(et=ze.return,et===null)throw Error(se(341));et.lanes|=Ae,gt=et.alternate,gt!==null&&(gt.lanes|=Ae),eo(et,Ae,me),et=ze.sibling}else et=ze.child;if(et!==null)et.return=ze;else for(et=ze;et!==null;){if(et===me){et=null;break}if(ze=et.sibling,ze!==null){ze.return=et.return,et=ze;break}et=et.return}ze=et}yr(pe,me,Le.children,Ae),me=me.child}return me;case 9:return Le=me.type,Re=me.pendingProps.children,Do(me,Ae),Le=ui(Le),Re=Re(Le),me.flags|=1,yr(pe,me,Re,Ae),me.child;case 14:return Re=me.type,Le=ci(Re,me.pendingProps),Le=ci(Re.type,Le),or(pe,me,Re,Le,Ae);case 15:return Ss(pe,me,me.type,me.pendingProps,Ae);case 17:return Re=me.type,Le=me.pendingProps,Le=me.elementType===Re?Le:ci(Re,Le),pe!==null&&(pe.alternate=null,me.alternate=null,me.flags|=2),me.tag=1,On(Re)?(pe=!0,Yi(me)):pe=!1,Do(me,Ae),Yc(me,Re,Le),sc(me,Re,Le,Ae),Kr(null,me,Re,!0,pe,Ae);case 19:return po(pe,me,Ae);case 22:return $r(pe,me,Ae)}throw Error(se(156,me.tag))};function zl(pe,me){return Js(pe,me)}function pu(pe,me,Ae,Re){this.tag=pe,this.key=Ae,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=me,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Re,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(pe,me,Ae,Re){return new pu(pe,me,Ae,Re)}function Vl(pe){return pe=pe.prototype,!(!pe||!pe.isReactComponent)}function Hu(pe){if(typeof pe=="function")return Vl(pe)?1:0;if(pe!=null){if(pe=pe.$$typeof,pe===Se)return 11;if(pe===be)return 14}return 2}function Ps(pe,me){var Ae=pe.alternate;return Ae===null?(Ae=bi(pe.tag,me,pe.key,pe.mode),Ae.elementType=pe.elementType,Ae.type=pe.type,Ae.stateNode=pe.stateNode,Ae.alternate=pe,pe.alternate=Ae):(Ae.pendingProps=me,Ae.type=pe.type,Ae.flags=0,Ae.subtreeFlags=0,Ae.deletions=null),Ae.flags=pe.flags&14680064,Ae.childLanes=pe.childLanes,Ae.lanes=pe.lanes,Ae.child=pe.child,Ae.memoizedProps=pe.memoizedProps,Ae.memoizedState=pe.memoizedState,Ae.updateQueue=pe.updateQueue,me=pe.dependencies,Ae.dependencies=me===null?null:{lanes:me.lanes,firstContext:me.firstContext},Ae.sibling=pe.sibling,Ae.index=pe.index,Ae.ref=pe.ref,Ae}function Hl(pe,me,Ae,Re,Le,ze){var et=2;if(Re=pe,typeof pe=="function")Vl(pe)&&(et=1);else if(typeof pe=="string")et=5;else e:switch(pe){case ue:return bo(Ae.children,Le,ze,me);case fe:et=8,Le|=8;break;case he:return pe=bi(12,Ae,me,Le|2),pe.elementType=he,pe.lanes=ze,pe;case Ee:return pe=bi(13,Ae,me,Le),pe.elementType=Ee,pe.lanes=ze,pe;case ye:return pe=bi(19,Ae,me,Le),pe.elementType=ye,pe.lanes=ze,pe;case Pe:return za(Ae,Le,ze,me);default:if(typeof pe=="object"&&pe!==null)switch(pe.$$typeof){case ge:et=10;break e;case _e:et=9;break e;case Se:et=11;break e;case be:et=14;break e;case we:et=16,Re=null;break e}throw Error(se(130,pe==null?pe:typeof pe,""))}return me=bi(et,Ae,me,Le),me.elementType=pe,me.type=Re,me.lanes=ze,me}function bo(pe,me,Ae,Re){return pe=bi(7,pe,Re,me),pe.lanes=Ae,pe}function za(pe,me,Ae,Re){return pe=bi(22,pe,Re,me),pe.elementType=Pe,pe.lanes=Ae,pe.stateNode={},pe}function Wl(pe,me,Ae){return pe=bi(6,pe,null,me),pe.lanes=Ae,pe}function jl(pe,me,Ae){return me=bi(4,pe.children!==null?pe.children:[],pe.key,me),me.lanes=Ae,me.stateNode={containerInfo:pe.containerInfo,pendingChildren:null,implementation:pe.implementation},me}function ql(pe,me,Ae,Re,Le){this.tag=me,this.containerInfo=pe,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=jt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rl(0),this.expirationTimes=rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.identifierPrefix=Re,this.onRecoverableError=Le,tt&&(this.mutableSourceEagerHydrationData=null)}function mu(pe,me,Ae,Re,Le,ze,et,gt,Nt){return pe=new ql(pe,me,Ae,gt,Nt),me===1?(me=1,ze===!0&&(me|=8)):me=0,ze=bi(3,null,null,me),pe.current=ze,ze.stateNode=pe,ze.memoizedState={element:Re,isDehydrated:Ae,cache:null,transitions:null},Oo(ze),pe}function gu(pe){if(!pe)return Wn;pe=pe._reactInternals;e:{if(De(pe)!==pe||pe.tag!==1)throw Error(se(170));var me=pe;do{switch(me.tag){case 3:me=me.stateNode.context;break e;case 1:if(On(me.type)){me=me.stateNode.__reactInternalMemoizedMergedChildContext;break e}}me=me.return}while(me!==null);throw Error(se(171))}if(pe.tag===1){var Ae=pe.type;if(On(Ae))return jr(pe,Ae,me)}return me}function _u(pe){var me=pe._reactInternals;if(me===void 0)throw typeof pe.render=="function"?Error(se(188)):(pe=Object.keys(pe).join(","),Error(se(268,pe)));return pe=Je(me),pe===null?null:pe.stateNode}function Ni(pe,me){if(pe=pe.memoizedState,pe!==null&&pe.dehydrated!==null){var Ae=pe.retryLane;pe.retryLane=Ae!==0&&Ae<me?Ae:me}}function Va(pe,me){Ni(pe,me),(pe=pe.alternate)&&Ni(pe,me)}function Xl(pe){return pe=Je(pe),pe===null?null:pe.stateNode}function vu(){return null}return K.attemptContinuousHydration=function(pe){if(pe.tag===13){var me=er();Yr(pe,134217728,me),Va(pe,134217728)}},K.attemptHydrationAtCurrentPriority=function(pe){if(pe.tag===13){var me=er(),Ae=qi(pe);Yr(pe,Ae,me),Va(pe,Ae)}},K.attemptSynchronousHydration=function(pe){switch(pe.tag){case 3:var me=pe.stateNode;if(me.current.memoizedState.isDehydrated){var Ae=Bo(me.pendingLanes);Ae!==0&&(Zi(me,Ae|1),hi(me,Pr()),(jn&6)===0&&(Eo(),Pi()))}break;case 13:var Re=er();ta(function(){return Yr(pe,1,Re)}),Va(pe,1)}},K.batchedUpdates=function(pe,me){var Ae=jn;jn|=1;try{return pe(me)}finally{jn=Ae,jn===0&&(Eo(),al&&Pi())}},K.createComponentSelector=function(pe){return{$$typeof:Ba,value:pe}},K.createContainer=function(pe,me,Ae,Re,Le,ze,et){return mu(pe,me,!1,null,Ae,Re,Le,ze,et)},K.createHasPseudoClassSelector=function(pe){return{$$typeof:_o,value:pe}},K.createHydrationContainer=function(pe,me,Ae,Re,Le,ze,et,gt,Nt){return pe=mu(Ae,Re,!0,pe,Le,ze,et,gt,Nt),pe.context=gu(null),Ae=pe.current,Re=er(),Le=qi(Ae),ze=ps(Re,Le),ze.callback=me??null,Fs(Ae,ze),pe.current.lanes=Le,Ks(pe,Le,Re),hi(pe,Re),pe},K.createPortal=function(pe,me,Ae){var Re=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:Re==null?null:""+Re,children:pe,containerInfo:me,implementation:Ae}},K.createRoleSelector=function(pe){return{$$typeof:vo,value:pe}},K.createTestNameSelector=function(pe){return{$$typeof:bs,value:pe}},K.createTextSelector=function(pe){return{$$typeof:Yo,value:pe}},K.deferredUpdates=function(pe){var me=Kn,Ae=ir.transition;try{return ir.transition=null,Kn=16,pe()}finally{Kn=me,ir.transition=Ae}},K.discreteUpdates=function(pe,me,Ae,Re,Le){var ze=Kn,et=ir.transition;try{return ir.transition=null,Kn=1,pe(me,Ae,Re,Le)}finally{Kn=ze,ir.transition=et,jn===0&&Eo()}},K.findAllNodes=Ms,K.findBoundingRects=function(pe,me){if(!qt)throw Error(se(363));me=Ms(pe,me),pe=[];for(var Ae=0;Ae<me.length;Ae++)pe.push(Sn(me[Ae]));for(me=pe.length-1;0<me;me--){Ae=pe[me];for(var Re=Ae.x,Le=Re+Ae.width,ze=Ae.y,et=ze+Ae.height,gt=me-1;0<=gt;gt--)if(me!==gt){var Nt=pe[gt],rn=Nt.x,xn=rn+Nt.width,Un=Nt.y,Dn=Un+Nt.height;if(Re>=rn&&ze>=Un&&Le<=xn&&et<=Dn){pe.splice(me,1);break}else if(Re!==rn||Ae.width!==Nt.width||Dn<ze||Un>et){if(!(ze!==Un||Ae.height!==Nt.height||xn<Re||rn>Le)){rn>Re&&(Nt.width+=rn-Re,Nt.x=Re),xn<Le&&(Nt.width=Le-rn),pe.splice(me,1);break}}else{Un>ze&&(Nt.height+=Un-ze,Nt.y=ze),Dn<et&&(Nt.height=et-Un),pe.splice(me,1);break}}}return pe},K.findHostInstance=_u,K.findHostInstanceWithNoPortals=function(pe){return pe=Ge(pe),pe=pe!==null?Qe(pe):null,pe===null?null:pe.stateNode},K.findHostInstanceWithWarning=function(pe){return _u(pe)},K.flushControlled=function(pe){var me=jn;jn|=1;var Ae=ir.transition,Re=Kn;try{ir.transition=null,Kn=1,pe()}finally{Kn=Re,ir.transition=Ae,jn=me,jn===0&&(Eo(),Pi())}},K.flushPassiveEffects=ls,K.flushSync=ta,K.focusWithin=function(pe,me){if(!qt)throw Error(se(363));for(pe=La(pe),me=Ei(pe,me),me=Array.from(me),pe=0;pe<me.length;){var Ae=me[pe++];if(!Ve(Ae)){if(Ae.tag===5&&Et(Ae.stateNode))return!0;for(Ae=Ae.child;Ae!==null;)me.push(Ae),Ae=Ae.sibling}}return!1},K.getCurrentUpdatePriority=function(){return Kn},K.getFindAllNodesFailureDescription=function(pe,me){if(!qt)throw Error(se(363));var Ae=0,Re=[];pe=[La(pe),0];for(var Le=0;Le<pe.length;){var ze=pe[Le++],et=pe[Le++],gt=me[et];if((ze.tag!==5||!Ve(ze))&&(Da(ze,gt)&&(Re.push(Hs(gt)),et++,et>Ae&&(Ae=et)),et<me.length))for(ze=ze.child;ze!==null;)pe.push(ze,et),ze=ze.sibling}if(Ae<me.length){for(pe=[];Ae<me.length;Ae++)pe.push(Hs(me[Ae]));return`findAllNodes was able to match part of the selector:
  `+(Re.join(" > ")+`

No matching component was found for:
  `)+pe.join(" > ")}return null},K.getPublicRootInstance=function(pe){if(pe=pe.current,!pe.child)return null;switch(pe.child.tag){case 5:return ot(pe.child.stateNode);default:return pe.child.stateNode}},K.injectIntoDevTools=function(pe){if(pe={bundleType:pe.bundleType,version:pe.version,rendererPackageName:pe.rendererPackageName,rendererConfig:pe.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:Xl,findFiberByHostInstance:pe.findFiberByHostInstance||vu,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")pe=!1;else{var me=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(me.isDisabled||!me.supportsFiber)pe=!0;else{try{ua=me.inject(pe),ts=me}catch{}pe=!!me.checkDCE}}return pe},K.isAlreadyRendering=function(){return!1},K.observeVisibleRects=function(pe,me,Ae,Re){if(!qt)throw Error(se(363));pe=Ms(pe,me);var Le=Ft(pe,Ae,Re).disconnect;return{disconnect:function(){Le()}}},K.registerMutableSourceForHydration=function(pe,me){var Ae=me._getVersion;Ae=Ae(me._source),pe.mutableSourceEagerHydrationData==null?pe.mutableSourceEagerHydrationData=[me,Ae]:pe.mutableSourceEagerHydrationData.push(me,Ae)},K.runWithPriority=function(pe,me){var Ae=Kn;try{return Kn=pe,me()}finally{Kn=Ae}},K.shouldError=function(){return null},K.shouldSuspend=function(){return!1},K.updateContainer=function(pe,me,Ae,Re){var Le=me.current,ze=er(),et=qi(Le);return Ae=gu(Ae),me.context===null?me.context=Ae:me.pendingContext=Ae,me=ps(ze,et),me.payload={element:pe},Re=Re===void 0?null:Re,Re!==null&&(me.callback=Re),Fs(Le,me),pe=Yr(Le,et,ze),pe!==null&&fl(pe,Le,et),et},K}),reactReconciler_production_min}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production_min()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var schedulerExports=requireScheduler();const catalogue={},extend=ne=>void Object.assign(catalogue,ne);function createRenderer(ne,_){function K(ue,{args:fe=[],attach:he,...ge},_e){let Se=`${ue[0].toUpperCase()}${ue.slice(1)}`,Ee;if(ue==="primitive"){if(ge.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const ye=ge.object;Ee=prepare(ye,{type:ue,root:_e,attach:he,primitive:!0})}else{const ye=catalogue[Se];if(!ye)throw new Error(`R3F: ${Se} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(fe))throw new Error("R3F: The args prop must be an array!");Ee=prepare(new ye(...fe),{type:ue,root:_e,attach:he,memoizedProps:{args:fe}})}return Ee.__r3f.attach===void 0&&(Ee.isBufferGeometry?Ee.__r3f.attach="geometry":Ee.isMaterial&&(Ee.__r3f.attach="material")),Se!=="inject"&&applyProps$1(Ee,ge),Ee}function Z(ue,fe){let he=!1;if(fe){var ge,_e;(ge=fe.__r3f)!=null&&ge.attach?attach(ue,fe,fe.__r3f.attach):fe.isObject3D&&ue.isObject3D&&(ue.add(fe),he=!0),he||(_e=ue.__r3f)==null||_e.objects.push(fe),fe.__r3f||prepare(fe,{}),fe.__r3f.parent=ue,updateInstance(fe),invalidateInstance(fe)}}function te(ue,fe,he){let ge=!1;if(fe){var _e,Se;if((_e=fe.__r3f)!=null&&_e.attach)attach(ue,fe,fe.__r3f.attach);else if(fe.isObject3D&&ue.isObject3D){fe.parent=ue,fe.dispatchEvent({type:"added"}),ue.dispatchEvent({type:"childadded",child:fe});const Ee=ue.children.filter(be=>be!==fe),ye=Ee.indexOf(he);ue.children=[...Ee.slice(0,ye),fe,...Ee.slice(ye)],ge=!0}ge||(Se=ue.__r3f)==null||Se.objects.push(fe),fe.__r3f||prepare(fe,{}),fe.__r3f.parent=ue,updateInstance(fe),invalidateInstance(fe)}}function ie(ue,fe,he=!1){ue&&[...ue].forEach(ge=>se(fe,ge,he))}function se(ue,fe,he){if(fe){var ge,_e,Se;if(fe.__r3f&&(fe.__r3f.parent=null),(ge=ue.__r3f)!=null&&ge.objects&&(ue.__r3f.objects=ue.__r3f.objects.filter(Pe=>Pe!==fe)),(_e=fe.__r3f)!=null&&_e.attach)detach(ue,fe,fe.__r3f.attach);else if(fe.isObject3D&&ue.isObject3D){var Ee;ue.remove(fe),(Ee=fe.__r3f)!=null&&Ee.root&&removeInteractivity(findInitialRoot(fe),fe)}const be=(Se=fe.__r3f)==null?void 0:Se.primitive,we=!be&&(he===void 0?fe.dispose!==null:he);if(!be){var ye;ie((ye=fe.__r3f)==null?void 0:ye.objects,fe,we),ie(fe.children,fe,we)}if(delete fe.__r3f,we&&fe.dispose&&fe.type!=="Scene"){const Pe=()=>{try{fe.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,Pe):Pe()}invalidateInstance(ue)}}function oe(ue,fe,he,ge){var _e;const Se=(_e=ue.__r3f)==null?void 0:_e.parent;if(!Se)return;const Ee=K(fe,he,ue.__r3f.root);if(ue.children){for(const ye of ue.children)ye.__r3f&&Z(Ee,ye);ue.children=ue.children.filter(ye=>!ye.__r3f)}ue.__r3f.objects.forEach(ye=>Z(Ee,ye)),ue.__r3f.objects=[],ue.__r3f.autoRemovedBeforeAppend||se(Se,ue),Ee.parent&&(Ee.__r3f.autoRemovedBeforeAppend=!0),Z(Se,Ee),Ee.raycast&&Ee.__r3f.eventCount&&findInitialRoot(Ee).getState().internal.interaction.push(Ee),[ge,ge.alternate].forEach(ye=>{ye!==null&&(ye.stateNode=Ee,ye.ref&&(typeof ye.ref=="function"?ye.ref(Ee):ye.ref.current=Ee))})}const ae=()=>{};return{reconciler:Reconciler({createInstance:K,removeChild:se,appendChild:Z,appendInitialChild:Z,insertBefore:te,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(ue,fe)=>{if(!fe)return;const he=ue.getState().scene;he.__r3f&&(he.__r3f.root=ue,Z(he,fe))},removeChildFromContainer:(ue,fe)=>{fe&&se(ue.getState().scene,fe)},insertInContainerBefore:(ue,fe,he)=>{if(!fe||!he)return;const ge=ue.getState().scene;ge.__r3f&&te(ge,fe,he)},getRootHostContext:()=>null,getChildHostContext:ue=>ue,finalizeInitialChildren(ue){var fe;return!!((fe=ue?.__r3f)!=null?fe:{}).handlers},prepareUpdate(ue,fe,he,ge){var _e;if(((_e=ue?.__r3f)!=null?_e:{}).primitive&&ge.object&&ge.object!==ue)return[!0];{const{args:Ee=[],children:ye,...be}=ge,{args:we=[],children:Pe,...Oe}=he;if(!Array.isArray(Ee))throw new Error("R3F: the args prop must be an array!");if(Ee.some((Ue,$e)=>Ue!==we[$e]))return[!0];const Be=diffProps(ue,be,Oe,!0);return Be.changes.length?[!1,Be]:null}},commitUpdate(ue,[fe,he],ge,_e,Se,Ee){fe?oe(ue,ge,Se,Ee):applyProps$1(ue,he)},commitMount(ue,fe,he,ge){var _e;const Se=(_e=ue.__r3f)!=null?_e:{};ue.raycast&&Se.handlers&&Se.eventCount&&findInitialRoot(ue).getState().internal.interaction.push(ue)},getPublicInstance:ue=>ue,prepareForCommit:()=>null,preparePortalMount:ue=>prepare(ue.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(ue){var fe;const{attach:he,parent:ge}=(fe=ue.__r3f)!=null?fe:{};he&&ge&&detach(ge,ue,he),ue.isObject3D&&(ue.visible=!1),invalidateInstance(ue)},unhideInstance(ue,fe){var he;const{attach:ge,parent:_e}=(he=ue.__r3f)!=null?he:{};ge&&_e&&attach(_e,ue,ge),(ue.isObject3D&&fe.visible==null||fe.visible)&&(ue.visible=!0),invalidateInstance(ue)},createTextInstance:ae,hideTextInstance:ae,unhideTextInstance:ae,getCurrentEventPriority:()=>_?_():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace=ne=>"colorSpace"in ne||"outputColorSpace"in ne,getColorManagement=()=>{var ne;return(ne=catalogue.ColorManagement)!=null?ne:null},isOrthographicCamera=ne=>ne&&ne.isOrthographicCamera,isRef=ne=>ne&&ne.hasOwnProperty("current"),useIsomorphicLayoutEffect$1=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(ne){const _=reactExports.useRef(ne);return useIsomorphicLayoutEffect$1(()=>void(_.current=ne),[ne]),_}function Block({set:ne}){return useIsomorphicLayoutEffect$1(()=>(ne(new Promise(()=>null)),()=>ne(!1)),[ne]),null}class ErrorBoundary extends reactExports.Component{constructor(..._){super(..._),this.state={error:!1}}componentDidCatch(_){this.props.set(_)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=ne=>ne&&!!ne.memoized&&!!ne.changes;function calculateDpr(ne){var _;const K=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(ne)?Math.min(Math.max(ne[0],K),ne[1]):ne}const getRootState=ne=>{var _;return(_=ne.__r3f)==null?void 0:_.root.getState()};function findInitialRoot(ne){let _=ne.__r3f.root;for(;_.getState().previousRoot;)_=_.getState().previousRoot;return _}const is={obj:ne=>ne===Object(ne)&&!is.arr(ne)&&typeof ne!="function",fun:ne=>typeof ne=="function",str:ne=>typeof ne=="string",num:ne=>typeof ne=="number",boo:ne=>typeof ne=="boolean",und:ne=>ne===void 0,arr:ne=>Array.isArray(ne),equ(ne,_,{arrays:K="shallow",objects:Z="reference",strict:te=!0}={}){if(typeof ne!=typeof _||!!ne!=!!_)return!1;if(is.str(ne)||is.num(ne)||is.boo(ne))return ne===_;const ie=is.obj(ne);if(ie&&Z==="reference")return ne===_;const se=is.arr(ne);if(se&&K==="reference")return ne===_;if((se||ie)&&ne===_)return!0;let oe;for(oe in ne)if(!(oe in _))return!1;if(ie&&K==="shallow"&&Z==="shallow"){for(oe in te?_:ne)if(!is.equ(ne[oe],_[oe],{strict:te,objects:"reference"}))return!1}else for(oe in te?_:ne)if(ne[oe]!==_[oe])return!1;if(is.und(oe)){if(se&&ne.length===0&&_.length===0||ie&&Object.keys(ne).length===0&&Object.keys(_).length===0)return!0;if(ne!==_)return!1}return!0}};function buildGraph(ne){const _={nodes:{},materials:{}};return ne&&ne.traverse(K=>{K.name&&(_.nodes[K.name]=K),K.material&&!_.materials[K.material.name]&&(_.materials[K.material.name]=K.material)}),_}function dispose(ne){ne.dispose&&ne.type!=="Scene"&&ne.dispose();for(const _ in ne)_.dispose==null||_.dispose(),delete ne[_]}function prepare(ne,_){const K=ne;return K.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,..._},ne}function resolve(ne,_){let K=ne;if(_.includes("-")){const Z=_.split("-"),te=Z.pop();return K=Z.reduce((ie,se)=>ie[se],ne),{target:K,key:te}}else return{target:K,key:_}}const INDEX_REGEX=/-\d+$/;function attach(ne,_,K){if(is.str(K)){if(INDEX_REGEX.test(K)){const ie=K.replace(INDEX_REGEX,""),{target:se,key:oe}=resolve(ne,ie);Array.isArray(se[oe])||(se[oe]=[])}const{target:Z,key:te}=resolve(ne,K);_.__r3f.previousAttach=Z[te],Z[te]=_}else _.__r3f.previousAttach=K(ne,_)}function detach(ne,_,K){var Z,te;if(is.str(K)){const{target:ie,key:se}=resolve(ne,K),oe=_.__r3f.previousAttach;oe===void 0?delete ie[se]:ie[se]=oe}else(Z=_.__r3f)==null||Z.previousAttach==null||Z.previousAttach(ne,_);(te=_.__r3f)==null||delete te.previousAttach}function diffProps(ne,{children:_,key:K,ref:Z,...te},{children:ie,key:se,ref:oe,...ae}={},le=!1){const ue=ne.__r3f,fe=Object.entries(te),he=[];if(le){const _e=Object.keys(ae);for(let Se=0;Se<_e.length;Se++)te.hasOwnProperty(_e[Se])||fe.unshift([_e[Se],DEFAULT+"remove"])}fe.forEach(([_e,Se])=>{var Ee;if((Ee=ne.__r3f)!=null&&Ee.primitive&&_e==="object"||is.equ(Se,ae[_e]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_e))return he.push([_e,Se,!0,[]]);let ye=[];_e.includes("-")&&(ye=_e.split("-")),he.push([_e,Se,!1,ye]);for(const be in te){const we=te[be];be.startsWith(`${_e}-`)&&he.push([be,we,!1,be.split("-")])}});const ge={...te};return ue!=null&&ue.memoizedProps&&ue!=null&&ue.memoizedProps.args&&(ge.args=ue.memoizedProps.args),ue!=null&&ue.memoizedProps&&ue!=null&&ue.memoizedProps.attach&&(ge.attach=ue.memoizedProps.attach),{memoized:ge,changes:he}}function applyProps$1(ne,_){var K;const Z=ne.__r3f,te=Z?.root,ie=te==null||te.getState==null?void 0:te.getState(),{memoized:se,changes:oe}=isDiffSet(_)?_:diffProps(ne,_),ae=Z?.eventCount;ne.__r3f&&(ne.__r3f.memoizedProps=se);for(let he=0;he<oe.length;he++){let[ge,_e,Se,Ee]=oe[he];if(hasColorSpace(ne)){const Pe="srgb",Oe="srgb-linear";ge==="encoding"?(ge="colorSpace",_e=_e===3001?Pe:Oe):ge==="outputEncoding"&&(ge="outputColorSpace",_e=_e===3001?Pe:Oe)}let ye=ne,be=ye[ge];if(Ee.length&&(be=Ee.reduce((we,Pe)=>we[Pe],ne),!(be&&be.set))){const[we,...Pe]=Ee.reverse();ye=Pe.reverse().reduce((Oe,Be)=>Oe[Be],ne),ge=we}if(_e===DEFAULT+"remove")if(ye.constructor){let we=DEFAULTS.get(ye.constructor);we||(we=new ye.constructor,DEFAULTS.set(ye.constructor,we)),_e=we[ge]}else _e=0;if(Se&&Z)_e?Z.handlers[ge]=_e:delete Z.handlers[ge],Z.eventCount=Object.keys(Z.handlers).length;else if(be&&be.set&&(be.copy||be instanceof Layers)){if(Array.isArray(_e))be.fromArray?be.fromArray(_e):be.set(..._e);else if(be.copy&&_e&&_e.constructor&&be.constructor===_e.constructor)be.copy(_e);else if(_e!==void 0){var le;const we=(le=be)==null?void 0:le.isColor;!we&&be.setScalar?be.setScalar(_e):be instanceof Layers&&_e instanceof Layers?be.mask=_e.mask:be.set(_e),!getColorManagement()&&ie&&!ie.linear&&we&&be.convertSRGBToLinear()}}else{var ue;if(ye[ge]=_e,(ue=ye[ge])!=null&&ue.isTexture&&ye[ge].format===RGBAFormat&&ye[ge].type===UnsignedByteType&&ie){const we=ye[ge];hasColorSpace(we)&&hasColorSpace(ie.gl)?we.colorSpace=ie.gl.outputColorSpace:we.encoding=ie.gl.outputEncoding}}invalidateInstance(ne)}if(Z&&Z.parent&&ne.raycast&&ae!==Z.eventCount){const he=findInitialRoot(ne).getState().internal,ge=he.interaction.indexOf(ne);ge>-1&&he.interaction.splice(ge,1),Z.eventCount&&he.interaction.push(ne)}return!(oe.length===1&&oe[0][0]==="onUpdate")&&oe.length&&(K=ne.__r3f)!=null&&K.parent&&updateInstance(ne),ne}function invalidateInstance(ne){var _,K;const Z=(_=ne.__r3f)==null||(K=_.root)==null||K.getState==null?void 0:K.getState();Z&&Z.internal.frames===0&&Z.invalidate()}function updateInstance(ne){ne.onUpdate==null||ne.onUpdate(ne)}function updateCamera(ne,_){ne.manual||(isOrthographicCamera(ne)?(ne.left=_.width/-2,ne.right=_.width/2,ne.top=_.height/2,ne.bottom=_.height/-2):ne.aspect=_.width/_.height,ne.updateProjectionMatrix(),ne.updateMatrixWorld())}function makeId(ne){return(ne.eventObject||ne.object).uuid+"/"+ne.index+ne.instanceId}function getEventPriority(){var ne;const _=typeof self<"u"&&self||typeof window<"u"&&window;if(!_)return constantsExports.DefaultEventPriority;switch((ne=_.event)==null?void 0:ne.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(ne,_,K,Z){const te=K.get(_);te&&(K.delete(_),K.size===0&&(ne.delete(Z),te.target.releasePointerCapture(Z)))}function removeInteractivity(ne,_){const{internal:K}=ne.getState();K.interaction=K.interaction.filter(Z=>Z!==_),K.initialHits=K.initialHits.filter(Z=>Z!==_),K.hovered.forEach((Z,te)=>{(Z.eventObject===_||Z.object===_)&&K.hovered.delete(te)}),K.capturedMap.forEach((Z,te)=>{releaseInternalPointerCapture(K.capturedMap,_,Z,te)})}function createEvents(ne){function _(ae){const{internal:le}=ne.getState(),ue=ae.offsetX-le.initialClick[0],fe=ae.offsetY-le.initialClick[1];return Math.round(Math.sqrt(ue*ue+fe*fe))}function K(ae){return ae.filter(le=>["Move","Over","Enter","Out","Leave"].some(ue=>{var fe;return(fe=le.__r3f)==null?void 0:fe.handlers["onPointer"+ue]}))}function Z(ae,le){const ue=ne.getState(),fe=new Set,he=[],ge=le?le(ue.internal.interaction):ue.internal.interaction;for(let ye=0;ye<ge.length;ye++){const be=getRootState(ge[ye]);be&&(be.raycaster.camera=void 0)}ue.previousRoot||ue.events.compute==null||ue.events.compute(ae,ue);function _e(ye){const be=getRootState(ye);if(!be||!be.events.enabled||be.raycaster.camera===null)return[];if(be.raycaster.camera===void 0){var we;be.events.compute==null||be.events.compute(ae,be,(we=be.previousRoot)==null?void 0:we.getState()),be.raycaster.camera===void 0&&(be.raycaster.camera=null)}return be.raycaster.camera?be.raycaster.intersectObject(ye,!0):[]}let Se=ge.flatMap(_e).sort((ye,be)=>{const we=getRootState(ye.object),Pe=getRootState(be.object);return!we||!Pe?ye.distance-be.distance:Pe.events.priority-we.events.priority||ye.distance-be.distance}).filter(ye=>{const be=makeId(ye);return fe.has(be)?!1:(fe.add(be),!0)});ue.events.filter&&(Se=ue.events.filter(Se,ue));for(const ye of Se){let be=ye.object;for(;be;){var Ee;(Ee=be.__r3f)!=null&&Ee.eventCount&&he.push({...ye,eventObject:be}),be=be.parent}}if("pointerId"in ae&&ue.internal.capturedMap.has(ae.pointerId))for(let ye of ue.internal.capturedMap.get(ae.pointerId).values())fe.has(makeId(ye.intersection))||he.push(ye.intersection);return he}function te(ae,le,ue,fe){const he=ne.getState();if(ae.length){const ge={stopped:!1};for(const _e of ae){const Se=getRootState(_e.object)||he,{raycaster:Ee,pointer:ye,camera:be,internal:we}=Se,Pe=new Vector3(ye.x,ye.y,0).unproject(be),Oe=ke=>{var Ge,Je;return(Ge=(Je=we.capturedMap.get(ke))==null?void 0:Je.has(_e.eventObject))!=null?Ge:!1},Be=ke=>{const Ge={intersection:_e,target:le.target};we.capturedMap.has(ke)?we.capturedMap.get(ke).set(_e.eventObject,Ge):we.capturedMap.set(ke,new Map([[_e.eventObject,Ge]])),le.target.setPointerCapture(ke)},Ue=ke=>{const Ge=we.capturedMap.get(ke);Ge&&releaseInternalPointerCapture(we.capturedMap,_e.eventObject,Ge,ke)};let $e={};for(let ke in le){let Ge=le[ke];typeof Ge!="function"&&($e[ke]=Ge)}let De={..._e,...$e,pointer:ye,intersections:ae,stopped:ge.stopped,delta:ue,unprojectedPoint:Pe,ray:Ee.ray,camera:be,stopPropagation(){const ke="pointerId"in le&&we.capturedMap.get(le.pointerId);if((!ke||ke.has(_e.eventObject))&&(De.stopped=ge.stopped=!0,we.hovered.size&&Array.from(we.hovered.values()).find(Ge=>Ge.eventObject===_e.eventObject))){const Ge=ae.slice(0,ae.indexOf(_e));ie([...Ge,_e])}},target:{hasPointerCapture:Oe,setPointerCapture:Be,releasePointerCapture:Ue},currentTarget:{hasPointerCapture:Oe,setPointerCapture:Be,releasePointerCapture:Ue},nativeEvent:le};if(fe(De),ge.stopped===!0)break}}return ae}function ie(ae){const{internal:le}=ne.getState();for(const ue of le.hovered.values())if(!ae.length||!ae.find(fe=>fe.object===ue.object&&fe.index===ue.index&&fe.instanceId===ue.instanceId)){const he=ue.eventObject.__r3f,ge=he?.handlers;if(le.hovered.delete(makeId(ue)),he!=null&&he.eventCount){const _e={...ue,intersections:ae};ge.onPointerOut==null||ge.onPointerOut(_e),ge.onPointerLeave==null||ge.onPointerLeave(_e)}}}function se(ae,le){for(let ue=0;ue<le.length;ue++){const fe=le[ue].__r3f;fe==null||fe.handlers.onPointerMissed==null||fe.handlers.onPointerMissed(ae)}}function oe(ae){switch(ae){case"onPointerLeave":case"onPointerCancel":return()=>ie([]);case"onLostPointerCapture":return le=>{const{internal:ue}=ne.getState();"pointerId"in le&&ue.capturedMap.has(le.pointerId)&&requestAnimationFrame(()=>{ue.capturedMap.has(le.pointerId)&&(ue.capturedMap.delete(le.pointerId),ie([]))})}}return function(ue){const{onPointerMissed:fe,internal:he}=ne.getState();he.lastEvent.current=ue;const ge=ae==="onPointerMove",_e=ae==="onClick"||ae==="onContextMenu"||ae==="onDoubleClick",Ee=Z(ue,ge?K:void 0),ye=_e?_(ue):0;ae==="onPointerDown"&&(he.initialClick=[ue.offsetX,ue.offsetY],he.initialHits=Ee.map(we=>we.eventObject)),_e&&!Ee.length&&ye<=2&&(se(ue,he.interaction),fe&&fe(ue)),ge&&ie(Ee);function be(we){const Pe=we.eventObject,Oe=Pe.__r3f,Be=Oe?.handlers;if(Oe!=null&&Oe.eventCount)if(ge){if(Be.onPointerOver||Be.onPointerEnter||Be.onPointerOut||Be.onPointerLeave){const Ue=makeId(we),$e=he.hovered.get(Ue);$e?$e.stopped&&we.stopPropagation():(he.hovered.set(Ue,we),Be.onPointerOver==null||Be.onPointerOver(we),Be.onPointerEnter==null||Be.onPointerEnter(we))}Be.onPointerMove==null||Be.onPointerMove(we)}else{const Ue=Be[ae];Ue?(!_e||he.initialHits.includes(Pe))&&(se(ue,he.interaction.filter($e=>!he.initialHits.includes($e))),Ue(we)):_e&&he.initialHits.includes(Pe)&&se(ue,he.interaction.filter($e=>!he.initialHits.includes($e)))}}te(Ee,ue,ye,be)}}return{handlePointer:oe}}const isRenderer=ne=>!!(ne!=null&&ne.render),context=reactExports.createContext(null),createStore$1=(ne,_)=>{const K=create$1((oe,ae)=>{const le=new Vector3,ue=new Vector3,fe=new Vector3;function he(ye=ae().camera,be=ue,we=ae().size){const{width:Pe,height:Oe,top:Be,left:Ue}=we,$e=Pe/Oe;be.isVector3?fe.copy(be):fe.set(...be);const De=ye.getWorldPosition(le).distanceTo(fe);if(isOrthographicCamera(ye))return{width:Pe/ye.zoom,height:Oe/ye.zoom,top:Be,left:Ue,factor:1,distance:De,aspect:$e};{const ke=ye.fov*Math.PI/180,Ge=2*Math.tan(ke/2)*De,Je=Ge*(Pe/Oe);return{width:Je,height:Ge,top:Be,left:Ue,factor:Pe/Je,distance:De,aspect:$e}}}let ge;const _e=ye=>oe(be=>({performance:{...be.performance,current:ye}})),Se=new Vector2;return{set:oe,get:ae,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(ye=1)=>ne(ae(),ye),advance:(ye,be)=>_(ye,be,ae()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:Se,mouse:Se,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const ye=ae();ge&&clearTimeout(ge),ye.performance.current!==ye.performance.min&&_e(ye.performance.min),ge=setTimeout(()=>_e(ae().performance.max),ye.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:he},setEvents:ye=>oe(be=>({...be,events:{...be.events,...ye}})),setSize:(ye,be,we,Pe,Oe)=>{const Be=ae().camera,Ue={width:ye,height:be,top:Pe||0,left:Oe||0,updateStyle:we};oe($e=>({size:Ue,viewport:{...$e.viewport,...he(Be,ue,Ue)}}))},setDpr:ye=>oe(be=>{const we=calculateDpr(ye);return{viewport:{...be.viewport,dpr:we,initialDpr:be.viewport.initialDpr||we}}}),setFrameloop:(ye="always")=>{const be=ae().clock;be.stop(),be.elapsedTime=0,ye!=="never"&&(be.start(),be.elapsedTime=0),oe(()=>({frameloop:ye}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(ye,be,we)=>{const Pe=ae().internal;return Pe.priority=Pe.priority+(be>0?1:0),Pe.subscribers.push({ref:ye,priority:be,store:we}),Pe.subscribers=Pe.subscribers.sort((Oe,Be)=>Oe.priority-Be.priority),()=>{const Oe=ae().internal;Oe!=null&&Oe.subscribers&&(Oe.priority=Oe.priority-(be>0?1:0),Oe.subscribers=Oe.subscribers.filter(Be=>Be.ref!==ye))}}}}}),Z=K.getState();let te=Z.size,ie=Z.viewport.dpr,se=Z.camera;return K.subscribe(()=>{const{camera:oe,size:ae,viewport:le,gl:ue,set:fe}=K.getState();if(ae.width!==te.width||ae.height!==te.height||le.dpr!==ie){var he;te=ae,ie=le.dpr,updateCamera(oe,ae),ue.setPixelRatio(le.dpr);const ge=(he=ae.updateStyle)!=null?he:typeof HTMLCanvasElement<"u"&&ue.domElement instanceof HTMLCanvasElement;ue.setSize(ae.width,ae.height,ge)}oe!==se&&(se=oe,fe(ge=>({viewport:{...ge.viewport,...ge.viewport.getCurrentViewport(oe)}})))}),K.subscribe(oe=>ne(oe)),K};let i$5,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(ne,_){if(ne.size)for(const{callback:K}of ne.values())K(_)}function flushGlobalEffects(ne,_){switch(ne){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function render$1(ne,_,K){let Z=_.clock.getDelta();for(_.frameloop==="never"&&typeof ne=="number"&&(Z=ne-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=ne),subscribers=_.internal.subscribers,i$5=0;i$5<subscribers.length;i$5++)subscription=subscribers[i$5],subscription.ref.current(subscription.store.getState(),Z,K);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}function createLoop(ne){let _=!1,K=!1,Z,te,ie;function se(le){te=requestAnimationFrame(se),_=!0,Z=0,flushGlobalEffects("before",le),K=!0;for(const fe of ne.values()){var ue;ie=fe.store.getState(),ie.internal.active&&(ie.frameloop==="always"||ie.internal.frames>0)&&!((ue=ie.gl.xr)!=null&&ue.isPresenting)&&(Z+=render$1(le,ie))}if(K=!1,flushGlobalEffects("after",le),Z===0)return flushGlobalEffects("tail",le),_=!1,cancelAnimationFrame(te)}function oe(le,ue=1){var fe;if(!le)return ne.forEach(he=>oe(he.store.getState(),ue));(fe=le.gl.xr)!=null&&fe.isPresenting||!le.internal.active||le.frameloop==="never"||(ue>1?le.internal.frames=Math.min(60,le.internal.frames+ue):K?le.internal.frames=2:le.internal.frames=1,_||(_=!0,requestAnimationFrame(se)))}function ae(le,ue=!0,fe,he){if(ue&&flushGlobalEffects("before",le),fe)render$1(le,fe,he);else for(const ge of ne.values())render$1(le,ge.store.getState());ue&&flushGlobalEffects("after",le)}return{loop:se,invalidate:oe,advance:ae}}function useStore(){const ne=reactExports.useContext(context);if(!ne)throw new Error("R3F: Hooks can only be used within the Canvas component!");return ne}function useThree(ne=K=>K,_){return useStore()(ne,_)}function useFrame(ne,_=0){const K=useStore(),Z=K.getState().internal.subscribe,te=useMutableCallback(ne);return useIsomorphicLayoutEffect$1(()=>Z(te,_,K),[_,Z,K]),null}const memoizedLoaders=new WeakMap;function loadingFn(ne,_){return function(K,...Z){let te=memoizedLoaders.get(K);return te||(te=new K,memoizedLoaders.set(K,te)),ne&&ne(te),Promise.all(Z.map(ie=>new Promise((se,oe)=>te.load(ie,ae=>{ae.scene&&Object.assign(ae,buildGraph(ae.scene)),se(ae)},_,ae=>oe(new Error(`Could not load ${ie}: ${ae?.message}`))))))}}function useLoader(ne,_,K,Z){const te=Array.isArray(_)?_:[_],ie=suspend(loadingFn(K,Z),[ne,...te],{equal:is.equ});return Array.isArray(_)?ie:ie[0]}useLoader.preload=function(ne,_,K){const Z=Array.isArray(_)?_:[_];return preload(loadingFn(K),[ne,...Z])};useLoader.clear=function(ne,_){const K=Array.isArray(_)?_:[_];return clear([ne,...K])};const roots$1=new Map,{invalidate,advance}=createLoop(roots$1),{reconciler,applyProps}=createRenderer(roots$1,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(ne,_)=>{const K=typeof ne=="function"?ne(_):ne;return isRenderer(K)?K:new WebGLRenderer({powerPreference:"high-performance",canvas:_,antialias:!0,alpha:!0,...ne})};function computeInitialSize(ne,_){const K=typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement;if(_){const{width:Z,height:te,top:ie,left:se,updateStyle:oe=K}=_;return{width:Z,height:te,top:ie,left:se,updateStyle:oe}}else if(typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement&&ne.parentElement){const{width:Z,height:te,top:ie,left:se}=ne.parentElement.getBoundingClientRect();return{width:Z,height:te,top:ie,left:se,updateStyle:K}}else if(typeof OffscreenCanvas<"u"&&ne instanceof OffscreenCanvas)return{width:ne.width,height:ne.height,top:0,left:0,updateStyle:K};return{width:0,height:0,top:0,left:0}}function createRoot(ne){const _=roots$1.get(ne),K=_?.fiber,Z=_?.store;_&&console.warn("R3F.createRoot should only be called once!");const te=typeof reportError=="function"?reportError:console.error,ie=Z||createStore$1(invalidate,advance),se=K||reconciler.createContainer(ie,constantsExports.ConcurrentRoot,null,!1,null,"",te,null);_||roots$1.set(ne,{fiber:se,store:ie});let oe,ae=!1,le;return{configure(ue={}){let{gl:fe,size:he,scene:ge,events:_e,onCreated:Se,shadows:Ee=!1,linear:ye=!1,flat:be=!1,legacy:we=!1,orthographic:Pe=!1,frameloop:Oe="always",dpr:Be=[1,2],performance:Ue,raycaster:$e,camera:De,onPointerMissed:ke}=ue,Ge=ie.getState(),Je=Ge.gl;Ge.gl||Ge.set({gl:Je=createRendererInstance(fe,ne)});let Ye=Ge.raycaster;Ye||Ge.set({raycaster:Ye=new Raycaster});const{params:Qe,...rt}=$e||{};if(is.equ(rt,Ye,shallowLoose)||applyProps(Ye,{...rt}),is.equ(Qe,Ye.params,shallowLoose)||applyProps(Ye,{params:{...Ye.params,...Qe}}),!Ge.camera||Ge.camera===le&&!is.equ(le,De,shallowLoose)){le=De;const nt=De instanceof Camera$1,qe=nt?De:Pe?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);nt||(qe.position.z=5,De&&(applyProps(qe,De),("aspect"in De||"left"in De||"right"in De||"bottom"in De||"top"in De)&&(qe.manual=!0,qe.updateProjectionMatrix())),!Ge.camera&&!(De!=null&&De.rotation)&&qe.lookAt(0,0,0)),Ge.set({camera:qe}),Ye.camera=qe}if(!Ge.scene){let nt;ge!=null&&ge.isScene?nt=ge:(nt=new Scene,ge&&applyProps(nt,ge)),Ge.set({scene:prepare(nt)})}if(!Ge.xr){var ot;const nt=(Pt,Gt)=>{const pt=ie.getState();pt.frameloop!=="never"&&advance(Pt,!0,pt,Gt)},qe=()=>{const Pt=ie.getState();Pt.gl.xr.enabled=Pt.gl.xr.isPresenting,Pt.gl.xr.setAnimationLoop(Pt.gl.xr.isPresenting?nt:null),Pt.gl.xr.isPresenting||invalidate(Pt)},lt={connect(){const Pt=ie.getState().gl;Pt.xr.addEventListener("sessionstart",qe),Pt.xr.addEventListener("sessionend",qe)},disconnect(){const Pt=ie.getState().gl;Pt.xr.removeEventListener("sessionstart",qe),Pt.xr.removeEventListener("sessionend",qe)}};typeof((ot=Je.xr)==null?void 0:ot.addEventListener)=="function"&&lt.connect(),Ge.set({xr:lt})}if(Je.shadowMap){const nt=Je.shadowMap.enabled,qe=Je.shadowMap.type;if(Je.shadowMap.enabled=!!Ee,is.boo(Ee))Je.shadowMap.type=PCFSoftShadowMap;else if(is.str(Ee)){var ct;const lt={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Je.shadowMap.type=(ct=lt[Ee])!=null?ct:PCFSoftShadowMap}else is.obj(Ee)&&Object.assign(Je.shadowMap,Ee);(nt!==Je.shadowMap.enabled||qe!==Je.shadowMap.type)&&(Je.shadowMap.needsUpdate=!0)}const je=getColorManagement();je&&("enabled"in je?je.enabled=!we:"legacyMode"in je&&(je.legacyMode=we)),ae||applyProps(Je,{outputEncoding:ye?3e3:3001,toneMapping:be?NoToneMapping:ACESFilmicToneMapping}),Ge.legacy!==we&&Ge.set(()=>({legacy:we})),Ge.linear!==ye&&Ge.set(()=>({linear:ye})),Ge.flat!==be&&Ge.set(()=>({flat:be})),fe&&!is.fun(fe)&&!isRenderer(fe)&&!is.equ(fe,Je,shallowLoose)&&applyProps(Je,fe),_e&&!Ge.events.handlers&&Ge.set({events:_e(ie)});const st=computeInitialSize(ne,he);return is.equ(st,Ge.size,shallowLoose)||Ge.setSize(st.width,st.height,st.updateStyle,st.top,st.left),Be&&Ge.viewport.dpr!==calculateDpr(Be)&&Ge.setDpr(Be),Ge.frameloop!==Oe&&Ge.setFrameloop(Oe),Ge.onPointerMissed||Ge.set({onPointerMissed:ke}),Ue&&!is.equ(Ue,Ge.performance,shallowLoose)&&Ge.set(nt=>({performance:{...nt.performance,...Ue}})),oe=Se,ae=!0,this},render(ue){return ae||this.configure(),reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:ie,children:ue,onCreated:oe,rootElement:ne}),se,null,()=>{}),ie},unmount(){unmountComponentAtNode(ne)}}}function Provider({store:ne,children:_,onCreated:K,rootElement:Z}){return useIsomorphicLayoutEffect$1(()=>{const te=ne.getState();te.set(ie=>({internal:{...ie.internal,active:!0}})),K&&K(te),ne.getState().events.connected||te.events.connect==null||te.events.connect(Z)},[]),jsxRuntimeExports.jsx(context.Provider,{value:ne,children:_})}function unmountComponentAtNode(ne,_){const K=roots$1.get(ne),Z=K?.fiber;if(Z){const te=K?.store.getState();te&&(te.internal.active=!1),reconciler.updateContainer(null,Z,null,()=>{te&&setTimeout(()=>{try{var ie,se,oe,ae;te.events.disconnect==null||te.events.disconnect(),(ie=te.gl)==null||(se=ie.renderLists)==null||se.dispose==null||se.dispose(),(oe=te.gl)==null||oe.forceContextLoss==null||oe.forceContextLoss(),(ae=te.gl)!=null&&ae.xr&&te.xr.disconnect(),dispose(te),roots$1.delete(ne)}catch{}},500)})}}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(ne){const{handlePointer:_}=createEvents(ne);return{priority:1,enabled:!0,compute(K,Z,te){Z.pointer.set(K.offsetX/Z.size.width*2-1,-(K.offsetY/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((K,Z)=>({...K,[Z]:_(Z)}),{}),update:()=>{var K;const{events:Z,internal:te}=ne.getState();(K=te.lastEvent)!=null&&K.current&&Z.handlers&&Z.handlers.onPointerMove(te.lastEvent.current)},connect:K=>{var Z;const{set:te,events:ie}=ne.getState();ie.disconnect==null||ie.disconnect(),te(se=>({events:{...se.events,connected:K}})),Object.entries((Z=ie.handlers)!=null?Z:[]).forEach(([se,oe])=>{const[ae,le]=DOM_EVENTS[se];K.addEventListener(ae,oe,{passive:le})})},disconnect:()=>{const{set:K,events:Z}=ne.getState();if(Z.connected){var te;Object.entries((te=Z.handlers)!=null?te:[]).forEach(([ie,se])=>{if(Z&&Z.connected instanceof HTMLElement){const[oe]=DOM_EVENTS[ie];Z.connected.removeEventListener(oe,se)}}),K(ie=>({events:{...ie.events,connected:void 0}}))}}}}function g$5(ne,_){let K;return(...Z)=>{window.clearTimeout(K),K=window.setTimeout(()=>ne(...Z),_)}}function j$2({debounce:ne,scroll:_,polyfill:K,offsetSize:Z}={debounce:0,scroll:!1,offsetSize:!1}){const te=K||(typeof window>"u"?class{}:window.ResizeObserver);if(!te)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ie,se]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),oe=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ie,orientationHandler:null}),ae=ne?typeof ne=="number"?ne:ne.scroll:null,le=ne?typeof ne=="number"?ne:ne.resize:null,ue=reactExports.useRef(!1);reactExports.useEffect(()=>(ue.current=!0,()=>void(ue.current=!1)));const[fe,he,ge]=reactExports.useMemo(()=>{const ye=()=>{if(!oe.current.element)return;const{left:be,top:we,width:Pe,height:Oe,bottom:Be,right:Ue,x:$e,y:De}=oe.current.element.getBoundingClientRect(),ke={left:be,top:we,width:Pe,height:Oe,bottom:Be,right:Ue,x:$e,y:De};oe.current.element instanceof HTMLElement&&Z&&(ke.height=oe.current.element.offsetHeight,ke.width=oe.current.element.offsetWidth),Object.freeze(ke),ue.current&&!D$3(oe.current.lastBounds,ke)&&se(oe.current.lastBounds=ke)};return[ye,le?g$5(ye,le):ye,ae?g$5(ye,ae):ye]},[se,Z,ae,le]);function _e(){oe.current.scrollContainers&&(oe.current.scrollContainers.forEach(ye=>ye.removeEventListener("scroll",ge,!0)),oe.current.scrollContainers=null),oe.current.resizeObserver&&(oe.current.resizeObserver.disconnect(),oe.current.resizeObserver=null),oe.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",oe.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",oe.current.orientationHandler))}function Se(){oe.current.element&&(oe.current.resizeObserver=new te(ge),oe.current.resizeObserver.observe(oe.current.element),_&&oe.current.scrollContainers&&oe.current.scrollContainers.forEach(ye=>ye.addEventListener("scroll",ge,{capture:!0,passive:!0})),oe.current.orientationHandler=()=>{ge()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",oe.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",oe.current.orientationHandler))}const Ee=ye=>{!ye||ye===oe.current.element||(_e(),oe.current.element=ye,oe.current.scrollContainers=E$2(ye),Se())};return X(ge,!!_),W$2(he),reactExports.useEffect(()=>{_e(),Se()},[_,ge,he]),reactExports.useEffect(()=>_e,[]),[Ee,ie,fe]}function W$2(ne){reactExports.useEffect(()=>{const _=ne;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[ne])}function X(ne,_){reactExports.useEffect(()=>{if(_){const K=ne;return window.addEventListener("scroll",K,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",K,!0)}},[ne,_])}function E$2(ne){const _=[];if(!ne||ne===document.body)return _;const{overflow:K,overflowX:Z,overflowY:te}=window.getComputedStyle(ne);return[K,Z,te].some(ie=>ie==="auto"||ie==="scroll")&&_.push(ne),[..._,...E$2(ne.parentElement)]}const k$4=["x","y","top","bottom","left","right","width","height"],D$3=(ne,_)=>k$4.every(K=>ne[K]===_[K]);var __defProp$2=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(ne,_,K)=>_ in ne?__defProp$2(ne,_,{enumerable:!0,configurable:!0,writable:!0,value:K}):ne[_]=K,__spreadValues=(ne,_)=>{for(var K in _||(_={}))__hasOwnProp.call(_,K)&&__defNormalProp$2(ne,K,_[K]);if(__getOwnPropSymbols)for(var K of __getOwnPropSymbols(_))__propIsEnum.call(_,K)&&__defNormalProp$2(ne,K,_[K]);return ne},__spreadProps=(ne,_)=>__defProps(ne,__getOwnPropDescs(_)),_a,_b;typeof window<"u"&&((_a=window.document)!=null&&_a.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(ne,_,K){if(!ne)return;if(K(ne)===!0)return ne;let Z=ne.child;for(;Z;){const te=traverseFiber(Z,_,K);if(te)return te;Z=Z.sibling}}function wrapContext(ne){try{return Object.defineProperties(ne,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return ne}}const error=console.error;console.error=function(){const ne=[...arguments].join("");if(ne?.startsWith("Warning:")&&ne.includes("useContext")){console.error=error;return}return error.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const ne=reactExports.useContext(FiberContext);if(ne===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const Z of[ne,ne?.alternate]){if(!Z)continue;const te=traverseFiber(Z,!1,ie=>{let se=ie.memoizedState;for(;se;){if(se.memoizedState===_)return!0;se=se.next}});if(te)return te}},[ne,_])}function useContextMap(){const ne=useFiber(),[_]=reactExports.useState(()=>new Map);_.clear();let K=ne;for(;K;){if(K.type&&typeof K.type=="object"){const te=K.type._context===void 0&&K.type.Provider===K.type?K.type:K.type._context;te&&te!==FiberContext&&!_.has(te)&&_.set(te,reactExports.useContext(wrapContext(te)))}K=K.return}return _}function useContextBridge(){const ne=useContextMap();return reactExports.useMemo(()=>Array.from(ne.keys()).reduce((_,K)=>Z=>reactExports.createElement(_,null,reactExports.createElement(K.Provider,__spreadProps(__spreadValues({},Z),{value:ne.get(K)}))),_=>reactExports.createElement(FiberProvider,__spreadValues({},_))),[ne])}const CanvasImpl=reactExports.forwardRef(function({children:_,fallback:K,resize:Z,style:te,gl:ie,events:se=createPointerEvents,eventSource:oe,eventPrefix:ae,shadows:le,linear:ue,flat:fe,legacy:he,orthographic:ge,frameloop:_e,dpr:Se,performance:Ee,raycaster:ye,camera:be,scene:we,onPointerMissed:Pe,onCreated:Oe,...Be},Ue){reactExports.useMemo(()=>extend(THREE),[]);const $e=useContextBridge(),[De,ke]=j$2({scroll:!0,debounce:{scroll:50,resize:0},...Z}),Ge=reactExports.useRef(null),Je=reactExports.useRef(null);reactExports.useImperativeHandle(Ue,()=>Ge.current);const Ye=useMutableCallback(Pe),[Qe,rt]=reactExports.useState(!1),[ot,ct]=reactExports.useState(!1);if(Qe)throw Qe;if(ot)throw ot;const je=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const nt=Ge.current;ke.width>0&&ke.height>0&&nt&&(je.current||(je.current=createRoot(nt)),je.current.configure({gl:ie,events:se,shadows:le,linear:ue,flat:fe,legacy:he,orthographic:ge,frameloop:_e,dpr:Se,performance:Ee,raycaster:ye,camera:be,scene:we,size:ke,onPointerMissed:(...qe)=>Ye.current==null?void 0:Ye.current(...qe),onCreated:qe=>{qe.events.connect==null||qe.events.connect(oe?isRef(oe)?oe.current:oe:Je.current),ae&&qe.setEvents({compute:(lt,Pt)=>{const Gt=lt[ae+"X"],pt=lt[ae+"Y"];Pt.pointer.set(Gt/Pt.size.width*2-1,-(pt/Pt.size.height)*2+1),Pt.raycaster.setFromCamera(Pt.pointer,Pt.camera)}}),Oe?.(qe)}}),je.current.render(jsxRuntimeExports.jsx($e,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:ct,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:rt}),children:_??null})})})))}),reactExports.useEffect(()=>{const nt=Ge.current;if(nt)return()=>unmountComponentAtNode(nt)},[]);const st=oe?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:Je,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:st,...te},...Be,children:jsxRuntimeExports.jsx("div",{ref:De,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Ge,style:{display:"block"},children:K})})})}),Canvas$1=reactExports.forwardRef(function(_,K){return jsxRuntimeExports.jsx(FiberProvider,{children:jsxRuntimeExports.jsx(CanvasImpl,{..._,ref:K})})});function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_];for(var Z in K)({}).hasOwnProperty.call(K,Z)&&(ne[Z]=K[Z])}return ne},_extends$1.apply(null,arguments)}const v1=new Vector3,v2=new Vector3,v3=new Vector3,v4=new Vector2;function defaultCalculatePosition(ne,_,K){const Z=v1.setFromMatrixPosition(ne.matrixWorld);Z.project(_);const te=K.width/2,ie=K.height/2;return[Z.x*te+te,-(Z.y*ie)+ie]}function isObjectBehindCamera(ne,_){const K=v1.setFromMatrixPosition(ne.matrixWorld),Z=v2.setFromMatrixPosition(_.matrixWorld),te=K.sub(Z),ie=_.getWorldDirection(v3);return te.angleTo(ie)>Math.PI/2}function isObjectVisible(ne,_,K,Z){const te=v1.setFromMatrixPosition(ne.matrixWorld),ie=te.clone();ie.project(_),v4.set(ie.x,ie.y),K.setFromCamera(v4,_);const se=K.intersectObjects(Z,!0);if(se.length){const oe=se[0].distance;return te.distanceTo(K.ray.origin)<oe}return!0}function objectScale(ne,_){if(_ instanceof OrthographicCamera)return _.zoom;if(_ instanceof PerspectiveCamera){const K=v1.setFromMatrixPosition(ne.matrixWorld),Z=v2.setFromMatrixPosition(_.matrixWorld),te=_.fov*Math.PI/180,ie=K.distanceTo(Z);return 1/(2*Math.tan(te/2)*ie)}else return 1}function objectZIndex(ne,_,K){if(_ instanceof PerspectiveCamera||_ instanceof OrthographicCamera){const Z=v1.setFromMatrixPosition(ne.matrixWorld),te=v2.setFromMatrixPosition(_.matrixWorld),ie=Z.distanceTo(te),se=(K[1]-K[0])/(_.far-_.near),oe=K[1]-se*_.far;return Math.round(se*ie+oe)}}const epsilon=ne=>Math.abs(ne)<1e-10?0:ne;function getCSSMatrix(ne,_,K=""){let Z="matrix3d(";for(let te=0;te!==16;te++)Z+=epsilon(_[te]*ne.elements[te])+(te!==15?",":")");return K+Z}const getCameraCSSMatrix=(ne=>_=>getCSSMatrix(_,ne))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),getObjectCSSMatrix=(ne=>(_,K)=>getCSSMatrix(_,ne(K),"translate(-50%,-50%)"))(ne=>[1/ne,1/ne,1/ne,1,-1/ne,-1/ne,-1/ne,-1,1/ne,1/ne,1/ne,1,1,1,1,1]);function isRefObject(ne){return ne&&typeof ne=="object"&&"current"in ne}const Html=reactExports.forwardRef(({children:ne,eps:_=.001,style:K,className:Z,prepend:te,center:ie,fullscreen:se,portal:oe,distanceFactor:ae,sprite:le=!1,transform:ue=!1,occlude:fe,onOcclude:he,castShadow:ge,receiveShadow:_e,material:Se,geometry:Ee,zIndexRange:ye=[16777271,0],calculatePosition:be=defaultCalculatePosition,as:we="div",wrapperClass:Pe,pointerEvents:Oe="auto",...Be},Ue)=>{const{gl:$e,camera:De,scene:ke,size:Ge,raycaster:Je,events:Ye,viewport:Qe}=useThree(),[rt]=reactExports.useState(()=>document.createElement(we)),ot=reactExports.useRef(),ct=reactExports.useRef(null),je=reactExports.useRef(0),st=reactExports.useRef([0,0]),nt=reactExports.useRef(null),qe=reactExports.useRef(null),lt=oe?.current||Ye.connected||$e.domElement.parentNode,Pt=reactExports.useRef(null),Gt=reactExports.useRef(!1),pt=reactExports.useMemo(()=>fe&&fe!=="blending"||Array.isArray(fe)&&fe.length&&isRefObject(fe[0]),[fe]);reactExports.useLayoutEffect(()=>{const nn=$e.domElement;fe&&fe==="blending"?(nn.style.zIndex=`${Math.floor(ye[0]/2)}`,nn.style.position="absolute",nn.style.pointerEvents="none"):(nn.style.zIndex=null,nn.style.position=null,nn.style.pointerEvents=null)},[fe]),reactExports.useLayoutEffect(()=>{if(ct.current){const nn=ot.current=clientExports.createRoot(rt);if(ke.updateMatrixWorld(),ue)rt.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const an=be(ct.current,De,Ge);rt.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${an[0]}px,${an[1]}px,0);transform-origin:0 0;`}return lt&&(te?lt.prepend(rt):lt.appendChild(rt)),()=>{lt&&lt.removeChild(rt),nn.unmount()}}},[lt,ue]),reactExports.useLayoutEffect(()=>{Pe&&(rt.className=Pe)},[Pe]);const yt=reactExports.useMemo(()=>ue?{position:"absolute",top:0,left:0,width:Ge.width,height:Ge.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:ie?"translate3d(-50%,-50%,0)":"none",...se&&{top:-Ge.height/2,left:-Ge.width/2,width:Ge.width,height:Ge.height},...K},[K,ie,se,Ge,ue]),Bt=reactExports.useMemo(()=>({position:"absolute",pointerEvents:Oe}),[Oe]);reactExports.useLayoutEffect(()=>{if(Gt.current=!1,ue){var nn;(nn=ot.current)==null||nn.render(reactExports.createElement("div",{ref:nt,style:yt},reactExports.createElement("div",{ref:qe,style:Bt},reactExports.createElement("div",{ref:Ue,className:Z,style:K,children:ne}))))}else{var an;(an=ot.current)==null||an.render(reactExports.createElement("div",{ref:Ue,style:yt,className:Z,children:ne}))}});const Wt=reactExports.useRef(!0);useFrame(nn=>{if(ct.current){De.updateMatrixWorld(),ct.current.updateWorldMatrix(!0,!1);const an=ue?st.current:be(ct.current,De,Ge);if(ue||Math.abs(je.current-De.zoom)>_||Math.abs(st.current[0]-an[0])>_||Math.abs(st.current[1]-an[1])>_){const mn=isObjectBehindCamera(ct.current,De);let tt=!1;pt&&(Array.isArray(fe)?tt=fe.map(It=>It.current):fe!=="blending"&&(tt=[ke]));const Ut=Wt.current;if(tt){const It=isObjectVisible(ct.current,De,Je,tt);Wt.current=It&&!mn}else Wt.current=!mn;Ut!==Wt.current&&(he?he(!Wt.current):rt.style.display=Wt.current?"block":"none");const Dt=Math.floor(ye[0]/2),Vt=fe?pt?[ye[0],Dt]:[Dt-1,0]:ye;if(rt.style.zIndex=`${objectZIndex(ct.current,De,Vt)}`,ue){const[It,Qt]=[Ge.width/2,Ge.height/2],kt=De.projectionMatrix.elements[5]*Qt,{isOrthographicCamera:qt,top:Tn,left:Sn,bottom:We,right:Ve}=De,ft=getCameraCSSMatrix(De.matrixWorldInverse),Et=qt?`scale(${kt})translate(${epsilon(-(Ve+Sn)/2)}px,${epsilon((Tn+We)/2)}px)`:`translateZ(${kt}px)`;let Ft=ct.current.matrixWorld;le&&(Ft=De.matrixWorldInverse.clone().transpose().copyPosition(Ft).scale(ct.current.scale),Ft.elements[3]=Ft.elements[7]=Ft.elements[11]=0,Ft.elements[15]=1),rt.style.width=Ge.width+"px",rt.style.height=Ge.height+"px",rt.style.perspective=qt?"":`${kt}px`,nt.current&&qe.current&&(nt.current.style.transform=`${Et}${ft}translate(${It}px,${Qt}px)`,qe.current.style.transform=getObjectCSSMatrix(Ft,1/((ae||10)/400)))}else{const It=ae===void 0?1:objectScale(ct.current,De)*ae;rt.style.transform=`translate3d(${an[0]}px,${an[1]}px,0) scale(${It})`}st.current=an,je.current=De.zoom}}if(!pt&&Pt.current&&!Gt.current)if(ue){if(nt.current){const an=nt.current.children[0];if(an!=null&&an.clientWidth&&an!=null&&an.clientHeight){const{isOrthographicCamera:mn}=De;if(mn||Ee)Be.scale&&(Array.isArray(Be.scale)?Be.scale instanceof Vector3?Pt.current.scale.copy(Be.scale.clone().divideScalar(1)):Pt.current.scale.set(1/Be.scale[0],1/Be.scale[1],1/Be.scale[2]):Pt.current.scale.setScalar(1/Be.scale));else{const tt=(ae||10)/400,Ut=an.clientWidth*tt,Dt=an.clientHeight*tt;Pt.current.scale.set(Ut,Dt,1)}Gt.current=!0}}}else{const an=rt.children[0];if(an!=null&&an.clientWidth&&an!=null&&an.clientHeight){const mn=1/Qe.factor,tt=an.clientWidth*mn,Ut=an.clientHeight*mn;Pt.current.scale.set(tt,Ut,1),Gt.current=!0}Pt.current.lookAt(nn.camera.position)}});const jt=reactExports.useMemo(()=>({vertexShader:ue?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[ue]);return reactExports.createElement("group",_extends$1({},Be,{ref:ct}),fe&&!pt&&reactExports.createElement("mesh",{castShadow:ge,receiveShadow:_e,ref:Pt},Ee||reactExports.createElement("planeGeometry",null),Se||reactExports.createElement("shaderMaterial",{side:DoubleSide,vertexShader:jt.vertexShader,fragmentShader:jt.fragmentShader})))});function clamp$2(ne,_,K){return Math.max(_,Math.min(ne,K))}const V$2={toVector(ne,_){return ne===void 0&&(ne=_),Array.isArray(ne)?ne:[ne,ne]},add(ne,_){return[ne[0]+_[0],ne[1]+_[1]]},sub(ne,_){return[ne[0]-_[0],ne[1]-_[1]]},addTo(ne,_){ne[0]+=_[0],ne[1]+=_[1]},subTo(ne,_){ne[0]-=_[0],ne[1]-=_[1]}};function rubberband(ne,_,K){return _===0||Math.abs(_)===1/0?Math.pow(ne,K*5):ne*_*K/(_+K*ne)}function rubberbandIfOutOfBounds(ne,_,K,Z=.15){return Z===0?clamp$2(ne,_,K):ne<_?-rubberband(_-ne,K-_,Z)+_:ne>K?+rubberband(ne-K,K-_,Z)+K:ne}function computeRubberband(ne,[_,K],[Z,te]){const[[ie,se],[oe,ae]]=ne;return[rubberbandIfOutOfBounds(_,ie,se,Z),rubberbandIfOutOfBounds(K,oe,ae,te)]}function _toPrimitive(ne,_){if(typeof ne!="object"||ne===null)return ne;var K=ne[Symbol.toPrimitive];if(K!==void 0){var Z=K.call(ne,_);if(typeof Z!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(ne)}function _toPropertyKey(ne){var _=_toPrimitive(ne,"string");return typeof _=="symbol"?_:String(_)}function _defineProperty$3(ne,_,K){return _=_toPropertyKey(_),_ in ne?Object.defineProperty(ne,_,{value:K,enumerable:!0,configurable:!0,writable:!0}):ne[_]=K,ne}function ownKeys$3(ne,_){var K=Object.keys(ne);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ne);_&&(Z=Z.filter(function(te){return Object.getOwnPropertyDescriptor(ne,te).enumerable})),K.push.apply(K,Z)}return K}function _objectSpread2$1(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$3(Object(K),!0).forEach(function(Z){_defineProperty$3(ne,Z,K[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(K)):ownKeys$3(Object(K)).forEach(function(Z){Object.defineProperty(ne,Z,Object.getOwnPropertyDescriptor(K,Z))})}return ne}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(ne){return ne?ne[0].toUpperCase()+ne.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(ne=!1,_){return ne&&!actionsWithoutCaptureSupported.includes(_)}function toHandlerProp(ne,_="",K=!1){const Z=EVENT_TYPE_MAP[ne],te=Z&&Z[_]||_;return"on"+capitalize(ne)+capitalize(te)+(hasCapture(K,te)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(ne){let _=ne.substring(2).toLowerCase();const K=!!~_.indexOf("passive");K&&(_=_.replace("passive",""));const Z=pointerCaptureEvents.includes(_)?"capturecapture":"capture",te=!!~_.indexOf(Z);return te&&(_=_.replace("capture","")),{device:_,capture:te,passive:K}}function toDomEventType(ne,_=""){const K=EVENT_TYPE_MAP[ne],Z=K&&K[_]||_;return ne+Z}function isTouch(ne){return"touches"in ne}function getPointerType(ne){return isTouch(ne)?"touch":"pointerType"in ne?ne.pointerType:"mouse"}function getCurrentTargetTouchList(ne){return Array.from(ne.touches).filter(_=>{var K,Z;return _.target===ne.currentTarget||((K=ne.currentTarget)===null||K===void 0||(Z=K.contains)===null||Z===void 0?void 0:Z.call(K,_.target))})}function getTouchList(ne){return ne.type==="touchend"||ne.type==="touchcancel"?ne.changedTouches:ne.targetTouches}function getValueEvent(ne){return isTouch(ne)?getTouchList(ne)[0]:ne}function touchIds(ne){return getCurrentTargetTouchList(ne).map(_=>_.identifier)}function pointerId(ne){const _=getValueEvent(ne);return isTouch(ne)?_.identifier:_.pointerId}function pointerValues(ne){const _=getValueEvent(ne);return[_.clientX,_.clientY]}function getEventDetails(ne){const _={};if("buttons"in ne&&(_.buttons=ne.buttons),"shiftKey"in ne){const{shiftKey:K,altKey:Z,metaKey:te,ctrlKey:ie}=ne;Object.assign(_,{shiftKey:K,altKey:Z,metaKey:te,ctrlKey:ie})}return _}function call(ne,..._){return typeof ne=="function"?ne(..._):ne}function noop$1(){}function chain(...ne){return ne.length===0?noop$1:ne.length===1?ne[0]:function(){let _;for(const K of ne)_=K.apply(this,arguments)||_;return _}}function assignDefault(ne,_){return Object.assign({},_,ne||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(_,K,Z){this.ctrl=_,this.args=K,this.key=Z,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(_){this.ctrl.state[this.key]=_}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:_,shared:K,ingKey:Z,args:te}=this;K[Z]=_._active=_.active=_._blocked=_._force=!1,_._step=[!1,!1],_.intentional=!1,_._movement=[0,0],_._distance=[0,0],_._direction=[0,0],_._delta=[0,0],_._bounds=[[-1/0,1/0],[-1/0,1/0]],_.args=te,_.axis=void 0,_.memo=void 0,_.elapsedTime=_.timeDelta=0,_.direction=[0,0],_.distance=[0,0],_.overflow=[0,0],_._movementBound=[!1,!1],_.velocity=[0,0],_.movement=[0,0],_.delta=[0,0],_.timeStamp=0}start(_){const K=this.state,Z=this.config;K._active||(this.reset(),this.computeInitial(),K._active=!0,K.target=_.target,K.currentTarget=_.currentTarget,K.lastOffset=Z.from?call(Z.from,K):K.offset,K.offset=K.lastOffset,K.startTime=K.timeStamp=_.timeStamp)}computeValues(_){const K=this.state;K._values=_,K.values=this.config.transform(_)}computeInitial(){const _=this.state;_._initial=_._values,_.initial=_.values}compute(_){const{state:K,config:Z,shared:te}=this;K.args=this.args;let ie=0;if(_&&(K.event=_,Z.preventDefault&&_.cancelable&&K.event.preventDefault(),K.type=_.type,te.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,te.locked=!!document.pointerLockElement,Object.assign(te,getEventDetails(_)),te.down=te.pressed=te.buttons%2===1||te.touches>0,ie=_.timeStamp-K.timeStamp,K.timeStamp=_.timeStamp,K.elapsedTime=K.timeStamp-K.startTime),K._active){const Be=K._delta.map(Math.abs);V$2.addTo(K._distance,Be)}this.axisIntent&&this.axisIntent(_);const[se,oe]=K._movement,[ae,le]=Z.threshold,{_step:ue,values:fe}=K;if(Z.hasCustomTransform?(ue[0]===!1&&(ue[0]=Math.abs(se)>=ae&&fe[0]),ue[1]===!1&&(ue[1]=Math.abs(oe)>=le&&fe[1])):(ue[0]===!1&&(ue[0]=Math.abs(se)>=ae&&Math.sign(se)*ae),ue[1]===!1&&(ue[1]=Math.abs(oe)>=le&&Math.sign(oe)*le)),K.intentional=ue[0]!==!1||ue[1]!==!1,!K.intentional)return;const he=[0,0];if(Z.hasCustomTransform){const[Be,Ue]=fe;he[0]=ue[0]!==!1?Be-ue[0]:0,he[1]=ue[1]!==!1?Ue-ue[1]:0}else he[0]=ue[0]!==!1?se-ue[0]:0,he[1]=ue[1]!==!1?oe-ue[1]:0;this.restrictToAxis&&!K._blocked&&this.restrictToAxis(he);const ge=K.offset,_e=K._active&&!K._blocked||K.active;_e&&(K.first=K._active&&!K.active,K.last=!K._active&&K.active,K.active=te[this.ingKey]=K._active,_&&(K.first&&("bounds"in Z&&(K._bounds=call(Z.bounds,K)),this.setup&&this.setup()),K.movement=he,this.computeOffset()));const[Se,Ee]=K.offset,[[ye,be],[we,Pe]]=K._bounds;K.overflow=[Se<ye?-1:Se>be?1:0,Ee<we?-1:Ee>Pe?1:0],K._movementBound[0]=K.overflow[0]?K._movementBound[0]===!1?K._movement[0]:K._movementBound[0]:!1,K._movementBound[1]=K.overflow[1]?K._movementBound[1]===!1?K._movement[1]:K._movementBound[1]:!1;const Oe=K._active?Z.rubberband||[0,0]:[0,0];if(K.offset=computeRubberband(K._bounds,K.offset,Oe),K.delta=V$2.sub(K.offset,ge),this.computeMovement(),_e&&(!K.last||ie>BEFORE_LAST_KINEMATICS_DELAY)){K.delta=V$2.sub(K.offset,ge);const Be=K.delta.map(Math.abs);V$2.addTo(K.distance,Be),K.direction=K.delta.map(Math.sign),K._direction=K._delta.map(Math.sign),!K.first&&ie>0&&(K.velocity=[Be[0]/ie,Be[1]/ie],K.timeDelta=ie)}}emit(){const _=this.state,K=this.shared,Z=this.config;if(_._active||this.clean(),(_._blocked||!_.intentional)&&!_._force&&!Z.triggerAllEvents)return;const te=this.handler(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},K),_),{},{[this.aliasKey]:_.values}));te!==void 0&&(_.memo=te)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([ne,_],K){const Z=Math.abs(ne),te=Math.abs(_);if(Z>te&&Z>K)return"x";if(te>Z&&te>K)return"y"}class CoordinatesEngine extends Engine{constructor(..._){super(..._),_defineProperty$3(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$2.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$2.sub(this.state.offset,this.state.lastOffset)}axisIntent(_){const K=this.state,Z=this.config;if(!K.axis&&_){const te=typeof Z.axisThreshold=="object"?Z.axisThreshold[getPointerType(_)]:Z.axisThreshold;K.axis=selectAxis(K._movement,te)}K._blocked=(Z.lockDirection||!!Z.axis)&&!K.axis||!!Z.axis&&Z.axis!==K.axis}restrictToAxis(_){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":_[1]=0;break;case"y":_[0]=0;break}}}const identity=ne=>ne,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(ne=!0){return ne},eventOptions(ne,_,K){return _objectSpread2$1(_objectSpread2$1({},K.shared.eventOptions),ne)},preventDefault(ne=!1){return ne},triggerAllEvents(ne=!1){return ne},rubberband(ne=0){switch(ne){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$2.toVector(ne)}},from(ne){if(typeof ne=="function")return ne;if(ne!=null)return V$2.toVector(ne)},transform(ne,_,K){const Z=ne||K.shared.transform;return this.hasCustomTransform=!!Z,Z||identity},threshold(ne){return V$2.toVector(ne,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{axis(ne,_,{axis:K}){if(this.lockDirection=K==="lock",!this.lockDirection)return K},axisThreshold(ne=DEFAULT_AXIS_THRESHOLD){return ne},bounds(ne={}){if(typeof ne=="function")return ie=>coordinatesConfigResolver.bounds(ne(ie));if("current"in ne)return()=>ne.current;if(typeof HTMLElement=="function"&&ne instanceof HTMLElement)return ne;const{left:_=-1/0,right:K=1/0,top:Z=-1/0,bottom:te=1/0}=ne;return[[_,K],[Z,te]]}}),KEYS_DELTA_MAP={ArrowRight:(ne,_=1)=>[ne*_,0],ArrowLeft:(ne,_=1)=>[-1*ne*_,0],ArrowUp:(ne,_=1)=>[0,-1*ne*_],ArrowDown:(ne,_=1)=>[0,ne*_]};class DragEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty$3(this,"ingKey","dragging")}reset(){super.reset();const _=this.state;_._pointerId=void 0,_._pointerActive=!1,_._keyboardActive=!1,_._preventScroll=!1,_._delayed=!1,_.swipe=[0,0],_.tap=!1,_.canceled=!1,_.cancel=this.cancel.bind(this)}setup(){const _=this.state;if(_._bounds instanceof HTMLElement){const K=_._bounds.getBoundingClientRect(),Z=_.currentTarget.getBoundingClientRect(),te={left:K.left-Z.left+_.offset[0],right:K.right-Z.right+_.offset[0],top:K.top-Z.top+_.offset[1],bottom:K.bottom-Z.bottom+_.offset[1]};_._bounds=coordinatesConfigResolver.bounds(te)}}cancel(){const _=this.state;_.canceled||(_.canceled=!0,_._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(_){const K=this.config,Z=this.state;if(_.buttons!=null&&(Array.isArray(K.pointerButtons)?!K.pointerButtons.includes(_.buttons):K.pointerButtons!==-1&&K.pointerButtons!==_.buttons))return;const te=this.ctrl.setEventIds(_);K.pointerCapture&&_.target.setPointerCapture(_.pointerId),!(te&&te.size>1&&Z._pointerActive)&&(this.start(_),this.setupPointer(_),Z._pointerId=pointerId(_),Z._pointerActive=!0,this.computeValues(pointerValues(_)),this.computeInitial(),K.preventScrollAxis&&getPointerType(_)!=="mouse"?(Z._active=!1,this.setupScrollPrevention(_)):K.delay>0?(this.setupDelayTrigger(_),K.triggerAllEvents&&(this.compute(_),this.emit())):this.startPointerDrag(_))}startPointerDrag(_){const K=this.state;K._active=!0,K._preventScroll=!0,K._delayed=!1,this.compute(_),this.emit()}pointerMove(_){const K=this.state,Z=this.config;if(!K._pointerActive)return;const te=pointerId(_);if(K._pointerId!==void 0&&te!==K._pointerId)return;const ie=pointerValues(_);if(document.pointerLockElement===_.target?K._delta=[_.movementX,_.movementY]:(K._delta=V$2.sub(ie,K._values),this.computeValues(ie)),V$2.addTo(K._movement,K._delta),this.compute(_),K._delayed&&K.intentional){this.timeoutStore.remove("dragDelay"),K.active=!1,this.startPointerDrag(_);return}if(Z.preventScrollAxis&&!K._preventScroll)if(K.axis)if(K.axis===Z.preventScrollAxis||Z.preventScrollAxis==="xy"){K._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(_);return}else return;this.emit()}pointerUp(_){this.ctrl.setEventIds(_);try{this.config.pointerCapture&&_.target.hasPointerCapture(_.pointerId)&&_.target.releasePointerCapture(_.pointerId)}catch{}const K=this.state,Z=this.config;if(!K._active||!K._pointerActive)return;const te=pointerId(_);if(K._pointerId!==void 0&&te!==K._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(_);const[ie,se]=K._distance;if(K.tap=ie<=Z.tapsThreshold&&se<=Z.tapsThreshold,K.tap&&Z.filterTaps)K._force=!0;else{const[oe,ae]=K._delta,[le,ue]=K._movement,[fe,he]=Z.swipe.velocity,[ge,_e]=Z.swipe.distance,Se=Z.swipe.duration;if(K.elapsedTime<Se){const Ee=Math.abs(oe/K.timeDelta),ye=Math.abs(ae/K.timeDelta);Ee>fe&&Math.abs(le)>ge&&(K.swipe[0]=Math.sign(oe)),ye>he&&Math.abs(ue)>_e&&(K.swipe[1]=Math.sign(ae))}}this.emit()}pointerClick(_){!this.state.tap&&_.detail>0&&(_.preventDefault(),_.stopPropagation())}setupPointer(_){const K=this.config,Z=K.device;K.pointerLock&&_.currentTarget.requestPointerLock(),K.pointerCapture||(this.eventStore.add(this.sharedConfig.window,Z,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,Z,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,Z,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(_){this.state._preventScroll&&_.cancelable&&_.preventDefault()}setupScrollPrevention(_){this.state._preventScroll=!1,persistEvent(_);const K=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",K),this.eventStore.add(this.sharedConfig.window,"touch","cancel",K),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,_)}setupDelayTrigger(_){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(_)},this.config.delay)}keyDown(_){const K=KEYS_DELTA_MAP[_.key];if(K){const Z=this.state,te=_.shiftKey?10:_.altKey?.1:1;this.start(_),Z._delta=K(this.config.keyboardDisplacement,te),Z._keyboardActive=!0,V$2.addTo(Z._movement,Z._delta),this.compute(_),this.emit()}}keyUp(_){_.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(_),this.emit())}bind(_){const K=this.config.device;_(K,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(_(K,"change",this.pointerMove.bind(this)),_(K,"end",this.pointerUp.bind(this)),_(K,"cancel",this.pointerUp.bind(this)),_("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(_("key","down",this.keyDown.bind(this)),_("key","up",this.keyUp.bind(this))),this.config.filterTaps&&_("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(ne){"persist"in ne&&typeof ne.persist=="function"&&ne.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:supportsTouchEvents(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{device(ne,_,{pointer:{touch:K=!1,lock:Z=!1,mouse:te=!1}={}}){return this.pointerLock=Z&&SUPPORT.pointerLock,SUPPORT.touch&&K?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!te?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(ne,_,{preventScroll:K}){if(this.preventScrollDelay=typeof K=="number"?K:K||K===void 0&&ne?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||K===!1))return ne||(K!==void 0?"y":void 0)},pointerCapture(ne,_,{pointer:{capture:K=!0,buttons:Z=1,keys:te=!0}={}}){return this.pointerButtons=Z,this.keys=te,!this.pointerLock&&this.device==="pointer"&&K},threshold(ne,_,{filterTaps:K=!1,tapsThreshold:Z=3,axis:te=void 0}){const ie=V$2.toVector(ne,K?Z:te?1:0);return this.filterTaps=K,this.tapsThreshold=Z,ie},swipe({velocity:ne=DEFAULT_SWIPE_VELOCITY,distance:_=DEFAULT_SWIPE_DISTANCE,duration:K=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$2.toVector(ne)),distance:this.transform(V$2.toVector(_)),duration:K}},delay(ne=0){switch(ne){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return ne}},axisThreshold(ne){return ne?_objectSpread2$1(_objectSpread2$1({},DEFAULT_DRAG_AXIS_THRESHOLD),ne):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(ne=DEFAULT_KEYBOARD_DISPLACEMENT){return ne}});_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{device(ne,_,{shared:K,pointer:{touch:Z=!1}={}}){if(K.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&Z)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(ne,_,{scaleBounds:K={},angleBounds:Z={}}){const te=se=>{const oe=assignDefault(call(K,se),{min:-1/0,max:1/0});return[oe.min,oe.max]},ie=se=>{const oe=assignDefault(call(Z,se),{min:-1/0,max:1/0});return[oe.min,oe.max]};return typeof K!="function"&&typeof Z!="function"?[te(),ie()]:se=>[te(se),ie(se)]},threshold(ne,_,K){return this.lockDirection=K.axis==="lock",V$2.toVector(ne,this.lockDirection?[.1,3]:0)},modifierKey(ne){return ne===void 0?"ctrlKey":ne},pinchOnWheel(ne=!0){return ne}});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(ne=!0)=>ne});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(ne=!0)=>ne});const EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(ne){EngineMap.set(ne.key,ne.engine),ConfigResolverMap.set(ne.key,ne.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver};function _objectWithoutPropertiesLoose$2(ne,_){if(ne==null)return{};var K={},Z=Object.keys(ne),te,ie;for(ie=0;ie<Z.length;ie++)te=Z[ie],!(_.indexOf(te)>=0)&&(K[te]=ne[te]);return K}function _objectWithoutProperties$2(ne,_){if(ne==null)return{};var K=_objectWithoutPropertiesLoose$2(ne,_),Z,te;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(ne);for(te=0;te<ie.length;te++)Z=ie[te],!(_.indexOf(Z)>=0)&&Object.prototype.propertyIsEnumerable.call(ne,Z)&&(K[Z]=ne[Z])}return K}const sharedConfigResolver={target(ne){if(ne)return()=>"current"in ne?ne.current:ne},enabled(ne=!0){return ne},window(ne=SUPPORT.isBrowser?window:void 0){return ne},eventOptions({passive:ne=!0,capture:_=!1}={}){return{passive:ne,capture:_}},transform(ne){return ne}},_excluded$c=["target","eventOptions","window","enabled","transform"];function resolveWith(ne={},_){const K={};for(const[Z,te]of Object.entries(_))switch(typeof te){case"function":K[Z]=te.call(K,ne[Z],Z,ne);break;case"object":K[Z]=resolveWith(ne[Z],te);break;case"boolean":te&&(K[Z]=ne[Z]);break}return K}function parse$1(ne,_,K={}){const Z=ne,{target:te,eventOptions:ie,window:se,enabled:oe,transform:ae}=Z,le=_objectWithoutProperties$2(Z,_excluded$c);if(K.shared=resolveWith({target:te,eventOptions:ie,window:se,enabled:oe,transform:ae},sharedConfigResolver),_){const ue=ConfigResolverMap.get(_);K[_]=resolveWith(_objectSpread2$1({shared:K.shared},le),ue)}else for(const ue in le){const fe=ConfigResolverMap.get(ue);fe&&(K[ue]=resolveWith(_objectSpread2$1({shared:K.shared},le[ue]),fe))}return K}class EventStore{constructor(_,K){_defineProperty$3(this,"_listeners",new Set),this._ctrl=_,this._gestureKey=K}add(_,K,Z,te,ie){const se=this._listeners,oe=toDomEventType(K,Z),ae=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},le=_objectSpread2$1(_objectSpread2$1({},ae),ie);_.addEventListener(oe,te,le);const ue=()=>{_.removeEventListener(oe,te,le),se.delete(ue)};return se.add(ue),ue}clean(){this._listeners.forEach(_=>_()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$3(this,"_timeouts",new Map)}add(_,K,Z=140,...te){this.remove(_),this._timeouts.set(_,window.setTimeout(K,Z,...te))}remove(_){const K=this._timeouts.get(_);K&&window.clearTimeout(K)}clean(){this._timeouts.forEach(_=>void window.clearTimeout(_)),this._timeouts.clear()}}class Controller{constructor(_){_defineProperty$3(this,"gestures",new Set),_defineProperty$3(this,"_targetEventStore",new EventStore(this)),_defineProperty$3(this,"gestureEventStores",{}),_defineProperty$3(this,"gestureTimeoutStores",{}),_defineProperty$3(this,"handlers",{}),_defineProperty$3(this,"config",{}),_defineProperty$3(this,"pointerIds",new Set),_defineProperty$3(this,"touchIds",new Set),_defineProperty$3(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,_)}setEventIds(_){if(isTouch(_))return this.touchIds=new Set(touchIds(_)),this.touchIds;if("pointerId"in _)return _.type==="pointerup"||_.type==="pointercancel"?this.pointerIds.delete(_.pointerId):_.type==="pointerdown"&&this.pointerIds.add(_.pointerId),this.pointerIds}applyHandlers(_,K){this.handlers=_,this.nativeHandlers=K}applyConfig(_,K){this.config=parse$1(_,K,this.config)}clean(){this._targetEventStore.clean();for(const _ of this.gestures)this.gestureEventStores[_].clean(),this.gestureTimeoutStores[_].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(..._){const K=this.config.shared,Z={};let te;if(!(K.target&&(te=K.target(),!te))){if(K.enabled){for(const se of this.gestures){const oe=this.config[se],ae=bindToProps(Z,oe.eventOptions,!!te);if(oe.enabled){const le=EngineMap.get(se);new le(this,_,se).bind(ae)}}const ie=bindToProps(Z,K.eventOptions,!!te);for(const se in this.nativeHandlers)ie(se,"",oe=>this.nativeHandlers[se](_objectSpread2$1(_objectSpread2$1({},this.state.shared),{},{event:oe,args:_})),void 0,!0)}for(const ie in Z)Z[ie]=chain(...Z[ie]);if(!te)return Z;for(const ie in Z){const{device:se,capture:oe,passive:ae}=parseProp(ie);this._targetEventStore.add(te,se,"",Z[ie],{capture:oe,passive:ae})}}}}function setupGesture(ne,_){ne.gestures.add(_),ne.gestureEventStores[_]=new EventStore(ne,_),ne.gestureTimeoutStores[_]=new TimeoutStore}function resolveGestures(ne,_){_.drag&&setupGesture(ne,"drag"),_.wheel&&setupGesture(ne,"wheel"),_.scroll&&setupGesture(ne,"scroll"),_.move&&setupGesture(ne,"move"),_.pinch&&setupGesture(ne,"pinch"),_.hover&&setupGesture(ne,"hover")}const bindToProps=(ne,_,K)=>(Z,te,ie,se={},oe=!1)=>{var ae,le;const ue=(ae=se.capture)!==null&&ae!==void 0?ae:_.capture,fe=(le=se.passive)!==null&&le!==void 0?le:_.passive;let he=oe?Z:toHandlerProp(Z,te,ue);K&&fe&&(he+="Passive"),ne[he]=ne[he]||[],ne[he].push(ie)};function useRecognizers(ne,_={},K,Z){const te=React.useMemo(()=>new Controller(ne),[]);if(te.applyHandlers(ne,Z),te.applyConfig(_,K),React.useEffect(te.effect.bind(te)),React.useEffect(()=>te.clean.bind(te),[]),_.target===void 0)return te.bind.bind(te)}function useDrag$1(ne,_){return registerAction(dragAction),useRecognizers({drag:ne},_||{},"drag")}const version=parseInt(REVISION.replace(/\D+/g,""));function toTrianglesDrawMode$1(ne,_){if(_===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),ne;if(_===TriangleFanDrawMode||_===TriangleStripDrawMode){let K=ne.getIndex();if(K===null){const se=[],oe=ne.getAttribute("position");if(oe!==void 0){for(let ae=0;ae<oe.count;ae++)se.push(ae);ne.setIndex(se),K=ne.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ne}const Z=K.count-2,te=[];if(K)if(_===TriangleFanDrawMode)for(let se=1;se<=Z;se++)te.push(K.getX(0)),te.push(K.getX(se)),te.push(K.getX(se+1));else for(let se=0;se<Z;se++)se%2===0?(te.push(K.getX(se)),te.push(K.getX(se+1)),te.push(K.getX(se+2))):(te.push(K.getX(se+2)),te.push(K.getX(se+1)),te.push(K.getX(se)));te.length/3!==Z&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const ie=ne.clone();return ie.setIndex(te),ie.clearGroups(),ie}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",_),ne}var __defProp$1=Object.defineProperty,__defNormalProp$1=(ne,_,K)=>_ in ne?__defProp$1(ne,_,{enumerable:!0,configurable:!0,writable:!0,value:K}):ne[_]=K,__publicField$1=(ne,_,K)=>(__defNormalProp$1(ne,_+"",K),K);class EventDispatcher{constructor(){__publicField$1(this,"_listeners")}addEventListener(_,K){this._listeners===void 0&&(this._listeners={});const Z=this._listeners;Z[_]===void 0&&(Z[_]=[]),Z[_].indexOf(K)===-1&&Z[_].push(K)}hasEventListener(_,K){if(this._listeners===void 0)return!1;const Z=this._listeners;return Z[_]!==void 0&&Z[_].indexOf(K)!==-1}removeEventListener(_,K){if(this._listeners===void 0)return;const te=this._listeners[_];if(te!==void 0){const ie=te.indexOf(K);ie!==-1&&te.splice(ie,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const Z=this._listeners[_.type];if(Z!==void 0){_.target=this;const te=Z.slice(0);for(let ie=0,se=te.length;ie<se;ie++)te[ie].call(this,_);_.target=null}}}var __defProp=Object.defineProperty,__defNormalProp=(ne,_,K)=>_ in ne?__defProp(ne,_,{enumerable:!0,configurable:!0,writable:!0,value:K}):ne[_]=K,__publicField=(ne,_,K)=>(__defNormalProp(ne,typeof _!="symbol"?_+"":_,K),K);const _ray=new Ray,_plane=new Plane,TILT_LIMIT=Math.cos(70*(Math.PI/180)),moduloWrapAround=(ne,_)=>(ne%_+_)%_;let OrbitControls$1=class extends EventDispatcher{constructor(_,K){super(),__publicField(this,"object"),__publicField(this,"domElement"),__publicField(this,"enabled",!0),__publicField(this,"target",new Vector3),__publicField(this,"minDistance",0),__publicField(this,"maxDistance",1/0),__publicField(this,"minZoom",0),__publicField(this,"maxZoom",1/0),__publicField(this,"minPolarAngle",0),__publicField(this,"maxPolarAngle",Math.PI),__publicField(this,"minAzimuthAngle",-1/0),__publicField(this,"maxAzimuthAngle",1/0),__publicField(this,"enableDamping",!1),__publicField(this,"dampingFactor",.05),__publicField(this,"enableZoom",!0),__publicField(this,"zoomSpeed",1),__publicField(this,"enableRotate",!0),__publicField(this,"rotateSpeed",1),__publicField(this,"enablePan",!0),__publicField(this,"panSpeed",1),__publicField(this,"screenSpacePanning",!0),__publicField(this,"keyPanSpeed",7),__publicField(this,"zoomToCursor",!1),__publicField(this,"autoRotate",!1),__publicField(this,"autoRotateSpeed",2),__publicField(this,"reverseOrbit",!1),__publicField(this,"reverseHorizontalOrbit",!1),__publicField(this,"reverseVerticalOrbit",!1),__publicField(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField(this,"target0"),__publicField(this,"position0"),__publicField(this,"zoom0"),__publicField(this,"_domElementKeyEvents",null),__publicField(this,"getPolarAngle"),__publicField(this,"getAzimuthalAngle"),__publicField(this,"setPolarAngle"),__publicField(this,"setAzimuthalAngle"),__publicField(this,"getDistance"),__publicField(this,"getZoomScale"),__publicField(this,"listenToKeyEvents"),__publicField(this,"stopListenToKeyEvents"),__publicField(this,"saveState"),__publicField(this,"reset"),__publicField(this,"update"),__publicField(this,"connect"),__publicField(this,"dispose"),__publicField(this,"dollyIn"),__publicField(this,"dollyOut"),__publicField(this,"getScale"),__publicField(this,"setScale"),this.object=_,this.domElement=K,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>ue.phi,this.getAzimuthalAngle=()=>ue.theta,this.setPolarAngle=Xe=>{let at=moduloWrapAround(Xe,2*Math.PI),At=ue.phi;At<0&&(At+=2*Math.PI),at<0&&(at+=2*Math.PI);let Ze=Math.abs(at-At);2*Math.PI-Ze<Ze&&(at<At?at+=2*Math.PI:At+=2*Math.PI),fe.phi=at-At,Z.update()},this.setAzimuthalAngle=Xe=>{let at=moduloWrapAround(Xe,2*Math.PI),At=ue.theta;At<0&&(At+=2*Math.PI),at<0&&(at+=2*Math.PI);let Ze=Math.abs(at-At);2*Math.PI-Ze<Ze&&(at<At?at+=2*Math.PI:At+=2*Math.PI),fe.theta=at-At,Z.update()},this.getDistance=()=>Z.object.position.distanceTo(Z.target),this.listenToKeyEvents=Xe=>{Xe.addEventListener("keydown",Ct),this._domElementKeyEvents=Xe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ct),this._domElementKeyEvents=null},this.saveState=()=>{Z.target0.copy(Z.target),Z.position0.copy(Z.object.position),Z.zoom0=Z.object.zoom},this.reset=()=>{Z.target.copy(Z.target0),Z.object.position.copy(Z.position0),Z.object.zoom=Z.zoom0,Z.object.updateProjectionMatrix(),Z.dispatchEvent(te),Z.update(),ae=oe.NONE},this.update=(()=>{const Xe=new Vector3,at=new Vector3(0,1,0),At=new Quaternion().setFromUnitVectors(_.up,at),Ze=At.clone().invert(),Ot=new Vector3,Ht=new Quaternion,en=2*Math.PI;return function(){const zt=Z.object.position;At.setFromUnitVectors(_.up,at),Ze.copy(At).invert(),Xe.copy(zt).sub(Z.target),Xe.applyQuaternion(At),ue.setFromVector3(Xe),Z.autoRotate&&ae===oe.NONE&&Qe(Je()),Z.enableDamping?(ue.theta+=fe.theta*Z.dampingFactor,ue.phi+=fe.phi*Z.dampingFactor):(ue.theta+=fe.theta,ue.phi+=fe.phi);let ln=Z.minAzimuthAngle,Pn=Z.maxAzimuthAngle;isFinite(ln)&&isFinite(Pn)&&(ln<-Math.PI?ln+=en:ln>Math.PI&&(ln-=en),Pn<-Math.PI?Pn+=en:Pn>Math.PI&&(Pn-=en),ln<=Pn?ue.theta=Math.max(ln,Math.min(Pn,ue.theta)):ue.theta=ue.theta>(ln+Pn)/2?Math.max(ln,ue.theta):Math.min(Pn,ue.theta)),ue.phi=Math.max(Z.minPolarAngle,Math.min(Z.maxPolarAngle,ue.phi)),ue.makeSafe(),Z.enableDamping===!0?Z.target.addScaledVector(ge,Z.dampingFactor):Z.target.add(ge),Z.zoomToCursor&&De||Z.object.isOrthographicCamera?ue.radius=Pt(ue.radius):ue.radius=Pt(ue.radius*he),Xe.setFromSpherical(ue),Xe.applyQuaternion(Ze),zt.copy(Z.target).add(Xe),Z.object.matrixAutoUpdate||Z.object.updateMatrix(),Z.object.lookAt(Z.target),Z.enableDamping===!0?(fe.theta*=1-Z.dampingFactor,fe.phi*=1-Z.dampingFactor,ge.multiplyScalar(1-Z.dampingFactor)):(fe.set(0,0,0),ge.set(0,0,0));let Jn=!1;if(Z.zoomToCursor&&De){let Hn=null;if(Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera){const Rr=Xe.length();Hn=Pt(Rr*he);const Er=Rr-Hn;Z.object.position.addScaledVector(Ue,Er),Z.object.updateMatrixWorld()}else if(Z.object.isOrthographicCamera){const Rr=new Vector3($e.x,$e.y,0);Rr.unproject(Z.object),Z.object.zoom=Math.max(Z.minZoom,Math.min(Z.maxZoom,Z.object.zoom/he)),Z.object.updateProjectionMatrix(),Jn=!0;const Er=new Vector3($e.x,$e.y,0);Er.unproject(Z.object),Z.object.position.sub(Er).add(Rr),Z.object.updateMatrixWorld(),Hn=Xe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),Z.zoomToCursor=!1;Hn!==null&&(Z.screenSpacePanning?Z.target.set(0,0,-1).transformDirection(Z.object.matrix).multiplyScalar(Hn).add(Z.object.position):(_ray.origin.copy(Z.object.position),_ray.direction.set(0,0,-1).transformDirection(Z.object.matrix),Math.abs(Z.object.up.dot(_ray.direction))<TILT_LIMIT?_.lookAt(Z.target):(_plane.setFromNormalAndCoplanarPoint(Z.object.up,Z.target),_ray.intersectPlane(_plane,Z.target))))}else Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera&&(Jn=he!==1,Jn&&(Z.object.zoom=Math.max(Z.minZoom,Math.min(Z.maxZoom,Z.object.zoom/he)),Z.object.updateProjectionMatrix()));return he=1,De=!1,Jn||Ot.distanceToSquared(Z.object.position)>le||8*(1-Ht.dot(Z.object.quaternion))>le?(Z.dispatchEvent(te),Ot.copy(Z.object.position),Ht.copy(Z.object.quaternion),Jn=!1,!0):!1}})(),this.connect=Xe=>{Z.domElement=Xe,Z.domElement.style.touchAction="none",Z.domElement.addEventListener("contextmenu",fn),Z.domElement.addEventListener("pointerdown",Sn),Z.domElement.addEventListener("pointercancel",Ve),Z.domElement.addEventListener("wheel",Ft)},this.dispose=()=>{var Xe,at,At,Ze,Ot,Ht;Z.domElement&&(Z.domElement.style.touchAction="auto"),(Xe=Z.domElement)==null||Xe.removeEventListener("contextmenu",fn),(at=Z.domElement)==null||at.removeEventListener("pointerdown",Sn),(At=Z.domElement)==null||At.removeEventListener("pointercancel",Ve),(Ze=Z.domElement)==null||Ze.removeEventListener("wheel",Ft),(Ot=Z.domElement)==null||Ot.ownerDocument.removeEventListener("pointermove",We),(Ht=Z.domElement)==null||Ht.ownerDocument.removeEventListener("pointerup",Ve),Z._domElementKeyEvents!==null&&Z._domElementKeyEvents.removeEventListener("keydown",Ct)};const Z=this,te={type:"change"},ie={type:"start"},se={type:"end"},oe={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let ae=oe.NONE;const le=1e-6,ue=new Spherical,fe=new Spherical;let he=1;const ge=new Vector3,_e=new Vector2,Se=new Vector2,Ee=new Vector2,ye=new Vector2,be=new Vector2,we=new Vector2,Pe=new Vector2,Oe=new Vector2,Be=new Vector2,Ue=new Vector3,$e=new Vector2;let De=!1;const ke=[],Ge={};function Je(){return 2*Math.PI/60/60*Z.autoRotateSpeed}function Ye(){return Math.pow(.95,Z.zoomSpeed)}function Qe(Xe){Z.reverseOrbit||Z.reverseHorizontalOrbit?fe.theta+=Xe:fe.theta-=Xe}function rt(Xe){Z.reverseOrbit||Z.reverseVerticalOrbit?fe.phi+=Xe:fe.phi-=Xe}const ot=(()=>{const Xe=new Vector3;return function(At,Ze){Xe.setFromMatrixColumn(Ze,0),Xe.multiplyScalar(-At),ge.add(Xe)}})(),ct=(()=>{const Xe=new Vector3;return function(At,Ze){Z.screenSpacePanning===!0?Xe.setFromMatrixColumn(Ze,1):(Xe.setFromMatrixColumn(Ze,0),Xe.crossVectors(Z.object.up,Xe)),Xe.multiplyScalar(At),ge.add(Xe)}})(),je=(()=>{const Xe=new Vector3;return function(At,Ze){const Ot=Z.domElement;if(Ot&&Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera){const Ht=Z.object.position;Xe.copy(Ht).sub(Z.target);let en=Xe.length();en*=Math.tan(Z.object.fov/2*Math.PI/180),ot(2*At*en/Ot.clientHeight,Z.object.matrix),ct(2*Ze*en/Ot.clientHeight,Z.object.matrix)}else Ot&&Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera?(ot(At*(Z.object.right-Z.object.left)/Z.object.zoom/Ot.clientWidth,Z.object.matrix),ct(Ze*(Z.object.top-Z.object.bottom)/Z.object.zoom/Ot.clientHeight,Z.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),Z.enablePan=!1)}})();function st(Xe){Z.object instanceof PerspectiveCamera&&Z.object.isPerspectiveCamera||Z.object instanceof OrthographicCamera&&Z.object.isOrthographicCamera?he=Xe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),Z.enableZoom=!1)}function nt(Xe){st(he/Xe)}function qe(Xe){st(he*Xe)}function lt(Xe){if(!Z.zoomToCursor||!Z.domElement)return;De=!0;const at=Z.domElement.getBoundingClientRect(),At=Xe.clientX-at.left,Ze=Xe.clientY-at.top,Ot=at.width,Ht=at.height;$e.x=At/Ot*2-1,$e.y=-(Ze/Ht)*2+1,Ue.set($e.x,$e.y,1).unproject(Z.object).sub(Z.object.position).normalize()}function Pt(Xe){return Math.max(Z.minDistance,Math.min(Z.maxDistance,Xe))}function Gt(Xe){_e.set(Xe.clientX,Xe.clientY)}function pt(Xe){lt(Xe),Pe.set(Xe.clientX,Xe.clientY)}function yt(Xe){ye.set(Xe.clientX,Xe.clientY)}function Bt(Xe){Se.set(Xe.clientX,Xe.clientY),Ee.subVectors(Se,_e).multiplyScalar(Z.rotateSpeed);const at=Z.domElement;at&&(Qe(2*Math.PI*Ee.x/at.clientHeight),rt(2*Math.PI*Ee.y/at.clientHeight)),_e.copy(Se),Z.update()}function Wt(Xe){Oe.set(Xe.clientX,Xe.clientY),Be.subVectors(Oe,Pe),Be.y>0?nt(Ye()):Be.y<0&&qe(Ye()),Pe.copy(Oe),Z.update()}function jt(Xe){be.set(Xe.clientX,Xe.clientY),we.subVectors(be,ye).multiplyScalar(Z.panSpeed),je(we.x,we.y),ye.copy(be),Z.update()}function nn(Xe){lt(Xe),Xe.deltaY<0?qe(Ye()):Xe.deltaY>0&&nt(Ye()),Z.update()}function an(Xe){let at=!1;switch(Xe.code){case Z.keys.UP:je(0,Z.keyPanSpeed),at=!0;break;case Z.keys.BOTTOM:je(0,-Z.keyPanSpeed),at=!0;break;case Z.keys.LEFT:je(Z.keyPanSpeed,0),at=!0;break;case Z.keys.RIGHT:je(-Z.keyPanSpeed,0),at=!0;break}at&&(Xe.preventDefault(),Z.update())}function mn(){if(ke.length==1)_e.set(ke[0].pageX,ke[0].pageY);else{const Xe=.5*(ke[0].pageX+ke[1].pageX),at=.5*(ke[0].pageY+ke[1].pageY);_e.set(Xe,at)}}function tt(){if(ke.length==1)ye.set(ke[0].pageX,ke[0].pageY);else{const Xe=.5*(ke[0].pageX+ke[1].pageX),at=.5*(ke[0].pageY+ke[1].pageY);ye.set(Xe,at)}}function Ut(){const Xe=ke[0].pageX-ke[1].pageX,at=ke[0].pageY-ke[1].pageY,At=Math.sqrt(Xe*Xe+at*at);Pe.set(0,At)}function Dt(){Z.enableZoom&&Ut(),Z.enablePan&&tt()}function Vt(){Z.enableZoom&&Ut(),Z.enableRotate&&mn()}function It(Xe){if(ke.length==1)Se.set(Xe.pageX,Xe.pageY);else{const At=xt(Xe),Ze=.5*(Xe.pageX+At.x),Ot=.5*(Xe.pageY+At.y);Se.set(Ze,Ot)}Ee.subVectors(Se,_e).multiplyScalar(Z.rotateSpeed);const at=Z.domElement;at&&(Qe(2*Math.PI*Ee.x/at.clientHeight),rt(2*Math.PI*Ee.y/at.clientHeight)),_e.copy(Se)}function Qt(Xe){if(ke.length==1)be.set(Xe.pageX,Xe.pageY);else{const at=xt(Xe),At=.5*(Xe.pageX+at.x),Ze=.5*(Xe.pageY+at.y);be.set(At,Ze)}we.subVectors(be,ye).multiplyScalar(Z.panSpeed),je(we.x,we.y),ye.copy(be)}function kt(Xe){const at=xt(Xe),At=Xe.pageX-at.x,Ze=Xe.pageY-at.y,Ot=Math.sqrt(At*At+Ze*Ze);Oe.set(0,Ot),Be.set(0,Math.pow(Oe.y/Pe.y,Z.zoomSpeed)),nt(Be.y),Pe.copy(Oe)}function qt(Xe){Z.enableZoom&&kt(Xe),Z.enablePan&&Qt(Xe)}function Tn(Xe){Z.enableZoom&&kt(Xe),Z.enableRotate&&It(Xe)}function Sn(Xe){var at,At;Z.enabled!==!1&&(ke.length===0&&((at=Z.domElement)==null||at.ownerDocument.addEventListener("pointermove",We),(At=Z.domElement)==null||At.ownerDocument.addEventListener("pointerup",Ve)),gn(Xe),Xe.pointerType==="touch"?un(Xe):ft(Xe))}function We(Xe){Z.enabled!==!1&&(Xe.pointerType==="touch"?Yt(Xe):Et(Xe))}function Ve(Xe){var at,At,Ze;$t(Xe),ke.length===0&&((at=Z.domElement)==null||at.releasePointerCapture(Xe.pointerId),(At=Z.domElement)==null||At.ownerDocument.removeEventListener("pointermove",We),(Ze=Z.domElement)==null||Ze.ownerDocument.removeEventListener("pointerup",Ve)),Z.dispatchEvent(se),ae=oe.NONE}function ft(Xe){let at;switch(Xe.button){case 0:at=Z.mouseButtons.LEFT;break;case 1:at=Z.mouseButtons.MIDDLE;break;case 2:at=Z.mouseButtons.RIGHT;break;default:at=-1}switch(at){case MOUSE.DOLLY:if(Z.enableZoom===!1)return;pt(Xe),ae=oe.DOLLY;break;case MOUSE.ROTATE:if(Xe.ctrlKey||Xe.metaKey||Xe.shiftKey){if(Z.enablePan===!1)return;yt(Xe),ae=oe.PAN}else{if(Z.enableRotate===!1)return;Gt(Xe),ae=oe.ROTATE}break;case MOUSE.PAN:if(Xe.ctrlKey||Xe.metaKey||Xe.shiftKey){if(Z.enableRotate===!1)return;Gt(Xe),ae=oe.ROTATE}else{if(Z.enablePan===!1)return;yt(Xe),ae=oe.PAN}break;default:ae=oe.NONE}ae!==oe.NONE&&Z.dispatchEvent(ie)}function Et(Xe){if(Z.enabled!==!1)switch(ae){case oe.ROTATE:if(Z.enableRotate===!1)return;Bt(Xe);break;case oe.DOLLY:if(Z.enableZoom===!1)return;Wt(Xe);break;case oe.PAN:if(Z.enablePan===!1)return;jt(Xe);break}}function Ft(Xe){Z.enabled===!1||Z.enableZoom===!1||ae!==oe.NONE&&ae!==oe.ROTATE||(Xe.preventDefault(),Z.dispatchEvent(ie),nn(Xe),Z.dispatchEvent(se))}function Ct(Xe){Z.enabled===!1||Z.enablePan===!1||an(Xe)}function un(Xe){switch(mt(Xe),ke.length){case 1:switch(Z.touches.ONE){case TOUCH.ROTATE:if(Z.enableRotate===!1)return;mn(),ae=oe.TOUCH_ROTATE;break;case TOUCH.PAN:if(Z.enablePan===!1)return;tt(),ae=oe.TOUCH_PAN;break;default:ae=oe.NONE}break;case 2:switch(Z.touches.TWO){case TOUCH.DOLLY_PAN:if(Z.enableZoom===!1&&Z.enablePan===!1)return;Dt(),ae=oe.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(Z.enableZoom===!1&&Z.enableRotate===!1)return;Vt(),ae=oe.TOUCH_DOLLY_ROTATE;break;default:ae=oe.NONE}break;default:ae=oe.NONE}ae!==oe.NONE&&Z.dispatchEvent(ie)}function Yt(Xe){switch(mt(Xe),ae){case oe.TOUCH_ROTATE:if(Z.enableRotate===!1)return;It(Xe),Z.update();break;case oe.TOUCH_PAN:if(Z.enablePan===!1)return;Qt(Xe),Z.update();break;case oe.TOUCH_DOLLY_PAN:if(Z.enableZoom===!1&&Z.enablePan===!1)return;qt(Xe),Z.update();break;case oe.TOUCH_DOLLY_ROTATE:if(Z.enableZoom===!1&&Z.enableRotate===!1)return;Tn(Xe),Z.update();break;default:ae=oe.NONE}}function fn(Xe){Z.enabled!==!1&&Xe.preventDefault()}function gn(Xe){ke.push(Xe)}function $t(Xe){delete Ge[Xe.pointerId];for(let at=0;at<ke.length;at++)if(ke[at].pointerId==Xe.pointerId){ke.splice(at,1);return}}function mt(Xe){let at=Ge[Xe.pointerId];at===void 0&&(at=new Vector2,Ge[Xe.pointerId]=at),at.set(Xe.pageX,Xe.pageY)}function xt(Xe){const at=Xe.pointerId===ke[0].pointerId?ke[1]:ke[0];return Ge[at.pointerId]}this.dollyIn=(Xe=Ye())=>{qe(Xe),Z.update()},this.dollyOut=(Xe=Ye())=>{nt(Xe),Z.update()},this.getScale=()=>he,this.setScale=Xe=>{st(Xe),Z.update()},this.getZoomScale=()=>Ye(),K!==void 0&&this.connect(K),this.update()}};function decodeText(ne){if(typeof TextDecoder<"u")return new TextDecoder().decode(ne);let _="";for(let K=0,Z=ne.length;K<Z;K++)_+=String.fromCharCode(ne[K]);try{return decodeURIComponent(escape(_))}catch{return _}}const SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",sRGBEncoding=3001,LinearEncoding=3e3;let GLTFLoader$1=class extends Loader{constructor(_){super(_),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(K){return new GLTFMaterialsClearcoatExtension$1(K)}),this.register(function(K){return new GLTFMaterialsDispersionExtension$1(K)}),this.register(function(K){return new GLTFTextureBasisUExtension$1(K)}),this.register(function(K){return new GLTFTextureWebPExtension$1(K)}),this.register(function(K){return new GLTFTextureAVIFExtension$1(K)}),this.register(function(K){return new GLTFMaterialsSheenExtension$1(K)}),this.register(function(K){return new GLTFMaterialsTransmissionExtension$1(K)}),this.register(function(K){return new GLTFMaterialsVolumeExtension$1(K)}),this.register(function(K){return new GLTFMaterialsIorExtension$1(K)}),this.register(function(K){return new GLTFMaterialsEmissiveStrengthExtension$1(K)}),this.register(function(K){return new GLTFMaterialsSpecularExtension$1(K)}),this.register(function(K){return new GLTFMaterialsIridescenceExtension$1(K)}),this.register(function(K){return new GLTFMaterialsAnisotropyExtension$1(K)}),this.register(function(K){return new GLTFMaterialsBumpExtension$1(K)}),this.register(function(K){return new GLTFLightsExtension$1(K)}),this.register(function(K){return new GLTFMeshoptCompression$1(K)}),this.register(function(K){return new GLTFMeshGpuInstancing$1(K)})}load(_,K,Z,te){const ie=this;let se;if(this.resourcePath!=="")se=this.resourcePath;else if(this.path!==""){const le=LoaderUtils.extractUrlBase(_);se=LoaderUtils.resolveURL(le,this.path)}else se=LoaderUtils.extractUrlBase(_);this.manager.itemStart(_);const oe=function(le){te?te(le):console.error(le),ie.manager.itemError(_),ie.manager.itemEnd(_)},ae=new FileLoader(this.manager);ae.setPath(this.path),ae.setResponseType("arraybuffer"),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(this.withCredentials),ae.load(_,function(le){try{ie.parse(le,se,function(ue){K(ue),ie.manager.itemEnd(_)},oe)}catch(ue){oe(ue)}},Z,oe)}setDRACOLoader(_){return this.dracoLoader=_,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(_){return this.ktx2Loader=_,this}setMeshoptDecoder(_){return this.meshoptDecoder=_,this}register(_){return this.pluginCallbacks.indexOf(_)===-1&&this.pluginCallbacks.push(_),this}unregister(_){return this.pluginCallbacks.indexOf(_)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_),1),this}parse(_,K,Z,te){let ie;const se={},oe={};if(typeof _=="string")ie=JSON.parse(_);else if(_ instanceof ArrayBuffer)if(decodeText(new Uint8Array(_.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC$1){try{se[EXTENSIONS$1.KHR_BINARY_GLTF]=new GLTFBinaryExtension$1(_)}catch(ue){te&&te(ue);return}ie=JSON.parse(se[EXTENSIONS$1.KHR_BINARY_GLTF].content)}else ie=JSON.parse(decodeText(new Uint8Array(_)));else ie=_;if(ie.asset===void 0||ie.asset.version[0]<2){te&&te(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const ae=new GLTFParser$1(ie,{path:K||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ae.fileLoader.setRequestHeader(this.requestHeader);for(let le=0;le<this.pluginCallbacks.length;le++){const ue=this.pluginCallbacks[le](ae);ue.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),oe[ue.name]=ue,se[ue.name]=!0}if(ie.extensionsUsed)for(let le=0;le<ie.extensionsUsed.length;++le){const ue=ie.extensionsUsed[le],fe=ie.extensionsRequired||[];switch(ue){case EXTENSIONS$1.KHR_MATERIALS_UNLIT:se[ue]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION:se[ue]=new GLTFDracoMeshCompressionExtension$1(ie,this.dracoLoader);break;case EXTENSIONS$1.KHR_TEXTURE_TRANSFORM:se[ue]=new GLTFTextureTransformExtension$1;break;case EXTENSIONS$1.KHR_MESH_QUANTIZATION:se[ue]=new GLTFMeshQuantizationExtension$1;break;default:fe.indexOf(ue)>=0&&oe[ue]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+ue+'".')}}ae.setExtensions(se),ae.setPlugins(oe),ae.parse(Z,te)}parseAsync(_,K){const Z=this;return new Promise(function(te,ie){Z.parse(_,K,te,ie)})}};function GLTFRegistry$1(){let ne={};return{get:function(_){return ne[_]},add:function(_,K){ne[_]=K},remove:function(_){delete ne[_]},removeAll:function(){ne={}}}}const EXTENSIONS$1={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let GLTFLightsExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const _=this.parser,K=this.parser.json.nodes||[];for(let Z=0,te=K.length;Z<te;Z++){const ie=K[Z];ie.extensions&&ie.extensions[this.name]&&ie.extensions[this.name].light!==void 0&&_._addNodeRef(this.cache,ie.extensions[this.name].light)}}_loadLight(_){const K=this.parser,Z="light:"+_;let te=K.cache.get(Z);if(te)return te;const ie=K.json,ae=((ie.extensions&&ie.extensions[this.name]||{}).lights||[])[_];let le;const ue=new Color$1(16777215);ae.color!==void 0&&ue.setRGB(ae.color[0],ae.color[1],ae.color[2],LinearSRGBColorSpace);const fe=ae.range!==void 0?ae.range:0;switch(ae.type){case"directional":le=new DirectionalLight(ue),le.target.position.set(0,0,-1),le.add(le.target);break;case"point":le=new PointLight(ue),le.distance=fe;break;case"spot":le=new SpotLight(ue),le.distance=fe,ae.spot=ae.spot||{},ae.spot.innerConeAngle=ae.spot.innerConeAngle!==void 0?ae.spot.innerConeAngle:0,ae.spot.outerConeAngle=ae.spot.outerConeAngle!==void 0?ae.spot.outerConeAngle:Math.PI/4,le.angle=ae.spot.outerConeAngle,le.penumbra=1-ae.spot.innerConeAngle/ae.spot.outerConeAngle,le.target.position.set(0,0,-1),le.add(le.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ae.type)}return le.position.set(0,0,0),le.decay=2,assignExtrasToUserData$1(le,ae),ae.intensity!==void 0&&(le.intensity=ae.intensity),le.name=K.createUniqueName(ae.name||"light_"+_),te=Promise.resolve(le),K.cache.add(Z,te),te}getDependency(_,K){if(_==="light")return this._loadLight(K)}createNodeAttachment(_){const K=this,Z=this.parser,ie=Z.json.nodes[_],oe=(ie.extensions&&ie.extensions[this.name]||{}).light;return oe===void 0?null:this._loadLight(oe).then(function(ae){return Z._getNodeRef(K.cache,oe,ae)})}},GLTFMaterialsUnlitExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(_,K,Z){const te=[];_.color=new Color$1(1,1,1),_.opacity=1;const ie=K.pbrMetallicRoughness;if(ie){if(Array.isArray(ie.baseColorFactor)){const se=ie.baseColorFactor;_.color.setRGB(se[0],se[1],se[2],LinearSRGBColorSpace),_.opacity=se[3]}ie.baseColorTexture!==void 0&&te.push(Z.assignTexture(_,"map",ie.baseColorTexture,SRGBColorSpace))}return Promise.all(te)}},GLTFMaterialsEmissiveStrengthExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(_,K){const te=this.parser.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=te.extensions[this.name].emissiveStrength;return ie!==void 0&&(K.emissiveIntensity=ie),Promise.resolve()}},GLTFMaterialsClearcoatExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_CLEARCOAT}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];if(se.clearcoatFactor!==void 0&&(K.clearcoat=se.clearcoatFactor),se.clearcoatTexture!==void 0&&ie.push(Z.assignTexture(K,"clearcoatMap",se.clearcoatTexture)),se.clearcoatRoughnessFactor!==void 0&&(K.clearcoatRoughness=se.clearcoatRoughnessFactor),se.clearcoatRoughnessTexture!==void 0&&ie.push(Z.assignTexture(K,"clearcoatRoughnessMap",se.clearcoatRoughnessTexture)),se.clearcoatNormalTexture!==void 0&&(ie.push(Z.assignTexture(K,"clearcoatNormalMap",se.clearcoatNormalTexture)),se.clearcoatNormalTexture.scale!==void 0)){const oe=se.clearcoatNormalTexture.scale;K.clearcoatNormalScale=new Vector2(oe,oe)}return Promise.all(ie)}},GLTFMaterialsDispersionExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_DISPERSION}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const te=this.parser.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=te.extensions[this.name];return K.dispersion=ie.dispersion!==void 0?ie.dispersion:0,Promise.resolve()}},GLTFMaterialsIridescenceExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_IRIDESCENCE}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return se.iridescenceFactor!==void 0&&(K.iridescence=se.iridescenceFactor),se.iridescenceTexture!==void 0&&ie.push(Z.assignTexture(K,"iridescenceMap",se.iridescenceTexture)),se.iridescenceIor!==void 0&&(K.iridescenceIOR=se.iridescenceIor),K.iridescenceThicknessRange===void 0&&(K.iridescenceThicknessRange=[100,400]),se.iridescenceThicknessMinimum!==void 0&&(K.iridescenceThicknessRange[0]=se.iridescenceThicknessMinimum),se.iridescenceThicknessMaximum!==void 0&&(K.iridescenceThicknessRange[1]=se.iridescenceThicknessMaximum),se.iridescenceThicknessTexture!==void 0&&ie.push(Z.assignTexture(K,"iridescenceThicknessMap",se.iridescenceThicknessTexture)),Promise.all(ie)}},GLTFMaterialsSheenExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_SHEEN}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[];K.sheenColor=new Color$1(0,0,0),K.sheenRoughness=0,K.sheen=1;const se=te.extensions[this.name];if(se.sheenColorFactor!==void 0){const oe=se.sheenColorFactor;K.sheenColor.setRGB(oe[0],oe[1],oe[2],LinearSRGBColorSpace)}return se.sheenRoughnessFactor!==void 0&&(K.sheenRoughness=se.sheenRoughnessFactor),se.sheenColorTexture!==void 0&&ie.push(Z.assignTexture(K,"sheenColorMap",se.sheenColorTexture,SRGBColorSpace)),se.sheenRoughnessTexture!==void 0&&ie.push(Z.assignTexture(K,"sheenRoughnessMap",se.sheenRoughnessTexture)),Promise.all(ie)}},GLTFMaterialsTransmissionExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_TRANSMISSION}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return se.transmissionFactor!==void 0&&(K.transmission=se.transmissionFactor),se.transmissionTexture!==void 0&&ie.push(Z.assignTexture(K,"transmissionMap",se.transmissionTexture)),Promise.all(ie)}},GLTFMaterialsVolumeExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_VOLUME}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];K.thickness=se.thicknessFactor!==void 0?se.thicknessFactor:0,se.thicknessTexture!==void 0&&ie.push(Z.assignTexture(K,"thicknessMap",se.thicknessTexture)),K.attenuationDistance=se.attenuationDistance||1/0;const oe=se.attenuationColor||[1,1,1];return K.attenuationColor=new Color$1().setRGB(oe[0],oe[1],oe[2],LinearSRGBColorSpace),Promise.all(ie)}},GLTFMaterialsIorExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_IOR}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const te=this.parser.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=te.extensions[this.name];return K.ior=ie.ior!==void 0?ie.ior:1.5,Promise.resolve()}},GLTFMaterialsSpecularExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_SPECULAR}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];K.specularIntensity=se.specularFactor!==void 0?se.specularFactor:1,se.specularTexture!==void 0&&ie.push(Z.assignTexture(K,"specularIntensityMap",se.specularTexture));const oe=se.specularColorFactor||[1,1,1];return K.specularColor=new Color$1().setRGB(oe[0],oe[1],oe[2],LinearSRGBColorSpace),se.specularColorTexture!==void 0&&ie.push(Z.assignTexture(K,"specularColorMap",se.specularColorTexture,SRGBColorSpace)),Promise.all(ie)}},GLTFMaterialsBumpExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.EXT_MATERIALS_BUMP}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return K.bumpScale=se.bumpFactor!==void 0?se.bumpFactor:1,se.bumpTexture!==void 0&&ie.push(Z.assignTexture(K,"bumpMap",se.bumpTexture)),Promise.all(ie)}},GLTFMaterialsAnisotropyExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_ANISOTROPY}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return se.anisotropyStrength!==void 0&&(K.anisotropy=se.anisotropyStrength),se.anisotropyRotation!==void 0&&(K.anisotropyRotation=se.anisotropyRotation),se.anisotropyTexture!==void 0&&ie.push(Z.assignTexture(K,"anisotropyMap",se.anisotropyTexture)),Promise.all(ie)}},GLTFTextureBasisUExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_TEXTURE_BASISU}loadTexture(_){const K=this.parser,Z=K.json,te=Z.textures[_];if(!te.extensions||!te.extensions[this.name])return null;const ie=te.extensions[this.name],se=K.options.ktx2Loader;if(!se){if(Z.extensionsRequired&&Z.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return K.loadTextureImage(_,ie.source,se)}},GLTFTextureWebPExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(_){const K=this.name,Z=this.parser,te=Z.json,ie=te.textures[_];if(!ie.extensions||!ie.extensions[K])return null;const se=ie.extensions[K],oe=te.images[se.source];let ae=Z.textureLoader;if(oe.uri){const le=Z.options.manager.getHandler(oe.uri);le!==null&&(ae=le)}return this.detectSupport().then(function(le){if(le)return Z.loadTextureImage(_,se.source,ae);if(te.extensionsRequired&&te.extensionsRequired.indexOf(K)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Z.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const K=new Image;K.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",K.onload=K.onerror=function(){_(K.height===1)}})),this.isSupported}},GLTFTextureAVIFExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(_){const K=this.name,Z=this.parser,te=Z.json,ie=te.textures[_];if(!ie.extensions||!ie.extensions[K])return null;const se=ie.extensions[K],oe=te.images[se.source];let ae=Z.textureLoader;if(oe.uri){const le=Z.options.manager.getHandler(oe.uri);le!==null&&(ae=le)}return this.detectSupport().then(function(le){if(le)return Z.loadTextureImage(_,se.source,ae);if(te.extensionsRequired&&te.extensionsRequired.indexOf(K)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return Z.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const K=new Image;K.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",K.onload=K.onerror=function(){_(K.height===1)}})),this.isSupported}},GLTFMeshoptCompression$1=class{constructor(_){this.name=EXTENSIONS$1.EXT_MESHOPT_COMPRESSION,this.parser=_}loadBufferView(_){const K=this.parser.json,Z=K.bufferViews[_];if(Z.extensions&&Z.extensions[this.name]){const te=Z.extensions[this.name],ie=this.parser.getDependency("buffer",te.buffer),se=this.parser.options.meshoptDecoder;if(!se||!se.supported){if(K.extensionsRequired&&K.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return ie.then(function(oe){const ae=te.byteOffset||0,le=te.byteLength||0,ue=te.count,fe=te.byteStride,he=new Uint8Array(oe,ae,le);return se.decodeGltfBufferAsync?se.decodeGltfBufferAsync(ue,fe,he,te.mode,te.filter).then(function(ge){return ge.buffer}):se.ready.then(function(){const ge=new ArrayBuffer(ue*fe);return se.decodeGltfBuffer(new Uint8Array(ge),ue,fe,he,te.mode,te.filter),ge})})}else return null}},GLTFMeshGpuInstancing$1=class{constructor(_){this.name=EXTENSIONS$1.EXT_MESH_GPU_INSTANCING,this.parser=_}createNodeMesh(_){const K=this.parser.json,Z=K.nodes[_];if(!Z.extensions||!Z.extensions[this.name]||Z.mesh===void 0)return null;const te=K.meshes[Z.mesh];for(const le of te.primitives)if(le.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&le.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&le.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&le.mode!==void 0)return null;const se=Z.extensions[this.name].attributes,oe=[],ae={};for(const le in se)oe.push(this.parser.getDependency("accessor",se[le]).then(ue=>(ae[le]=ue,ae[le])));return oe.length<1?null:(oe.push(this.parser.createNodeMesh(_)),Promise.all(oe).then(le=>{const ue=le.pop(),fe=ue.isGroup?ue.children:[ue],he=le[0].count,ge=[];for(const _e of fe){const Se=new Matrix4,Ee=new Vector3,ye=new Quaternion,be=new Vector3(1,1,1),we=new InstancedMesh(_e.geometry,_e.material,he);for(let Pe=0;Pe<he;Pe++)ae.TRANSLATION&&Ee.fromBufferAttribute(ae.TRANSLATION,Pe),ae.ROTATION&&ye.fromBufferAttribute(ae.ROTATION,Pe),ae.SCALE&&be.fromBufferAttribute(ae.SCALE,Pe),we.setMatrixAt(Pe,Se.compose(Ee,ye,be));for(const Pe in ae)if(Pe==="_COLOR_0"){const Oe=ae[Pe];we.instanceColor=new InstancedBufferAttribute(Oe.array,Oe.itemSize,Oe.normalized)}else Pe!=="TRANSLATION"&&Pe!=="ROTATION"&&Pe!=="SCALE"&&_e.geometry.setAttribute(Pe,ae[Pe]);Object3D.prototype.copy.call(we,_e),this.parser.assignFinalMaterial(we),ge.push(we)}return ue.isGroup?(ue.clear(),ue.add(...ge),ue):ge[0]}))}};const BINARY_EXTENSION_HEADER_MAGIC$1="glTF",BINARY_EXTENSION_HEADER_LENGTH$1=12,BINARY_EXTENSION_CHUNK_TYPES$1={JSON:1313821514,BIN:5130562};let GLTFBinaryExtension$1=class{constructor(_){this.name=EXTENSIONS$1.KHR_BINARY_GLTF,this.content=null,this.body=null;const K=new DataView(_,0,BINARY_EXTENSION_HEADER_LENGTH$1);if(this.header={magic:decodeText(new Uint8Array(_.slice(0,4))),version:K.getUint32(4,!0),length:K.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC$1)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Z=this.header.length-BINARY_EXTENSION_HEADER_LENGTH$1,te=new DataView(_,BINARY_EXTENSION_HEADER_LENGTH$1);let ie=0;for(;ie<Z;){const se=te.getUint32(ie,!0);ie+=4;const oe=te.getUint32(ie,!0);if(ie+=4,oe===BINARY_EXTENSION_CHUNK_TYPES$1.JSON){const ae=new Uint8Array(_,BINARY_EXTENSION_HEADER_LENGTH$1+ie,se);this.content=decodeText(ae)}else if(oe===BINARY_EXTENSION_CHUNK_TYPES$1.BIN){const ae=BINARY_EXTENSION_HEADER_LENGTH$1+ie;this.body=_.slice(ae,ae+se)}ie+=se}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},GLTFDracoMeshCompressionExtension$1=class{constructor(_,K){if(!K)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=K,this.dracoLoader.preload()}decodePrimitive(_,K){const Z=this.json,te=this.dracoLoader,ie=_.extensions[this.name].bufferView,se=_.extensions[this.name].attributes,oe={},ae={},le={};for(const ue in se){const fe=ATTRIBUTES$1[ue]||ue.toLowerCase();oe[fe]=se[ue]}for(const ue in _.attributes){const fe=ATTRIBUTES$1[ue]||ue.toLowerCase();if(se[ue]!==void 0){const he=Z.accessors[_.attributes[ue]],ge=WEBGL_COMPONENT_TYPES$1[he.componentType];le[fe]=ge.name,ae[fe]=he.normalized===!0}}return K.getDependency("bufferView",ie).then(function(ue){return new Promise(function(fe,he){te.decodeDracoFile(ue,function(ge){for(const _e in ge.attributes){const Se=ge.attributes[_e],Ee=ae[_e];Ee!==void 0&&(Se.normalized=Ee)}fe(ge)},oe,le,LinearSRGBColorSpace,he)})})}},GLTFTextureTransformExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_TEXTURE_TRANSFORM}extendTexture(_,K){return(K.texCoord===void 0||K.texCoord===_.channel)&&K.offset===void 0&&K.rotation===void 0&&K.scale===void 0||(_=_.clone(),K.texCoord!==void 0&&(_.channel=K.texCoord),K.offset!==void 0&&_.offset.fromArray(K.offset),K.rotation!==void 0&&(_.rotation=K.rotation),K.scale!==void 0&&_.repeat.fromArray(K.scale),_.needsUpdate=!0),_}},GLTFMeshQuantizationExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_MESH_QUANTIZATION}},GLTFCubicSplineInterpolant$1=class extends Interpolant{constructor(_,K,Z,te){super(_,K,Z,te)}copySampleValue_(_){const K=this.resultBuffer,Z=this.sampleValues,te=this.valueSize,ie=_*te*3+te;for(let se=0;se!==te;se++)K[se]=Z[ie+se];return K}interpolate_(_,K,Z,te){const ie=this.resultBuffer,se=this.sampleValues,oe=this.valueSize,ae=oe*2,le=oe*3,ue=te-K,fe=(Z-K)/ue,he=fe*fe,ge=he*fe,_e=_*le,Se=_e-le,Ee=-2*ge+3*he,ye=ge-he,be=1-Ee,we=ye-he+fe;for(let Pe=0;Pe!==oe;Pe++){const Oe=se[Se+Pe+oe],Be=se[Se+Pe+ae]*ue,Ue=se[_e+Pe+oe],$e=se[_e+Pe]*ue;ie[Pe]=be*Oe+we*Be+Ee*Ue+ye*$e}return ie}};const _q=new Quaternion;let GLTFCubicSplineQuaternionInterpolant$1=class extends GLTFCubicSplineInterpolant$1{interpolate_(_,K,Z,te){const ie=super.interpolate_(_,K,Z,te);return _q.fromArray(ie).normalize().toArray(ie),ie}};const WEBGL_CONSTANTS$1={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES$1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS$1={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS$1={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES$1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES$1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...version>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION$1={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES$1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial$1(ne){return ne.DefaultMaterial===void 0&&(ne.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),ne.DefaultMaterial}function addUnknownExtensionsToUserData$1(ne,_,K){for(const Z in K.extensions)ne[Z]===void 0&&(_.userData.gltfExtensions=_.userData.gltfExtensions||{},_.userData.gltfExtensions[Z]=K.extensions[Z])}function assignExtrasToUserData$1(ne,_){_.extras!==void 0&&(typeof _.extras=="object"?Object.assign(ne.userData,_.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_.extras))}function addMorphTargets$1(ne,_,K){let Z=!1,te=!1,ie=!1;for(let le=0,ue=_.length;le<ue;le++){const fe=_[le];if(fe.POSITION!==void 0&&(Z=!0),fe.NORMAL!==void 0&&(te=!0),fe.COLOR_0!==void 0&&(ie=!0),Z&&te&&ie)break}if(!Z&&!te&&!ie)return Promise.resolve(ne);const se=[],oe=[],ae=[];for(let le=0,ue=_.length;le<ue;le++){const fe=_[le];if(Z){const he=fe.POSITION!==void 0?K.getDependency("accessor",fe.POSITION):ne.attributes.position;se.push(he)}if(te){const he=fe.NORMAL!==void 0?K.getDependency("accessor",fe.NORMAL):ne.attributes.normal;oe.push(he)}if(ie){const he=fe.COLOR_0!==void 0?K.getDependency("accessor",fe.COLOR_0):ne.attributes.color;ae.push(he)}}return Promise.all([Promise.all(se),Promise.all(oe),Promise.all(ae)]).then(function(le){const ue=le[0],fe=le[1],he=le[2];return Z&&(ne.morphAttributes.position=ue),te&&(ne.morphAttributes.normal=fe),ie&&(ne.morphAttributes.color=he),ne.morphTargetsRelative=!0,ne})}function updateMorphTargets$1(ne,_){if(ne.updateMorphTargets(),_.weights!==void 0)for(let K=0,Z=_.weights.length;K<Z;K++)ne.morphTargetInfluences[K]=_.weights[K];if(_.extras&&Array.isArray(_.extras.targetNames)){const K=_.extras.targetNames;if(ne.morphTargetInfluences.length===K.length){ne.morphTargetDictionary={};for(let Z=0,te=K.length;Z<te;Z++)ne.morphTargetDictionary[K[Z]]=Z}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey$1(ne){let _;const K=ne.extensions&&ne.extensions[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION];if(K?_="draco:"+K.bufferView+":"+K.indices+":"+createAttributesKey$1(K.attributes):_=ne.indices+":"+createAttributesKey$1(ne.attributes)+":"+ne.mode,ne.targets!==void 0)for(let Z=0,te=ne.targets.length;Z<te;Z++)_+=":"+createAttributesKey$1(ne.targets[Z]);return _}function createAttributesKey$1(ne){let _="";const K=Object.keys(ne).sort();for(let Z=0,te=K.length;Z<te;Z++)_+=K[Z]+":"+ne[K[Z]]+";";return _}function getNormalizedComponentScale$1(ne){switch(ne){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType$1(ne){return ne.search(/\.jpe?g($|\?)/i)>0||ne.search(/^data\:image\/jpeg/)===0?"image/jpeg":ne.search(/\.webp($|\?)/i)>0||ne.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix$1=new Matrix4;let GLTFParser$1=class{constructor(_={},K={}){this.json=_,this.extensions={},this.plugins={},this.options=K,this.cache=new GLTFRegistry$1,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Z=!1,te=!1,ie=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(Z=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,te=navigator.userAgent.indexOf("Firefox")>-1,ie=te?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Z||te&&ie<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(_){this.extensions=_}setPlugins(_){this.plugins=_}parse(_,K){const Z=this,te=this.json,ie=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(se){return se._markDefs&&se._markDefs()}),Promise.all(this._invokeAll(function(se){return se.beforeRoot&&se.beforeRoot()})).then(function(){return Promise.all([Z.getDependencies("scene"),Z.getDependencies("animation"),Z.getDependencies("camera")])}).then(function(se){const oe={scene:se[0][te.scene||0],scenes:se[0],animations:se[1],cameras:se[2],asset:te.asset,parser:Z,userData:{}};return addUnknownExtensionsToUserData$1(ie,oe,te),assignExtrasToUserData$1(oe,te),Promise.all(Z._invokeAll(function(ae){return ae.afterRoot&&ae.afterRoot(oe)})).then(function(){for(const ae of oe.scenes)ae.updateMatrixWorld();_(oe)})}).catch(K)}_markDefs(){const _=this.json.nodes||[],K=this.json.skins||[],Z=this.json.meshes||[];for(let te=0,ie=K.length;te<ie;te++){const se=K[te].joints;for(let oe=0,ae=se.length;oe<ae;oe++)_[se[oe]].isBone=!0}for(let te=0,ie=_.length;te<ie;te++){const se=_[te];se.mesh!==void 0&&(this._addNodeRef(this.meshCache,se.mesh),se.skin!==void 0&&(Z[se.mesh].isSkinnedMesh=!0)),se.camera!==void 0&&this._addNodeRef(this.cameraCache,se.camera)}}_addNodeRef(_,K){K!==void 0&&(_.refs[K]===void 0&&(_.refs[K]=_.uses[K]=0),_.refs[K]++)}_getNodeRef(_,K,Z){if(_.refs[K]<=1)return Z;const te=Z.clone(),ie=(se,oe)=>{const ae=this.associations.get(se);ae!=null&&this.associations.set(oe,ae);for(const[le,ue]of se.children.entries())ie(ue,oe.children[le])};return ie(Z,te),te.name+="_instance_"+_.uses[K]++,te}_invokeOne(_){const K=Object.values(this.plugins);K.push(this);for(let Z=0;Z<K.length;Z++){const te=_(K[Z]);if(te)return te}return null}_invokeAll(_){const K=Object.values(this.plugins);K.unshift(this);const Z=[];for(let te=0;te<K.length;te++){const ie=_(K[te]);ie&&Z.push(ie)}return Z}getDependency(_,K){const Z=_+":"+K;let te=this.cache.get(Z);if(!te){switch(_){case"scene":te=this.loadScene(K);break;case"node":te=this._invokeOne(function(ie){return ie.loadNode&&ie.loadNode(K)});break;case"mesh":te=this._invokeOne(function(ie){return ie.loadMesh&&ie.loadMesh(K)});break;case"accessor":te=this.loadAccessor(K);break;case"bufferView":te=this._invokeOne(function(ie){return ie.loadBufferView&&ie.loadBufferView(K)});break;case"buffer":te=this.loadBuffer(K);break;case"material":te=this._invokeOne(function(ie){return ie.loadMaterial&&ie.loadMaterial(K)});break;case"texture":te=this._invokeOne(function(ie){return ie.loadTexture&&ie.loadTexture(K)});break;case"skin":te=this.loadSkin(K);break;case"animation":te=this._invokeOne(function(ie){return ie.loadAnimation&&ie.loadAnimation(K)});break;case"camera":te=this.loadCamera(K);break;default:if(te=this._invokeOne(function(ie){return ie!=this&&ie.getDependency&&ie.getDependency(_,K)}),!te)throw new Error("Unknown type: "+_);break}this.cache.add(Z,te)}return te}getDependencies(_){let K=this.cache.get(_);if(!K){const Z=this,te=this.json[_+(_==="mesh"?"es":"s")]||[];K=Promise.all(te.map(function(ie,se){return Z.getDependency(_,se)})),this.cache.add(_,K)}return K}loadBuffer(_){const K=this.json.buffers[_],Z=this.fileLoader;if(K.type&&K.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+K.type+" buffer type is not supported.");if(K.uri===void 0&&_===0)return Promise.resolve(this.extensions[EXTENSIONS$1.KHR_BINARY_GLTF].body);const te=this.options;return new Promise(function(ie,se){Z.load(LoaderUtils.resolveURL(K.uri,te.path),ie,void 0,function(){se(new Error('THREE.GLTFLoader: Failed to load buffer "'+K.uri+'".'))})})}loadBufferView(_){const K=this.json.bufferViews[_];return this.getDependency("buffer",K.buffer).then(function(Z){const te=K.byteLength||0,ie=K.byteOffset||0;return Z.slice(ie,ie+te)})}loadAccessor(_){const K=this,Z=this.json,te=this.json.accessors[_];if(te.bufferView===void 0&&te.sparse===void 0){const se=WEBGL_TYPE_SIZES$1[te.type],oe=WEBGL_COMPONENT_TYPES$1[te.componentType],ae=te.normalized===!0,le=new oe(te.count*se);return Promise.resolve(new BufferAttribute(le,se,ae))}const ie=[];return te.bufferView!==void 0?ie.push(this.getDependency("bufferView",te.bufferView)):ie.push(null),te.sparse!==void 0&&(ie.push(this.getDependency("bufferView",te.sparse.indices.bufferView)),ie.push(this.getDependency("bufferView",te.sparse.values.bufferView))),Promise.all(ie).then(function(se){const oe=se[0],ae=WEBGL_TYPE_SIZES$1[te.type],le=WEBGL_COMPONENT_TYPES$1[te.componentType],ue=le.BYTES_PER_ELEMENT,fe=ue*ae,he=te.byteOffset||0,ge=te.bufferView!==void 0?Z.bufferViews[te.bufferView].byteStride:void 0,_e=te.normalized===!0;let Se,Ee;if(ge&&ge!==fe){const ye=Math.floor(he/ge),be="InterleavedBuffer:"+te.bufferView+":"+te.componentType+":"+ye+":"+te.count;let we=K.cache.get(be);we||(Se=new le(oe,ye*ge,te.count*ge/ue),we=new InterleavedBuffer(Se,ge/ue),K.cache.add(be,we)),Ee=new InterleavedBufferAttribute(we,ae,he%ge/ue,_e)}else oe===null?Se=new le(te.count*ae):Se=new le(oe,he,te.count*ae),Ee=new BufferAttribute(Se,ae,_e);if(te.sparse!==void 0){const ye=WEBGL_TYPE_SIZES$1.SCALAR,be=WEBGL_COMPONENT_TYPES$1[te.sparse.indices.componentType],we=te.sparse.indices.byteOffset||0,Pe=te.sparse.values.byteOffset||0,Oe=new be(se[1],we,te.sparse.count*ye),Be=new le(se[2],Pe,te.sparse.count*ae);oe!==null&&(Ee=new BufferAttribute(Ee.array.slice(),Ee.itemSize,Ee.normalized));for(let Ue=0,$e=Oe.length;Ue<$e;Ue++){const De=Oe[Ue];if(Ee.setX(De,Be[Ue*ae]),ae>=2&&Ee.setY(De,Be[Ue*ae+1]),ae>=3&&Ee.setZ(De,Be[Ue*ae+2]),ae>=4&&Ee.setW(De,Be[Ue*ae+3]),ae>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ee})}loadTexture(_){const K=this.json,Z=this.options,ie=K.textures[_].source,se=K.images[ie];let oe=this.textureLoader;if(se.uri){const ae=Z.manager.getHandler(se.uri);ae!==null&&(oe=ae)}return this.loadTextureImage(_,ie,oe)}loadTextureImage(_,K,Z){const te=this,ie=this.json,se=ie.textures[_],oe=ie.images[K],ae=(oe.uri||oe.bufferView)+":"+se.sampler;if(this.textureCache[ae])return this.textureCache[ae];const le=this.loadImageSource(K,Z).then(function(ue){ue.flipY=!1,ue.name=se.name||oe.name||"",ue.name===""&&typeof oe.uri=="string"&&oe.uri.startsWith("data:image/")===!1&&(ue.name=oe.uri);const he=(ie.samplers||{})[se.sampler]||{};return ue.magFilter=WEBGL_FILTERS$1[he.magFilter]||LinearFilter,ue.minFilter=WEBGL_FILTERS$1[he.minFilter]||LinearMipmapLinearFilter,ue.wrapS=WEBGL_WRAPPINGS$1[he.wrapS]||RepeatWrapping,ue.wrapT=WEBGL_WRAPPINGS$1[he.wrapT]||RepeatWrapping,te.associations.set(ue,{textures:_}),ue}).catch(function(){return null});return this.textureCache[ae]=le,le}loadImageSource(_,K){const Z=this,te=this.json,ie=this.options;if(this.sourceCache[_]!==void 0)return this.sourceCache[_].then(fe=>fe.clone());const se=te.images[_],oe=self.URL||self.webkitURL;let ae=se.uri||"",le=!1;if(se.bufferView!==void 0)ae=Z.getDependency("bufferView",se.bufferView).then(function(fe){le=!0;const he=new Blob([fe],{type:se.mimeType});return ae=oe.createObjectURL(he),ae});else if(se.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+_+" is missing URI and bufferView");const ue=Promise.resolve(ae).then(function(fe){return new Promise(function(he,ge){let _e=he;K.isImageBitmapLoader===!0&&(_e=function(Se){const Ee=new Texture(Se);Ee.needsUpdate=!0,he(Ee)}),K.load(LoaderUtils.resolveURL(fe,ie.path),_e,void 0,ge)})}).then(function(fe){return le===!0&&oe.revokeObjectURL(ae),assignExtrasToUserData$1(fe,se),fe.userData.mimeType=se.mimeType||getImageURIMimeType$1(se.uri),fe}).catch(function(fe){throw console.error("THREE.GLTFLoader: Couldn't load texture",ae),fe});return this.sourceCache[_]=ue,ue}assignTexture(_,K,Z,te){const ie=this;return this.getDependency("texture",Z.index).then(function(se){if(!se)return null;if(Z.texCoord!==void 0&&Z.texCoord>0&&(se=se.clone(),se.channel=Z.texCoord),ie.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM]){const oe=Z.extensions!==void 0?Z.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM]:void 0;if(oe){const ae=ie.associations.get(se);se=ie.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM].extendTexture(se,oe),ie.associations.set(se,ae)}}return te!==void 0&&(typeof te=="number"&&(te=te===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace),"colorSpace"in se?se.colorSpace=te:se.encoding=te===SRGBColorSpace?sRGBEncoding:LinearEncoding),_[K]=se,se})}assignFinalMaterial(_){const K=_.geometry;let Z=_.material;const te=K.attributes.tangent===void 0,ie=K.attributes.color!==void 0,se=K.attributes.normal===void 0;if(_.isPoints){const oe="PointsMaterial:"+Z.uuid;let ae=this.cache.get(oe);ae||(ae=new PointsMaterial,Material.prototype.copy.call(ae,Z),ae.color.copy(Z.color),ae.map=Z.map,ae.sizeAttenuation=!1,this.cache.add(oe,ae)),Z=ae}else if(_.isLine){const oe="LineBasicMaterial:"+Z.uuid;let ae=this.cache.get(oe);ae||(ae=new LineBasicMaterial,Material.prototype.copy.call(ae,Z),ae.color.copy(Z.color),ae.map=Z.map,this.cache.add(oe,ae)),Z=ae}if(te||ie||se){let oe="ClonedMaterial:"+Z.uuid+":";te&&(oe+="derivative-tangents:"),ie&&(oe+="vertex-colors:"),se&&(oe+="flat-shading:");let ae=this.cache.get(oe);ae||(ae=Z.clone(),ie&&(ae.vertexColors=!0),se&&(ae.flatShading=!0),te&&(ae.normalScale&&(ae.normalScale.y*=-1),ae.clearcoatNormalScale&&(ae.clearcoatNormalScale.y*=-1)),this.cache.add(oe,ae),this.associations.set(ae,this.associations.get(Z))),Z=ae}_.material=Z}getMaterialType(){return MeshStandardMaterial}loadMaterial(_){const K=this,Z=this.json,te=this.extensions,ie=Z.materials[_];let se;const oe={},ae=ie.extensions||{},le=[];if(ae[EXTENSIONS$1.KHR_MATERIALS_UNLIT]){const fe=te[EXTENSIONS$1.KHR_MATERIALS_UNLIT];se=fe.getMaterialType(),le.push(fe.extendParams(oe,ie,K))}else{const fe=ie.pbrMetallicRoughness||{};if(oe.color=new Color$1(1,1,1),oe.opacity=1,Array.isArray(fe.baseColorFactor)){const he=fe.baseColorFactor;oe.color.setRGB(he[0],he[1],he[2],LinearSRGBColorSpace),oe.opacity=he[3]}fe.baseColorTexture!==void 0&&le.push(K.assignTexture(oe,"map",fe.baseColorTexture,SRGBColorSpace)),oe.metalness=fe.metallicFactor!==void 0?fe.metallicFactor:1,oe.roughness=fe.roughnessFactor!==void 0?fe.roughnessFactor:1,fe.metallicRoughnessTexture!==void 0&&(le.push(K.assignTexture(oe,"metalnessMap",fe.metallicRoughnessTexture)),le.push(K.assignTexture(oe,"roughnessMap",fe.metallicRoughnessTexture))),se=this._invokeOne(function(he){return he.getMaterialType&&he.getMaterialType(_)}),le.push(Promise.all(this._invokeAll(function(he){return he.extendMaterialParams&&he.extendMaterialParams(_,oe)})))}ie.doubleSided===!0&&(oe.side=DoubleSide);const ue=ie.alphaMode||ALPHA_MODES$1.OPAQUE;if(ue===ALPHA_MODES$1.BLEND?(oe.transparent=!0,oe.depthWrite=!1):(oe.transparent=!1,ue===ALPHA_MODES$1.MASK&&(oe.alphaTest=ie.alphaCutoff!==void 0?ie.alphaCutoff:.5)),ie.normalTexture!==void 0&&se!==MeshBasicMaterial&&(le.push(K.assignTexture(oe,"normalMap",ie.normalTexture)),oe.normalScale=new Vector2(1,1),ie.normalTexture.scale!==void 0)){const fe=ie.normalTexture.scale;oe.normalScale.set(fe,fe)}if(ie.occlusionTexture!==void 0&&se!==MeshBasicMaterial&&(le.push(K.assignTexture(oe,"aoMap",ie.occlusionTexture)),ie.occlusionTexture.strength!==void 0&&(oe.aoMapIntensity=ie.occlusionTexture.strength)),ie.emissiveFactor!==void 0&&se!==MeshBasicMaterial){const fe=ie.emissiveFactor;oe.emissive=new Color$1().setRGB(fe[0],fe[1],fe[2],LinearSRGBColorSpace)}return ie.emissiveTexture!==void 0&&se!==MeshBasicMaterial&&le.push(K.assignTexture(oe,"emissiveMap",ie.emissiveTexture,SRGBColorSpace)),Promise.all(le).then(function(){const fe=new se(oe);return ie.name&&(fe.name=ie.name),assignExtrasToUserData$1(fe,ie),K.associations.set(fe,{materials:_}),ie.extensions&&addUnknownExtensionsToUserData$1(te,fe,ie),fe})}createUniqueName(_){const K=PropertyBinding.sanitizeNodeName(_||"");return K in this.nodeNamesUsed?K+"_"+ ++this.nodeNamesUsed[K]:(this.nodeNamesUsed[K]=0,K)}loadGeometries(_){const K=this,Z=this.extensions,te=this.primitiveCache;function ie(oe){return Z[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(oe,K).then(function(ae){return addPrimitiveAttributes$1(ae,oe,K)})}const se=[];for(let oe=0,ae=_.length;oe<ae;oe++){const le=_[oe],ue=createPrimitiveKey$1(le),fe=te[ue];if(fe)se.push(fe.promise);else{let he;le.extensions&&le.extensions[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION]?he=ie(le):he=addPrimitiveAttributes$1(new BufferGeometry,le,K),te[ue]={primitive:le,promise:he},se.push(he)}}return Promise.all(se)}loadMesh(_){const K=this,Z=this.json,te=this.extensions,ie=Z.meshes[_],se=ie.primitives,oe=[];for(let ae=0,le=se.length;ae<le;ae++){const ue=se[ae].material===void 0?createDefaultMaterial$1(this.cache):this.getDependency("material",se[ae].material);oe.push(ue)}return oe.push(K.loadGeometries(se)),Promise.all(oe).then(function(ae){const le=ae.slice(0,ae.length-1),ue=ae[ae.length-1],fe=[];for(let ge=0,_e=ue.length;ge<_e;ge++){const Se=ue[ge],Ee=se[ge];let ye;const be=le[ge];if(Ee.mode===WEBGL_CONSTANTS$1.TRIANGLES||Ee.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||Ee.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||Ee.mode===void 0)ye=ie.isSkinnedMesh===!0?new SkinnedMesh(Se,be):new Mesh(Se,be),ye.isSkinnedMesh===!0&&ye.normalizeSkinWeights(),Ee.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?ye.geometry=toTrianglesDrawMode$1(ye.geometry,TriangleStripDrawMode):Ee.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(ye.geometry=toTrianglesDrawMode$1(ye.geometry,TriangleFanDrawMode));else if(Ee.mode===WEBGL_CONSTANTS$1.LINES)ye=new LineSegments(Se,be);else if(Ee.mode===WEBGL_CONSTANTS$1.LINE_STRIP)ye=new Line(Se,be);else if(Ee.mode===WEBGL_CONSTANTS$1.LINE_LOOP)ye=new LineLoop(Se,be);else if(Ee.mode===WEBGL_CONSTANTS$1.POINTS)ye=new Points(Se,be);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ee.mode);Object.keys(ye.geometry.morphAttributes).length>0&&updateMorphTargets$1(ye,ie),ye.name=K.createUniqueName(ie.name||"mesh_"+_),assignExtrasToUserData$1(ye,ie),Ee.extensions&&addUnknownExtensionsToUserData$1(te,ye,Ee),K.assignFinalMaterial(ye),fe.push(ye)}for(let ge=0,_e=fe.length;ge<_e;ge++)K.associations.set(fe[ge],{meshes:_,primitives:ge});if(fe.length===1)return ie.extensions&&addUnknownExtensionsToUserData$1(te,fe[0],ie),fe[0];const he=new Group;ie.extensions&&addUnknownExtensionsToUserData$1(te,he,ie),K.associations.set(he,{meshes:_});for(let ge=0,_e=fe.length;ge<_e;ge++)he.add(fe[ge]);return he})}loadCamera(_){let K;const Z=this.json.cameras[_],te=Z[Z.type];if(!te){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Z.type==="perspective"?K=new PerspectiveCamera(MathUtils.radToDeg(te.yfov),te.aspectRatio||1,te.znear||1,te.zfar||2e6):Z.type==="orthographic"&&(K=new OrthographicCamera(-te.xmag,te.xmag,te.ymag,-te.ymag,te.znear,te.zfar)),Z.name&&(K.name=this.createUniqueName(Z.name)),assignExtrasToUserData$1(K,Z),Promise.resolve(K)}loadSkin(_){const K=this.json.skins[_],Z=[];for(let te=0,ie=K.joints.length;te<ie;te++)Z.push(this._loadNodeShallow(K.joints[te]));return K.inverseBindMatrices!==void 0?Z.push(this.getDependency("accessor",K.inverseBindMatrices)):Z.push(null),Promise.all(Z).then(function(te){const ie=te.pop(),se=te,oe=[],ae=[];for(let le=0,ue=se.length;le<ue;le++){const fe=se[le];if(fe){oe.push(fe);const he=new Matrix4;ie!==null&&he.fromArray(ie.array,le*16),ae.push(he)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',K.joints[le])}return new Skeleton(oe,ae)})}loadAnimation(_){const K=this.json,Z=this,te=K.animations[_],ie=te.name?te.name:"animation_"+_,se=[],oe=[],ae=[],le=[],ue=[];for(let fe=0,he=te.channels.length;fe<he;fe++){const ge=te.channels[fe],_e=te.samplers[ge.sampler],Se=ge.target,Ee=Se.node,ye=te.parameters!==void 0?te.parameters[_e.input]:_e.input,be=te.parameters!==void 0?te.parameters[_e.output]:_e.output;Se.node!==void 0&&(se.push(this.getDependency("node",Ee)),oe.push(this.getDependency("accessor",ye)),ae.push(this.getDependency("accessor",be)),le.push(_e),ue.push(Se))}return Promise.all([Promise.all(se),Promise.all(oe),Promise.all(ae),Promise.all(le),Promise.all(ue)]).then(function(fe){const he=fe[0],ge=fe[1],_e=fe[2],Se=fe[3],Ee=fe[4],ye=[];for(let be=0,we=he.length;be<we;be++){const Pe=he[be],Oe=ge[be],Be=_e[be],Ue=Se[be],$e=Ee[be];if(Pe===void 0)continue;Pe.updateMatrix&&Pe.updateMatrix();const De=Z._createAnimationTracks(Pe,Oe,Be,Ue,$e);if(De)for(let ke=0;ke<De.length;ke++)ye.push(De[ke])}return new AnimationClip(ie,void 0,ye)})}createNodeMesh(_){const K=this.json,Z=this,te=K.nodes[_];return te.mesh===void 0?null:Z.getDependency("mesh",te.mesh).then(function(ie){const se=Z._getNodeRef(Z.meshCache,te.mesh,ie);return te.weights!==void 0&&se.traverse(function(oe){if(oe.isMesh)for(let ae=0,le=te.weights.length;ae<le;ae++)oe.morphTargetInfluences[ae]=te.weights[ae]}),se})}loadNode(_){const K=this.json,Z=this,te=K.nodes[_],ie=Z._loadNodeShallow(_),se=[],oe=te.children||[];for(let le=0,ue=oe.length;le<ue;le++)se.push(Z.getDependency("node",oe[le]));const ae=te.skin===void 0?Promise.resolve(null):Z.getDependency("skin",te.skin);return Promise.all([ie,Promise.all(se),ae]).then(function(le){const ue=le[0],fe=le[1],he=le[2];he!==null&&ue.traverse(function(ge){ge.isSkinnedMesh&&ge.bind(he,_identityMatrix$1)});for(let ge=0,_e=fe.length;ge<_e;ge++)ue.add(fe[ge]);return ue})}_loadNodeShallow(_){const K=this.json,Z=this.extensions,te=this;if(this.nodeCache[_]!==void 0)return this.nodeCache[_];const ie=K.nodes[_],se=ie.name?te.createUniqueName(ie.name):"",oe=[],ae=te._invokeOne(function(le){return le.createNodeMesh&&le.createNodeMesh(_)});return ae&&oe.push(ae),ie.camera!==void 0&&oe.push(te.getDependency("camera",ie.camera).then(function(le){return te._getNodeRef(te.cameraCache,ie.camera,le)})),te._invokeAll(function(le){return le.createNodeAttachment&&le.createNodeAttachment(_)}).forEach(function(le){oe.push(le)}),this.nodeCache[_]=Promise.all(oe).then(function(le){let ue;if(ie.isBone===!0?ue=new Bone:le.length>1?ue=new Group:le.length===1?ue=le[0]:ue=new Object3D,ue!==le[0])for(let fe=0,he=le.length;fe<he;fe++)ue.add(le[fe]);if(ie.name&&(ue.userData.name=ie.name,ue.name=se),assignExtrasToUserData$1(ue,ie),ie.extensions&&addUnknownExtensionsToUserData$1(Z,ue,ie),ie.matrix!==void 0){const fe=new Matrix4;fe.fromArray(ie.matrix),ue.applyMatrix4(fe)}else ie.translation!==void 0&&ue.position.fromArray(ie.translation),ie.rotation!==void 0&&ue.quaternion.fromArray(ie.rotation),ie.scale!==void 0&&ue.scale.fromArray(ie.scale);return te.associations.has(ue)||te.associations.set(ue,{}),te.associations.get(ue).nodes=_,ue}),this.nodeCache[_]}loadScene(_){const K=this.extensions,Z=this.json.scenes[_],te=this,ie=new Group;Z.name&&(ie.name=te.createUniqueName(Z.name)),assignExtrasToUserData$1(ie,Z),Z.extensions&&addUnknownExtensionsToUserData$1(K,ie,Z);const se=Z.nodes||[],oe=[];for(let ae=0,le=se.length;ae<le;ae++)oe.push(te.getDependency("node",se[ae]));return Promise.all(oe).then(function(ae){for(let ue=0,fe=ae.length;ue<fe;ue++)ie.add(ae[ue]);const le=ue=>{const fe=new Map;for(const[he,ge]of te.associations)(he instanceof Material||he instanceof Texture)&&fe.set(he,ge);return ue.traverse(he=>{const ge=te.associations.get(he);ge!=null&&fe.set(he,ge)}),fe};return te.associations=le(ie),ie})}_createAnimationTracks(_,K,Z,te,ie){const se=[],oe=_.name?_.name:_.uuid,ae=[];PATH_PROPERTIES$1[ie.path]===PATH_PROPERTIES$1.weights?_.traverse(function(he){he.morphTargetInfluences&&ae.push(he.name?he.name:he.uuid)}):ae.push(oe);let le;switch(PATH_PROPERTIES$1[ie.path]){case PATH_PROPERTIES$1.weights:le=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:le=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:le=VectorKeyframeTrack;break;default:switch(Z.itemSize){case 1:le=NumberKeyframeTrack;break;case 2:case 3:default:le=VectorKeyframeTrack;break}break}const ue=te.interpolation!==void 0?INTERPOLATION$1[te.interpolation]:InterpolateLinear,fe=this._getArrayFromAccessor(Z);for(let he=0,ge=ae.length;he<ge;he++){const _e=new le(ae[he]+"."+PATH_PROPERTIES$1[ie.path],K.array,fe,ue);te.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_e),se.push(_e)}return se}_getArrayFromAccessor(_){let K=_.array;if(_.normalized){const Z=getNormalizedComponentScale$1(K.constructor),te=new Float32Array(K.length);for(let ie=0,se=K.length;ie<se;ie++)te[ie]=K[ie]*Z;K=te}return K}_createCubicSplineTrackInterpolant(_){_.createInterpolant=function(Z){const te=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant$1:GLTFCubicSplineInterpolant$1;return new te(this.times,this.values,this.getValueSize()/3,Z)},_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function computeBounds$1(ne,_,K){const Z=_.attributes,te=new Box3;if(Z.POSITION!==void 0){const oe=K.json.accessors[Z.POSITION],ae=oe.min,le=oe.max;if(ae!==void 0&&le!==void 0){if(te.set(new Vector3(ae[0],ae[1],ae[2]),new Vector3(le[0],le[1],le[2])),oe.normalized){const ue=getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES$1[oe.componentType]);te.min.multiplyScalar(ue),te.max.multiplyScalar(ue)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const ie=_.targets;if(ie!==void 0){const oe=new Vector3,ae=new Vector3;for(let le=0,ue=ie.length;le<ue;le++){const fe=ie[le];if(fe.POSITION!==void 0){const he=K.json.accessors[fe.POSITION],ge=he.min,_e=he.max;if(ge!==void 0&&_e!==void 0){if(ae.setX(Math.max(Math.abs(ge[0]),Math.abs(_e[0]))),ae.setY(Math.max(Math.abs(ge[1]),Math.abs(_e[1]))),ae.setZ(Math.max(Math.abs(ge[2]),Math.abs(_e[2]))),he.normalized){const Se=getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES$1[he.componentType]);ae.multiplyScalar(Se)}oe.max(ae)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}te.expandByVector(oe)}ne.boundingBox=te;const se=new Sphere;te.getCenter(se.center),se.radius=te.min.distanceTo(te.max)/2,ne.boundingSphere=se}function addPrimitiveAttributes$1(ne,_,K){const Z=_.attributes,te=[];function ie(se,oe){return K.getDependency("accessor",se).then(function(ae){ne.setAttribute(oe,ae)})}for(const se in Z){const oe=ATTRIBUTES$1[se]||se.toLowerCase();oe in ne.attributes||te.push(ie(Z[se],oe))}if(_.indices!==void 0&&!ne.index){const se=K.getDependency("accessor",_.indices).then(function(oe){ne.setIndex(oe)});te.push(se)}return assignExtrasToUserData$1(ne,_),computeBounds$1(ne,_,K),Promise.all(te).then(function(){return _.targets!==void 0?addMorphTargets$1(ne,_.targets,K):ne})}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,K,Z,te){const ie=new FileLoader(this.manager);ie.setPath(this.path),ie.setResponseType("arraybuffer"),ie.setRequestHeader(this.requestHeader),ie.setWithCredentials(this.withCredentials),ie.load(_,se=>{const oe={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(se,oe).then(K).catch(te)},Z,te)}decodeDracoFile(_,K,Z,te){const ie={attributeIDs:Z||this.defaultAttributeIDs,attributeTypes:te||this.defaultAttributeTypes,useUniqueIDs:!!Z};this.decodeGeometry(_,ie).then(K)}decodeGeometry(_,K){for(const ae in K.attributeTypes){const le=K.attributeTypes[ae];le.BYTES_PER_ELEMENT!==void 0&&(K.attributeTypes[ae]=le.name)}const Z=JSON.stringify(K);if(_taskCache.has(_)){const ae=_taskCache.get(_);if(ae.key===Z)return ae.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let te;const ie=this.workerNextTaskID++,se=_.byteLength,oe=this._getWorker(ie,se).then(ae=>(te=ae,new Promise((le,ue)=>{te._callbacks[ie]={resolve:le,reject:ue},te.postMessage({type:"decode",id:ie,taskConfig:K,buffer:_},[_])}))).then(ae=>this._createGeometry(ae.geometry));return oe.catch(()=>!0).then(()=>{te&&ie&&this._releaseTask(te,ie)}),_taskCache.set(_,{key:Z,promise:oe}),oe}_createGeometry(_){const K=new BufferGeometry;_.index&&K.setIndex(new BufferAttribute(_.index.array,1));for(let Z=0;Z<_.attributes.length;Z++){const te=_.attributes[Z],ie=te.name,se=te.array,oe=te.itemSize;K.setAttribute(ie,new BufferAttribute(se,oe))}return K}_loadLibrary(_,K){const Z=new FileLoader(this.manager);return Z.setPath(this.decoderPath),Z.setResponseType(K),Z.setWithCredentials(this.withCredentials),new Promise((te,ie)=>{Z.load(_,te,void 0,ie)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",K=[];return _?K.push(this._loadLibrary("draco_decoder.js","text")):(K.push(this._loadLibrary("draco_wasm_wrapper.js","text")),K.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(K).then(Z=>{const te=Z[0];_||(this.decoderConfig.wasmBinary=Z[1]);const ie=DRACOWorker.toString(),se=["/* draco decoder */",te,"","/* worker */",ie.substring(ie.indexOf("{")+1,ie.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([se]))}),this.decoderPending}_getWorker(_,K){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const te=new Worker(this.workerSourceURL);te._callbacks={},te._taskCosts={},te._taskLoad=0,te.postMessage({type:"init",decoderConfig:this.decoderConfig}),te.onmessage=function(ie){const se=ie.data;switch(se.type){case"decode":te._callbacks[se.id].resolve(se);break;case"error":te._callbacks[se.id].reject(se);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+se.type+'"')}},this.workerPool.push(te)}else this.workerPool.sort(function(te,ie){return te._taskLoad>ie._taskLoad?-1:1});const Z=this.workerPool[this.workerPool.length-1];return Z._taskCosts[_]=K,Z._taskLoad+=K,Z})}_releaseTask(_,K){_._taskLoad-=_._taskCosts[K],delete _._callbacks[K],delete _._taskCosts[K]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let ne,_;onmessage=function(se){const oe=se.data;switch(oe.type){case"init":ne=oe.decoderConfig,_=new Promise(function(ue){ne.onModuleLoaded=function(fe){ue({draco:fe})},DracoDecoderModule(ne)});break;case"decode":const ae=oe.buffer,le=oe.taskConfig;_.then(ue=>{const fe=ue.draco,he=new fe.Decoder,ge=new fe.DecoderBuffer;ge.Init(new Int8Array(ae),ae.byteLength);try{const _e=K(fe,he,ge,le),Se=_e.attributes.map(Ee=>Ee.array.buffer);_e.index&&Se.push(_e.index.array.buffer),self.postMessage({type:"decode",id:oe.id,geometry:_e},Se)}catch(_e){console.error(_e),self.postMessage({type:"error",id:oe.id,error:_e.message})}finally{fe.destroy(ge),fe.destroy(he)}});break}};function K(se,oe,ae,le){const ue=le.attributeIDs,fe=le.attributeTypes;let he,ge;const _e=oe.GetEncodedGeometryType(ae);if(_e===se.TRIANGULAR_MESH)he=new se.Mesh,ge=oe.DecodeBufferToMesh(ae,he);else if(_e===se.POINT_CLOUD)he=new se.PointCloud,ge=oe.DecodeBufferToPointCloud(ae,he);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ge.ok()||he.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ge.error_msg());const Se={index:null,attributes:[]};for(const Ee in ue){const ye=self[fe[Ee]];let be,we;if(le.useUniqueIDs)we=ue[Ee],be=oe.GetAttributeByUniqueId(he,we);else{if(we=oe.GetAttributeId(he,se[ue[Ee]]),we===-1)continue;be=oe.GetAttribute(he,we)}Se.attributes.push(te(se,oe,he,Ee,ye,be))}return _e===se.TRIANGULAR_MESH&&(Se.index=Z(se,oe,he)),se.destroy(he),Se}function Z(se,oe,ae){const ue=ae.num_faces()*3,fe=ue*4,he=se._malloc(fe);oe.GetTrianglesUInt32Array(ae,fe,he);const ge=new Uint32Array(se.HEAPF32.buffer,he,ue).slice();return se._free(he),{array:ge,itemSize:1}}function te(se,oe,ae,le,ue,fe){const he=fe.num_components(),_e=ae.num_points()*he,Se=_e*ue.BYTES_PER_ELEMENT,Ee=ie(se,ue),ye=se._malloc(Se);oe.GetAttributeDataArrayForAllPoints(ae,fe,Ee,Se,ye);const be=new ue(se.HEAPF32.buffer,ye,_e).slice();return se._free(ye),{name:le,array:be,itemSize:he}}function ie(se,oe){switch(oe){case Float32Array:return se.DT_FLOAT32;case Int8Array:return se.DT_INT8;case Int16Array:return se.DT_INT16;case Int32Array:return se.DT_INT32;case Uint8Array:return se.DT_UINT8;case Uint16Array:return se.DT_UINT16;case Uint32Array:return se.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const ne="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",_="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",K=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Z=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let te=ne;WebAssembly.validate(K)&&(te=_);let ie;const se=WebAssembly.instantiate(oe(te),{}).then(fe=>{ie=fe.instance,ie.exports.__wasm_call_ctors()});function oe(fe){const he=new Uint8Array(fe.length);for(let _e=0;_e<fe.length;++_e){const Se=fe.charCodeAt(_e);he[_e]=Se>96?Se-71:Se>64?Se-65:Se>47?Se+4:Se>46?63:62}let ge=0;for(let _e=0;_e<fe.length;++_e)he[ge++]=he[_e]<60?Z[he[_e]]:(he[_e]-60)*64+he[++_e];return he.buffer.slice(0,ge)}function ae(fe,he,ge,_e,Se,Ee){const ye=ie.exports.sbrk,be=ge+3&-4,we=ye(be*_e),Pe=ye(Se.length),Oe=new Uint8Array(ie.exports.memory.buffer);Oe.set(Se,Pe);const Be=fe(we,ge,_e,Pe,Se.length);if(Be===0&&Ee&&Ee(we,be,_e),he.set(Oe.subarray(we,we+ge*_e)),ye(we-ye(0)),Be!==0)throw new Error(`Malformed buffer data: ${Be}`)}const le={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ue={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:se,supported:!0,decodeVertexBuffer(fe,he,ge,_e,Se){ae(ie.exports.meshopt_decodeVertexBuffer,fe,he,ge,_e,ie.exports[le[Se]])},decodeIndexBuffer(fe,he,ge,_e){ae(ie.exports.meshopt_decodeIndexBuffer,fe,he,ge,_e)},decodeIndexSequence(fe,he,ge,_e){ae(ie.exports.meshopt_decodeIndexSequence,fe,he,ge,_e)},decodeGltfBuffer(fe,he,ge,_e,Se,Ee){ae(ie.exports[ue[Se]],fe,he,ge,_e,ie.exports[le[Ee]])}},generated};let dracoLoader=null,decoderPath="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function extensions(ne=!0,_=!0,K){return Z=>{K&&K(Z),ne&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof ne=="string"?ne:decoderPath),Z.setDRACOLoader(dracoLoader)),_&&Z.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}const useGLTF=(ne,_,K,Z)=>useLoader(GLTFLoader$1,ne,extensions(_,K,Z));useGLTF.preload=(ne,_,K,Z)=>useLoader.preload(GLTFLoader$1,ne,extensions(_,K,Z));useGLTF.clear=ne=>useLoader.clear(GLTFLoader$1,ne);useGLTF.setDecoderPath=ne=>{decoderPath=ne};const OrbitControls=reactExports.forwardRef(({makeDefault:ne,camera:_,regress:K,domElement:Z,enableDamping:te=!0,keyEvents:ie=!1,onChange:se,onStart:oe,onEnd:ae,...le},ue)=>{const fe=useThree(Be=>Be.invalidate),he=useThree(Be=>Be.camera),ge=useThree(Be=>Be.gl),_e=useThree(Be=>Be.events),Se=useThree(Be=>Be.setEvents),Ee=useThree(Be=>Be.set),ye=useThree(Be=>Be.get),be=useThree(Be=>Be.performance),we=_||he,Pe=Z||_e.connected||ge.domElement,Oe=reactExports.useMemo(()=>new OrbitControls$1(we),[we]);return useFrame(()=>{Oe.enabled&&Oe.update()},-1),reactExports.useEffect(()=>(ie&&Oe.connect(ie===!0?Pe:ie),Oe.connect(Pe),()=>void Oe.dispose()),[ie,Pe,K,Oe,fe]),reactExports.useEffect(()=>{const Be=De=>{fe(),K&&be.regress(),se&&se(De)},Ue=De=>{oe&&oe(De)},$e=De=>{ae&&ae(De)};return Oe.addEventListener("change",Be),Oe.addEventListener("start",Ue),Oe.addEventListener("end",$e),()=>{Oe.removeEventListener("start",Ue),Oe.removeEventListener("end",$e),Oe.removeEventListener("change",Be)}},[se,oe,ae,Oe,fe,Se]),reactExports.useEffect(()=>{if(ne){const Be=ye().controls;return Ee({controls:Oe}),()=>Ee({controls:Be})}},[ne,Oe]),reactExports.createElement("primitive",_extends$1({ref:ue,object:Oe,enableDamping:te},le))});var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var ne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=ne,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var ne=requireReactPropTypesSecret();function _(){}function K(){}return K.resetWarningCache=_,factoryWithThrowingShims=function(){function Z(se,oe,ae,le,ue,fe){if(fe!==ne){var he=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw he.name="Invariant Violation",he}}Z.isRequired=Z;function te(){return Z}var ie={array:Z,bigint:Z,bool:Z,func:Z,number:Z,object:Z,string:Z,symbol:Z,any:Z,arrayOf:te,element:Z,elementType:Z,instanceOf:te,node:Z,objectOf:te,oneOf:te,oneOfType:te,shape:te,exact:te,checkPropTypes:K,resetWarningCache:_};return ie.PropTypes=ie,ie},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function $6ed0406888f73fc4$var$setRef(ne,_){typeof ne=="function"?ne(_):ne!=null&&(ne.current=_)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...ne){return _=>ne.forEach(K=>$6ed0406888f73fc4$var$setRef(K,_))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...ne){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...ne),ne)}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((ne,_)=>{const{children:K,...Z}=ne,te=reactExports.Children.toArray(K),ie=te.find($5e63c961fc1ce211$var$isSlottable);if(ie){const se=ie.props.children,oe=te.map(ae=>ae===ie?reactExports.Children.count(se)>1?reactExports.Children.only(null):reactExports.isValidElement(se)?se.props.children:null:ae);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},Z,{ref:_}),reactExports.isValidElement(se)?reactExports.cloneElement(se,void 0,oe):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},Z,{ref:_}),K)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((ne,_)=>{const{children:K,...Z}=ne;return reactExports.isValidElement(K)?reactExports.cloneElement(K,{...$5e63c961fc1ce211$var$mergeProps(Z,K.props),ref:$6ed0406888f73fc4$export$43e446d32b3d21af(_,K.ref)}):reactExports.Children.count(K)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:ne})=>reactExports.createElement(reactExports.Fragment,null,ne);function $5e63c961fc1ce211$var$isSlottable(ne){return reactExports.isValidElement(ne)&&ne.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(ne,_){const K={..._};for(const Z in _){const te=ne[Z],ie=_[Z];/^on[A-Z]/.test(Z)?te&&ie?K[Z]=(...oe)=>{ie(...oe),te(...oe)}:te&&(K[Z]=te):Z==="style"?K[Z]={...te,...ie}:Z==="className"&&(K[Z]=[te,ie].filter(Boolean).join(" "))}return{...ne,...K}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((ne,_)=>{const K=reactExports.forwardRef((Z,te)=>{const{asChild:ie,...se}=Z,oe=ie?$5e63c961fc1ce211$export$8c6ed5c666ac1360:_;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(oe,_extends$1({},se,{ref:te}))});return K.displayName=`Primitive.${_}`,{...ne,[_]:K}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(ne,_){ne&&reactDomExports.flushSync(()=>ne.dispatchEvent(_))}const $f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((ne,_)=>{var K;const{container:Z=globalThis==null||(K=globalThis.document)===null||K===void 0?void 0:K.body,...te}=ne;return Z?ReactDOM.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},te,{ref:_})),Z):null}),$f1701beae083dbae$export$be92b6f5f03c0fe9=$f1701beae083dbae$export$602eac185826482c;var has=Object.prototype.hasOwnProperty;function dequal(ne,_){var K,Z;if(ne===_)return!0;if(ne&&_&&(K=ne.constructor)===_.constructor){if(K===Date)return ne.getTime()===_.getTime();if(K===RegExp)return ne.toString()===_.toString();if(K===Array){if((Z=ne.length)===_.length)for(;Z--&&dequal(ne[Z],_[Z]););return Z===-1}if(!K||typeof ne=="object"){Z=0;for(K in ne)if(has.call(ne,K)&&++Z&&!has.call(_,K)||!(K in _)||!dequal(ne[K],_[K]))return!1;return Object.keys(_).length===Z}}return ne!==ne&&_!==_}function shallow(ne,_){if(Object.is(ne,_))return!0;if(typeof ne!="object"||ne===null||typeof _!="object"||_===null)return!1;const K=Object.keys(ne);if(K.length!==Object.keys(_).length)return!1;for(let Z=0;Z<K.length;Z++)if(!Object.prototype.hasOwnProperty.call(_,K[Z])||!Object.is(ne[K[Z]],_[K[Z]]))return!1;return!0}var Rule=function(_,K,Z,te){this.name=_,this.fn=K,this.args=Z,this.modifiers=te};Rule.prototype._test=function(_){var K=this.fn;try{testAux(this.modifiers.slice(),K,this)(_)}catch{K=function(){return!1}}try{return testAux(this.modifiers.slice(),K,this)(_)}catch{return!1}};Rule.prototype._check=function(_){try{testAux(this.modifiers.slice(),this.fn,this)(_)}catch{if(testAux(this.modifiers.slice(),function(Z){return Z},this)(!1))return}if(!testAux(this.modifiers.slice(),this.fn,this)(_))throw null};Rule.prototype._testAsync=function(_){var K=this;return new Promise(function(Z,te){testAsyncAux(K.modifiers.slice(),K.fn,K)(_).then(function(ie){ie?Z(_):te(null)}).catch(function(ie){return te(ie)})})};function pickFn(ne,_){return _===void 0&&(_="simple"),typeof ne=="object"?ne[_]:ne}function testAux(ne,_,K){if(ne.length){var Z=ne.shift(),te=testAux(ne,_,K);return Z.perform(te,K)}else return pickFn(_)}function testAsyncAux(ne,_,K){if(ne.length){var Z=ne.shift(),te=testAsyncAux(ne,_,K);return Z.performAsync(te,K)}else return function(ie){return Promise.resolve(pickFn(_,"async")(ie))}}var Modifier=function(_,K,Z){this.name=_,this.perform=K,this.performAsync=Z},ValidationError=(function(ne){function _(K,Z,te,ie){for(var se=[],oe=arguments.length-4;oe-- >0;)se[oe]=arguments[oe+4];ne.call(this,se),ne.captureStackTrace&&ne.captureStackTrace(this,_),this.rule=K,this.value=Z,this.cause=te,this.target=ie}return ne&&(_.__proto__=ne),_.prototype=Object.create(ne&&ne.prototype),_.prototype.constructor=_,_})(Error),Context$1=function(_,K){_===void 0&&(_=[]),K===void 0&&(K=[]),this.chain=_,this.nextRuleModifiers=K};Context$1.prototype._applyRule=function(_,K){var Z=this;return function(){for(var te=[],ie=arguments.length;ie--;)te[ie]=arguments[ie];return Z.chain.push(new Rule(K,_.apply(Z,te),te,Z.nextRuleModifiers)),Z.nextRuleModifiers=[],Z}};Context$1.prototype._applyModifier=function(_,K){return this.nextRuleModifiers.push(new Modifier(K,_.simple,_.async)),this};Context$1.prototype._clone=function(){return new Context$1(this.chain.slice(),this.nextRuleModifiers.slice())};Context$1.prototype.test=function(_){return this.chain.every(function(K){return K._test(_)})};Context$1.prototype.testAll=function(_){var K=[];return this.chain.forEach(function(Z){try{Z._check(_)}catch(te){K.push(new ValidationError(Z,_,te))}}),K};Context$1.prototype.check=function(_){this.chain.forEach(function(K){try{K._check(_)}catch(Z){throw new ValidationError(K,_,Z)}})};Context$1.prototype.testAsync=function(_){var K=this;return new Promise(function(Z,te){executeAsyncRules(_,K.chain.slice(),Z,te)})};function executeAsyncRules(ne,_,K,Z){if(_.length){var te=_.shift();te._testAsync(ne).then(function(){executeAsyncRules(ne,_,K,Z)},function(ie){Z(new ValidationError(te,ne,ie))})}else K(ne)}var consideredEmpty=function(ne,_){return _&&typeof ne=="string"&&ne.trim().length===0?!0:ne==null};function optional(ne,_){return _===void 0&&(_=!1),{simple:function(K){return consideredEmpty(K,_)||ne.check(K)===void 0},async:function(K){return consideredEmpty(K,_)||ne.testAsync(K)}}}function v8n(){return typeof Proxy<"u"?proxyContext(new Context$1):proxylessContext(new Context$1)}var customRules={};v8n.extend=function(ne){Object.assign(customRules,ne)};v8n.clearCustomRules=function(){customRules={}};function proxyContext(ne){return new Proxy(ne,{get:function(K,Z){if(Z in K)return K[Z];var te=proxyContext(ne._clone());if(Z in availableModifiers)return te._applyModifier(availableModifiers[Z],Z);if(Z in customRules)return te._applyRule(customRules[Z],Z);if(Z in availableRules)return te._applyRule(availableRules[Z],Z)}})}function proxylessContext(ne){var _=function(te,ie){return Object.keys(te).forEach(function(se){ie[se]=function(){for(var oe=[],ae=arguments.length;ae--;)oe[ae]=arguments[ae];var le=proxylessContext(ie._clone()),ue=le._applyRule(te[se],se).apply(void 0,oe);return ue}}),ie},K=_(availableRules,ne),Z=_(customRules,K);return Object.keys(availableModifiers).forEach(function(te){Object.defineProperty(Z,te,{get:function(){var ie=proxylessContext(Z._clone());return ie._applyModifier(availableModifiers[te],te)}})}),Z}var availableModifiers={not:{simple:function(ne){return function(_){return!ne(_)}},async:function(ne){return function(_){return Promise.resolve(ne(_)).then(function(K){return!K}).catch(function(){return!0})}}},some:{simple:function(ne){return function(_){return split(_).some(function(K){try{return ne(K)}catch{return!1}})}},async:function(ne){return function(_){return Promise.all(split(_).map(function(K){try{return ne(K).catch(function(){return!1})}catch{return!1}})).then(function(K){return K.some(Boolean)})}}},every:{simple:function(ne){return function(_){return _!==!1&&split(_).every(ne)}},async:function(ne){return function(_){return Promise.all(split(_).map(ne)).then(function(K){return K.every(Boolean)})}}},strict:{simple:function(ne,_){return function(K){return isSchemaRule(_)&&K&&typeof K=="object"?Object.keys(_.args[0]).length===Object.keys(K).length&&ne(K):ne(K)}},async:function(ne,_){return function(K){return Promise.resolve(ne(K)).then(function(Z){return isSchemaRule(_)&&K&&typeof K=="object"?Object.keys(_.args[0]).length===Object.keys(K).length&&Z:Z}).catch(function(){return!1})}}}};function isSchemaRule(ne){return ne&&ne.name==="schema"&&ne.args.length>0&&typeof ne.args[0]=="object"}function split(ne){return typeof ne=="string"?ne.split(""):ne}var availableRules={equal:function(ne){return function(_){return _==ne}},exact:function(ne){return function(_){return _===ne}},number:function(ne){return ne===void 0&&(ne=!0),function(_){return typeof _=="number"&&(ne||isFinite(_))}},integer:function(){return function(ne){var _=Number.isInteger||isIntegerPolyfill;return _(ne)}},numeric:function(){return function(ne){return!isNaN(parseFloat(ne))&&isFinite(ne)}},string:function(){return testType("string")},boolean:function(){return testType("boolean")},undefined:function(){return testType("undefined")},null:function(){return testType("null")},array:function(){return testType("array")},object:function(){return testType("object")},instanceOf:function(ne){return function(_){return _ instanceof ne}},pattern:function(ne){return function(_){return ne.test(_)}},lowercase:function(){return function(ne){return typeof ne=="boolean"||ne===ne.toLowerCase()&&ne.trim()!==""}},uppercase:function(){return function(ne){return ne===ne.toUpperCase()&&ne.trim()!==""}},vowel:function(){return function(ne){return/^[aeiou]+$/i.test(ne)}},consonant:function(){return function(ne){return/^(?=[^aeiou])([a-z]+)$/i.test(ne)}},first:function(ne){return function(_){return _[0]==ne}},last:function(ne){return function(_){return _[_.length-1]==ne}},empty:function(){return function(ne){return ne.length===0}},length:function(ne,_){return function(K){return K.length>=ne&&K.length<=(_||ne)}},minLength:function(ne){return function(_){return _.length>=ne}},maxLength:function(ne){return function(_){return _.length<=ne}},negative:function(){return function(ne){return ne<0}},positive:function(){return function(ne){return ne>=0}},between:function(ne,_){return function(K){return K>=ne&&K<=_}},range:function(ne,_){return function(K){return K>=ne&&K<=_}},lessThan:function(ne){return function(_){return _<ne}},lessThanOrEqual:function(ne){return function(_){return _<=ne}},greaterThan:function(ne){return function(_){return _>ne}},greaterThanOrEqual:function(ne){return function(_){return _>=ne}},even:function(){return function(ne){return ne%2===0}},odd:function(){return function(ne){return ne%2!==0}},includes:function(ne){return function(_){return~_.indexOf(ne)}},schema:function(ne){return testSchema(ne)},passesAnyOf:function(){for(var ne=[],_=arguments.length;_--;)ne[_]=arguments[_];return function(K){return ne.some(function(Z){return Z.test(K)})}},optional};function testType(ne){return function(_){return Array.isArray(_)&&ne==="array"||_===null&&ne==="null"||typeof _===ne}}function isIntegerPolyfill(ne){return typeof ne=="number"&&isFinite(ne)&&Math.floor(ne)===ne}function testSchema(ne){return{simple:function(_){var K=[];if(Object.keys(ne).forEach(function(Z){var te=ne[Z];try{te.check((_||{})[Z])}catch(ie){ie.target=Z,K.push(ie)}}),K.length>0)throw K;return!0},async:function(_){var K=[],Z=Object.keys(ne).map(function(te){var ie=ne[te];return ie.testAsync((_||{})[te]).catch(function(se){se.target=te,K.push(se)})});return Promise.all(Z).then(function(){if(K.length>0)throw K;return!0})}}}var e$2="colors",t$2="sizes",r$3="space",n$3={gap:r$3,gridGap:r$3,columnGap:r$3,gridColumnGap:r$3,rowGap:r$3,gridRowGap:r$3,inset:r$3,insetBlock:r$3,insetBlockEnd:r$3,insetBlockStart:r$3,insetInline:r$3,insetInlineEnd:r$3,insetInlineStart:r$3,margin:r$3,marginTop:r$3,marginRight:r$3,marginBottom:r$3,marginLeft:r$3,marginBlock:r$3,marginBlockEnd:r$3,marginBlockStart:r$3,marginInline:r$3,marginInlineEnd:r$3,marginInlineStart:r$3,padding:r$3,paddingTop:r$3,paddingRight:r$3,paddingBottom:r$3,paddingLeft:r$3,paddingBlock:r$3,paddingBlockEnd:r$3,paddingBlockStart:r$3,paddingInline:r$3,paddingInlineEnd:r$3,paddingInlineStart:r$3,top:r$3,right:r$3,bottom:r$3,left:r$3,scrollMargin:r$3,scrollMarginTop:r$3,scrollMarginRight:r$3,scrollMarginBottom:r$3,scrollMarginLeft:r$3,scrollMarginX:r$3,scrollMarginY:r$3,scrollMarginBlock:r$3,scrollMarginBlockEnd:r$3,scrollMarginBlockStart:r$3,scrollMarginInline:r$3,scrollMarginInlineEnd:r$3,scrollMarginInlineStart:r$3,scrollPadding:r$3,scrollPaddingTop:r$3,scrollPaddingRight:r$3,scrollPaddingBottom:r$3,scrollPaddingLeft:r$3,scrollPaddingX:r$3,scrollPaddingY:r$3,scrollPaddingBlock:r$3,scrollPaddingBlockEnd:r$3,scrollPaddingBlockStart:r$3,scrollPaddingInline:r$3,scrollPaddingInlineEnd:r$3,scrollPaddingInlineStart:r$3,fontSize:"fontSizes",background:e$2,backgroundColor:e$2,backgroundImage:e$2,borderImage:e$2,border:e$2,borderBlock:e$2,borderBlockEnd:e$2,borderBlockStart:e$2,borderBottom:e$2,borderBottomColor:e$2,borderColor:e$2,borderInline:e$2,borderInlineEnd:e$2,borderInlineStart:e$2,borderLeft:e$2,borderLeftColor:e$2,borderRight:e$2,borderRightColor:e$2,borderTop:e$2,borderTopColor:e$2,caretColor:e$2,color:e$2,columnRuleColor:e$2,fill:e$2,outline:e$2,outlineColor:e$2,stroke:e$2,textDecorationColor:e$2,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t$2,minBlockSize:t$2,maxBlockSize:t$2,inlineSize:t$2,minInlineSize:t$2,maxInlineSize:t$2,width:t$2,minWidth:t$2,maxWidth:t$2,height:t$2,minHeight:t$2,maxHeight:t$2,flexBasis:t$2,gridTemplateColumns:t$2,gridTemplateRows:t$2,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i$4=(ne,_)=>typeof _=="function"?{"()":Function.prototype.toString.call(_)}:_,o$3=()=>{const ne=Object.create(null);return(_,K,...Z)=>{const te=(ie=>JSON.stringify(ie,i$4))(_);return te in ne?ne[te]:ne[te]=K(_,...Z)}},l$3=Symbol.for("sxs.internal"),s$4=(ne,_)=>Object.defineProperties(ne,Object.getOwnPropertyDescriptors(_)),a$3=ne=>{for(const _ in ne)return!0;return!1},{hasOwnProperty:c$4}=Object.prototype,d$4=ne=>ne.includes("-")?ne:ne.replace(/[A-Z]/g,(_=>"-"+_.toLowerCase())),g$4=/\s+(?![^()]*\))/,p$4=ne=>_=>ne(...typeof _=="string"?String(_).split(g$4):[_]),u$4={appearance:ne=>({WebkitAppearance:ne,appearance:ne}),backfaceVisibility:ne=>({WebkitBackfaceVisibility:ne,backfaceVisibility:ne}),backdropFilter:ne=>({WebkitBackdropFilter:ne,backdropFilter:ne}),backgroundClip:ne=>({WebkitBackgroundClip:ne,backgroundClip:ne}),boxDecorationBreak:ne=>({WebkitBoxDecorationBreak:ne,boxDecorationBreak:ne}),clipPath:ne=>({WebkitClipPath:ne,clipPath:ne}),content:ne=>({content:ne.includes('"')||ne.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(ne)?ne:`"${ne}"`}),hyphens:ne=>({WebkitHyphens:ne,hyphens:ne}),maskImage:ne=>({WebkitMaskImage:ne,maskImage:ne}),maskSize:ne=>({WebkitMaskSize:ne,maskSize:ne}),tabSize:ne=>({MozTabSize:ne,tabSize:ne}),textSizeAdjust:ne=>({WebkitTextSizeAdjust:ne,textSizeAdjust:ne}),userSelect:ne=>({WebkitUserSelect:ne,userSelect:ne}),marginBlock:p$4(((ne,_)=>({marginBlockStart:ne,marginBlockEnd:_||ne}))),marginInline:p$4(((ne,_)=>({marginInlineStart:ne,marginInlineEnd:_||ne}))),maxSize:p$4(((ne,_)=>({maxBlockSize:ne,maxInlineSize:_||ne}))),minSize:p$4(((ne,_)=>({minBlockSize:ne,minInlineSize:_||ne}))),paddingBlock:p$4(((ne,_)=>({paddingBlockStart:ne,paddingBlockEnd:_||ne}))),paddingInline:p$4(((ne,_)=>({paddingInlineStart:ne,paddingInlineEnd:_||ne})))},h$4=/([\d.]+)([^]*)/,f$4=(ne,_)=>ne.length?ne.reduce(((K,Z)=>(K.push(..._.map((te=>te.includes("&")?te.replace(/&/g,/[ +>|~]/.test(Z)&&/&.*&/.test(te)?`:is(${Z})`:Z):Z+" "+te))),K)),[]):_,m$4=(ne,_)=>ne in b$4&&typeof _=="string"?_.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((K,Z,te,ie)=>Z+(te==="stretch"?`-moz-available${ie};${d$4(ne)}:${Z}-webkit-fill-available`:`-moz-fit-content${ie};${d$4(ne)}:${Z}fit-content`)+ie)):String(_),b$4={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S$3=ne=>ne?ne+"-":"",k$3=(ne,_,K)=>ne.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((Z,te,ie,se,oe)=>se=="$"==!!ie?Z:(te||se=="--"?"calc(":"")+"var(--"+(se==="$"?S$3(_)+(oe.includes("$")?"":S$3(K))+oe.replace(/\$/g,"-"):oe)+")"+(te||se=="--"?"*"+(te||"")+(ie||"1")+")":""))),y$4=/\s*,\s*(?![^()]*\))/,B=Object.prototype.toString,$$2=(ne,_,K,Z,te)=>{let ie,se,oe;const ae=(le,ue,fe)=>{let he,ge;const _e=Se=>{for(he in Se){const be=he.charCodeAt(0)===64,we=be&&Array.isArray(Se[he])?Se[he]:[Se[he]];for(ge of we){const Pe=/[A-Z]/.test(ye=he)?ye:ye.replace(/-[^]/g,(Be=>Be[1].toUpperCase())),Oe=typeof ge=="object"&&ge&&ge.toString===B&&(!Z.utils[Pe]||!ue.length);if(Pe in Z.utils&&!Oe){const Be=Z.utils[Pe];if(Be!==se){se=Be,_e(Be(ge)),se=null;continue}}else if(Pe in u$4){const Be=u$4[Pe];if(Be!==oe){oe=Be,_e(Be(ge)),oe=null;continue}}if(be&&(Ee=he.slice(1)in Z.media?"@media "+Z.media[he.slice(1)]:he,he=Ee.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((Be,Ue,$e,De,ke,Ge)=>{const Je=h$4.test(Ue),Ye=.0625*(Je?-1:1),[Qe,rt]=Je?[De,Ue]:[Ue,De];return"("+($e[0]==="="?"":$e[0]===">"===Je?"max-":"min-")+Qe+":"+($e[0]!=="="&&$e.length===1?rt.replace(h$4,((ot,ct,je)=>Number(ct)+Ye*($e===">"?1:-1)+je)):rt)+(ke?") and ("+(ke[0]===">"?"min-":"max-")+Qe+":"+(ke.length===1?Ge.replace(h$4,((ot,ct,je)=>Number(ct)+Ye*(ke===">"?-1:1)+je)):Ge):"")+")"}))),Oe){const Be=be?fe.concat(he):[...fe],Ue=be?[...ue]:f$4(ue,he.split(y$4));ie!==void 0&&te(x$3(...ie)),ie=void 0,ae(ge,Ue,Be)}else ie===void 0&&(ie=[[],ue,fe]),he=be||he.charCodeAt(0)!==36?he:`--${S$3(Z.prefix)}${he.slice(1).replace(/\$/g,"-")}`,ge=Oe?ge:typeof ge=="number"?ge&&Pe in I$2?String(ge)+"px":String(ge):k$3(m$4(Pe,ge??""),Z.prefix,Z.themeMap[Pe]),ie[0].push(`${be?`${he} `:`${d$4(he)}:`}${ge}`)}}var Ee,ye};_e(le),ie!==void 0&&te(x$3(...ie)),ie=void 0};ae(ne,_,K)},x$3=(ne,_,K)=>`${K.map((Z=>`${Z}{`)).join("")}${_.length?`${_.join(",")}{`:""}${ne.join(";")}${_.length?"}":""}${Array(K.length?K.length+1:0).join("}")}`,I$2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R$2=ne=>String.fromCharCode(ne+(ne>25?39:97)),z$1=ne=>(_=>{let K,Z="";for(K=Math.abs(_);K>52;K=K/52|0)Z=R$2(K%52)+Z;return R$2(K%52)+Z})(((_,K)=>{let Z=K.length;for(;Z;)_=33*_^K.charCodeAt(--Z);return _})(5381,JSON.stringify(ne))>>>0),W$1=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=ne=>{if(ne.href&&!ne.href.startsWith(location.origin))return!1;try{return!!ne.cssRules}catch{return!1}},E$1=ne=>{let _;const K=()=>{const{cssRules:te}=_.sheet;return[].map.call(te,((ie,se)=>{const{cssText:oe}=ie;let ae="";if(oe.startsWith("--sxs"))return"";if(te[se-1]&&(ae=te[se-1].cssText).startsWith("--sxs")){if(!ie.cssRules.length)return"";for(const le in _.rules)if(_.rules[le].group===ie)return`--sxs{--sxs:${[..._.rules[le].cache].join(" ")}}${oe}`;return ie.cssRules.length?`${ae}${oe}`:""}return oe})).join("")},Z=()=>{if(_){const{rules:oe,sheet:ae}=_;if(!ae.deleteRule){for(;Object(Object(ae.cssRules)[0]).type===3;)ae.cssRules.splice(0,1);ae.cssRules=[]}for(const le in oe)delete oe[le]}const te=Object(ne).styleSheets||[];for(const oe of te)if(j$1(oe)){for(let ae=0,le=oe.cssRules;le[ae];++ae){const ue=Object(le[ae]);if(ue.type!==1)continue;const fe=Object(le[ae+1]);if(fe.type!==4)continue;++ae;const{cssText:he}=ue;if(!he.startsWith("--sxs"))continue;const ge=he.slice(14,-3).trim().split(/\s+/),_e=W$1[ge[0]];_e&&(_||(_={sheet:oe,reset:Z,rules:{},toString:K}),_.rules[_e]={group:fe,index:ae,cache:new Set(ge)})}if(_)break}if(!_){const oe=(ae,le)=>({type:le,cssRules:[],insertRule(ue,fe){this.cssRules.splice(fe,0,oe(ue,{import:3,undefined:1}[(ue.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return ae==="@media{}"?`@media{${[].map.call(this.cssRules,(ue=>ue.cssText)).join("")}}`:ae}});_={sheet:ne?(ne.head||ne).appendChild(document.createElement("style")).sheet:oe("","text/css"),rules:{},reset:Z,toString:K}}const{sheet:ie,rules:se}=_;for(let oe=W$1.length-1;oe>=0;--oe){const ae=W$1[oe];if(!se[ae]){const le=W$1[oe+1],ue=se[le]?se[le].index:ie.cssRules.length;ie.insertRule("@media{}",ue),ie.insertRule(`--sxs{--sxs:${oe}}`,ue),se[ae]={group:ie.cssRules[ue+1],index:ue,cache:new Set([oe])}}v$3(se[ae])}};return Z(),_},v$3=ne=>{const _=ne.group;let K=_.cssRules.length;ne.apply=Z=>{try{_.insertRule(Z,K),++K}catch{}}},T$3=Symbol(),w$2=o$3(),M$1=(ne,_)=>w$2(ne,(()=>(...K)=>{let Z={type:null,composers:new Set};for(const te of K)if(te!=null)if(te[l$3]){Z.type==null&&(Z.type=te[l$3].type);for(const ie of te[l$3].composers)Z.composers.add(ie)}else te.constructor!==Object||te.$$typeof?Z.type==null&&(Z.type=te):Z.composers.add(C$1(te,ne));return Z.type==null&&(Z.type="span"),Z.composers.size||Z.composers.add(["PJLV",{},[],[],{},[]]),P$1(ne,Z,_)})),C$1=({variants:ne,compoundVariants:_,defaultVariants:K,...Z},te)=>{const ie=`${S$3(te.prefix)}c-${z$1(Z)}`,se=[],oe=[],ae=Object.create(null),le=[];for(const he in K)ae[he]=String(K[he]);if(typeof ne=="object"&&ne)for(const he in ne){ue=ae,fe=he,c$4.call(ue,fe)||(ae[he]="undefined");const ge=ne[he];for(const _e in ge){const Se={[he]:String(_e)};String(_e)==="undefined"&&le.push(he);const Ee=ge[_e],ye=[Se,Ee,!a$3(Ee)];se.push(ye)}}var ue,fe;if(typeof _=="object"&&_)for(const he of _){let{css:ge,..._e}=he;ge=typeof ge=="object"&&ge||{};for(const Ee in _e)_e[Ee]=String(_e[Ee]);const Se=[_e,ge,!a$3(ge)];oe.push(Se)}return[ie,Z,se,oe,ae,le]},P$1=(ne,_,K)=>{const[Z,te,ie,se]=L$3(_.composers),oe=typeof _.type=="function"||_.type.$$typeof?(fe=>{function he(){for(let ge=0;ge<he[T$3].length;ge++){const[_e,Se]=he[T$3][ge];fe.rules[_e].apply(Se)}return he[T$3]=[],null}return he[T$3]=[],he.rules={},W$1.forEach((ge=>he.rules[ge]={apply:_e=>he[T$3].push([ge,_e])})),he})(K):null,ae=(oe||K).rules,le=`.${Z}${te.length>1?`:where(.${te.slice(1).join(".")})`:""}`,ue=fe=>{fe=typeof fe=="object"&&fe||A$1;const{css:he,...ge}=fe,_e={};for(const ye in ie)if(delete ge[ye],ye in fe){let be=fe[ye];typeof be=="object"&&be?_e[ye]={"@initial":ie[ye],...be}:(be=String(be),_e[ye]=be!=="undefined"||se.has(ye)?be:ie[ye])}else _e[ye]=ie[ye];const Se=new Set([...te]);for(const[ye,be,we,Pe]of _.composers){K.rules.styled.cache.has(ye)||(K.rules.styled.cache.add(ye),$$2(be,[`.${ye}`],[],ne,(Ue=>{ae.styled.apply(Ue)})));const Oe=O$1(we,_e,ne.media),Be=O$1(Pe,_e,ne.media,!0);for(const Ue of Oe)if(Ue!==void 0)for(const[$e,De,ke]of Ue){const Ge=`${ye}-${z$1(De)}-${$e}`;Se.add(Ge);const Je=(ke?K.rules.resonevar:K.rules.onevar).cache,Ye=ke?ae.resonevar:ae.onevar;Je.has(Ge)||(Je.add(Ge),$$2(De,[`.${Ge}`],[],ne,(Qe=>{Ye.apply(Qe)})))}for(const Ue of Be)if(Ue!==void 0)for(const[$e,De]of Ue){const ke=`${ye}-${z$1(De)}-${$e}`;Se.add(ke),K.rules.allvar.cache.has(ke)||(K.rules.allvar.cache.add(ke),$$2(De,[`.${ke}`],[],ne,(Ge=>{ae.allvar.apply(Ge)})))}}if(typeof he=="object"&&he){const ye=`${Z}-i${z$1(he)}-css`;Se.add(ye),K.rules.inline.cache.has(ye)||(K.rules.inline.cache.add(ye),$$2(he,[`.${ye}`],[],ne,(be=>{ae.inline.apply(be)})))}for(const ye of String(fe.className||"").trim().split(/\s+/))ye&&Se.add(ye);const Ee=ge.className=[...Se].join(" ");return{type:_.type,className:Ee,selector:le,props:ge,toString:()=>Ee,deferredInjector:oe}};return s$4(ue,{className:Z,selector:le,[l$3]:_,toString:()=>(K.rules.styled.cache.has(Z)||ue(),Z)})},L$3=ne=>{let _="";const K=[],Z={},te=[];for(const[ie,,,,se,oe]of ne){_===""&&(_=ie),K.push(ie),te.push(...oe);for(const ae in se){const le=se[ae];(Z[ae]===void 0||le!=="undefined"||oe.includes(le))&&(Z[ae]=le)}}return[_,K,Z,new Set(te)]},O$1=(ne,_,K,Z)=>{const te=[];e:for(let[ie,se,oe]of ne){if(oe)continue;let ae,le=0,ue=!1;for(ae in ie){const fe=ie[ae];let he=_[ae];if(he!==fe){if(typeof he!="object"||!he)continue e;{let ge,_e,Se=0;for(const Ee in he){if(fe===String(he[Ee])){if(Ee!=="@initial"){const ye=Ee.slice(1);(_e=_e||[]).push(ye in K?K[ye]:Ee.replace(/^@media ?/,"")),ue=!0}le+=Se,ge=!0}++Se}if(_e&&_e.length&&(se={["@media "+_e.join(", ")]:se}),!ge)continue e}}}(te[le]=te[le]||[]).push([Z?"cv":`${ae}-${ie[ae]}`,se,ue])}return te},A$1={},N$2=o$3(),D$2=(ne,_)=>N$2(ne,(()=>(...K)=>{const Z=()=>{for(let te of K){te=typeof te=="object"&&te||{};let ie=z$1(te);if(!_.rules.global.cache.has(ie)){if(_.rules.global.cache.add(ie),"@import"in te){let se=[].indexOf.call(_.sheet.cssRules,_.rules.themed.group)-1;for(let oe of[].concat(te["@import"]))oe=oe.includes('"')||oe.includes("'")?oe:`"${oe}"`,_.sheet.insertRule(`@import ${oe};`,se++);delete te["@import"]}$$2(te,[],[],ne,(se=>{_.rules.global.apply(se)}))}}return""};return s$4(Z,{toString:Z})})),H$2=o$3(),V$1=(ne,_)=>H$2(ne,(()=>K=>{const Z=`${S$3(ne.prefix)}k-${z$1(K)}`,te=()=>{if(!_.rules.global.cache.has(Z)){_.rules.global.cache.add(Z);const ie=[];$$2(K,[],[],ne,(oe=>ie.push(oe)));const se=`@keyframes ${Z}{${ie.join("")}}`;_.rules.global.apply(se)}return Z};return s$4(te,{get name(){return te()},toString:te})})),G=class{constructor(ne,_,K,Z){this.token=ne==null?"":String(ne),this.value=_==null?"":String(_),this.scale=K==null?"":String(K),this.prefix=Z==null?"":String(Z)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S$3(this.prefix)+S$3(this.scale)+this.token}toString(){return this.computedValue}},F$1=o$3(),J$1=(ne,_)=>F$1(ne,(()=>(K,Z)=>{Z=typeof K=="object"&&K||Object(Z);const te=`.${K=(K=typeof K=="string"?K:"")||`${S$3(ne.prefix)}t-${z$1(Z)}`}`,ie={},se=[];for(const ae in Z){ie[ae]={};for(const le in Z[ae]){const ue=`--${S$3(ne.prefix)}${ae}-${le}`,fe=k$3(String(Z[ae][le]),ne.prefix,ae);ie[ae][le]=new G(le,fe,ae,ne.prefix),se.push(`${ue}:${fe}`)}}const oe=()=>{if(se.length&&!_.rules.themed.cache.has(K)){_.rules.themed.cache.add(K);const ae=`${Z===ne.theme?":root,":""}.${K}{${se.join(";")}}`;_.rules.themed.apply(ae)}return K};return{...ie,get className(){return oe()},selector:te,toString:oe}})),U$1=o$3(),Y$1=o$3(),q$1=ne=>{const _=(K=>{let Z=!1;const te=U$1(K,(ie=>{Z=!0;const se="prefix"in(ie=typeof ie=="object"&&ie||{})?String(ie.prefix):"",oe=typeof ie.media=="object"&&ie.media||{},ae=typeof ie.root=="object"?ie.root||null:globalThis.document||null,le=typeof ie.theme=="object"&&ie.theme||{},ue={prefix:se,media:oe,theme:le,themeMap:typeof ie.themeMap=="object"&&ie.themeMap||{...n$3},utils:typeof ie.utils=="object"&&ie.utils||{}},fe=E$1(ae),he={css:M$1(ue,fe),globalCss:D$2(ue,fe),keyframes:V$1(ue,fe),createTheme:J$1(ue,fe),reset(){fe.reset(),he.theme.toString()},theme:{},sheet:fe,config:ue,prefix:se,getCssText:fe.toString,toString:fe.toString};return String(he.theme=he.createTheme(le)),he}));return Z||te.reset(),te})(ne);return _.styled=(({config:K,sheet:Z})=>Y$1(K,(()=>{const te=M$1(K,Z);return(...ie)=>{const se=te(...ie),oe=se[l$3].type,ae=React.forwardRef(((le,ue)=>{const fe=le&&le.as||oe,{props:he,deferredInjector:ge}=se(le);return delete he.as,he.ref=ue,ge?React.createElement(React.Fragment,null,React.createElement(fe,he),React.createElement(ge,null)):React.createElement(fe,he)}));return ae.className=se.className,ae.displayName=`Styled.${oe.displayName||oe.name||oe}`,ae.selector=se.selector,ae.toString=()=>se.selector,ae[l$3]=se[l$3],ae}})))(_),_};function $e42e1063c40fb3ef$export$b9ecd428b558ff10(ne,_,{checkForDefaultPrevented:K=!0}={}){return function(te){if(ne?.(te),K===!1||!te.defaultPrevented)return _?.(te)}}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(ne,_=[]){let K=[];function Z(ie,se){const oe=reactExports.createContext(se),ae=K.length;K=[...K,se];function le(fe){const{scope:he,children:ge,..._e}=fe,Se=he?.[ne][ae]||oe,Ee=reactExports.useMemo(()=>_e,Object.values(_e));return reactExports.createElement(Se.Provider,{value:Ee},ge)}function ue(fe,he){const ge=he?.[ne][ae]||oe,_e=reactExports.useContext(ge);if(_e)return _e;if(se!==void 0)return se;throw new Error(`\`${fe}\` must be used within \`${ie}\``)}return le.displayName=ie+"Provider",[le,ue]}const te=()=>{const ie=K.map(se=>reactExports.createContext(se));return function(oe){const ae=oe?.[ne]||ie;return reactExports.useMemo(()=>({[`__scope${ne}`]:{...oe,[ne]:ae}}),[oe,ae])}};return te.scopeName=ne,[Z,$c512c27ab02ef895$var$composeContextScopes(te,..._)]}function $c512c27ab02ef895$var$composeContextScopes(...ne){const _=ne[0];if(ne.length===1)return _;const K=()=>{const Z=ne.map(te=>({useScope:te(),scopeName:te.scopeName}));return function(ie){const se=Z.reduce((oe,{useScope:ae,scopeName:le})=>{const fe=ae(ie)[`__scope${le}`];return{...oe,...fe}},{});return reactExports.useMemo(()=>({[`__scope${_.scopeName}`]:se}),[se])}};return K.scopeName=_.scopeName,K}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ne){const _=reactExports.useRef(ne);return reactExports.useEffect(()=>{_.current=ne}),reactExports.useMemo(()=>(...K)=>{var Z;return(Z=_.current)===null||Z===void 0?void 0:Z.call(_,...K)},[])}function $addc16e1bbe58fd0$export$3a72a57244d6e765(ne,_=globalThis?.document){const K=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ne);reactExports.useEffect(()=>{const Z=te=>{te.key==="Escape"&&K(te)};return _.addEventListener("keydown",Z),()=>_.removeEventListener("keydown",Z)},[K,_])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((ne,_)=>{var K;const{disableOutsidePointerEvents:Z=!1,onEscapeKeyDown:te,onPointerDownOutside:ie,onFocusOutside:se,onInteractOutside:oe,onDismiss:ae,...le}=ne,ue=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[fe,he]=reactExports.useState(null),ge=(K=fe?.ownerDocument)!==null&&K!==void 0?K:globalThis?.document,[,_e]=reactExports.useState({}),Se=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,$e=>he($e)),Ee=Array.from(ue.layers),[ye]=[...ue.layersWithOutsidePointerEventsDisabled].slice(-1),be=Ee.indexOf(ye),we=fe?Ee.indexOf(fe):-1,Pe=ue.layersWithOutsidePointerEventsDisabled.size>0,Oe=we>=be,Be=$5cb92bef7577960e$var$usePointerDownOutside($e=>{const De=$e.target,ke=[...ue.branches].some(Ge=>Ge.contains(De));!Oe||ke||(ie?.($e),oe?.($e),$e.defaultPrevented||ae?.())},ge),Ue=$5cb92bef7577960e$var$useFocusOutside($e=>{const De=$e.target;[...ue.branches].some(Ge=>Ge.contains(De))||(se?.($e),oe?.($e),$e.defaultPrevented||ae?.())},ge);return $addc16e1bbe58fd0$export$3a72a57244d6e765($e=>{we===ue.layers.size-1&&(te?.($e),!$e.defaultPrevented&&ae&&($e.preventDefault(),ae()))},ge),reactExports.useEffect(()=>{if(fe)return Z&&(ue.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=ge.body.style.pointerEvents,ge.body.style.pointerEvents="none"),ue.layersWithOutsidePointerEventsDisabled.add(fe)),ue.layers.add(fe),$5cb92bef7577960e$var$dispatchUpdate(),()=>{Z&&ue.layersWithOutsidePointerEventsDisabled.size===1&&(ge.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[fe,ge,Z,ue]),reactExports.useEffect(()=>()=>{fe&&(ue.layers.delete(fe),ue.layersWithOutsidePointerEventsDisabled.delete(fe),$5cb92bef7577960e$var$dispatchUpdate())},[fe,ue]),reactExports.useEffect(()=>{const $e=()=>_e({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,$e),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,$e)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},le,{ref:Se,style:{pointerEvents:Pe?Oe?"auto":"none":void 0,...ne.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onFocusCapture,Ue.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onBlurCapture,Ue.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onPointerDownCapture,Be.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(ne,_=globalThis?.document){const K=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ne),Z=reactExports.useRef(!1),te=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const ie=oe=>{if(oe.target&&!Z.current){let le=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,K,ae,{discrete:!0})};const ae={originalEvent:oe};oe.pointerType==="touch"?(_.removeEventListener("click",te.current),te.current=le,_.addEventListener("click",te.current,{once:!0})):le()}Z.current=!1},se=window.setTimeout(()=>{_.addEventListener("pointerdown",ie)},0);return()=>{window.clearTimeout(se),_.removeEventListener("pointerdown",ie),_.removeEventListener("click",te.current)}},[_,K]),{onPointerDownCapture:()=>Z.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(ne,_=globalThis?.document){const K=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ne),Z=reactExports.useRef(!1);return reactExports.useEffect(()=>{const te=ie=>{ie.target&&!Z.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,K,{originalEvent:ie},{discrete:!1})};return _.addEventListener("focusin",te),()=>_.removeEventListener("focusin",te)},[_,K]),{onFocusCapture:()=>Z.current=!0,onBlurCapture:()=>Z.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const ne=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(ne)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(ne,_,K,{discrete:Z}){const te=K.originalEvent.target,ie=new CustomEvent(ne,{bubbles:!1,cancelable:!0,detail:K});_&&te.addEventListener(ne,_,{once:!0}),Z?$8927f6f2acc4f386$export$6d1a0317bde7de7f(te,ie):te.dispatchEvent(ie)}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis?.document?reactExports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=$2AODx$react.useId||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(ne){const[_,K]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{K(Z=>Z??String($1746a345f3d73bb7$var$count++))},[ne]),_?`radix-${_}`:""}function t$1(ne){return ne.split("-")[0]}function e$1(ne){return ne.split("-")[1]}function n$2(ne){return["top","bottom"].includes(t$1(ne))?"x":"y"}function r$2(ne){return ne==="y"?"height":"width"}function i$3(ne,_,K){let{reference:Z,floating:te}=ne;const ie=Z.x+Z.width/2-te.width/2,se=Z.y+Z.height/2-te.height/2,oe=n$2(_),ae=r$2(oe),le=Z[ae]/2-te[ae]/2,ue=oe==="x";let fe;switch(t$1(_)){case"top":fe={x:ie,y:Z.y-te.height};break;case"bottom":fe={x:ie,y:Z.y+Z.height};break;case"right":fe={x:Z.x+Z.width,y:se};break;case"left":fe={x:Z.x-te.width,y:se};break;default:fe={x:Z.x,y:Z.y}}switch(e$1(_)){case"start":fe[oe]-=le*(K&&ue?-1:1);break;case"end":fe[oe]+=le*(K&&ue?-1:1)}return fe}const o$2=async(ne,_,K)=>{const{placement:Z="bottom",strategy:te="absolute",middleware:ie=[],platform:se}=K,oe=await(se.isRTL==null?void 0:se.isRTL(_));let ae=await se.getElementRects({reference:ne,floating:_,strategy:te}),{x:le,y:ue}=i$3(ae,Z,oe),fe=Z,he={},ge=0;for(let _e=0;_e<ie.length;_e++){const{name:Se,fn:Ee}=ie[_e],{x:ye,y:be,data:we,reset:Pe}=await Ee({x:le,y:ue,initialPlacement:Z,placement:fe,strategy:te,middlewareData:he,rects:ae,platform:se,elements:{reference:ne,floating:_}});le=ye??le,ue=be??ue,he={...he,[Se]:{...he[Se],...we}},Pe&&ge<=50&&(ge++,typeof Pe=="object"&&(Pe.placement&&(fe=Pe.placement),Pe.rects&&(ae=Pe.rects===!0?await se.getElementRects({reference:ne,floating:_,strategy:te}):Pe.rects),{x:le,y:ue}=i$3(ae,fe,oe)),_e=-1)}return{x:le,y:ue,placement:fe,strategy:te,middlewareData:he}};function a$2(ne){return typeof ne!="number"?(function(_){return{top:0,right:0,bottom:0,left:0,..._}})(ne):{top:ne,right:ne,bottom:ne,left:ne}}function l$2(ne){return{...ne,top:ne.y,left:ne.x,right:ne.x+ne.width,bottom:ne.y+ne.height}}async function s$3(ne,_){var K;_===void 0&&(_={});const{x:Z,y:te,platform:ie,rects:se,elements:oe,strategy:ae}=ne,{boundary:le="clippingAncestors",rootBoundary:ue="viewport",elementContext:fe="floating",altBoundary:he=!1,padding:ge=0}=_,_e=a$2(ge),Se=oe[he?fe==="floating"?"reference":"floating":fe],Ee=l$2(await ie.getClippingRect({element:(K=await(ie.isElement==null?void 0:ie.isElement(Se)))==null||K?Se:Se.contextElement||await(ie.getDocumentElement==null?void 0:ie.getDocumentElement(oe.floating)),boundary:le,rootBoundary:ue,strategy:ae})),ye=l$2(ie.convertOffsetParentRelativeRectToViewportRelativeRect?await ie.convertOffsetParentRelativeRectToViewportRelativeRect({rect:fe==="floating"?{...se.floating,x:Z,y:te}:se.reference,offsetParent:await(ie.getOffsetParent==null?void 0:ie.getOffsetParent(oe.floating)),strategy:ae}):se[fe]);return{top:Ee.top-ye.top+_e.top,bottom:ye.bottom-Ee.bottom+_e.bottom,left:Ee.left-ye.left+_e.left,right:ye.right-Ee.right+_e.right}}const c$3=Math.min,f$3=Math.max;function u$3(ne,_,K){return f$3(ne,c$3(_,K))}const m$3=ne=>({name:"arrow",options:ne,async fn(_){const{element:K,padding:Z=0}=ne??{},{x:te,y:ie,placement:se,rects:oe,platform:ae}=_;if(K==null)return{};const le=a$2(Z),ue={x:te,y:ie},fe=n$2(se),he=e$1(se),ge=r$2(fe),_e=await ae.getDimensions(K),Se=fe==="y"?"top":"left",Ee=fe==="y"?"bottom":"right",ye=oe.reference[ge]+oe.reference[fe]-ue[fe]-oe.floating[ge],be=ue[fe]-oe.reference[fe],we=await(ae.getOffsetParent==null?void 0:ae.getOffsetParent(K));let Pe=we?fe==="y"?we.clientHeight||0:we.clientWidth||0:0;Pe===0&&(Pe=oe.floating[ge]);const Oe=ye/2-be/2,Be=le[Se],Ue=Pe-_e[ge]-le[Ee],$e=Pe/2-_e[ge]/2+Oe,De=u$3(Be,$e,Ue),ke=(he==="start"?le[Se]:le[Ee])>0&&$e!==De&&oe.reference[ge]<=oe.floating[ge];return{[fe]:ue[fe]-(ke?$e<Be?Be-$e:Ue-$e:0),data:{[fe]:De,centerOffset:$e-De}}}}),g$3={left:"right",right:"left",bottom:"top",top:"bottom"};function d$3(ne){return ne.replace(/left|right|bottom|top/g,(_=>g$3[_]))}function p$3(ne,_,K){K===void 0&&(K=!1);const Z=e$1(ne),te=n$2(ne),ie=r$2(te);let se=te==="x"?Z===(K?"end":"start")?"right":"left":Z==="start"?"bottom":"top";return _.reference[ie]>_.floating[ie]&&(se=d$3(se)),{main:se,cross:d$3(se)}}const h$3={start:"end",end:"start"};function y$3(ne){return ne.replace(/start|end/g,(_=>h$3[_]))}const x$2=["top","right","bottom","left"];x$2.reduce(((ne,_)=>ne.concat(_,_+"-start",_+"-end")),[]);const b$3=function(ne){return ne===void 0&&(ne={}),{name:"flip",options:ne,async fn(_){var K;const{placement:Z,middlewareData:te,rects:ie,initialPlacement:se,platform:oe,elements:ae}=_,{mainAxis:le=!0,crossAxis:ue=!0,fallbackPlacements:fe,fallbackStrategy:he="bestFit",flipAlignment:ge=!0,..._e}=ne,Se=t$1(Z),Ee=fe||(Se===se||!ge?[d$3(se)]:(function($e){const De=d$3($e);return[y$3($e),De,y$3(De)]})(se)),ye=[se,...Ee],be=await s$3(_,_e),we=[];let Pe=((K=te.flip)==null?void 0:K.overflows)||[];if(le&&we.push(be[Se]),ue){const{main:$e,cross:De}=p$3(Z,ie,await(oe.isRTL==null?void 0:oe.isRTL(ae.floating)));we.push(be[$e],be[De])}if(Pe=[...Pe,{placement:Z,overflows:we}],!we.every(($e=>$e<=0))){var Oe,Be;const $e=((Oe=(Be=te.flip)==null?void 0:Be.index)!=null?Oe:0)+1,De=ye[$e];if(De)return{data:{index:$e,overflows:Pe},reset:{placement:De}};let ke="bottom";switch(he){case"bestFit":{var Ue;const Ge=(Ue=Pe.map((Je=>[Je,Je.overflows.filter((Ye=>Ye>0)).reduce(((Ye,Qe)=>Ye+Qe),0)])).sort(((Je,Ye)=>Je[1]-Ye[1]))[0])==null?void 0:Ue[0].placement;Ge&&(ke=Ge);break}case"initialPlacement":ke=se}if(Z!==ke)return{reset:{placement:ke}}}return{}}}};function R$1(ne,_){return{top:ne.top-_.height,right:ne.right-_.width,bottom:ne.bottom-_.height,left:ne.left-_.width}}function A(ne){return x$2.some((_=>ne[_]>=0))}const P=function(ne){let{strategy:_="referenceHidden",...K}=ne===void 0?{}:ne;return{name:"hide",async fn(Z){const{rects:te}=Z;switch(_){case"referenceHidden":{const ie=R$1(await s$3(Z,{...K,elementContext:"reference"}),te.reference);return{data:{referenceHiddenOffsets:ie,referenceHidden:A(ie)}}}case"escaped":{const ie=R$1(await s$3(Z,{...K,altBoundary:!0}),te.floating);return{data:{escapedOffsets:ie,escaped:A(ie)}}}default:return{}}}}},T$2=function(ne){return ne===void 0&&(ne=0),{name:"offset",options:ne,async fn(_){const{x:K,y:Z}=_,te=await(async function(ie,se){const{placement:oe,platform:ae,elements:le}=ie,ue=await(ae.isRTL==null?void 0:ae.isRTL(le.floating)),fe=t$1(oe),he=e$1(oe),ge=n$2(oe)==="x",_e=["left","top"].includes(fe)?-1:1,Se=ue&&ge?-1:1,Ee=typeof se=="function"?se(ie):se;let{mainAxis:ye,crossAxis:be,alignmentAxis:we}=typeof Ee=="number"?{mainAxis:Ee,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Ee};return he&&typeof we=="number"&&(be=he==="end"?-1*we:we),ge?{x:be*Se,y:ye*_e}:{x:ye*_e,y:be*Se}})(_,ne);return{x:K+te.x,y:Z+te.y,data:te}}}};function O(ne){return ne==="x"?"y":"x"}const D$1=function(ne){return ne===void 0&&(ne={}),{name:"shift",options:ne,async fn(_){const{x:K,y:Z,placement:te}=_,{mainAxis:ie=!0,crossAxis:se=!1,limiter:oe={fn:Ee=>{let{x:ye,y:be}=Ee;return{x:ye,y:be}}},...ae}=ne,le={x:K,y:Z},ue=await s$3(_,ae),fe=n$2(t$1(te)),he=O(fe);let ge=le[fe],_e=le[he];if(ie){const Ee=fe==="y"?"bottom":"right";ge=u$3(ge+ue[fe==="y"?"top":"left"],ge,ge-ue[Ee])}if(se){const Ee=he==="y"?"bottom":"right";_e=u$3(_e+ue[he==="y"?"top":"left"],_e,_e-ue[Ee])}const Se=oe.fn({..._,[fe]:ge,[he]:_e});return{...Se,data:{x:Se.x-K,y:Se.y-Z}}}}},L$2=function(ne){return ne===void 0&&(ne={}),{options:ne,fn(_){const{x:K,y:Z,placement:te,rects:ie,middlewareData:se}=_,{offset:oe=0,mainAxis:ae=!0,crossAxis:le=!0}=ne,ue={x:K,y:Z},fe=n$2(te),he=O(fe);let ge=ue[fe],_e=ue[he];const Se=typeof oe=="function"?oe({...ie,placement:te}):oe,Ee=typeof Se=="number"?{mainAxis:Se,crossAxis:0}:{mainAxis:0,crossAxis:0,...Se};if(ae){const Oe=fe==="y"?"height":"width",Be=ie.reference[fe]-ie.floating[Oe]+Ee.mainAxis,Ue=ie.reference[fe]+ie.reference[Oe]-Ee.mainAxis;ge<Be?ge=Be:ge>Ue&&(ge=Ue)}if(le){var ye,be,we,Pe;const Oe=fe==="y"?"width":"height",Be=["top","left"].includes(t$1(te)),Ue=ie.reference[he]-ie.floating[Oe]+(Be&&(ye=(be=se.offset)==null?void 0:be[he])!=null?ye:0)+(Be?0:Ee.crossAxis),$e=ie.reference[he]+ie.reference[Oe]+(Be?0:(we=(Pe=se.offset)==null?void 0:Pe[he])!=null?we:0)-(Be?Ee.crossAxis:0);_e<Ue?_e=Ue:_e>$e&&(_e=$e)}return{[fe]:ge,[he]:_e}}}},k$2=function(ne){return ne===void 0&&(ne={}),{name:"size",options:ne,async fn(_){const{placement:K,rects:Z,platform:te,elements:ie}=_,{apply:se,...oe}=ne,ae=await s$3(_,oe),le=t$1(K),ue=e$1(K);let fe,he;le==="top"||le==="bottom"?(fe=le,he=ue===(await(te.isRTL==null?void 0:te.isRTL(ie.floating))?"start":"end")?"left":"right"):(he=le,fe=ue==="end"?"top":"bottom");const ge=f$3(ae.left,0),_e=f$3(ae.right,0),Se=f$3(ae.top,0),Ee=f$3(ae.bottom,0),ye={availableHeight:Z.floating.height-(["left","right"].includes(K)?2*(Se!==0||Ee!==0?Se+Ee:f$3(ae.top,ae.bottom)):ae[fe]),availableWidth:Z.floating.width-(["top","bottom"].includes(K)?2*(ge!==0||_e!==0?ge+_e:f$3(ae.left,ae.right)):ae[he])},be=await te.getDimensions(ie.floating);se?.({..._,...ye});const we=await te.getDimensions(ie.floating);return be.width!==we.width||be.height!==we.height?{reset:{rects:!0}}:{}}}};function n$1(ne){return ne&&ne.document&&ne.location&&ne.alert&&ne.setInterval}function o$1(ne){if(ne==null)return window;if(!n$1(ne)){const _=ne.ownerDocument;return _&&_.defaultView||window}return ne}function i$2(ne){return o$1(ne).getComputedStyle(ne)}function r$1(ne){return n$1(ne)?"":ne?(ne.nodeName||"").toLowerCase():""}function l$1(){const ne=navigator.userAgentData;return ne!=null&&ne.brands?ne.brands.map((_=>_.brand+"/"+_.version)).join(" "):navigator.userAgent}function c$2(ne){return ne instanceof o$1(ne).HTMLElement}function f$2(ne){return ne instanceof o$1(ne).Element}function s$2(ne){return typeof ShadowRoot>"u"?!1:ne instanceof o$1(ne).ShadowRoot||ne instanceof ShadowRoot}function u$2(ne){const{overflow:_,overflowX:K,overflowY:Z}=i$2(ne);return/auto|scroll|overlay|hidden/.test(_+Z+K)}function d$2(ne){return["table","td","th"].includes(r$1(ne))}function h$2(ne){const _=/firefox/i.test(l$1()),K=i$2(ne);return K.transform!=="none"||K.perspective!=="none"||K.contain==="paint"||["transform","perspective"].includes(K.willChange)||_&&K.willChange==="filter"||_&&!!K.filter&&K.filter!=="none"}function a$1(){return!/^((?!chrome|android).)*safari/i.test(l$1())}const g$2=Math.min,p$2=Math.max,m$2=Math.round;function w$1(ne,_,K){var Z,te,ie,se;_===void 0&&(_=!1),K===void 0&&(K=!1);const oe=ne.getBoundingClientRect();let ae=1,le=1;_&&c$2(ne)&&(ae=ne.offsetWidth>0&&m$2(oe.width)/ne.offsetWidth||1,le=ne.offsetHeight>0&&m$2(oe.height)/ne.offsetHeight||1);const ue=f$2(ne)?o$1(ne):window,fe=!a$1()&&K,he=(oe.left+(fe&&(Z=(te=ue.visualViewport)==null?void 0:te.offsetLeft)!=null?Z:0))/ae,ge=(oe.top+(fe&&(ie=(se=ue.visualViewport)==null?void 0:se.offsetTop)!=null?ie:0))/le,_e=oe.width/ae,Se=oe.height/le;return{width:_e,height:Se,top:ge,right:he+_e,bottom:ge+Se,left:he,x:he,y:ge}}function v$2(ne){return(_=ne,(_ instanceof o$1(_).Node?ne.ownerDocument:ne.document)||window.document).documentElement;var _}function y$2(ne){return f$2(ne)?{scrollLeft:ne.scrollLeft,scrollTop:ne.scrollTop}:{scrollLeft:ne.pageXOffset,scrollTop:ne.pageYOffset}}function x$1(ne){return w$1(v$2(ne)).left+y$2(ne).scrollLeft}function b$2(ne,_,K){const Z=c$2(_),te=v$2(_),ie=w$1(ne,Z&&(function(ae){const le=w$1(ae);return m$2(le.width)!==ae.offsetWidth||m$2(le.height)!==ae.offsetHeight})(_),K==="fixed");let se={scrollLeft:0,scrollTop:0};const oe={x:0,y:0};if(Z||!Z&&K!=="fixed")if((r$1(_)!=="body"||u$2(te))&&(se=y$2(_)),c$2(_)){const ae=w$1(_,!0);oe.x=ae.x+_.clientLeft,oe.y=ae.y+_.clientTop}else te&&(oe.x=x$1(te));return{x:ie.left+se.scrollLeft-oe.x,y:ie.top+se.scrollTop-oe.y,width:ie.width,height:ie.height}}function L$1(ne){return r$1(ne)==="html"?ne:ne.assignedSlot||ne.parentNode||(s$2(ne)?ne.host:null)||v$2(ne)}function R(ne){return c$2(ne)&&getComputedStyle(ne).position!=="fixed"?ne.offsetParent:null}function T$1(ne){const _=o$1(ne);let K=R(ne);for(;K&&d$2(K)&&getComputedStyle(K).position==="static";)K=R(K);return K&&(r$1(K)==="html"||r$1(K)==="body"&&getComputedStyle(K).position==="static"&&!h$2(K))?_:K||(function(Z){let te=L$1(Z);for(s$2(te)&&(te=te.host);c$2(te)&&!["html","body"].includes(r$1(te));){if(h$2(te))return te;te=te.parentNode}return null})(ne)||_}function W(ne){if(c$2(ne))return{width:ne.offsetWidth,height:ne.offsetHeight};const _=w$1(ne);return{width:_.width,height:_.height}}function E(ne){const _=L$1(ne);return["html","body","#document"].includes(r$1(_))?ne.ownerDocument.body:c$2(_)&&u$2(_)?_:E(_)}function H$1(ne,_){var K;_===void 0&&(_=[]);const Z=E(ne),te=Z===((K=ne.ownerDocument)==null?void 0:K.body),ie=o$1(Z),se=te?[ie].concat(ie.visualViewport||[],u$2(Z)?Z:[]):Z,oe=_.concat(se);return te?oe:oe.concat(H$1(se))}function C(ne,_,K){return _==="viewport"?l$2((function(Z,te){const ie=o$1(Z),se=v$2(Z),oe=ie.visualViewport;let ae=se.clientWidth,le=se.clientHeight,ue=0,fe=0;if(oe){ae=oe.width,le=oe.height;const he=a$1();(he||!he&&te==="fixed")&&(ue=oe.offsetLeft,fe=oe.offsetTop)}return{width:ae,height:le,x:ue,y:fe}})(ne,K)):f$2(_)?(function(Z,te){const ie=w$1(Z,!1,te==="fixed"),se=ie.top+Z.clientTop,oe=ie.left+Z.clientLeft;return{top:se,left:oe,x:oe,y:se,right:oe+Z.clientWidth,bottom:se+Z.clientHeight,width:Z.clientWidth,height:Z.clientHeight}})(_,K):l$2((function(Z){var te;const ie=v$2(Z),se=y$2(Z),oe=(te=Z.ownerDocument)==null?void 0:te.body,ae=p$2(ie.scrollWidth,ie.clientWidth,oe?oe.scrollWidth:0,oe?oe.clientWidth:0),le=p$2(ie.scrollHeight,ie.clientHeight,oe?oe.scrollHeight:0,oe?oe.clientHeight:0);let ue=-se.scrollLeft+x$1(Z);const fe=-se.scrollTop;return i$2(oe||ie).direction==="rtl"&&(ue+=p$2(ie.clientWidth,oe?oe.clientWidth:0)-ae),{width:ae,height:le,x:ue,y:fe}})(v$2(ne)))}function S$2(ne){const _=H$1(ne),K=["absolute","fixed"].includes(i$2(ne).position)&&c$2(ne)?T$1(ne):ne;return f$2(K)?_.filter((Z=>f$2(Z)&&(function(te,ie){const se=ie.getRootNode==null?void 0:ie.getRootNode();if(te.contains(ie))return!0;if(se&&s$2(se)){let oe=ie;do{if(oe&&te===oe)return!0;oe=oe.parentNode||oe.host}while(oe)}return!1})(Z,K)&&r$1(Z)!=="body")):[]}const D={getClippingRect:function(ne){let{element:_,boundary:K,rootBoundary:Z,strategy:te}=ne;const ie=[...K==="clippingAncestors"?S$2(_):[].concat(K),Z],se=ie[0],oe=ie.reduce(((ae,le)=>{const ue=C(_,le,te);return ae.top=p$2(ue.top,ae.top),ae.right=g$2(ue.right,ae.right),ae.bottom=g$2(ue.bottom,ae.bottom),ae.left=p$2(ue.left,ae.left),ae}),C(_,se,te));return{width:oe.right-oe.left,height:oe.bottom-oe.top,x:oe.left,y:oe.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(ne){let{rect:_,offsetParent:K,strategy:Z}=ne;const te=c$2(K),ie=v$2(K);if(K===ie)return _;let se={scrollLeft:0,scrollTop:0};const oe={x:0,y:0};if((te||!te&&Z!=="fixed")&&((r$1(K)!=="body"||u$2(ie))&&(se=y$2(K)),c$2(K))){const ae=w$1(K,!0);oe.x=ae.x+K.clientLeft,oe.y=ae.y+K.clientTop}return{..._,x:_.x-se.scrollLeft+oe.x,y:_.y-se.scrollTop+oe.y}},isElement:f$2,getDimensions:W,getOffsetParent:T$1,getDocumentElement:v$2,getElementRects:ne=>{let{reference:_,floating:K,strategy:Z}=ne;return{reference:b$2(_,T$1(K),Z),floating:{...W(K),x:0,y:0}}},getClientRects:ne=>Array.from(ne.getClientRects()),isRTL:ne=>i$2(ne).direction==="rtl"};function N$1(ne,_,K,Z){Z===void 0&&(Z={});const{ancestorScroll:te=!0,ancestorResize:ie=!0,elementResize:se=!0,animationFrame:oe=!1}=Z,ae=te&&!oe,le=ie&&!oe,ue=ae||le?[...f$2(ne)?H$1(ne):[],...H$1(_)]:[];ue.forEach((_e=>{ae&&_e.addEventListener("scroll",K,{passive:!0}),le&&_e.addEventListener("resize",K)}));let fe,he=null;if(se){let _e=!0;he=new ResizeObserver((()=>{_e||K(),_e=!1})),f$2(ne)&&!oe&&he.observe(ne),he.observe(_)}let ge=oe?w$1(ne):null;return oe&&(function _e(){const Se=w$1(ne);!ge||Se.x===ge.x&&Se.y===ge.y&&Se.width===ge.width&&Se.height===ge.height||K(),ge=Se,fe=requestAnimationFrame(_e)})(),K(),()=>{var _e;ue.forEach((Se=>{ae&&Se.removeEventListener("scroll",K),le&&Se.removeEventListener("resize",K)})),(_e=he)==null||_e.disconnect(),he=null,oe&&cancelAnimationFrame(fe)}}const z=(ne,_,K)=>o$2(ne,_,{platform:D,...K});var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(ne,_){if(ne===_)return!0;if(typeof ne!=typeof _)return!1;if(typeof ne=="function"&&ne.toString()===_.toString())return!0;let K,Z,te;if(ne&&_&&typeof ne=="object"){if(Array.isArray(ne)){if(K=ne.length,K!=_.length)return!1;for(Z=K;Z--!==0;)if(!deepEqual(ne[Z],_[Z]))return!1;return!0}if(te=Object.keys(ne),K=te.length,K!==Object.keys(_).length)return!1;for(Z=K;Z--!==0;)if(!Object.prototype.hasOwnProperty.call(_,te[Z]))return!1;for(Z=K;Z--!==0;){const ie=te[Z];if(!(ie==="_owner"&&ne.$$typeof)&&!deepEqual(ne[ie],_[ie]))return!1}return!0}return ne!==ne&&_!==_}function useLatestRef(ne){const _=reactExports.useRef(ne);return index(()=>{_.current=ne}),_}function useFloating(ne){let{middleware:_,placement:K="bottom",strategy:Z="absolute",whileElementsMounted:te}=ne===void 0?{}:ne;const ie=reactExports.useRef(null),se=reactExports.useRef(null),oe=useLatestRef(te),ae=reactExports.useRef(null),[le,ue]=reactExports.useState({x:null,y:null,strategy:Z,placement:K,middlewareData:{}}),[fe,he]=reactExports.useState(_);deepEqual(fe?.map(we=>{let{options:Pe}=we;return Pe}),_?.map(we=>{let{options:Pe}=we;return Pe}))||he(_);const ge=reactExports.useCallback(()=>{!ie.current||!se.current||z(ie.current,se.current,{middleware:fe,placement:K,strategy:Z}).then(we=>{_e.current&&reactDomExports.flushSync(()=>{ue(we)})})},[fe,K,Z]);index(()=>{_e.current&&ge()},[ge]);const _e=reactExports.useRef(!1);index(()=>(_e.current=!0,()=>{_e.current=!1}),[]);const Se=reactExports.useCallback(()=>{if(typeof ae.current=="function"&&(ae.current(),ae.current=null),ie.current&&se.current)if(oe.current){const we=oe.current(ie.current,se.current,ge);ae.current=we}else ge()},[ge,oe]),Ee=reactExports.useCallback(we=>{ie.current=we,Se()},[Se]),ye=reactExports.useCallback(we=>{se.current=we,Se()},[Se]),be=reactExports.useMemo(()=>({reference:ie,floating:se}),[]);return reactExports.useMemo(()=>({...le,update:ge,refs:be,reference:Ee,floating:ye}),[le,ge,be,Ee,ye])}const arrow=ne=>{const{element:_,padding:K}=ne;function Z(te){return Object.prototype.hasOwnProperty.call(te,"current")}return{name:"arrow",options:ne,fn(te){return Z(_)?_.current!=null?m$3({element:_.current,padding:K}).fn(te):{}:_?m$3({element:_,padding:K}).fn(te):{}}}},$7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((ne,_)=>{const{children:K,width:Z=10,height:te=5,...ie}=ne;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},ie,{ref:_,width:Z,height:te,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),ne.asChild?K:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(ne){const[_,K]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(ne){K({width:ne.offsetWidth,height:ne.offsetHeight});const Z=new ResizeObserver(te=>{if(!Array.isArray(te)||!te.length)return;const ie=te[0];let se,oe;if("borderBoxSize"in ie){const ae=ie.borderBoxSize,le=Array.isArray(ae)?ae[0]:ae;se=le.inlineSize,oe=le.blockSize}else se=ne.offsetWidth,oe=ne.offsetHeight;K({width:se,height:oe})});return Z.observe(ne,{box:"border-box"}),()=>Z.unobserve(ne)}else K(void 0)},[ne]),_}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=ne=>{const{__scopePopper:_,children:K}=ne,[Z,te]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:_,anchor:Z,onAnchorChange:te},K)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((ne,_)=>{const{__scopePopper:K,virtualRef:Z,...te}=ne,ie=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,K),se=reactExports.useRef(null),oe=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,se);return reactExports.useEffect(()=>{ie.onAnchorChange(Z?.current||se.current)}),Z?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},te,{ref:oe}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),[$cf1ac5d9fe0e8206$var$PositionContextProvider,$cf1ac5d9fe0e8206$var$usePositionContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,{hasParent:!1,positionUpdateFns:new Set}),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((ne,_)=>{var K,Z,te,ie,se,oe,ae,le;const{__scopePopper:ue,side:fe="bottom",sideOffset:he=0,align:ge="center",alignOffset:_e=0,arrowPadding:Se=0,collisionBoundary:Ee=[],collisionPadding:ye=0,sticky:be="partial",hideWhenDetached:we=!1,avoidCollisions:Pe=!0,onPlaced:Oe,...Be}=ne,Ue=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,ue),[$e,De]=reactExports.useState(null),ke=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,Sn=>De(Sn)),[Ge,Je]=reactExports.useState(null),Ye=$db6c3485150b8e66$export$1ab7ae714698c4b8(Ge),Qe=(K=Ye?.width)!==null&&K!==void 0?K:0,rt=(Z=Ye?.height)!==null&&Z!==void 0?Z:0,ot=fe+(ge!=="center"?"-"+ge:""),ct=typeof ye=="number"?ye:{top:0,right:0,bottom:0,left:0,...ye},je=Array.isArray(Ee)?Ee:[Ee],st=je.length>0,nt={padding:ct,boundary:je.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:st},{reference:qe,floating:lt,strategy:Pt,x:Gt,y:pt,placement:yt,middlewareData:Bt,update:Wt}=useFloating({strategy:"fixed",placement:ot,whileElementsMounted:N$1,middleware:[$cf1ac5d9fe0e8206$var$anchorCssProperties(),T$2({mainAxis:he+rt,alignmentAxis:_e}),Pe?D$1({mainAxis:!0,crossAxis:!1,limiter:be==="partial"?L$2():void 0,...nt}):void 0,Ge?arrow({element:Ge,padding:Se}):void 0,Pe?b$3({...nt}):void 0,k$2({...nt,apply:({elements:Sn,availableWidth:We,availableHeight:Ve})=>{Sn.floating.style.setProperty("--radix-popper-available-width",`${We}px`),Sn.floating.style.setProperty("--radix-popper-available-height",`${Ve}px`)}}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Qe,arrowHeight:rt}),we?P({strategy:"referenceHidden"}):void 0].filter($cf1ac5d9fe0e8206$var$isDefined)});$9f79659886946c16$export$e5c5a5f917a5871c(()=>{qe(Ue.anchor)},[qe,Ue.anchor]);const jt=Gt!==null&&pt!==null,[nn,an]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(yt),mn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Oe);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{jt&&mn?.()},[jt,mn]);const tt=(te=Bt.arrow)===null||te===void 0?void 0:te.x,Ut=(ie=Bt.arrow)===null||ie===void 0?void 0:ie.y,Dt=((se=Bt.arrow)===null||se===void 0?void 0:se.centerOffset)!==0,[Vt,It]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{$e&&It(window.getComputedStyle($e).zIndex)},[$e]);const{hasParent:Qt,positionUpdateFns:kt}=$cf1ac5d9fe0e8206$var$usePositionContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,ue),qt=!Qt;reactExports.useLayoutEffect(()=>{if(!qt)return kt.add(Wt),()=>{kt.delete(Wt)}},[qt,kt,Wt]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{qt&&jt&&Array.from(kt).reverse().forEach(Sn=>requestAnimationFrame(Sn))},[qt,jt,kt]);const Tn={"data-side":nn,"data-align":an,...Be,ref:ke,style:{...Be.style,animation:jt?void 0:"none",opacity:(oe=Bt.hide)!==null&&oe!==void 0&&oe.referenceHidden?0:void 0}};return reactExports.createElement("div",{ref:lt,"data-radix-popper-content-wrapper":"",style:{position:Pt,left:0,top:0,transform:jt?`translate3d(${Math.round(Gt)}px, ${Math.round(pt)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Vt,"--radix-popper-transform-origin":[(ae=Bt.transformOrigin)===null||ae===void 0?void 0:ae.x,(le=Bt.transformOrigin)===null||le===void 0?void 0:le.y].join(" ")},dir:ne.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:ue,placedSide:nn,onArrowChange:Je,arrowX:tt,arrowY:Ut,shouldHideArrow:Dt},qt?reactExports.createElement($cf1ac5d9fe0e8206$var$PositionContextProvider,{scope:ue,hasParent:!0,positionUpdateFns:kt},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,Tn)):reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,Tn)))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(_,K){const{__scopePopper:Z,...te}=_,ie=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,Z),se=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[ie.placedSide];return reactExports.createElement("span",{ref:ie.onArrowChange,style:{position:"absolute",left:ie.arrowX,top:ie.arrowY,[se]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[ie.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[ie.placedSide],visibility:ie.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},te,{ref:K,style:{...te.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isDefined(ne){return ne!==void 0}function $cf1ac5d9fe0e8206$var$isNotNull(ne){return ne!==null}const $cf1ac5d9fe0e8206$var$anchorCssProperties=()=>({name:"anchorCssProperties",fn(ne){const{rects:_,elements:K}=ne,{width:Z,height:te}=_.reference;return K.floating.style.setProperty("--radix-popper-anchor-width",`${Z}px`),K.floating.style.setProperty("--radix-popper-anchor-height",`${te}px`),{}}}),$cf1ac5d9fe0e8206$var$transformOrigin=ne=>({name:"transformOrigin",options:ne,fn(_){var K,Z,te,ie,se;const{placement:oe,rects:ae,middlewareData:le}=_,fe=((K=le.arrow)===null||K===void 0?void 0:K.centerOffset)!==0,he=fe?0:ne.arrowWidth,ge=fe?0:ne.arrowHeight,[_e,Se]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(oe),Ee={start:"0%",center:"50%",end:"100%"}[Se],ye=((Z=(te=le.arrow)===null||te===void 0?void 0:te.x)!==null&&Z!==void 0?Z:0)+he/2,be=((ie=(se=le.arrow)===null||se===void 0?void 0:se.y)!==null&&ie!==void 0?ie:0)+ge/2;let we="",Pe="";return _e==="bottom"?(we=fe?Ee:`${ye}px`,Pe=`${-ge}px`):_e==="top"?(we=fe?Ee:`${ye}px`,Pe=`${ae.floating.height+ge}px`):_e==="right"?(we=`${-ge}px`,Pe=fe?Ee:`${be}px`):_e==="left"&&(we=`${ae.floating.width+ge}px`,Pe=fe?Ee:`${be}px`),{data:{x:we,y:Pe}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ne){const[_,K="center"]=ne.split("-");return[_,K]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0;function $fe963b355347cc68$export$3e6543de14f8614f(ne,_){return reactExports.useReducer((K,Z)=>{const te=_[K][Z];return te??K},ne)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=ne=>{const{present:_,children:K}=ne,Z=$921a889cee6df7e8$var$usePresence(_),te=typeof K=="function"?K({present:Z.isPresent}):reactExports.Children.only(K),ie=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Z.ref,te.ref);return typeof K=="function"||Z.isPresent?reactExports.cloneElement(te,{ref:ie}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(ne){const[_,K]=reactExports.useState(),Z=reactExports.useRef({}),te=reactExports.useRef(ne),ie=reactExports.useRef("none"),se=ne?"mounted":"unmounted",[oe,ae]=$fe963b355347cc68$export$3e6543de14f8614f(se,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const le=$921a889cee6df7e8$var$getAnimationName(Z.current);ie.current=oe==="mounted"?le:"none"},[oe]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const le=Z.current,ue=te.current;if(ue!==ne){const he=ie.current,ge=$921a889cee6df7e8$var$getAnimationName(le);ne?ae("MOUNT"):ge==="none"||le?.display==="none"?ae("UNMOUNT"):ae(ue&&he!==ge?"ANIMATION_OUT":"UNMOUNT"),te.current=ne}},[ne,ae]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_){const le=fe=>{const ge=$921a889cee6df7e8$var$getAnimationName(Z.current).includes(fe.animationName);fe.target===_&&ge&&reactDomExports.flushSync(()=>ae("ANIMATION_END"))},ue=fe=>{fe.target===_&&(ie.current=$921a889cee6df7e8$var$getAnimationName(Z.current))};return _.addEventListener("animationstart",ue),_.addEventListener("animationcancel",le),_.addEventListener("animationend",le),()=>{_.removeEventListener("animationstart",ue),_.removeEventListener("animationcancel",le),_.removeEventListener("animationend",le)}}else ae("ANIMATION_END")},[_,ae]),{isPresent:["mounted","unmountSuspended"].includes(oe),ref:reactExports.useCallback(le=>{le&&(Z.current=getComputedStyle(le)),K(le)},[])}}function $921a889cee6df7e8$var$getAnimationName(ne){return ne?.animationName||"none"}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:ne,defaultProp:_,onChange:K=()=>{}}){const[Z,te]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_,onChange:K}),ie=ne!==void 0,se=ie?ne:Z,oe=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(K),ae=reactExports.useCallback(le=>{if(ie){const fe=typeof le=="function"?le(ne):le;fe!==ne&&oe(fe)}else te(le)},[ie,ne,te,oe]);return[se,ae]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:ne,onChange:_}){const K=reactExports.useState(ne),[Z]=K,te=reactExports.useRef(Z),ie=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_);return reactExports.useEffect(()=>{te.current!==Z&&(ie(Z),te.current=Z)},[Z,te,ie]),K}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((ne,_)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},ne,{ref:_,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...ne.style}}))),$ea1ef594cf570d83$export$be92b6f5f03c0fe9=$ea1ef594cf570d83$export$439d29a4e110a164,[$a093c7e1ec25a057$var$createTooltipContext,$a093c7e1ec25a057$export$1c540a2224f0d865]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Tooltip",[$cf1ac5d9fe0e8206$export$722aac194ae923]),$a093c7e1ec25a057$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$a093c7e1ec25a057$var$PROVIDER_NAME="TooltipProvider",$a093c7e1ec25a057$var$TOOLTIP_OPEN="tooltip.open",[$a093c7e1ec25a057$var$TooltipProviderContextProvider,$a093c7e1ec25a057$var$useTooltipProviderContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PROVIDER_NAME),$a093c7e1ec25a057$var$TOOLTIP_NAME="Tooltip",[$a093c7e1ec25a057$var$TooltipContextProvider,$a093c7e1ec25a057$var$useTooltipContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME),$a093c7e1ec25a057$export$28c660c63b792dea=ne=>{const{__scopeTooltip:_,children:K,open:Z,defaultOpen:te=!1,onOpenChange:ie,disableHoverableContent:se,delayDuration:oe}=ne,ae=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TOOLTIP_NAME,ne.__scopeTooltip),le=$a093c7e1ec25a057$var$usePopperScope(_),[ue,fe]=reactExports.useState(null),he=$1746a345f3d73bb7$export$f680877a34711e37(),ge=reactExports.useRef(0),_e=se??ae.disableHoverableContent,Se=oe??ae.delayDuration,Ee=reactExports.useRef(!1),[ye=!1,be]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Z,defaultProp:te,onChange:Ue=>{Ue?(ae.onOpen(),document.dispatchEvent(new CustomEvent($a093c7e1ec25a057$var$TOOLTIP_OPEN))):ae.onClose(),ie?.(Ue)}}),we=reactExports.useMemo(()=>ye?Ee.current?"delayed-open":"instant-open":"closed",[ye]),Pe=reactExports.useCallback(()=>{window.clearTimeout(ge.current),Ee.current=!1,be(!0)},[be]),Oe=reactExports.useCallback(()=>{window.clearTimeout(ge.current),be(!1)},[be]),Be=reactExports.useCallback(()=>{window.clearTimeout(ge.current),ge.current=window.setTimeout(()=>{Ee.current=!0,be(!0)},Se)},[Se,be]);return reactExports.useEffect(()=>()=>window.clearTimeout(ge.current),[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,le,reactExports.createElement($a093c7e1ec25a057$var$TooltipContextProvider,{scope:_,contentId:he,open:ye,stateAttribute:we,trigger:ue,onTriggerChange:fe,onTriggerEnter:reactExports.useCallback(()=>{ae.isOpenDelayed?Be():Pe()},[ae.isOpenDelayed,Be,Pe]),onTriggerLeave:reactExports.useCallback(()=>{_e?Oe():window.clearTimeout(ge.current)},[Oe,_e]),onOpen:Pe,onClose:Oe,disableHoverableContent:_e},K))},$a093c7e1ec25a057$var$TRIGGER_NAME="TooltipTrigger",$a093c7e1ec25a057$export$8c610744efcf8a1d=reactExports.forwardRef((ne,_)=>{const{__scopeTooltip:K,...Z}=ne,te=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$TRIGGER_NAME,K),ie=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TRIGGER_NAME,K),se=$a093c7e1ec25a057$var$usePopperScope(K),oe=reactExports.useRef(null),ae=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,oe,te.onTriggerChange),le=reactExports.useRef(!1),ue=reactExports.useRef(!1),fe=reactExports.useCallback(()=>le.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",fe),[fe]),reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},se),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({"aria-describedby":te.open?te.contentId:void 0,"data-state":te.stateAttribute},Z,{ref:ae,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onPointerMove,he=>{he.pointerType!=="touch"&&!ue.current&&!ie.isPointerInTransitRef.current&&(te.onTriggerEnter(),ue.current=!0)}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onPointerLeave,()=>{te.onTriggerLeave(),ue.current=!1}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onPointerDown,()=>{le.current=!0,document.addEventListener("pointerup",fe,{once:!0})}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onFocus,()=>{le.current||te.onOpen()}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onBlur,te.onClose),onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(ne.onClick,te.onClose)})))}),$a093c7e1ec25a057$var$PORTAL_NAME="TooltipPortal",[$a093c7e1ec25a057$var$PortalProvider,$a093c7e1ec25a057$var$usePortalContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PORTAL_NAME,{forceMount:void 0}),$a093c7e1ec25a057$var$CONTENT_NAME="TooltipContent",$a093c7e1ec25a057$export$e9003e2be37ec060=reactExports.forwardRef((ne,_)=>{const K=$a093c7e1ec25a057$var$usePortalContext($a093c7e1ec25a057$var$CONTENT_NAME,ne.__scopeTooltip),{forceMount:Z=K.forceMount,side:te="top",...ie}=ne,se=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,ne.__scopeTooltip);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:Z||se.open},se.disableHoverableContent?reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({side:te},ie,{ref:_})):reactExports.createElement($a093c7e1ec25a057$var$TooltipContentHoverable,_extends$1({side:te},ie,{ref:_})))}),$a093c7e1ec25a057$var$TooltipContentHoverable=reactExports.forwardRef((ne,_)=>{const K=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,ne.__scopeTooltip),Z=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$CONTENT_NAME,ne.__scopeTooltip),te=reactExports.useRef(null),ie=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,te),[se,oe]=reactExports.useState(null),{trigger:ae,onClose:le}=K,ue=te.current,{onPointerInTransitChange:fe}=Z,he=reactExports.useCallback(()=>{oe(null),fe(!1)},[fe]),ge=reactExports.useCallback((_e,Se)=>{const Ee=_e.currentTarget,ye={x:_e.clientX,y:_e.clientY},be=$a093c7e1ec25a057$var$getExitSideFromRect(ye,Ee.getBoundingClientRect()),we=be==="right"||be==="bottom"?-5:5,Oe=be==="right"||be==="left"?{x:_e.clientX+we,y:_e.clientY}:{x:_e.clientX,y:_e.clientY+we},Be=$a093c7e1ec25a057$var$getPointsFromRect(Se.getBoundingClientRect()),Ue=$a093c7e1ec25a057$var$getHull([Oe,...Be]);oe(Ue),fe(!0)},[fe]);return reactExports.useEffect(()=>()=>he(),[he]),reactExports.useEffect(()=>{if(ae&&ue){const _e=Ee=>ge(Ee,ue),Se=Ee=>ge(Ee,ae);return ae.addEventListener("pointerleave",_e),ue.addEventListener("pointerleave",Se),()=>{ae.removeEventListener("pointerleave",_e),ue.removeEventListener("pointerleave",Se)}}},[ae,ue,ge,he]),reactExports.useEffect(()=>{if(se){const _e=Se=>{const Ee=Se.target,ye={x:Se.clientX,y:Se.clientY},be=ae?.contains(Ee)||ue?.contains(Ee),we=!$a093c7e1ec25a057$var$isPointInPolygon(ye,se);be?he():we&&(he(),le())};return document.addEventListener("pointermove",_e),()=>document.removeEventListener("pointermove",_e)}},[ae,ue,se,le,he]),reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({},ne,{ref:ie}))}),[$a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,$a093c7e1ec25a057$var$useVisuallyHiddenContentContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME,{isInside:!1}),$a093c7e1ec25a057$var$TooltipContentImpl=reactExports.forwardRef((ne,_)=>{const{__scopeTooltip:K,children:Z,"aria-label":te,onEscapeKeyDown:ie,onPointerDownOutside:se,...oe}=ne,ae=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,K),le=$a093c7e1ec25a057$var$usePopperScope(K),{onClose:ue}=ae;return reactExports.useEffect(()=>(document.addEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,ue),()=>document.removeEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,ue)),[ue]),reactExports.useEffect(()=>{if(ae.trigger){const fe=he=>{const ge=he.target;ge!=null&&ge.contains(ae.trigger)&&ue()};return window.addEventListener("scroll",fe,{capture:!0}),()=>window.removeEventListener("scroll",fe,{capture:!0})}},[ae.trigger,ue]),reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ie,onPointerDownOutside:se,onFocusOutside:fe=>fe.preventDefault(),onDismiss:ue},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":ae.stateAttribute},le,oe,{ref:_,style:{...oe.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,Z),reactExports.createElement($a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,{scope:K,isInside:!0},reactExports.createElement($ea1ef594cf570d83$export$be92b6f5f03c0fe9,{id:ae.contentId,role:"tooltip"},te||Z))))}),$a093c7e1ec25a057$var$ARROW_NAME="TooltipArrow",$a093c7e1ec25a057$export$c27ee0ad710f7559=reactExports.forwardRef((ne,_)=>{const{__scopeTooltip:K,...Z}=ne,te=$a093c7e1ec25a057$var$usePopperScope(K);return $a093c7e1ec25a057$var$useVisuallyHiddenContentContext($a093c7e1ec25a057$var$ARROW_NAME,K).isInside?null:reactExports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends$1({},te,Z,{ref:_}))});function $a093c7e1ec25a057$var$getExitSideFromRect(ne,_){const K=Math.abs(_.top-ne.y),Z=Math.abs(_.bottom-ne.y),te=Math.abs(_.right-ne.x),ie=Math.abs(_.left-ne.x);switch(Math.min(K,Z,te,ie)){case ie:return"left";case te:return"right";case K:return"top";case Z:return"bottom";default:return null}}function $a093c7e1ec25a057$var$getPointsFromRect(ne){const{top:_,right:K,bottom:Z,left:te}=ne;return[{x:te,y:_},{x:K,y:_},{x:K,y:Z},{x:te,y:Z}]}function $a093c7e1ec25a057$var$isPointInPolygon(ne,_){const{x:K,y:Z}=ne;let te=!1;for(let ie=0,se=_.length-1;ie<_.length;se=ie++){const oe=_[ie].x,ae=_[ie].y,le=_[se].x,ue=_[se].y;ae>Z!=ue>Z&&K<(le-oe)*(Z-ae)/(ue-ae)+oe&&(te=!te)}return te}function $a093c7e1ec25a057$var$getHull(ne){const _=ne.slice();return _.sort((K,Z)=>K.x<Z.x?-1:K.x>Z.x?1:K.y<Z.y?-1:K.y>Z.y?1:0),$a093c7e1ec25a057$var$getHullPresorted(_)}function $a093c7e1ec25a057$var$getHullPresorted(ne){if(ne.length<=1)return ne.slice();const _=[];for(let Z=0;Z<ne.length;Z++){const te=ne[Z];for(;_.length>=2;){const ie=_[_.length-1],se=_[_.length-2];if((ie.x-se.x)*(te.y-se.y)>=(ie.y-se.y)*(te.x-se.x))_.pop();else break}_.push(te)}_.pop();const K=[];for(let Z=ne.length-1;Z>=0;Z--){const te=ne[Z];for(;K.length>=2;){const ie=K[K.length-1],se=K[K.length-2];if((ie.x-se.x)*(te.y-se.y)>=(ie.y-se.y)*(te.x-se.x))K.pop();else break}K.push(te)}return K.pop(),_.length===1&&K.length===1&&_[0].x===K[0].x&&_[0].y===K[0].y?_:_.concat(K)}const $a093c7e1ec25a057$export$be92b6f5f03c0fe9=$a093c7e1ec25a057$export$28c660c63b792dea,$a093c7e1ec25a057$export$41fb9f06171c75f4=$a093c7e1ec25a057$export$8c610744efcf8a1d,$a093c7e1ec25a057$export$7c6e2c02157bb7d2=$a093c7e1ec25a057$export$e9003e2be37ec060,$a093c7e1ec25a057$export$21b07c8f274aebd5=$a093c7e1ec25a057$export$c27ee0ad710f7559;function _objectWithoutPropertiesLoose$1(ne,_){if(ne==null)return{};var K={},Z=Object.keys(ne),te,ie;for(ie=0;ie<Z.length;ie++)te=Z[ie],!(_.indexOf(te)>=0)&&(K[te]=ne[te]);return K}function _objectWithoutProperties$1(ne,_){if(ne==null)return{};var K=_objectWithoutPropertiesLoose$1(ne,_),Z,te;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(ne);for(te=0;te<ie.length;te++)Z=ie[te],!(_.indexOf(Z)>=0)&&Object.prototype.propertyIsEnumerable.call(ne,Z)&&(K[Z]=ne[Z])}return K}let LevaErrors;(function(ne){ne[ne.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",ne[ne.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",ne[ne.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",ne[ne.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",ne[ne.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",ne[ne.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",ne[ne.THEME_ERROR=6]="THEME_ERROR",ne[ne.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",ne[ne.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",ne[ne.EMPTY_KEY=9]="EMPTY_KEY"})(LevaErrors||(LevaErrors={}));const ErrorList={[LevaErrors.UNSUPPORTED_INPUT]:(ne,_)=>[`An input with type \`${ne}\` input was found at path \`${_}\` but it's not supported yet.`],[LevaErrors.NO_COMPONENT_FOR_TYPE]:(ne,_)=>[`Type \`${ne}\` found at path \`${_}\` can't be displayed in panel because no component supports it yet.`],[LevaErrors.UNKNOWN_INPUT]:(ne,_)=>[`input at path \`${ne}\` is not recognized.`,_],[LevaErrors.DUPLICATE_KEYS]:(ne,_,K)=>[`Key \`${ne}\` of path \`${_}\` already exists at path \`${K}\`. Even nested keys need to be unique. Rename one of the keys.`],[LevaErrors.ALREADY_REGISTERED_TYPE]:ne=>[`Type ${ne} has already been registered. You can't register a component with the same type.`],[LevaErrors.CLIPBOARD_ERROR]:ne=>["Error copying the value",ne],[LevaErrors.THEME_ERROR]:(ne,_)=>[`Error accessing the theme \`${ne}.${_}\` value.`],[LevaErrors.PATH_DOESNT_EXIST]:ne=>[`Error getting the value at path \`${ne}\`. There is probably an error in your \`render\` function.`],[LevaErrors.PATH_DOESNT_EXIST]:ne=>[`Error accessing the value at path \`${ne}\``],[LevaErrors.INPUT_TYPE_OVERRIDE]:(ne,_,K)=>[`Input at path \`${ne}\` already exists with type: \`${_}\`. Its type cannot be overridden with type \`${K}\`.`],[LevaErrors.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function _log(ne,_,...K){const[Z,...te]=ErrorList[_](...K);console[ne]("LEVA: "+Z,...te)}const warn=_log.bind(null,"warn"),log=_log.bind(null,"log"),_excluded$a=["value"],_excluded2$4=["schema"],_excluded3$1=["value"],Schemas=[],Plugins={};function getValueType(ne){let{value:_}=ne,K=_objectWithoutProperties$1(ne,_excluded$a);for(let Z of Schemas){const te=Z(_,K);if(te)return te}}function register(ne,_){let{schema:K}=_,Z=_objectWithoutProperties$1(_,_excluded2$4);if(ne in Plugins){warn(LevaErrors.ALREADY_REGISTERED_TYPE,ne);return}Schemas.push((te,ie)=>K(te,ie)&&ne),Plugins[ne]=Z}function createInternalPlugin(ne){return ne}function normalize$3$1(ne,_,K,Z){const{normalize:te}=Plugins[ne];if(te)return te(_,K,Z);if(typeof _!="object"||!("value"in _))return{value:_};const{value:ie}=_,se=_objectWithoutProperties$1(_,_excluded3$1);return{value:ie,settings:se}}function sanitize$4(ne,_,K,Z,te,ie){const{sanitize:se}=Plugins[ne];return se?se(_,K,Z,te,ie):_}function format$2(ne,_,K){const{format:Z}=Plugins[ne];return Z?Z(_,K):_}function _defineProperty$2(ne,_,K){return _ in ne?Object.defineProperty(ne,_,{value:K,enumerable:!0,configurable:!0,writable:!0}):ne[_]=K,ne}function ownKeys$2(ne,_){var K=Object.keys(ne);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ne);_&&(Z=Z.filter(function(te){return Object.getOwnPropertyDescriptor(ne,te).enumerable})),K.push.apply(K,Z)}return K}function _objectSpread2(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$2(Object(K),!0).forEach(function(Z){_defineProperty$2(ne,Z,K[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(K)):ownKeys$2(Object(K)).forEach(function(Z){Object.defineProperty(ne,Z,Object.getOwnPropertyDescriptor(K,Z))})}return ne}const clamp$1=(ne,_,K)=>ne>K?K:ne<_?_:ne,parseNumber=ne=>{if(ne===""||typeof ne=="number")return ne;try{const _=evaluate(ne);if(!isNaN(_))return _}catch{}return parseFloat(ne)},log10=Math.log(10);function getStep(ne){let _=Math.abs(+String(ne).replace(".",""));if(_===0)return .01;for(;_!==0&&_%10===0;)_/=10;const K=Math.floor(Math.log(_)/log10)+1,Z=Math.floor(Math.log10(Math.abs(ne))),te=Math.pow(10,Z-K);return Math.max(te,.001)}const range=(ne,_,K)=>K===_?0:(clamp$1(ne,_,K)-_)/(K-_),invertedRange=(ne,_,K)=>ne*(K-_)+_,getUid=()=>"_"+Math.random().toString(36).substr(2,9),parens=/\(([0-9+\-*/^ .]+)\)/,exp=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,mul=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,div=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,add=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,sub=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function evaluate(ne){if(isNaN(Number(ne)))if(parens.test(ne)){const _=ne.replace(parens,(K,Z)=>String(evaluate(Z)));return evaluate(_)}else if(exp.test(ne)){const _=ne.replace(exp,(K,Z,te)=>String(Math.pow(Number(Z),Number(te))));return evaluate(_)}else if(mul.test(ne)){const _=ne.replace(mul,(K,Z,te)=>String(Number(Z)*Number(te)));return evaluate(_)}else if(div.test(ne)){const _=ne.replace(div,(K,Z,te)=>{if(te!=0)return String(Number(Z)/Number(te));throw new Error("Division by zero")});return evaluate(_)}else if(add.test(ne)){const _=ne.replace(add,(K,Z,te)=>String(Number(Z)+Number(te)));return evaluate(_)}else if(sub.test(ne)){const _=ne.replace(sub,(K,Z,te)=>String(Number(Z)-Number(te)));return evaluate(_)}else return Number(ne);return Number(ne)}function pick(ne,_){return _.reduce((K,Z)=>(ne&&ne.hasOwnProperty(Z)&&(K[Z]=ne[Z]),K),{})}function omit(ne,_){const K=_objectSpread2({},ne);return _.forEach(Z=>Z in ne&&delete K[Z]),K}function mapArrayToKeys(ne,_){return ne.reduce((K,Z,te)=>Object.assign(K,{[_[te]]:Z}),{})}function isObject$1(ne){return Object.prototype.toString.call(ne)==="[object Object]"}const isEmptyObject=ne=>isObject$1(ne)&&Object.keys(ne).length===0;let SpecialInputs;(function(ne){ne.BUTTON="BUTTON",ne.BUTTON_GROUP="BUTTON_GROUP",ne.MONITOR="MONITOR",ne.FOLDER="FOLDER"})(SpecialInputs||(SpecialInputs={}));let LevaInputs;(function(ne){ne.SELECT="SELECT",ne.IMAGE="IMAGE",ne.NUMBER="NUMBER",ne.COLOR="COLOR",ne.STRING="STRING",ne.BOOLEAN="BOOLEAN",ne.INTERVAL="INTERVAL",ne.VECTOR3D="VECTOR3D",ne.VECTOR2D="VECTOR2D"})(LevaInputs||(LevaInputs={}));const _excluded$9=["type","__customInput"],_excluded2$3=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_excluded3$2=["type"];function parseOptions(ne,_,K={},Z){var te,ie;if(typeof ne!="object"||Array.isArray(ne))return{type:Z,input:ne,options:_objectSpread2({key:_,label:_,optional:!1,disabled:!1,order:0},K)};if("__customInput"in ne){const{type:Oe,__customInput:Be}=ne,Ue=_objectWithoutProperties$1(ne,_excluded$9);return parseOptions(Be,_,Ue,Oe)}const{render:se,label:oe,optional:ae,order:le=0,disabled:ue,hint:fe,onChange:he,onEditStart:ge,onEditEnd:_e,transient:Se}=ne,Ee=_objectWithoutProperties$1(ne,_excluded2$3),ye=_objectSpread2({render:se,key:_,label:oe??_,hint:fe,transient:Se??!!he,onEditStart:ge,onEditEnd:_e,disabled:ue,optional:ae,order:le},K);let{type:be}=Ee,we=_objectWithoutProperties$1(Ee,_excluded3$2);if(be=Z??be,be in SpecialInputs)return{type:be,input:we,options:ye};let Pe;return Z&&isObject$1(we)&&"value"in we?Pe=we.value:Pe=isEmptyObject(we)?void 0:we,{type:be,input:Pe,options:_objectSpread2(_objectSpread2({},ye),{},{onChange:he,optional:(te=ye.optional)!==null&&te!==void 0?te:!1,disabled:(ie=ye.disabled)!==null&&ie!==void 0?ie:!1})}}function normalizeInput(ne,_,K,Z){const te=parseOptions(ne,_),{type:ie,input:se,options:oe}=te;if(ie)return ie in SpecialInputs?te:{type:ie,input:normalize$3$1(ie,se,K,Z),options:oe};let ae=getValueType(se);return ae?{type:ae,input:normalize$3$1(ae,se,K,Z),options:oe}:(ae=getValueType({value:se}),ae?{type:ae,input:normalize$3$1(ae,{value:se},K,Z),options:oe}:!1)}function updateInput(ne,_,K,Z,te){const{value:ie,type:se,settings:oe}=ne;ne.value=sanitizeValue({type:se,value:ie,settings:oe},_,K,Z),ne.fromPanel=te}const ValueError=function(_,K,Z){this.type="LEVA_ERROR",this.message="LEVA: "+_,this.previousValue=K,this.error=Z};function sanitizeValue({type:ne,value:_,settings:K},Z,te,ie){const se=ne!=="SELECT"&&typeof Z=="function"?Z(_):Z;let oe;try{oe=sanitize$4(ne,se,K,_,te,ie)}catch(ae){throw new ValueError(`The value \`${Z}\` did not result in a correct value.`,_,ae)}return dequal(oe,_)?_:oe}const debounce=(ne,_,K=!1)=>{let Z=0;return function(){const te=arguments,ie=K&&!Z,se=()=>ne.apply(this,te);window.clearTimeout(Z),Z=window.setTimeout(se,_),ie&&se()}},multiplyStep=ne=>ne.shiftKey?5:ne.altKey?1/5:1;function render(ne,_){const K=console.error;console.error=()=>{},ReactDOM.render(ne,_),console.error=K}const _excluded$8=["value"],_excluded2$2$1=["min","max"],schema$3=ne=>{if(typeof ne=="number")return!0;if(typeof ne=="string"){const _=parseFloat(ne);return isNaN(_)?!1:ne.substring((""+_).length).trim().length<4}return!1},sanitize$3=(ne,{min:_=-1/0,max:K=1/0,suffix:Z})=>{const te=parseFloat(ne);if(ne===""||isNaN(te))throw Error("Invalid number");const ie=clamp$1(te,_,K);return Z?ie+Z:ie},format$1$1=(ne,{pad:_=0,suffix:K})=>{const Z=parseFloat(ne).toFixed(_);return K?Z+K:Z},normalize$2$1=ne=>{let{value:_}=ne,K=_objectWithoutProperties$1(ne,_excluded$8);const{min:Z=-1/0,max:te=1/0}=K,ie=_objectWithoutProperties$1(K,_excluded2$2$1);let se=parseFloat(_);const oe=typeof _=="string"?_.substring((""+se).length):void 0;se=clamp$1(se,Z,te);let ae=K.step;ae||(Number.isFinite(Z)?Number.isFinite(te)?ae=+(Math.abs(te-Z)/100).toPrecision(1):ae=+(Math.abs(se-Z)/100).toPrecision(1):Number.isFinite(te)&&(ae=+(Math.abs(te-se)/100).toPrecision(1)));const le=ae?getStep(ae)*10:getStep(se);ae=ae||le/10;const ue=Math.round(clamp$1(Math.log10(1/le),0,2));return{value:oe?se+oe:se,settings:_objectSpread2({initialValue:se,step:ae,pad:ue,min:Z,max:te,suffix:oe},ie)}},sanitizeStep$1=(ne,{step:_,initialValue:K})=>{const Z=Math.round((ne-K)/_);return K+Z*_};var props$3=Object.freeze({__proto__:null,schema:schema$3,sanitize:sanitize$3,format:format$1$1,normalize:normalize$2$1,sanitizeStep:sanitizeStep$1});function _extends(){return _extends=Object.assign?Object.assign.bind():function(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_];for(var Z in K)Object.prototype.hasOwnProperty.call(K,Z)&&(ne[Z]=K[Z])}return ne},_extends.apply(this,arguments)}const InputContext=reactExports.createContext({});function useInputContext(){return reactExports.useContext(InputContext)}const ThemeContext=reactExports.createContext(null),StoreContext=reactExports.createContext(null),PanelSettingsContext=reactExports.createContext(null);function useStoreContext(){return reactExports.useContext(StoreContext)}function usePanelSettingsContext(){return reactExports.useContext(PanelSettingsContext)}const getDefaultTheme=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function createStateClass(ne,_){const[K,Z]=ne.split(" "),te={};return K!=="none"&&(te.boxShadow=`${_.inset?"inset ":""}0 0 0 $borderWidths${[_.key]} $colors${K!=="default"&&K||_.borderColor}`),Z&&(te.backgroundColor=Z),te}const utils={$inputStyle:()=>ne=>createStateClass(ne,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>ne=>createStateClass(ne,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>ne=>createStateClass(ne,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>ne=>createStateClass(ne,{key:"$active",borderColor:"$accent1",inset:!0})},{styled,css,createTheme,globalCss,keyframes}=q$1({prefix:"leva",theme:getDefaultTheme(),utils:_objectSpread2(_objectSpread2({},utils),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:ne=>({"&:focus":utils.$focusStyle()(ne)}),$focusWithin:ne=>({"&:focus-within":utils.$focusStyle()(ne)}),$hover:ne=>({"&:hover":utils.$hoverStyle()(ne)}),$active:ne=>({"&:active":utils.$activeStyle()(ne)})})}),globalStyles=globalCss({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function mergeTheme(ne){const _=getDefaultTheme();if(!ne)return{theme:_,className:""};Object.keys(ne).forEach(Z=>{Object.assign(_[Z],ne[Z])});const K=createTheme(_);return{theme:_,className:K.className}}function useTh(ne,_){const{theme:K}=reactExports.useContext(ThemeContext);if(!(ne in K)||!(_ in K[ne]))return warn(LevaErrors.THEME_ERROR,ne,_),"";let Z=_;for(;;){let te=K[ne][Z];if(typeof te=="string"&&te.charAt(0)==="$")Z=te.substr(1);else return te}}const StyledInput=styled("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),InnerLabel=styled("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${StyledInput}`]:{paddingLeft:0}}),InnerNumberLabel=styled(InnerLabel,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),InputContainer=styled("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),_excluded$7$1=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],_excluded2$1$1=["onUpdate"];function ValueInput(ne){let{innerLabel:_,value:K,onUpdate:Z,onChange:te,onKeyDown:ie,type:se,id:oe,inputType:ae="text",rows:le=0}=ne,ue=_objectWithoutProperties$1(ne,_excluded$7$1);const{id:fe,emitOnEditStart:he,emitOnEditEnd:ge,disabled:_e}=useInputContext(),Se=oe||fe,Ee=reactExports.useRef(null),ye=le>0,be=ye?"textarea":"input",we=reactExports.useCallback(Be=>Ue=>{const $e=Ue.currentTarget.value;Be($e)},[]);React.useEffect(()=>{const Be=Ee.current,Ue=we($e=>{Z($e),ge()});return Be?.addEventListener("blur",Ue),()=>Be?.removeEventListener("blur",Ue)},[we,Z,ge]);const Pe=reactExports.useCallback(Be=>{Be.key==="Enter"&&we(Z)(Be)},[we,Z]),Oe=Object.assign({as:be},ye?{rows:le}:{},ue);return React.createElement(InputContainer,{textArea:ye},_&&typeof _=="string"?React.createElement(InnerLabel,null,_):_,React.createElement(StyledInput,_extends({levaType:se,ref:Ee,id:Se,type:ae,autoComplete:"off",spellCheck:"false",value:K,onChange:we(te),onFocus:()=>he(),onKeyPress:Pe,onKeyDown:ie,disabled:_e},Oe)))}function NumberInput(ne){let{onUpdate:_}=ne,K=_objectWithoutProperties$1(ne,_excluded2$1$1);const Z=reactExports.useCallback(ie=>_(parseNumber(ie)),[_]),te=reactExports.useCallback(ie=>{const se=ie.key==="ArrowUp"?1:ie.key==="ArrowDown"?-1:0;if(se){ie.preventDefault();const oe=ie.altKey?.1:ie.shiftKey?10:1;_(ae=>parseFloat(ae)+se*oe)}},[_]);return React.createElement(ValueInput,_extends({},K,{onUpdate:Z,onKeyDown:te,type:"number"}))}const StyledFolder=styled("div",{}),StyledWrapper=styled("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),StyledTitle=styled("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & > svg`]:{opacity:1}}),StyledContent=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${StyledFolder}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),StyledRow=styled("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${StyledContent} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),StyledInputRow=styled(StyledRow,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),CopyLabelContainer=styled("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),StyledOptionalToggle=styled("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),StyledLabel=styled("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),StyledInputWrapper$1=styled("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${StyledLabel}`]:{pointerEvents:"auto"}}}}}),Overlay=styled("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),StyledToolTipContent=styled("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),ToolTipArrow=styled($a093c7e1ec25a057$export$21b07c8f274aebd5,{fill:"$toolTipBackground"});function Portal({children:ne}){const{className:_}=reactExports.useContext(ThemeContext);return React.createElement($f1701beae083dbae$export$be92b6f5f03c0fe9,{className:_},ne)}const _excluded$6$1=["align"];function OptionalToggle(){const{id:ne,disable:_,disabled:K}=useInputContext();return React.createElement(React.Fragment,null,React.createElement(StyledOptionalToggle,{id:ne+"__disable",type:"checkbox",checked:!K,onChange:()=>_(!K)}),React.createElement("label",{htmlFor:ne+"__disable"}))}function RawLabel(ne){const{id:_,optional:K,hint:Z}=useInputContext(),te=ne.htmlFor||(_?{htmlFor:_}:null),ie=!Z&&typeof ne.children=="string"?{title:ne.children}:null;return React.createElement(React.Fragment,null,K&&React.createElement(OptionalToggle,null),Z!==void 0?React.createElement($a093c7e1ec25a057$export$be92b6f5f03c0fe9,null,React.createElement($a093c7e1ec25a057$export$41fb9f06171c75f4,{asChild:!0},React.createElement(StyledLabel,_extends({},te,ne))),React.createElement($a093c7e1ec25a057$export$7c6e2c02157bb7d2,{side:"top",sideOffset:2},React.createElement(StyledToolTipContent,null,Z,React.createElement(ToolTipArrow,null)))):React.createElement(StyledLabel,_extends({},te,ie,ne)))}function Label(ne){let{align:_}=ne,K=_objectWithoutProperties$1(ne,_excluded$6$1);const{value:Z,label:te,key:ie,disabled:se}=useInputContext(),{hideCopyButton:oe}=usePanelSettingsContext(),ae=!oe&&ie!==void 0,[le,ue]=reactExports.useState(!1),fe=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[ie]:Z??""})),ue(!0)}catch{warn(LevaErrors.CLIPBOARD_ERROR,{[ie]:Z})}};return React.createElement(CopyLabelContainer,{align:_,onPointerLeave:()=>ue(!1)},React.createElement(RawLabel,K),ae&&!se&&React.createElement("div",{title:`Click to copy ${typeof te=="string"?te:ie} value`},le?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),React.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):React.createElement("svg",{onClick:fe,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),React.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const _excluded$5$1=["toggled"],Svg=styled("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Chevron(ne){let{toggled:_}=ne,K=_objectWithoutProperties$1(ne,_excluded$5$1);return React.createElement(Svg,_extends({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${_?0:-90}deg)`}},K),React.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const _excluded$4$1=["input"];function Row(ne){let{input:_}=ne,K=_objectWithoutProperties$1(ne,_excluded$4$1);return _?React.createElement(StyledInputRow,K):React.createElement(StyledRow,K)}function useInputSetters({value:ne,type:_,settings:K,setValue:Z}){const[te,ie]=reactExports.useState(format$2(_,ne,K)),se=reactExports.useRef(ne),oe=reactExports.useRef(K);oe.current=K;const ae=reactExports.useCallback(ue=>ie(format$2(_,ue,oe.current)),[_]),le=reactExports.useCallback(ue=>{try{Z(ue)}catch(fe){const{type:he,previousValue:ge}=fe;if(he!=="LEVA_ERROR")throw fe;ae(ge)}},[ae,Z]);return reactExports.useEffect(()=>{dequal(ne,se.current)||ae(ne),se.current=ne},[ne,ae]),{displayValue:te,onChange:ie,onUpdate:le}}function useDrag(ne,_){const{emitOnEditStart:K,emitOnEditEnd:Z}=useInputContext();return useDrag$1(te=>{te.first&&(document.body.classList.add("leva__panel__dragged"),K?.());const ie=ne(te);return te.last&&(document.body.classList.remove("leva__panel__dragged"),Z?.()),ie},_)}function useCanvas2d(ne){const _=reactExports.useRef(null),K=reactExports.useRef(null),Z=reactExports.useRef(!1);return reactExports.useEffect(()=>{const te=debounce(()=>{_.current.width=_.current.offsetWidth*window.devicePixelRatio,_.current.height=_.current.offsetHeight*window.devicePixelRatio,ne(_.current,K.current)},250);return window.addEventListener("resize",te),Z.current||(te(),Z.current=!0),()=>window.removeEventListener("resize",te)},[ne]),reactExports.useEffect(()=>{K.current=_.current.getContext("2d")},[]),[_,K]}function useTransform(){const ne=reactExports.useRef(null),_=reactExports.useRef({x:0,y:0}),K=reactExports.useCallback(Z=>{Object.assign(_.current,Z),ne.current&&(ne.current.style.transform=`translate3d(${_.current.x}px, ${_.current.y}px, 0)`)},[]);return[ne,K]}const _excluded$3$1=["__refCount"],getInputAtPath=(ne,_)=>{if(!ne[_])return null;const K=ne[_];return _objectWithoutProperties$1(K,_excluded$3$1)};function useInput(ne){const _=useStoreContext(),[K,Z]=reactExports.useState(getInputAtPath(_.getData(),ne)),te=reactExports.useCallback(le=>_.setValueAtPath(ne,le,!0),[ne,_]),ie=reactExports.useCallback(le=>_.setSettingsAtPath(ne,le),[ne,_]),se=reactExports.useCallback(le=>_.disableInputAtPath(ne,le),[ne,_]),oe=reactExports.useCallback(()=>_.emitOnEditStart(ne),[ne,_]),ae=reactExports.useCallback(()=>_.emitOnEditEnd(ne),[ne,_]);return reactExports.useEffect(()=>{Z(getInputAtPath(_.getData(),ne));const le=_.useStore.subscribe(ue=>getInputAtPath(ue.data,ne),Z,{equalityFn:shallow});return()=>le()},[_,ne]),[K,{set:te,setSettings:ie,disable:se,storeId:_.storeId,emitOnEditStart:oe,emitOnEditEnd:ae}]}const RangeGrid=styled("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Range=styled("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Scrubber=styled("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),RangeWrapper=styled("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Indicator=styled("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function RangeSlider({value:ne,min:_,max:K,onDrag:Z,step:te,initialValue:ie}){const se=reactExports.useRef(null),oe=reactExports.useRef(null),ae=reactExports.useRef(0),le=useTh("sizes","scrubberWidth"),ue=useDrag(({event:he,first:ge,xy:[_e],movement:[Se],memo:Ee})=>{if(ge){const{width:be,left:we}=se.current.getBoundingClientRect();ae.current=be-parseFloat(le),Ee=he?.target===oe.current?ne:invertedRange((_e-we)/be,_,K)}const ye=Ee+invertedRange(Se/ae.current,0,K-_);return Z(sanitizeStep$1(ye,{step:te,initialValue:ie})),Ee}),fe=range(ne,_,K);return React.createElement(RangeWrapper,_extends({ref:se},ue()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:0,right:`${(1-fe)*100}%`}})),React.createElement(Scrubber,{ref:oe,style:{left:`calc(${fe} * (100% - ${le}))`}}))}const DraggableLabel=React.memo(({label:ne,onUpdate:_,step:K,innerLabelTrim:Z})=>{const[te,ie]=reactExports.useState(!1),se=useDrag(({active:oe,delta:[ae],event:le,memo:ue=0})=>(ie(oe),ue+=ae/2,Math.abs(ue)>=1&&(_(fe=>parseFloat(fe)+Math.floor(ue)*K*multiplyStep(le)),ue=0),ue));return React.createElement(InnerNumberLabel,_extends({dragging:te,title:ne.length>1?ne:""},se()),ne.slice(0,Z))});function Number$1({label:ne,id:_,displayValue:K,onUpdate:Z,onChange:te,settings:ie,innerLabelTrim:se=1}){const oe=se>0&&React.createElement(DraggableLabel,{label:ne,step:ie.step,onUpdate:Z,innerLabelTrim:se});return React.createElement(NumberInput,{id:_,value:String(K),onUpdate:Z,onChange:te,innerLabel:oe})}function NumberComponent(){const ne=useInputContext(),{label:_,value:K,onUpdate:Z,settings:te,id:ie}=ne,{min:se,max:oe}=te,ae=oe!==1/0&&se!==-1/0;return React.createElement(Row,{input:!0},React.createElement(Label,null,_),React.createElement(RangeGrid,{hasRange:ae},ae&&React.createElement(RangeSlider,_extends({value:parseFloat(K),onDrag:Z},te)),React.createElement(Number$1,_extends({},ne,{id:ie,label:"value",innerLabelTrim:ae?0:1}))))}const{sanitizeStep}=props$3,rest=_objectWithoutProperties$1(props$3,["sanitizeStep"]);var number$1=_objectSpread2({component:NumberComponent},rest);const schema$2$1=(ne,_)=>v8n().schema({options:v8n().passesAnyOf(v8n().object(),v8n().array())}).test(_),sanitize$2$1=(ne,{values:_})=>{if(_.indexOf(ne)<0)throw Error("Selected value doesn't match Select options");return ne},format$3=(ne,{values:_})=>_.indexOf(ne),normalize$1$1=ne=>{let{value:_,options:K}=ne,Z,te;return Array.isArray(K)?(te=K,Z=K.map(ie=>String(ie))):(te=Object.values(K),Z=Object.keys(K)),"value"in ne?te.includes(_)||(Z.unshift(String(_)),te.unshift(_)):_=te[0],Object.values(K).includes(_)||(K[String(_)]=_),{value:_,settings:{keys:Z,values:te}}};var props$2$1=Object.freeze({__proto__:null,schema:schema$2$1,sanitize:sanitize$2$1,format:format$3,normalize:normalize$1$1});const SelectContainer=styled("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),NativeSelect=styled("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),PresentationalSelect=styled("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${NativeSelect}:focus + &`]:{$focusStyle:""},[`${NativeSelect}:hover + &`]:{$hoverStyle:""}});function Select({displayValue:ne,value:_,onUpdate:K,id:Z,settings:te,disabled:ie}){const{keys:se,values:oe}=te,ae=reactExports.useRef();return _===oe[ne]&&(ae.current=se[ne]),React.createElement(SelectContainer,null,React.createElement(NativeSelect,{id:Z,value:ne,onChange:le=>K(oe[Number(le.currentTarget.value)]),disabled:ie},se.map((le,ue)=>React.createElement("option",{key:le,value:ue},le))),React.createElement(PresentationalSelect,null,ae.current),React.createElement(Chevron,{toggled:!0}))}function SelectComponent(){const{label:ne,value:_,displayValue:K,onUpdate:Z,id:te,disabled:ie,settings:se}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(Select,{id:te,value:_,displayValue:K,onUpdate:Z,settings:se,disabled:ie}))}var select=_objectSpread2({component:SelectComponent},props$2$1);const schema$1$1=ne=>v8n().string().test(ne),sanitize$1$1=ne=>{if(typeof ne!="string")throw Error("Invalid string");return ne},normalize$5=({value:ne,editable:_=!0,rows:K=!1})=>({value:ne,settings:{editable:_,rows:typeof K=="number"?K:K?5:0}});var props$1$1=Object.freeze({__proto__:null,schema:schema$1$1,sanitize:sanitize$1$1,normalize:normalize$5});const _excluded$2$1=["displayValue","onUpdate","onChange","editable"],NonEditableString=styled("div",{whiteSpace:"pre-wrap"});function String$1(ne){let{displayValue:_,onUpdate:K,onChange:Z,editable:te=!0}=ne,ie=_objectWithoutProperties$1(ne,_excluded$2$1);return te?React.createElement(ValueInput,_extends({value:_,onUpdate:K,onChange:Z},ie)):React.createElement(NonEditableString,null,_)}function StringComponent(){const{label:ne,settings:_,displayValue:K,onUpdate:Z,onChange:te}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(String$1,_extends({displayValue:K,onUpdate:Z,onChange:te},_)))}var string=_objectSpread2({component:StringComponent},props$1$1);const schema$4=ne=>v8n().boolean().test(ne),sanitize$5=ne=>{if(typeof ne!="boolean")throw Error("Invalid boolean");return ne};var props$4=Object.freeze({__proto__:null,schema:schema$4,sanitize:sanitize$5});const StyledInputWrapper=styled("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Boolean$1({value:ne,onUpdate:_,id:K,disabled:Z}){return React.createElement(StyledInputWrapper,null,React.createElement("input",{id:K,type:"checkbox",checked:ne,onChange:te=>_(te.currentTarget.checked),disabled:Z}),React.createElement("label",{htmlFor:K},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function BooleanComponent(){const{label:ne,value:_,onUpdate:K,disabled:Z,id:te}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(Boolean$1,{value:_,onUpdate:K,id:te,disabled:Z}))}var boolean=_objectSpread2({component:BooleanComponent},props$4);const _excluded$1$1=["locked"];function Coordinate({value:ne,id:_,valueKey:K,settings:Z,onUpdate:te,innerLabelTrim:ie}){const se=reactExports.useRef(ne[K]);se.current=ne[K];const oe=reactExports.useCallback(le=>te({[K]:sanitizeValue({type:"NUMBER",value:se.current,settings:Z},le)}),[te,Z,K]),ae=useInputSetters({type:"NUMBER",value:ne[K],settings:Z,setValue:oe});return React.createElement(Number$1,{id:_,label:K,value:ne[K],displayValue:ae.displayValue,onUpdate:ae.onUpdate,onChange:ae.onChange,settings:Z,innerLabelTrim:ie})}const Container$2=styled("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Lock(ne){let{locked:_}=ne,K=_objectWithoutProperties$1(ne,_excluded$1$1);return React.createElement("svg",_extends({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K),_?React.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):React.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Vector({value:ne,onUpdate:_,settings:K,innerLabelTrim:Z}){const{id:te,setSettings:ie}=useInputContext(),{lock:se,locked:oe}=K;return React.createElement(Container$2,{withLock:se},se&&React.createElement(Lock,{locked:oe,onClick:()=>ie({locked:!oe})}),Object.keys(ne).map((ae,le)=>React.createElement(Coordinate,{id:le===0?te:`${te}.${ae}`,key:ae,valueKey:ae,value:ne,settings:K[ae],onUpdate:_,innerLabelTrim:Z})))}const normalizeKeyedNumberSettings=(ne,_)=>{const K={};let Z=0,te=1/0;Object.entries(ne).forEach(([ie,se])=>{K[ie]=normalize$2$1(_objectSpread2({value:se},_[ie])).settings,Z=Math.max(Z,K[ie].step),te=Math.min(te,K[ie].pad)});for(let ie in K){const{step:se,min:oe,max:ae}=_[ie]||{};!isFinite(se)&&(!isFinite(oe)||!isFinite(ae))&&(K[ie].step=Z,K[ie].pad=te)}return K},_excluded$b=["lock"],_excluded2$5=["value"];function getVectorSchema(ne){const _=v8n().array().length(ne).every.number(),K=Z=>{if(!Z||typeof Z!="object")return!1;const te=Object.values(Z);return te.length===ne&&te.every(ie=>isFinite(ie))};return Z=>_.test(Z)||K(Z)}function getVectorType(ne){return Array.isArray(ne)?"array":"object"}function convert$1(ne,_,K){return getVectorType(ne)===_?ne:_==="array"?Object.values(ne):mapArrayToKeys(ne,K)}const sanitizeVector=(ne,_,K)=>{const Z=convert$1(ne,"object",_.keys);for(let se in Z)Z[se]=sanitize$3(Z[se],_[se]);const te=Object.keys(Z);let ie={};if(te.length===_.keys.length)ie=Z;else{const se=convert$1(K,"object",_.keys);if(te.length===1&&_.locked){const oe=te[0],ae=Z[oe],le=se[oe],ue=le!==0?ae/le:1;for(let fe in se)fe===oe?ie[oe]=ae:ie[fe]=se[fe]*ue}else ie=_objectSpread2(_objectSpread2({},se),Z)}return convert$1(ie,_.format,_.keys)},formatVector=(ne,_)=>convert$1(ne,"object",_.keys),isNumberSettings=ne=>!!ne&&("step"in ne||"min"in ne||"max"in ne);function normalizeVector(ne,_,K=[]){const{lock:Z=!1}=_,te=_objectWithoutProperties$1(_,_excluded$b),ie=Array.isArray(ne)?"array":"object",se=ie==="object"?Object.keys(ne):K,oe=convert$1(ne,"object",se),ae=isNumberSettings(te)?se.reduce((ue,fe)=>Object.assign(ue,{[fe]:te}),{}):te,le=normalizeKeyedNumberSettings(oe,ae);return{value:ie==="array"?ne:oe,settings:_objectSpread2(_objectSpread2({},le),{},{format:ie,keys:se,lock:Z,locked:!1})}}function getVectorPlugin(ne){return{schema:getVectorSchema(ne.length),normalize:_=>{let{value:K}=_,Z=_objectWithoutProperties$1(_,_excluded2$5);return normalizeVector(K,Z,ne)},format:(_,K)=>formatVector(_,K),sanitize:(_,K,Z)=>sanitizeVector(_,K,Z)}}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(ne){return typeof ne=="string"?ne.length>0:typeof ne=="number"},n=function(ne,_,K){return _===void 0&&(_=0),K===void 0&&(K=Math.pow(10,_)),Math.round(K*ne)/K+0},e=function(ne,_,K){return _===void 0&&(_=0),K===void 0&&(K=1),ne>K?K:ne>_?ne:_},u$1=function(ne){return(ne=isFinite(ne)?ne%360:0)>0?ne:ne+360},a=function(ne){return{r:e(ne.r,0,255),g:e(ne.g,0,255),b:e(ne.b,0,255),a:e(ne.a)}},o=function(ne){return{r:n(ne.r),g:n(ne.g),b:n(ne.b),a:n(ne.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s$1=function(ne){var _=ne.toString(16);return _.length<2?"0"+_:_},h$1=function(ne){var _=ne.r,K=ne.g,Z=ne.b,te=ne.a,ie=Math.max(_,K,Z),se=ie-Math.min(_,K,Z),oe=se?ie===_?(K-Z)/se:ie===K?2+(Z-_)/se:4+(_-K)/se:0;return{h:60*(oe<0?oe+6:oe),s:ie?se/ie*100:0,v:ie/255*100,a:te}},b$1=function(ne){var _=ne.h,K=ne.s,Z=ne.v,te=ne.a;_=_/360*6,K/=100,Z/=100;var ie=Math.floor(_),se=Z*(1-K),oe=Z*(1-(_-ie)*K),ae=Z*(1-(1-_+ie)*K),le=ie%6;return{r:255*[Z,oe,se,se,ae,Z][le],g:255*[ae,Z,Z,oe,se,se][le],b:255*[se,se,ae,Z,Z,oe][le],a:te}},g$1=function(ne){return{h:u$1(ne.h),s:e(ne.s,0,100),l:e(ne.l,0,100),a:e(ne.a)}},d$1=function(ne){return{h:n(ne.h),s:n(ne.s),l:n(ne.l),a:n(ne.a,3)}},f$1=function(ne){return b$1((K=(_=ne).s,{h:_.h,s:(K*=((Z=_.l)<50?Z:100-Z)/100)>0?2*K/(Z+K)*100:0,v:Z+K,a:_.a}));var _,K,Z},c$1=function(ne){return{h:(_=h$1(ne)).h,s:(te=(200-(K=_.s))*(Z=_.v)/100)>0&&te<200?K*Z/100/(te<=100?te:200-te)*100:0,l:te/2,a:_.a};var _,K,Z,te},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(ne){var _=i$1.exec(ne);return _?(ne=_[1]).length<=4?{r:parseInt(ne[0]+ne[0],16),g:parseInt(ne[1]+ne[1],16),b:parseInt(ne[2]+ne[2],16),a:ne.length===4?n(parseInt(ne[3]+ne[3],16)/255,2):1}:ne.length===6||ne.length===8?{r:parseInt(ne.substr(0,2),16),g:parseInt(ne.substr(2,2),16),b:parseInt(ne.substr(4,2),16),a:ne.length===8?n(parseInt(ne.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(ne){var _=v$1.exec(ne)||m$1.exec(ne);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(ne){var _=l.exec(ne)||p$1.exec(ne);if(!_)return null;var K,Z,te=g$1({h:(K=_[1],Z=_[2],Z===void 0&&(Z="deg"),Number(K)*(r[Z]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f$1(te)},"hsl"]],object:[[function(ne){var _=ne.r,K=ne.g,Z=ne.b,te=ne.a,ie=te===void 0?1:te;return t(_)&&t(K)&&t(Z)?a({r:Number(_),g:Number(K),b:Number(Z),a:Number(ie)}):null},"rgb"],[function(ne){var _=ne.h,K=ne.s,Z=ne.l,te=ne.a,ie=te===void 0?1:te;if(!t(_)||!t(K)||!t(Z))return null;var se=g$1({h:Number(_),s:Number(K),l:Number(Z),a:Number(ie)});return f$1(se)},"hsl"],[function(ne){var _=ne.h,K=ne.s,Z=ne.v,te=ne.a,ie=te===void 0?1:te;if(!t(_)||!t(K)||!t(Z))return null;var se=(function(oe){return{h:u$1(oe.h),s:e(oe.s,0,100),v:e(oe.v,0,100),a:e(oe.a)}})({h:Number(_),s:Number(K),v:Number(Z),a:Number(ie)});return b$1(se)},"hsv"]]},N=function(ne,_){for(var K=0;K<_.length;K++){var Z=_[K][0](ne);if(Z)return[Z,_[K][1]]}return[null,void 0]},x=function(ne){return typeof ne=="string"?N(ne.trim(),y$1.string):typeof ne=="object"&&ne!==null?N(ne,y$1.object):[null,void 0]},I$1=function(ne){return x(ne)[1]},M=function(ne,_){var K=c$1(ne);return{h:K.h,s:e(K.s+100*_,0,100),l:K.l,a:K.a}},H=function(ne){return(299*ne.r+587*ne.g+114*ne.b)/1e3/255},$$1=function(ne,_){var K=c$1(ne);return{h:K.h,s:K.s,l:e(K.l+100*_,0,100),a:K.a}},j=(function(){function ne(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return ne.prototype.isValid=function(){return this.parsed!==null},ne.prototype.brightness=function(){return n(H(this.rgba),2)},ne.prototype.isDark=function(){return H(this.rgba)<.5},ne.prototype.isLight=function(){return H(this.rgba)>=.5},ne.prototype.toHex=function(){return _=o(this.rgba),K=_.r,Z=_.g,te=_.b,se=(ie=_.a)<1?s$1(n(255*ie)):"","#"+s$1(K)+s$1(Z)+s$1(te)+se;var _,K,Z,te,ie,se},ne.prototype.toRgb=function(){return o(this.rgba)},ne.prototype.toRgbString=function(){return _=o(this.rgba),K=_.r,Z=_.g,te=_.b,(ie=_.a)<1?"rgba("+K+", "+Z+", "+te+", "+ie+")":"rgb("+K+", "+Z+", "+te+")";var _,K,Z,te,ie},ne.prototype.toHsl=function(){return d$1(c$1(this.rgba))},ne.prototype.toHslString=function(){return _=d$1(c$1(this.rgba)),K=_.h,Z=_.s,te=_.l,(ie=_.a)<1?"hsla("+K+", "+Z+"%, "+te+"%, "+ie+")":"hsl("+K+", "+Z+"%, "+te+"%)";var _,K,Z,te,ie},ne.prototype.toHsv=function(){return _=h$1(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},ne.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},ne.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},ne.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},ne.prototype.grayscale=function(){return w(M(this.rgba,-1))},ne.prototype.lighten=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,_))},ne.prototype.darken=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,-_))},ne.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},ne.prototype.alpha=function(_){return typeof _=="number"?w({r:(K=this.rgba).r,g:K.g,b:K.b,a:_}):n(this.rgba.a,3);var K},ne.prototype.hue=function(_){var K=c$1(this.rgba);return typeof _=="number"?w({h:_,s:K.s,l:K.l,a:K.a}):n(K.h)},ne.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},ne})(),w=function(ne){return ne instanceof j?ne:new j(ne)},S$1=[],k$1=function(ne){ne.forEach(function(_){S$1.indexOf(_)<0&&(_(j,y$1),S$1.push(_))})};function namesPlugin(ne,_){var K={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},Z={};for(var te in K)Z[K[te]]=te;var ie={};ne.prototype.toName=function(se){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var oe,ae,le=Z[this.toHex()];if(le)return le;if(se?.closest){var ue=this.toRgb(),fe=1/0,he="black";if(!ie.length)for(var ge in K)ie[ge]=new ne(K[ge]).toRgb();for(var _e in K){var Se=(oe=ue,ae=ie[_e],Math.pow(oe.r-ae.r,2)+Math.pow(oe.g-ae.g,2)+Math.pow(oe.b-ae.b,2));Se<fe&&(fe=Se,he=_e)}return he}},_.string.push([function(se){var oe=se.toLowerCase(),ae=oe==="transparent"?"#0000":K[oe];return ae?new ne(ae).toRgb():null},"name"])}function u(){return(u=Object.assign||function(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_];for(var Z in K)Object.prototype.hasOwnProperty.call(K,Z)&&(ne[Z]=K[Z])}return ne}).apply(this,arguments)}function c(ne,_){if(ne==null)return{};var K,Z,te={},ie=Object.keys(ne);for(Z=0;Z<ie.length;Z++)_.indexOf(K=ie[Z])>=0||(te[K]=ne[K]);return te}function i(ne){var _=reactExports.useRef(ne),K=reactExports.useRef(function(Z){_.current&&_.current(Z)});return _.current=ne,K.current}var s=function(ne,_,K){return _===void 0&&(_=0),K===void 0&&(K=1),ne>K?K:ne<_?_:ne},f=function(ne){return"touches"in ne},v=function(ne){return ne&&ne.ownerDocument.defaultView||self},d=function(ne,_,K){var Z=ne.getBoundingClientRect(),te=f(_)?(function(ie,se){for(var oe=0;oe<ie.length;oe++)if(ie[oe].identifier===se)return ie[oe];return ie[0]})(_.touches,K):_;return{left:s((te.pageX-(Z.left+v(ne).pageXOffset))/Z.width),top:s((te.pageY-(Z.top+v(ne).pageYOffset))/Z.height)}},h=function(ne){!f(ne)&&ne.preventDefault()},m=React.memo(function(ne){var _=ne.onMove,K=ne.onKey,Z=c(ne,["onMove","onKey"]),te=reactExports.useRef(null),ie=i(_),se=i(K),oe=reactExports.useRef(null),ae=reactExports.useRef(!1),le=reactExports.useMemo(function(){var ge=function(Ee){h(Ee),(f(Ee)?Ee.touches.length>0:Ee.buttons>0)&&te.current?ie(d(te.current,Ee,oe.current)):Se(!1)},_e=function(){return Se(!1)};function Se(Ee){var ye=ae.current,be=v(te.current),we=Ee?be.addEventListener:be.removeEventListener;we(ye?"touchmove":"mousemove",ge),we(ye?"touchend":"mouseup",_e)}return[function(Ee){var ye=Ee.nativeEvent,be=te.current;if(be&&(h(ye),!(function(Pe,Oe){return Oe&&!f(Pe)})(ye,ae.current)&&be)){if(f(ye)){ae.current=!0;var we=ye.changedTouches||[];we.length&&(oe.current=we[0].identifier)}be.focus(),ie(d(be,ye,oe.current)),Se(!0)}},function(Ee){var ye=Ee.which||Ee.keyCode;ye<37||ye>40||(Ee.preventDefault(),se({left:ye===39?.05:ye===37?-.05:0,top:ye===40?.05:ye===38?-.05:0}))},Se]},[se,ie]),ue=le[0],fe=le[1],he=le[2];return reactExports.useEffect(function(){return he},[he]),React.createElement("div",u({},Z,{onTouchStart:ue,onMouseDown:ue,className:"react-colorful__interactive",ref:te,onKeyDown:fe,tabIndex:0,role:"slider"}))}),g=function(ne){return ne.filter(Boolean).join(" ")},p=function(ne){var _=ne.color,K=ne.left,Z=ne.top,te=Z===void 0?.5:Z,ie=g(["react-colorful__pointer",ne.className]);return React.createElement("div",{className:ie,style:{top:100*te+"%",left:100*K+"%"}},React.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:_}}))},b=function(ne,_,K){return _===void 0&&(_=0),K===void 0&&(K=Math.pow(10,_)),Math.round(K*ne)/K},y=function(ne){var _=ne.s,K=ne.v,Z=ne.a,te=(200-_)*K/100;return{h:b(ne.h),s:b(te>0&&te<200?_*K/100/(te<=100?te:200-te)*100:0),l:b(te/2),a:b(Z,2)}},q=function(ne){var _=y(ne);return"hsl("+_.h+", "+_.s+"%, "+_.l+"%)"},k=function(ne){var _=y(ne);return"hsla("+_.h+", "+_.s+"%, "+_.l+"%, "+_.a+")"},I=function(ne){var _=ne.h,K=ne.s,Z=ne.v,te=ne.a;_=_/360*6,K/=100,Z/=100;var ie=Math.floor(_),se=Z*(1-K),oe=Z*(1-(_-ie)*K),ae=Z*(1-(1-_+ie)*K),le=ie%6;return{r:b(255*[Z,oe,se,se,ae,Z][le]),g:b(255*[ae,Z,Z,oe,se,se][le]),b:b(255*[se,se,ae,Z,Z,oe][le]),a:b(te,2)}},L=function(ne){var _=ne.r,K=ne.g,Z=ne.b,te=ne.a,ie=Math.max(_,K,Z),se=ie-Math.min(_,K,Z),oe=se?ie===_?(K-Z)/se:ie===K?2+(Z-_)/se:4+(_-K)/se:0;return{h:b(60*(oe<0?oe+6:oe)),s:b(ie?se/ie*100:0),v:b(ie/255*100),a:te}},S=React.memo(function(ne){var _=ne.hue,K=ne.onChange,Z=g(["react-colorful__hue",ne.className]);return React.createElement("div",{className:Z},React.createElement(m,{onMove:function(te){K({h:360*te.left})},onKey:function(te){K({h:s(_+360*te.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(_),"aria-valuemax":"360","aria-valuemin":"0"},React.createElement(p,{className:"react-colorful__hue-pointer",left:_/360,color:q({h:_,s:100,v:100,a:1})})))}),T=React.memo(function(ne){var _=ne.hsva,K=ne.onChange,Z={backgroundColor:q({h:_.h,s:100,v:100,a:1})};return React.createElement("div",{className:"react-colorful__saturation",style:Z},React.createElement(m,{onMove:function(te){K({s:100*te.left,v:100-100*te.top})},onKey:function(te){K({s:s(_.s+100*te.left,0,100),v:s(_.v-100*te.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(_.s)+"%, Brightness "+b(_.v)+"%"},React.createElement(p,{className:"react-colorful__saturation-pointer",top:1-_.v/100,left:_.s/100,color:q(_)})))}),F=function(ne,_){if(ne===_)return!0;for(var K in ne)if(ne[K]!==_[K])return!1;return!0};function Y(ne,_,K){var Z=i(K),te=reactExports.useState(function(){return ne.toHsva(_)}),ie=te[0],se=te[1],oe=reactExports.useRef({color:_,hsva:ie});reactExports.useEffect(function(){if(!ne.equal(_,oe.current.color)){var le=ne.toHsva(_);oe.current={hsva:le,color:_},se(le)}},[_,ne]),reactExports.useEffect(function(){var le;F(ie,oe.current.hsva)||ne.equal(le=ne.fromHsva(ie),oe.current.color)||(oe.current={hsva:ie,color:le},Z(le))},[ie,ne,Z]);var ae=reactExports.useCallback(function(le){se(function(ue){return Object.assign({},ue,le)})},[]);return[ie,ae]}var V=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},J=new Map,Q=function(ne){V(function(){var _=ne.current?ne.current.ownerDocument:document;if(_!==void 0&&!J.has(_)){var K=_.createElement("style");K.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,J.set(_,K);var Z=$();Z&&K.setAttribute("nonce",Z),_.head.appendChild(K)}},[])},U=function(ne){var _=ne.className,K=ne.colorModel,Z=ne.color,te=Z===void 0?K.defaultColor:Z,ie=ne.onChange,se=c(ne,["className","colorModel","color","onChange"]),oe=reactExports.useRef(null);Q(oe);var ae=Y(K,te,ie),le=ae[0],ue=ae[1],fe=g(["react-colorful",_]);return React.createElement("div",u({},se,{ref:oe,className:fe}),React.createElement(T,{hsva:le,onChange:ue}),React.createElement(S,{hue:le.h,onChange:ue,className:"react-colorful__last-control"}))},ee=function(ne){var _=ne.className,K=ne.hsva,Z=ne.onChange,te={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},K,{a:0}))+", "+k(Object.assign({},K,{a:1}))+")"},ie=g(["react-colorful__alpha",_]),se=b(100*K.a);return React.createElement("div",{className:ie},React.createElement("div",{className:"react-colorful__alpha-gradient",style:te}),React.createElement(m,{onMove:function(oe){Z({a:oe.left})},onKey:function(oe){Z({a:s(K.a+oe.left)})},"aria-label":"Alpha","aria-valuetext":se+"%","aria-valuenow":se,"aria-valuemin":"0","aria-valuemax":"100"},React.createElement(p,{className:"react-colorful__alpha-pointer",left:K.a,color:k(K)})))},re=function(ne){var _=ne.className,K=ne.colorModel,Z=ne.color,te=Z===void 0?K.defaultColor:Z,ie=ne.onChange,se=c(ne,["className","colorModel","color","onChange"]),oe=reactExports.useRef(null);Q(oe);var ae=Y(K,te,ie),le=ae[0],ue=ae[1],fe=g(["react-colorful",_]);return React.createElement("div",u({},se,{ref:oe,className:fe}),React.createElement(T,{hsva:le,onChange:ue}),React.createElement(S,{hue:le.h,onChange:ue}),React.createElement(ee,{hsva:le,onChange:ue,className:"react-colorful__last-control"}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(ne){return React.createElement(re,u({},ne,{colorModel:xe}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(ne){return L({r:ne.r,g:ne.g,b:ne.b,a:1})},fromHsva:function(ne){return{r:(_=I(ne)).r,g:_.g,b:_.b};var _},equal:F},Ne=function(ne){return React.createElement(U,u({},ne,{colorModel:Me}))};function __awaiter(ne,_,K,Z){function te(ie){return ie instanceof K?ie:new K(function(se){se(ie)})}return new(K||(K=Promise))(function(ie,se){function oe(ue){try{le(Z.next(ue))}catch(fe){se(fe)}}function ae(ue){try{le(Z.throw(ue))}catch(fe){se(fe)}}function le(ue){ue.done?ie(ue.value):te(ue.value).then(oe,ae)}le((Z=Z.apply(ne,_||[])).next())})}function __generator(ne,_){var K={label:0,sent:function(){if(ie[0]&1)throw ie[1];return ie[1]},trys:[],ops:[]},Z,te,ie,se=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return se.next=oe(0),se.throw=oe(1),se.return=oe(2),typeof Symbol=="function"&&(se[Symbol.iterator]=function(){return this}),se;function oe(le){return function(ue){return ae([le,ue])}}function ae(le){if(Z)throw new TypeError("Generator is already executing.");for(;se&&(se=0,le[0]&&(K=0)),K;)try{if(Z=1,te&&(ie=le[0]&2?te.return:le[0]?te.throw||((ie=te.return)&&ie.call(te),0):te.next)&&!(ie=ie.call(te,le[1])).done)return ie;switch(te=0,ie&&(le=[le[0]&2,ie.value]),le[0]){case 0:case 1:ie=le;break;case 4:return K.label++,{value:le[1],done:!1};case 5:K.label++,te=le[1],le=[0];continue;case 7:le=K.ops.pop(),K.trys.pop();continue;default:if(ie=K.trys,!(ie=ie.length>0&&ie[ie.length-1])&&(le[0]===6||le[0]===2)){K=0;continue}if(le[0]===3&&(!ie||le[1]>ie[0]&&le[1]<ie[3])){K.label=le[1];break}if(le[0]===6&&K.label<ie[1]){K.label=ie[1],ie=le;break}if(ie&&K.label<ie[2]){K.label=ie[2],K.ops.push(le);break}ie[2]&&K.ops.pop(),K.trys.pop();continue}le=_.call(ne,K)}catch(ue){le=[6,ue],te=0}finally{Z=ie=0}if(le[0]&5)throw le[1];return{value:le[0]?le[1]:void 0,done:!0}}}function __read(ne,_){var K=typeof Symbol=="function"&&ne[Symbol.iterator];if(!K)return ne;var Z=K.call(ne),te,ie=[],se;try{for(;(_===void 0||_-- >0)&&!(te=Z.next()).done;)ie.push(te.value)}catch(oe){se={error:oe}}finally{try{te&&!te.done&&(K=Z.return)&&K.call(Z)}finally{if(se)throw se.error}}return ie}function __spread(){for(var ne=[],_=0;_<arguments.length;_++)ne=ne.concat(__read(arguments[_]));return ne}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(ne,_){var K=withMimeType(ne);if(typeof K.path!="string"){var Z=ne.webkitRelativePath;Object.defineProperty(K,"path",{value:typeof _=="string"?_:typeof Z=="string"&&Z.length>0?Z:ne.name,writable:!1,configurable:!1,enumerable:!0})}return K}function withMimeType(ne){var _=ne.name,K=_&&_.lastIndexOf(".")!==-1;if(K&&!ne.type){var Z=_.split(".").pop().toLowerCase(),te=COMMON_MIME_TYPES.get(Z);te&&Object.defineProperty(ne,"type",{value:te,writable:!1,configurable:!1,enumerable:!0})}return ne}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(ne){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return isObject(ne)&&isDataTransfer(ne)?[2,getDataTransferFiles(ne.dataTransfer,ne.type)]:isChangeEvt(ne)?[2,getInputFiles(ne)]:Array.isArray(ne)&&ne.every(function(K){return"getFile"in K&&typeof K.getFile=="function"})?[2,getFsHandleFiles(ne)]:[2,[]]})})}function isDataTransfer(ne){return isObject(ne.dataTransfer)}function isChangeEvt(ne){return isObject(ne)&&isObject(ne.target)}function isObject(ne){return typeof ne=="object"&&ne!==null}function getInputFiles(ne){return fromList(ne.target.files).map(function(_){return toFileWithPath(_)})}function getFsHandleFiles(ne){return __awaiter(this,void 0,void 0,function(){var _;return __generator(this,function(K){switch(K.label){case 0:return[4,Promise.all(ne.map(function(Z){return Z.getFile()}))];case 1:return _=K.sent(),[2,_.map(function(Z){return toFileWithPath(Z)})]}})})}function getDataTransferFiles(ne,_){return __awaiter(this,void 0,void 0,function(){var K,Z;return __generator(this,function(te){switch(te.label){case 0:return ne===null?[2,[]]:ne.items?(K=fromList(ne.items).filter(function(ie){return ie.kind==="file"}),_!=="drop"?[2,K]:[4,Promise.all(K.map(toFilePromises))]):[3,2];case 1:return Z=te.sent(),[2,noIgnoredFiles(flatten(Z))];case 2:return[2,noIgnoredFiles(fromList(ne.files).map(function(ie){return toFileWithPath(ie)}))]}})})}function noIgnoredFiles(ne){return ne.filter(function(_){return FILES_TO_IGNORE.indexOf(_.name)===-1})}function fromList(ne){if(ne===null)return[];for(var _=[],K=0;K<ne.length;K++){var Z=ne[K];_.push(Z)}return _}function toFilePromises(ne){if(typeof ne.webkitGetAsEntry!="function")return fromDataTransferItem(ne);var _=ne.webkitGetAsEntry();return _&&_.isDirectory?fromDirEntry(_):fromDataTransferItem(ne)}function flatten(ne){return ne.reduce(function(_,K){return __spread(_,Array.isArray(K)?flatten(K):[K])},[])}function fromDataTransferItem(ne){var _=ne.getAsFile();if(!_)return Promise.reject(ne+" is not a File");var K=toFileWithPath(_);return Promise.resolve(K)}function fromEntry(ne){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,ne.isDirectory?fromDirEntry(ne):fromFileEntry(ne)]})})}function fromDirEntry(ne){var _=ne.createReader();return new Promise(function(K,Z){var te=[];function ie(){var se=this;_.readEntries(function(oe){return __awaiter(se,void 0,void 0,function(){var ae,le,ue;return __generator(this,function(fe){switch(fe.label){case 0:if(oe.length)return[3,5];fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,Promise.all(te)];case 2:return ae=fe.sent(),K(ae),[3,4];case 3:return le=fe.sent(),Z(le),[3,4];case 4:return[3,6];case 5:ue=Promise.all(oe.map(fromEntry)),te.push(ue),ie(),fe.label=6;case 6:return[2]}})})},function(oe){Z(oe)})}ie()})}function fromFileEntry(ne){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,new Promise(function(K,Z){ne.file(function(te){var ie=toFileWithPath(te,ne.fullPath);K(ie)},function(te){Z(te)})})]})})}var es={},hasRequiredEs;function requireEs(){return hasRequiredEs||(hasRequiredEs=1,es.__esModule=!0,es.default=function(ne,_){if(ne&&_){var K=Array.isArray(_)?_:_.split(",");if(K.length===0)return!0;var Z=ne.name||"",te=(ne.type||"").toLowerCase(),ie=te.replace(/\/.*$/,"");return K.some(function(se){var oe=se.trim().toLowerCase();return oe.charAt(0)==="."?Z.toLowerCase().endsWith(oe):oe.endsWith("/*")?ie===oe.replace(/\/.*$/,""):te===oe})}return!0}),es}var esExports=requireEs();const accepts=getDefaultExportFromCjs(esExports);function ownKeys$1(ne,_){var K=Object.keys(ne);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ne);_&&(Z=Z.filter(function(te){return Object.getOwnPropertyDescriptor(ne,te).enumerable})),K.push.apply(K,Z)}return K}function _objectSpread$1(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(K),!0).forEach(function(Z){_defineProperty$1(ne,Z,K[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(K)):ownKeys$1(Object(K)).forEach(function(Z){Object.defineProperty(ne,Z,Object.getOwnPropertyDescriptor(K,Z))})}return ne}function _defineProperty$1(ne,_,K){return _ in ne?Object.defineProperty(ne,_,{value:K,enumerable:!0,configurable:!0,writable:!0}):ne[_]=K,ne}function _slicedToArray$1(ne,_){return _arrayWithHoles$1(ne)||_iterableToArrayLimit$1(ne,_)||_unsupportedIterableToArray$1(ne,_)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(ne,_){if(ne){if(typeof ne=="string")return _arrayLikeToArray$1(ne,_);var K=Object.prototype.toString.call(ne).slice(8,-1);if(K==="Object"&&ne.constructor&&(K=ne.constructor.name),K==="Map"||K==="Set")return Array.from(ne);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return _arrayLikeToArray$1(ne,_)}}function _arrayLikeToArray$1(ne,_){(_==null||_>ne.length)&&(_=ne.length);for(var K=0,Z=new Array(_);K<_;K++)Z[K]=ne[K];return Z}function _iterableToArrayLimit$1(ne,_){var K=ne==null?null:typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(K!=null){var Z=[],te=!0,ie=!1,se,oe;try{for(K=K.call(ne);!(te=(se=K.next()).done)&&(Z.push(se.value),!(_&&Z.length===_));te=!0);}catch(ae){ie=!0,oe=ae}finally{try{!te&&K.return!=null&&K.return()}finally{if(ie)throw oe}}return Z}}function _arrayWithHoles$1(ne){if(Array.isArray(ne))return ne}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(_){_=Array.isArray(_)&&_.length===1?_[0]:_;var K=Array.isArray(_)?"one of ".concat(_.join(", ")):_;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(K)}},getTooLargeRejectionErr=function(_){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(_," ").concat(_===1?"byte":"bytes")}},getTooSmallRejectionErr=function(_){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(_," ").concat(_===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(ne,_){var K=ne.type==="application/x-moz-file"||accepts(ne,_);return[K,K?null:getInvalidTypeRejectionErr(_)]}function fileMatchSize(ne,_,K){if(isDefined(ne.size))if(isDefined(_)&&isDefined(K)){if(ne.size>K)return[!1,getTooLargeRejectionErr(K)];if(ne.size<_)return[!1,getTooSmallRejectionErr(_)]}else{if(isDefined(_)&&ne.size<_)return[!1,getTooSmallRejectionErr(_)];if(isDefined(K)&&ne.size>K)return[!1,getTooLargeRejectionErr(K)]}return[!0,null]}function isDefined(ne){return ne!=null}function allFilesAccepted(ne){var _=ne.files,K=ne.accept,Z=ne.minSize,te=ne.maxSize,ie=ne.multiple,se=ne.maxFiles;return!ie&&_.length>1||ie&&se>=1&&_.length>se?!1:_.every(function(oe){var ae=fileAccepted(oe,K),le=_slicedToArray$1(ae,1),ue=le[0],fe=fileMatchSize(oe,Z,te),he=_slicedToArray$1(fe,1),ge=he[0];return ue&&ge})}function isPropagationStopped(ne){return typeof ne.isPropagationStopped=="function"?ne.isPropagationStopped():typeof ne.cancelBubble<"u"?ne.cancelBubble:!1}function isEvtWithFiles(ne){return ne.dataTransfer?Array.prototype.some.call(ne.dataTransfer.types,function(_){return _==="Files"||_==="application/x-moz-file"}):!!ne.target&&!!ne.target.files}function onDocumentDragOver(ne){ne.preventDefault()}function isIe(ne){return ne.indexOf("MSIE")!==-1||ne.indexOf("Trident/")!==-1}function isEdge(ne){return ne.indexOf("Edge/")!==-1}function isIeOrEdge(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(ne)||isEdge(ne)}function composeEventHandlers(){for(var ne=arguments.length,_=new Array(ne),K=0;K<ne;K++)_[K]=arguments[K];return function(Z){for(var te=arguments.length,ie=new Array(te>1?te-1:0),se=1;se<te;se++)ie[se-1]=arguments[se];return _.some(function(oe){return!isPropagationStopped(Z)&&oe&&oe.apply(void 0,[Z].concat(ie)),isPropagationStopped(Z)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function filePickerOptionsTypes(ne){return ne=typeof ne=="string"?ne.split(","):ne,[{description:"everything",accept:Array.isArray(ne)?ne.filter(function(_){return _==="audio/*"||_==="video/*"||_==="image/*"||_==="text/*"||/\w+\/[-+.\w]+/g.test(_)}).reduce(function(_,K){return _objectSpread$1(_objectSpread$1({},_),{},_defineProperty$1({},K,[]))},{}):{}}]}function isAbort(ne){return ne instanceof DOMException&&(ne.name==="AbortError"||ne.code===ne.ABORT_ERR)}function isSecurityError(ne){return ne instanceof DOMException&&(ne.name==="SecurityError"||ne.code===ne.SECURITY_ERR)}var _excluded=["children"],_excluded2$2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(ne){return _arrayWithoutHoles(ne)||_iterableToArray(ne)||_unsupportedIterableToArray(ne)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(ne){if(typeof Symbol<"u"&&ne[Symbol.iterator]!=null||ne["@@iterator"]!=null)return Array.from(ne)}function _arrayWithoutHoles(ne){if(Array.isArray(ne))return _arrayLikeToArray(ne)}function _slicedToArray(ne,_){return _arrayWithHoles(ne)||_iterableToArrayLimit(ne,_)||_unsupportedIterableToArray(ne,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(ne,_){if(ne){if(typeof ne=="string")return _arrayLikeToArray(ne,_);var K=Object.prototype.toString.call(ne).slice(8,-1);if(K==="Object"&&ne.constructor&&(K=ne.constructor.name),K==="Map"||K==="Set")return Array.from(ne);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return _arrayLikeToArray(ne,_)}}function _arrayLikeToArray(ne,_){(_==null||_>ne.length)&&(_=ne.length);for(var K=0,Z=new Array(_);K<_;K++)Z[K]=ne[K];return Z}function _iterableToArrayLimit(ne,_){var K=ne==null?null:typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(K!=null){var Z=[],te=!0,ie=!1,se,oe;try{for(K=K.call(ne);!(te=(se=K.next()).done)&&(Z.push(se.value),!(_&&Z.length===_));te=!0);}catch(ae){ie=!0,oe=ae}finally{try{!te&&K.return!=null&&K.return()}finally{if(ie)throw oe}}return Z}}function _arrayWithHoles(ne){if(Array.isArray(ne))return ne}function ownKeys(ne,_){var K=Object.keys(ne);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ne);_&&(Z=Z.filter(function(te){return Object.getOwnPropertyDescriptor(ne,te).enumerable})),K.push.apply(K,Z)}return K}function _objectSpread(ne){for(var _=1;_<arguments.length;_++){var K=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(K),!0).forEach(function(Z){_defineProperty(ne,Z,K[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(K)):ownKeys(Object(K)).forEach(function(Z){Object.defineProperty(ne,Z,Object.getOwnPropertyDescriptor(K,Z))})}return ne}function _defineProperty(ne,_,K){return _ in ne?Object.defineProperty(ne,_,{value:K,enumerable:!0,configurable:!0,writable:!0}):ne[_]=K,ne}function _objectWithoutProperties(ne,_){if(ne==null)return{};var K=_objectWithoutPropertiesLoose(ne,_),Z,te;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(ne);for(te=0;te<ie.length;te++)Z=ie[te],!(_.indexOf(Z)>=0)&&Object.prototype.propertyIsEnumerable.call(ne,Z)&&(K[Z]=ne[Z])}return K}function _objectWithoutPropertiesLoose(ne,_){if(ne==null)return{};var K={},Z=Object.keys(ne),te,ie;for(ie=0;ie<Z.length;ie++)te=Z[ie],!(_.indexOf(te)>=0)&&(K[te]=ne[te]);return K}var Dropzone=reactExports.forwardRef(function(ne,_){var K=ne.children,Z=_objectWithoutProperties(ne,_excluded),te=useDropzone(Z),ie=te.open,se=_objectWithoutProperties(te,_excluded2$2);return reactExports.useImperativeHandle(_,function(){return{open:ie}},[ie]),React.createElement(reactExports.Fragment,null,K(_objectSpread(_objectSpread({},se),{},{open:ie})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function useDropzone(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=_objectSpread(_objectSpread({},defaultProps),ne),K=_.accept,Z=_.disabled,te=_.getFilesFromEvent,ie=_.maxSize,se=_.minSize,oe=_.multiple,ae=_.maxFiles,le=_.onDragEnter,ue=_.onDragLeave,fe=_.onDragOver,he=_.onDrop,ge=_.onDropAccepted,_e=_.onDropRejected,Se=_.onFileDialogCancel,Ee=_.onFileDialogOpen,ye=_.useFsAccessApi,be=_.preventDropOnDocument,we=_.noClick,Pe=_.noKeyboard,Oe=_.noDrag,Be=_.noDragEventsBubbling,Ue=_.validator,$e=reactExports.useMemo(function(){return typeof Ee=="function"?Ee:noop},[Ee]),De=reactExports.useMemo(function(){return typeof Se=="function"?Se:noop},[Se]),ke=reactExports.useRef(null),Ge=reactExports.useRef(null),Je=reactExports.useReducer(reducer,initialState),Ye=_slicedToArray(Je,2),Qe=Ye[0],rt=Ye[1],ot=Qe.isFocused,ct=Qe.isFileDialogActive,je=Qe.draggedFiles,st=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&ye&&canUseFileSystemAccessAPI()),nt=function(){!st.current&&ct&&setTimeout(function(){if(Ge.current){var Ve=Ge.current.files;Ve.length||(rt({type:"closeDialog"}),De())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",nt,!1),function(){window.removeEventListener("focus",nt,!1)}},[Ge,ct,De,st]);var qe=reactExports.useRef([]),lt=function(Ve){ke.current&&ke.current.contains(Ve.target)||(Ve.preventDefault(),qe.current=[])};reactExports.useEffect(function(){return be&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",lt,!1)),function(){be&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",lt))}},[ke,be]);var Pt=reactExports.useCallback(function(We){We.preventDefault(),We.persist(),Vt(We),qe.current=[].concat(_toConsumableArray(qe.current),[We.target]),isEvtWithFiles(We)&&Promise.resolve(te(We)).then(function(Ve){isPropagationStopped(We)&&!Be||(rt({draggedFiles:Ve,isDragActive:!0,type:"setDraggedFiles"}),le&&le(We))})},[te,le,Be]),Gt=reactExports.useCallback(function(We){We.preventDefault(),We.persist(),Vt(We);var Ve=isEvtWithFiles(We);if(Ve&&We.dataTransfer)try{We.dataTransfer.dropEffect="copy"}catch{}return Ve&&fe&&fe(We),!1},[fe,Be]),pt=reactExports.useCallback(function(We){We.preventDefault(),We.persist(),Vt(We);var Ve=qe.current.filter(function(Et){return ke.current&&ke.current.contains(Et)}),ft=Ve.indexOf(We.target);ft!==-1&&Ve.splice(ft,1),qe.current=Ve,!(Ve.length>0)&&(rt({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),isEvtWithFiles(We)&&ue&&ue(We))},[ke,ue,Be]),yt=reactExports.useCallback(function(We,Ve){var ft=[],Et=[];We.forEach(function(Ft){var Ct=fileAccepted(Ft,K),un=_slicedToArray(Ct,2),Yt=un[0],fn=un[1],gn=fileMatchSize(Ft,se,ie),$t=_slicedToArray(gn,2),mt=$t[0],xt=$t[1],Xe=Ue?Ue(Ft):null;if(Yt&&mt&&!Xe)ft.push(Ft);else{var at=[fn,xt];Xe&&(at=at.concat(Xe)),Et.push({file:Ft,errors:at.filter(function(At){return At})})}}),(!oe&&ft.length>1||oe&&ae>=1&&ft.length>ae)&&(ft.forEach(function(Ft){Et.push({file:Ft,errors:[TOO_MANY_FILES_REJECTION]})}),ft.splice(0)),rt({acceptedFiles:ft,fileRejections:Et,type:"setFiles"}),he&&he(ft,Et,Ve),Et.length>0&&_e&&_e(Et,Ve),ft.length>0&&ge&&ge(ft,Ve)},[rt,oe,K,se,ie,ae,he,ge,_e,Ue]),Bt=reactExports.useCallback(function(We){We.preventDefault(),We.persist(),Vt(We),qe.current=[],isEvtWithFiles(We)&&Promise.resolve(te(We)).then(function(Ve){isPropagationStopped(We)&&!Be||yt(Ve,We)}),rt({type:"reset"})},[te,yt,Be]),Wt=reactExports.useCallback(function(){if(st.current){rt({type:"openDialog"}),$e();var We={multiple:oe,types:filePickerOptionsTypes(K)};window.showOpenFilePicker(We).then(function(Ve){return te(Ve)}).then(function(Ve){yt(Ve,null),rt({type:"closeDialog"})}).catch(function(Ve){isAbort(Ve)?(De(Ve),rt({type:"closeDialog"})):isSecurityError(Ve)&&(st.current=!1,Ge.current&&(Ge.current.value=null,Ge.current.click()))});return}Ge.current&&(rt({type:"openDialog"}),$e(),Ge.current.value=null,Ge.current.click())},[rt,$e,De,ye,yt,K,oe]),jt=reactExports.useCallback(function(We){!ke.current||!ke.current.isEqualNode(We.target)||(We.key===" "||We.key==="Enter"||We.keyCode===32||We.keyCode===13)&&(We.preventDefault(),Wt())},[ke,Wt]),nn=reactExports.useCallback(function(){rt({type:"focus"})},[]),an=reactExports.useCallback(function(){rt({type:"blur"})},[]),mn=reactExports.useCallback(function(){we||(isIeOrEdge()?setTimeout(Wt,0):Wt())},[we,Wt]),tt=function(Ve){return Z?null:Ve},Ut=function(Ve){return Pe?null:tt(Ve)},Dt=function(Ve){return Oe?null:tt(Ve)},Vt=function(Ve){Be&&Ve.stopPropagation()},It=reactExports.useMemo(function(){return function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ve=We.refKey,ft=Ve===void 0?"ref":Ve,Et=We.role,Ft=We.onKeyDown,Ct=We.onFocus,un=We.onBlur,Yt=We.onClick,fn=We.onDragEnter,gn=We.onDragOver,$t=We.onDragLeave,mt=We.onDrop,xt=_objectWithoutProperties(We,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:Ut(composeEventHandlers(Ft,jt)),onFocus:Ut(composeEventHandlers(Ct,nn)),onBlur:Ut(composeEventHandlers(un,an)),onClick:tt(composeEventHandlers(Yt,mn)),onDragEnter:Dt(composeEventHandlers(fn,Pt)),onDragOver:Dt(composeEventHandlers(gn,Gt)),onDragLeave:Dt(composeEventHandlers($t,pt)),onDrop:Dt(composeEventHandlers(mt,Bt)),role:typeof Et=="string"&&Et!==""?Et:"button"},ft,ke),!Z&&!Pe?{tabIndex:0}:{}),xt)}},[ke,jt,nn,an,mn,Pt,Gt,pt,Bt,Pe,Oe,Z]),Qt=reactExports.useCallback(function(We){We.stopPropagation()},[]),kt=reactExports.useMemo(function(){return function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ve=We.refKey,ft=Ve===void 0?"ref":Ve,Et=We.onChange,Ft=We.onClick,Ct=_objectWithoutProperties(We,_excluded4),un=_defineProperty({accept:K,multiple:oe,type:"file",style:{display:"none"},onChange:tt(composeEventHandlers(Et,Bt)),onClick:tt(composeEventHandlers(Ft,Qt)),tabIndex:-1},ft,Ge);return _objectSpread(_objectSpread({},un),Ct)}},[Ge,K,oe,Bt,Z]),qt=je.length,Tn=qt>0&&allFilesAccepted({files:je,accept:K,minSize:se,maxSize:ie,multiple:oe,maxFiles:ae}),Sn=qt>0&&!Tn;return _objectSpread(_objectSpread({},Qe),{},{isDragAccept:Tn,isDragReject:Sn,isFocused:ot&&!Z,getRootProps:It,getInputProps:kt,rootRef:ke,inputRef:Ge,open:tt(Wt)})}function reducer(ne,_){switch(_.type){case"focus":return _objectSpread(_objectSpread({},ne),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},ne),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},ne),{},{isFileDialogActive:!1});case"setDraggedFiles":var K=_.isDragActive,Z=_.draggedFiles;return _objectSpread(_objectSpread({},ne),{},{draggedFiles:Z,isDragActive:K});case"setFiles":return _objectSpread(_objectSpread({},ne),{},{acceptedFiles:_.acceptedFiles,fileRejections:_.fileRejections});case"reset":return _objectSpread({},initialState);default:return ne}}function noop(){}function createStore(ne){let _;const K=new Set,Z=(le,ue)=>{const fe=typeof le=="function"?le(_):le;if(fe!==_){const he=_;_=ue?fe:Object.assign({},_,fe),K.forEach(ge=>ge(_,he))}},te=()=>_,ie=(le,ue=te,fe=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let he=ue(_);function ge(){const _e=ue(_);if(!fe(he,_e)){const Se=he;le(he=_e,Se)}}return K.add(ge),()=>K.delete(ge)},ae={setState:Z,getState:te,subscribe:(le,ue,fe)=>ue||fe?ie(le,ue,fe):(K.add(le),()=>K.delete(le)),destroy:()=>K.clear()};return _=ne(Z,te,ae),ae}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(ne){const _=typeof ne=="function"?createStore(ne):ne,K=(Z=_.getState,te=Object.is)=>{const[,ie]=reactExports.useReducer(Ee=>Ee+1,0),se=_.getState(),oe=reactExports.useRef(se),ae=reactExports.useRef(Z),le=reactExports.useRef(te),ue=reactExports.useRef(!1),fe=reactExports.useRef();fe.current===void 0&&(fe.current=Z(se));let he,ge=!1;(oe.current!==se||ae.current!==Z||le.current!==te||ue.current)&&(he=Z(se),ge=!te(fe.current,he)),useIsomorphicLayoutEffect(()=>{ge&&(fe.current=he),oe.current=se,ae.current=Z,le.current=te,ue.current=!1});const _e=reactExports.useRef(se);useIsomorphicLayoutEffect(()=>{const Ee=()=>{try{const be=_.getState(),we=ae.current(be);le.current(fe.current,we)||(oe.current=be,fe.current=we,ie())}catch{ue.current=!0,ie()}},ye=_.subscribe(Ee);return _.getState()!==_e.current&&Ee(),ye},[]);const Se=ge?he:fe.current;return reactExports.useDebugValue(Se),Se};return Object.assign(K,_),K[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const Z=[K,_];return{next(){const te=Z.length<=0;return{value:Z.shift(),done:te}}}},K}const subscribeWithSelector=ne=>(_,K,Z)=>{const te=Z.subscribe;return Z.subscribe=(se,oe,ae)=>{let le=se;if(oe){const ue=ae?.equalityFn||Object.is;let fe=se(Z.getState());le=he=>{const ge=se(he);if(!ue(fe,ge)){const _e=fe;oe(fe=ge,_e)}},ae?.fireImmediately&&oe(fe,fe)}return te(le)},ne(_,K,Z)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isobject,hasRequiredIsobject;function requireIsobject(){return hasRequiredIsobject||(hasRequiredIsobject=1,isobject=function(_){return _!=null&&typeof _=="object"&&Array.isArray(_)===!1}),isobject}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isPlainObject,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject;hasRequiredIsPlainObject=1;var ne=requireIsobject();function _(K){return ne(K)===!0&&Object.prototype.toString.call(K)==="[object Object]"}return isPlainObject=function(Z){var te,ie;return!(_(Z)===!1||(te=Z.constructor,typeof te!="function")||(ie=te.prototype,_(ie)===!1)||ie.hasOwnProperty("isPrototypeOf")===!1)},isPlainObject}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isExtendable$2,hasRequiredIsExtendable$2;function requireIsExtendable$2(){if(hasRequiredIsExtendable$2)return isExtendable$2;hasRequiredIsExtendable$2=1;var ne=requireIsPlainObject();return isExtendable$2=function(K){return ne(K)||typeof K=="function"||Array.isArray(K)},isExtendable$2}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var forIn,hasRequiredForIn;function requireForIn(){return hasRequiredForIn||(hasRequiredForIn=1,forIn=function(_,K,Z){for(var te in _)if(K.call(Z,_[te],te,_)===!1)break}),forIn}var mixinDeep_1,hasRequiredMixinDeep;function requireMixinDeep(){if(hasRequiredMixinDeep)return mixinDeep_1;hasRequiredMixinDeep=1;var ne=requireIsExtendable$2(),_=requireForIn();function K(se,oe){for(var ae=arguments.length,le=0;++le<ae;){var ue=arguments[le];te(ue)&&_(ue,Z,se)}return se}function Z(se,oe){if(ie(oe)){var ae=this[oe];te(se)&&te(ae)?K(ae,se):this[oe]=se}}function te(se){return ne(se)&&!Array.isArray(se)}function ie(se){return se!=="__proto__"&&se!=="constructor"&&se!=="prototype"}return mixinDeep_1=K,mixinDeep_1}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var getValue$1,hasRequiredGetValue;function requireGetValue(){if(hasRequiredGetValue)return getValue$1;hasRequiredGetValue=1,getValue$1=function(K,Z,te,ie,se){if(!ne(K)||!Z)return K;if(Z=_(Z),te&&(Z+="."+_(te)),ie&&(Z+="."+_(ie)),se&&(Z+="."+_(se)),Z in K)return K[Z];for(var oe=Z.split("."),ae=oe.length,le=-1;K&&++le<ae;){for(var ue=oe[le];ue[ue.length-1]==="\\";)ue=ue.slice(0,-1)+"."+oe[++le];K=K[ue]}return K};function ne(K){return K!==null&&(typeof K=="object"||typeof K=="function")}function _(K){return K?Array.isArray(K)?K.join("."):K:""}return getValue$1}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var assignSymbols,hasRequiredAssignSymbols;function requireAssignSymbols(){return hasRequiredAssignSymbols||(hasRequiredAssignSymbols=1,assignSymbols=function(ne,_){if(ne===null||typeof ne>"u")throw new TypeError("expected first argument to be an object.");if(typeof _>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return ne;for(var K=Object.prototype.propertyIsEnumerable,Z=Object(ne),te=arguments.length,ie=0;++ie<te;)for(var se=Object(arguments[ie]),oe=Object.getOwnPropertySymbols(se),ae=0;ae<oe.length;ae++){var le=oe[ae];K.call(se,le)&&(Z[le]=se[le])}return Z}),assignSymbols}var extendShallow$1,hasRequiredExtendShallow$1;function requireExtendShallow$1(){if(hasRequiredExtendShallow$1)return extendShallow$1;hasRequiredExtendShallow$1=1;var ne=requireIsExtendable$2(),_=requireAssignSymbols();extendShallow$1=Object.assign||function(oe){if(oe===null||typeof oe>"u")throw new TypeError("Cannot convert undefined or null to object");ie(oe)||(oe={});for(var ae=1;ae<arguments.length;ae++){var le=arguments[ae];Z(le)&&(le=te(le)),ie(le)&&(K(oe,le),_(oe,le))}return oe};function K(oe,ae){for(var le in ae)se(ae,le)&&(oe[le]=ae[le])}function Z(oe){return oe&&typeof oe=="string"}function te(oe){var ae={};for(var le in oe)ae[le]=oe[le];return ae}function ie(oe){return oe&&typeof oe=="object"||ne(oe)}function se(oe,ae){return Object.prototype.hasOwnProperty.call(oe,ae)}return extendShallow$1}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var splitString,hasRequiredSplitString;function requireSplitString(){if(hasRequiredSplitString)return splitString;hasRequiredSplitString=1;var ne=requireExtendShallow$1();splitString=function(te,ie,se){if(typeof te!="string")throw new TypeError("expected a string");typeof ie=="function"&&(se=ie,ie=null),typeof ie=="string"&&(ie={sep:ie});var oe=ne({sep:"."},ie),ae=oe.quotes||['"',"'","`"],le;oe.brackets===!0?le={"<":">","(":")","[":"]","{":"}"}:oe.brackets&&(le=oe.brackets);var ue=[],fe=[],he=[""],ge=oe.sep,_e=te.length,Se=-1,Ee;function ye(){if(le&&fe.length)return le[fe[fe.length-1]]}for(;++Se<_e;){var be=te[Se],we=te[Se+1],Pe={val:be,idx:Se,arr:he,str:te};if(ue.push(Pe),be==="\\"){Pe.val=Z(oe,te,Se)===!0?be+we:we,Pe.escaped=!0,typeof se=="function"&&se(Pe),he[he.length-1]+=Pe.val,Se++;continue}if(le&&le[be]){fe.push(be);var Oe=ye(),Be=Se+1;if(te.indexOf(Oe,Be+1)!==-1)for(;fe.length&&Be<_e;){var Ue=te[++Be];if(Ue==="\\"){Ue++;continue}if(ae.indexOf(Ue)!==-1){Be=_(te,Ue,Be+1);continue}if(Oe=ye(),fe.length&&te.indexOf(Oe,Be+1)===-1)break;if(le[Ue]){fe.push(Ue);continue}Oe===Ue&&fe.pop()}if(Ee=Be,Ee===-1){he[he.length-1]+=be;continue}be=te.slice(Se,Ee+1),Pe.val=be,Pe.idx=Se=Ee}if(ae.indexOf(be)!==-1){if(Ee=_(te,be,Se+1),Ee===-1){he[he.length-1]+=be;continue}K(be,oe)===!0?be=te.slice(Se,Ee+1):be=te.slice(Se+1,Ee),Pe.val=be,Pe.idx=Se=Ee}if(typeof se=="function"&&(se(Pe,ue),be=Pe.val,Se=Pe.idx),Pe.val===ge&&Pe.split!==!1){he.push("");continue}he[he.length-1]+=Pe.val}return he};function _(te,ie,se,oe){var ae=te.indexOf(ie,se);return te.charAt(ae-1)==="\\"?_(te,ie,ae+1):ae}function K(te,ie){return ie.keepDoubleQuotes===!0&&te==='"'||ie.keepSingleQuotes===!0&&te==="'"?!0:ie.keepQuotes}function Z(te,ie,se){return typeof te.keepEscaping=="function"?te.keepEscaping(ie,se):te.keepEscaping===!0||ie[se+1]==="\\"}return splitString}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable$1,hasRequiredIsExtendable$1;function requireIsExtendable$1(){return hasRequiredIsExtendable$1||(hasRequiredIsExtendable$1=1,isExtendable$1=function(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")}),isExtendable$1}var extendShallow,hasRequiredExtendShallow;function requireExtendShallow(){if(hasRequiredExtendShallow)return extendShallow;hasRequiredExtendShallow=1;var ne=requireIsExtendable$1();extendShallow=function(te){ne(te)||(te={});for(var ie=arguments.length,se=1;se<ie;se++){var oe=arguments[se];ne(oe)&&_(te,oe)}return te};function _(Z,te){for(var ie in te)K(te,ie)&&(Z[ie]=te[ie])}function K(Z,te){return Object.prototype.hasOwnProperty.call(Z,te)}return extendShallow}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable,hasRequiredIsExtendable;function requireIsExtendable(){return hasRequiredIsExtendable||(hasRequiredIsExtendable=1,isExtendable=function(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")}),isExtendable}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var setValue,hasRequiredSetValue;function requireSetValue(){if(hasRequiredSetValue)return setValue;hasRequiredSetValue=1;var ne=requireSplitString(),_=requireExtendShallow(),K=requireIsPlainObject(),Z=requireIsExtendable();setValue=function(ie,se,oe){if(!Z(ie)||(Array.isArray(se)&&(se=[].concat.apply([],se).join(".")),typeof se!="string"))return ie;for(var ae=ne(se,{sep:".",brackets:!0}).filter(te),le=ae.length,ue=-1,fe=ie;++ue<le;){var he=ae[ue];if(ue!==le-1){Z(fe[he])||(fe[he]={}),fe=fe[he];continue}K(fe[he])&&K(oe)?fe[he]=_({},fe[he],oe):fe[he]=oe}return ie};function te(ie){return ie!=="__proto__"&&ie!=="constructor"&&ie!=="prototype"}return setValue}var mergeValue,hasRequiredMergeValue;function requireMergeValue(){if(hasRequiredMergeValue)return mergeValue;hasRequiredMergeValue=1;var ne=requireIsExtendable$2(),_=requireMixinDeep(),K=requireGetValue(),Z=requireSetValue();return mergeValue=function(ie,se,oe){if(!ne(ie))throw new TypeError("expected an object");if(typeof se!="string"||oe==null)return _.apply(null,arguments);if(typeof oe=="string")return Z(ie,se,oe),ie;var ae=K(ie,se);return ne(oe)&&ne(ae)&&(oe=_({},ae,oe)),Z(ie,se,oe),ie},mergeValue}var mergeValueExports=requireMergeValue();const merge=getDefaultExportFromCjs(mergeValueExports),join=(...ne)=>ne.filter(Boolean).join(".");function getKeyPath(ne){const _=ne.split(".");return[_.pop(),_.join(".")||void 0]}function getValuesForPaths(ne,_){return Object.entries(pick(ne,_)).reduce((K,[,{value:Z,disabled:te,key:ie}])=>(K[ie]=te?void 0:Z,K),{})}function useCompareMemoize(ne,_){const K=reactExports.useRef();return dequal(ne,K.current)||(K.current=ne),K.current}function useDeepMemo(ne,_){return reactExports.useMemo(ne,useCompareMemoize(_))}function useToggle(ne){const _=reactExports.useRef(null),K=reactExports.useRef(null),Z=reactExports.useRef(!0);return reactExports.useLayoutEffect(()=>{ne||(_.current.style.height="0px",_.current.style.overflow="hidden")},[]),reactExports.useEffect(()=>{if(Z.current){Z.current=!1;return}let te;const ie=_.current,se=()=>{ne&&(ie.style.removeProperty("height"),ie.style.removeProperty("overflow"),K.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};ie.addEventListener("transitionend",se,{once:!0});const{height:oe}=K.current.getBoundingClientRect();return ie.style.height=oe+"px",ne||(ie.style.overflow="hidden",te=window.setTimeout(()=>ie.style.height="0px",50)),()=>{ie.removeEventListener("transitionend",se),clearTimeout(te)}},[ne]),{wrapperRef:_,contentRef:K}}const useVisiblePaths=ne=>{const[_,K]=reactExports.useState(ne.getVisiblePaths());return reactExports.useEffect(()=>{K(ne.getVisiblePaths());const Z=ne.useStore.subscribe(ne.getVisiblePaths,K,{equalityFn:shallow});return()=>Z()},[ne]),_};function useValuesForPath(ne,_,K){return ne.useStore(te=>{const ie=_objectSpread2(_objectSpread2({},K),te.data);return getValuesForPaths(ie,_)},shallow)}function usePopin(ne=3){const _=reactExports.useRef(null),K=reactExports.useRef(null),[Z,te]=reactExports.useState(!1),ie=reactExports.useCallback(()=>te(!0),[]),se=reactExports.useCallback(()=>te(!1),[]);return reactExports.useLayoutEffect(()=>{if(Z){const{bottom:oe,top:ae,left:le}=_.current.getBoundingClientRect(),{height:ue}=K.current.getBoundingClientRect(),fe=oe+ue>window.innerHeight-40?"up":"down";K.current.style.position="fixed",K.current.style.zIndex="10000",K.current.style.left=le+"px",fe==="down"?K.current.style.top=oe+ne+"px":K.current.style.bottom=window.innerHeight-ae+ne+"px"}},[ne,Z]),{popinRef:_,wrapperRef:K,shown:Z,show:ie,hide:se}}k$1([namesPlugin]);const convertMap={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};v8n.extend({color:()=>ne=>w(ne).isValid()});const schema$2=ne=>v8n().color().test(ne);function convert(ne,{format:_,hasAlpha:K,isString:Z}){const te=convertMap[_]+(Z&&_!=="hex"?"String":""),ie=ne[te]();return typeof ie=="object"&&!K?omit(ie,["a"]):ie}const sanitize$2=(ne,_)=>{const K=w(ne);if(!K.isValid())throw Error("Invalid color");return convert(K,_)},format$1=(ne,_)=>convert(w(ne),_objectSpread2(_objectSpread2({},_),{},{isString:!0,format:"hex"})),normalize$3=({value:ne})=>{const _=I$1(ne),K=_==="name"?"hex":_,Z=typeof ne=="object"?"a"in ne:_==="hex"&&ne.length===8||/^(rgba)|(hsla)|(hsva)/.test(ne),te={format:K,hasAlpha:Z,isString:typeof ne=="string"};return{value:sanitize$2(ne,te),settings:te}};var props$2=Object.freeze({__proto__:null,schema:schema$2,sanitize:sanitize$2,format:format$1,normalize:normalize$3});const ColorPreview=styled("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),PickerContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),PickerWrapper=styled("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function convertToRgb(ne,_){return _!=="rgb"?w(ne).toRgb():ne}function Color({value:ne,displayValue:_,settings:K,onUpdate:Z}){const{emitOnEditStart:te,emitOnEditEnd:ie}=useInputContext(),{format:se,hasAlpha:oe}=K,{popinRef:ae,wrapperRef:le,shown:ue,show:fe,hide:he}=usePopin(),ge=reactExports.useRef(0),[_e,Se]=reactExports.useState(()=>convertToRgb(ne,se)),Ee=oe?Ce:Ne,ye=()=>{Se(convertToRgb(ne,se)),fe(),te()},be=()=>{he(),ie(),window.clearTimeout(ge.current)},we=()=>{ge.current=window.setTimeout(be,500)};return reactExports.useEffect(()=>()=>window.clearTimeout(ge.current),[]),React.createElement(React.Fragment,null,React.createElement(ColorPreview,{ref:ae,active:ue,onClick:()=>ye(),style:{color:_}}),ue&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:be}),React.createElement(PickerWrapper,{ref:le,onMouseEnter:()=>window.clearTimeout(ge.current),onMouseLeave:Pe=>Pe.buttons===0&&we()},React.createElement(Ee,{color:_e,onChange:Z}))))}function ColorComponent(){const{value:ne,displayValue:_,label:K,onChange:Z,onUpdate:te,settings:ie}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,K),React.createElement(PickerContainer,null,React.createElement(Color,{value:ne,displayValue:_,onChange:Z,onUpdate:te,settings:ie}),React.createElement(ValueInput,{value:_,onChange:Z,onUpdate:te})))}var color=_objectSpread2({component:ColorComponent},props$2);function Vector3dComponent(){const{label:ne,displayValue:_,onUpdate:K,settings:Z}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(Vector,{value:_,settings:Z,onUpdate:K}))}var vector3d=_objectSpread2({component:Vector3dComponent},getVectorPlugin(["x","y","z"]));const JoystickTrigger=styled("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),JoystickPlayground=styled("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Joystick({value:ne,settings:_,onUpdate:K}){const Z=reactExports.useRef(),te=reactExports.useRef(0),ie=reactExports.useRef(0),se=reactExports.useRef(1),[oe,ae]=reactExports.useState(!1),[le,ue]=reactExports.useState(!1),[fe,he]=useTransform(),ge=reactExports.useRef(null),_e=reactExports.useRef(null);reactExports.useLayoutEffect(()=>{if(oe){const{top:Je,left:Ye,width:Qe,height:rt}=ge.current.getBoundingClientRect();_e.current.style.left=Ye+Qe/2+"px",_e.current.style.top=Je+rt/2+"px"}},[oe]);const{keys:[Se,Ee],joystick:ye}=_,be=ye==="invertY"?1:-1,{[Se]:{step:we},[Ee]:{step:Pe}}=_,Oe=useTh("sizes","joystickWidth"),Be=useTh("sizes","joystickHeight"),Ue=parseFloat(Oe)*.8/2,$e=parseFloat(Be)*.8/2,De=reactExports.useCallback(()=>{Z.current||(ue(!0),te.current&&he({x:te.current*Ue}),ie.current&&he({y:ie.current*-$e}),Z.current=window.setInterval(()=>{K(Je=>{const Ye=we*te.current*se.current,Qe=be*Pe*ie.current*se.current;return Array.isArray(Je)?{[Se]:Je[0]+Ye,[Ee]:Je[1]+Qe}:{[Se]:Je[Se]+Ye,[Ee]:Je[Ee]+Qe}})},16))},[Ue,$e,K,he,we,Pe,Se,Ee,be]),ke=reactExports.useCallback(()=>{window.clearTimeout(Z.current),Z.current=void 0,ue(!1)},[]);reactExports.useEffect(()=>{function Je(Ye){se.current=multiplyStep(Ye)}return window.addEventListener("keydown",Je),window.addEventListener("keyup",Je),()=>{window.clearTimeout(Z.current),window.removeEventListener("keydown",Je),window.removeEventListener("keyup",Je)}},[]);const Ge=useDrag(({first:Je,active:Ye,delta:[Qe,rt],movement:[ot,ct]})=>{Je&&ae(!0);const je=clamp$1(ot,-Ue,Ue),st=clamp$1(ct,-$e,$e);te.current=Math.abs(ot)>Math.abs(je)?Math.sign(ot-je):0,ie.current=Math.abs(ct)>Math.abs(st)?Math.sign(st-ct):0;let nt=ne[Se],qe=ne[Ee];Ye?(te.current||(nt+=Qe*we*se.current,he({x:je})),ie.current||(qe-=be*rt*Pe*se.current,he({y:st})),te.current||ie.current?De():ke(),K({[Se]:nt,[Ee]:qe})):(ae(!1),te.current=0,ie.current=0,he({x:0,y:0}),ke())});return React.createElement(JoystickTrigger,_extends({ref:ge},Ge()),oe&&React.createElement(Portal,null,React.createElement(JoystickPlayground,{ref:_e,isOutOfBounds:le},React.createElement("div",null),React.createElement("span",{ref:fe}))))}const Container$1=styled("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Vector2dComponent(){const{label:ne,displayValue:_,onUpdate:K,settings:Z}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(Container$1,{withJoystick:!!Z.joystick},Z.joystick&&React.createElement(Joystick,{value:_,settings:Z,onUpdate:K}),React.createElement(Vector,{value:_,settings:Z,onUpdate:K})))}const _excluded$7=["joystick"],plugin=getVectorPlugin(["x","y"]),normalize$2=ne=>{let{joystick:_=!0}=ne,K=_objectWithoutProperties$1(ne,_excluded$7);const{value:Z,settings:te}=plugin.normalize(K);return{value:Z,settings:_objectSpread2(_objectSpread2({},te),{},{joystick:_})}};var vector2d=_objectSpread2(_objectSpread2({component:Vector2dComponent},plugin),{},{normalize:normalize$2});const sanitize$1=ne=>{if(ne!==void 0){if(ne instanceof File)try{return URL.createObjectURL(ne)}catch{return}if(typeof ne=="string"&&ne.indexOf("blob:")===0)return ne;throw Error("Invalid image format [undefined | blob |File].")}},schema$1=(ne,_)=>typeof _=="object"&&"image"in _,normalize$1=({image:ne})=>({value:ne});var props$1=Object.freeze({__proto__:null,sanitize:sanitize$1,schema:schema$1,normalize:normalize$1});const ImageContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),DropZone=styled("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),ImagePreview=styled("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),ImageLargePreview=styled("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Instructions=styled("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Remove=styled("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ImageComponent(){const{label:ne,value:_,onUpdate:K,disabled:Z}=useInputContext(),{popinRef:te,wrapperRef:ie,shown:se,show:oe,hide:ae}=usePopin(),le=reactExports.useCallback(_e=>{_e.length&&K(_e[0])},[K]),ue=reactExports.useCallback(_e=>{_e.stopPropagation(),K(void 0)},[K]),{getRootProps:fe,getInputProps:he,isDragAccept:ge}=useDropzone({maxFiles:1,accept:"image/*",onDrop:le,disabled:Z});return React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(ImageContainer,null,React.createElement(ImagePreview,{ref:te,hasImage:!!_,onPointerDown:()=>!!_&&oe(),onPointerUp:ae,style:{backgroundImage:_?`url(${_})`:"none"}}),se&&!!_&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:ae,style:{cursor:"pointer"}}),React.createElement(ImageLargePreview,{ref:ie,style:{backgroundImage:`url(${_})`}})),React.createElement(DropZone,fe({isDragAccept:ge}),React.createElement("input",he()),React.createElement(Instructions,null,ge?"drop image":"click or drop")),React.createElement(Remove,{onClick:ue,disabled:!_})))}var image=_objectSpread2({component:ImageComponent},props$1);const number=v8n().number(),schema=(ne,_)=>v8n().array().length(2).every.number().test(ne)&&v8n().schema({min:number,max:number}).test(_),format=ne=>({min:ne[0],max:ne[1]}),sanitize=(ne,{bounds:[_,K]},Z)=>{const te=Array.isArray(ne)?format(ne):ne,ie={min:Z[0],max:Z[1]},{min:se,max:oe}=_objectSpread2(_objectSpread2({},ie),te);return[clamp$1(Number(se),_,Math.max(_,oe)),clamp$1(Number(oe),Math.min(K,se),K)]},normalize$4=({value:ne,min:_,max:K})=>{const Z={min:_,max:K},te=normalizeKeyedNumberSettings(format(ne),{min:Z,max:Z}),ie=[_,K],se=_objectSpread2(_objectSpread2({},te),{},{bounds:ie});return{value:sanitize(format(ne),se,ne),settings:se}};var props=Object.freeze({__proto__:null,schema,format,sanitize,normalize:normalize$4});const _excluded$6=["value","bounds","onDrag"],_excluded2$1=["bounds"],Container=styled("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function IntervalSlider(ne){let{value:_,bounds:[K,Z],onDrag:te}=ne,ie=_objectWithoutProperties$1(ne,_excluded$6);const se=reactExports.useRef(null),oe=reactExports.useRef(null),ae=reactExports.useRef(null),le=reactExports.useRef(0),ue=useTh("sizes","scrubberWidth"),fe=useDrag(({event:_e,first:Se,xy:[Ee],movement:[ye],memo:be={}})=>{if(Se){const{width:Pe,left:Oe}=se.current.getBoundingClientRect();le.current=Pe-parseFloat(ue);const Be=_e?.target===oe.current||_e?.target===ae.current;be.pos=invertedRange((Ee-Oe)/Pe,K,Z);const Ue=Math.abs(be.pos-_.min)-Math.abs(be.pos-_.max);be.key=Ue<0||Ue===0&&be.pos<=_.min?"min":"max",Be&&(be.pos=_[be.key])}const we=be.pos+invertedRange(ye/le.current,0,Z-K);return te({[be.key]:sanitizeStep(we,ie[be.key])}),be}),he=`calc(${range(_.min,K,Z)} * (100% - ${ue} - 8px) + 4px)`,ge=`calc(${1-range(_.max,K,Z)} * (100% - ${ue} - 8px) + 4px)`;return React.createElement(RangeWrapper,_extends({ref:se},fe()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:he,right:ge}})),React.createElement(Scrubber,{position:"left",ref:oe,style:{left:he}}),React.createElement(Scrubber,{position:"right",ref:ae,style:{right:ge}}))}function IntervalComponent(){const{label:ne,displayValue:_,onUpdate:K,settings:Z}=useInputContext(),te=_objectWithoutProperties$1(Z,_excluded2$1);return React.createElement(React.Fragment,null,React.createElement(Row,{input:!0},React.createElement(Label,null,ne),React.createElement(Container,null,React.createElement(IntervalSlider,_extends({value:_},Z,{onDrag:K})),React.createElement(Vector,{value:_,settings:te,onUpdate:K,innerLabelTrim:0}))))}var interval=_objectSpread2({component:IntervalComponent},props);const createEventEmitter=()=>{const ne=new Map;return{on:(_,K)=>{let Z=ne.get(_);Z===void 0&&(Z=new Set,ne.set(_,Z)),Z.add(K)},off:(_,K)=>{const Z=ne.get(_);Z!==void 0&&(Z.delete(K),Z.size===0&&ne.delete(_))},emit:(_,...K)=>{const Z=ne.get(_);if(Z!==void 0)for(const te of Z)te(...K)}}},_excluded$5=["type","value"],_excluded2=["onChange","transient","onEditStart","onEditEnd"],Store=function(){const _=create(subscribeWithSelector(()=>({data:{}}))),K=createEventEmitter();this.storeId=getUid(),this.useStore=_;const Z={},te=new Set;this.getVisiblePaths=()=>{const se=this.getData(),oe=Object.keys(se),ae=[];Object.entries(Z).forEach(([ue,fe])=>{fe.render&&oe.some(he=>he.indexOf(ue)===0)&&!fe.render(this.get)&&ae.push(ue+".")});const le=[];return te.forEach(ue=>{ue in se&&se[ue].__refCount>0&&ae.every(fe=>ue.indexOf(fe)===-1)&&(!se[ue].render||se[ue].render(this.get))&&le.push(ue)}),le},this.setOrderedPaths=se=>{se.forEach(oe=>te.add(oe))},this.orderPaths=se=>(this.setOrderedPaths(se),se),this.disposePaths=se=>{_.setState(oe=>{const ae=oe.data;return se.forEach(le=>{if(le in ae){const ue=ae[le];ue.__refCount--,ue.__refCount===0&&ue.type in SpecialInputs&&delete ae[le]}}),{data:ae}})},this.dispose=()=>{_.setState(()=>({data:{}}))},this.getFolderSettings=se=>Z[se]||{},this.getData=()=>_.getState().data,this.addData=(se,oe)=>{_.setState(ae=>{const le=ae.data;return Object.entries(se).forEach(([ue,fe])=>{let he=le[ue];if(he){const{type:ge,value:_e}=fe,Se=_objectWithoutProperties$1(fe,_excluded$5);ge!==he.type?warn(LevaErrors.INPUT_TYPE_OVERRIDE,ge):((he.__refCount===0||oe)&&Object.assign(he,Se),he.__refCount++)}else le[ue]=_objectSpread2(_objectSpread2({},fe),{},{__refCount:1})}),{data:le}})},this.setValueAtPath=(se,oe,ae)=>{_.setState(le=>{const ue=le.data;return updateInput(ue[se],oe,se,this,ae),{data:ue}})},this.setSettingsAtPath=(se,oe)=>{_.setState(ae=>{const le=ae.data;return le[se].settings=_objectSpread2(_objectSpread2({},le[se].settings),oe),{data:le}})},this.disableInputAtPath=(se,oe)=>{_.setState(ae=>{const le=ae.data;return le[se].disabled=oe,{data:le}})},this.set=(se,oe)=>{_.setState(ae=>{const le=ae.data;return Object.entries(se).forEach(([ue,fe])=>{try{updateInput(le[ue],fe,void 0,void 0,oe)}catch{}}),{data:le}})},this.getInput=se=>{try{return this.getData()[se]}catch{warn(LevaErrors.PATH_DOESNT_EXIST,se)}},this.get=se=>{var oe;return(oe=this.getInput(se))===null||oe===void 0?void 0:oe.value},this.emitOnEditStart=se=>{K.emit(`onEditStart:${se}`,this.get(se),se,_objectSpread2(_objectSpread2({},this.getInput(se)),{},{get:this.get}))},this.emitOnEditEnd=se=>{K.emit(`onEditEnd:${se}`,this.get(se),se,_objectSpread2(_objectSpread2({},this.getInput(se)),{},{get:this.get}))},this.subscribeToEditStart=(se,oe)=>{const ae=`onEditStart:${se}`;return K.on(ae,oe),()=>K.off(ae,oe)},this.subscribeToEditEnd=(se,oe)=>{const ae=`onEditEnd:${se}`;return K.on(ae,oe),()=>K.off(ae,oe)};const ie=(se,oe,ae)=>{const le={};return Object.entries(se).forEach(([ue,fe])=>{if(ue==="")return warn(LevaErrors.EMPTY_KEY);let he=join(oe,ue);if(fe.type===SpecialInputs.FOLDER){const ge=ie(fe.schema,he,ae);Object.assign(le,ge),he in Z||(Z[he]=fe.settings)}else if(ue in ae)warn(LevaErrors.DUPLICATE_KEYS,ue,he,ae[ue].path);else{const ge=normalizeInput(fe,ue,he,le);if(ge){const{type:_e,options:Se,input:Ee}=ge,{onChange:ye,transient:be,onEditStart:we,onEditEnd:Pe}=Se,Oe=_objectWithoutProperties$1(Se,_excluded2);le[he]=_objectSpread2(_objectSpread2(_objectSpread2({type:_e},Oe),Ee),{},{fromPanel:!0}),ae[ue]={path:he,onChange:ye,transient:be,onEditStart:we,onEditEnd:Pe}}else warn(LevaErrors.UNKNOWN_INPUT,he,fe)}}),le};this.getDataFromSchema=se=>{const oe={};return[ie(se,"",oe),oe]}},levaStore=new Store,defaultSettings$2={collapsed:!1};function folder(ne,_){return{type:SpecialInputs.FOLDER,schema:ne,settings:_objectSpread2(_objectSpread2({},defaultSettings$2),_)}}const isInput=ne=>"__levaInput"in ne,buildTree=(ne,_)=>{const K={},Z=_?_.toLowerCase():null;return ne.forEach(te=>{const[ie,se]=getKeyPath(te);(!Z||ie.toLowerCase().indexOf(Z)>-1)&&merge(K,se,{[ie]:{__levaInput:!0,path:te}})}),K},_excluded$4=["type","label","path","valueKey","value","settings","setValue","disabled"];function ControlInput(ne){let{type:_,label:K,path:Z,valueKey:te,value:ie,settings:se,setValue:oe,disabled:ae}=ne,le=_objectWithoutProperties$1(ne,_excluded$4);const{displayValue:ue,onChange:fe,onUpdate:he}=useInputSetters({type:_,value:ie,settings:se,setValue:oe}),ge=Plugins[_].component;return ge?React.createElement(InputContext.Provider,{value:_objectSpread2({key:te,path:Z,id:""+Z,label:K,displayValue:ue,value:ie,onChange:fe,onUpdate:he,settings:se,setValue:oe,disabled:ae},le)},React.createElement(StyledInputWrapper$1,{disabled:ae},React.createElement(ge,null))):(warn(LevaErrors.NO_COMPONENT_FOR_TYPE,_,Z),null)}const StyledButton=styled("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Button({onClick:ne,settings:_,label:K}){const Z=useStoreContext();return React.createElement(Row,null,React.createElement(StyledButton,{disabled:_.disabled,onClick:()=>ne(Z.get)},K))}const StyledButtonGroup=styled("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),StyledButtonGroupButton=styled("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),getOpts=({label:ne,opts:_})=>{let K=typeof ne=="string"&&ne.trim()===""?null:ne,Z=_;return typeof _.opts=="object"&&(Z.label!==void 0&&(K=_.label),Z=_.opts),{label:K,opts:Z}};function ButtonGroup(ne){const{label:_,opts:K}=getOpts(ne),Z=useStoreContext();return React.createElement(Row,{input:!!_},_&&React.createElement(Label,null,_),React.createElement(StyledButtonGroup,null,Object.entries(K).map(([te,ie])=>React.createElement(StyledButtonGroupButton,{key:te,onClick:()=>ie(Z.get)},te))))}const Canvas=styled("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),POINTS=100;function push(ne,_){ne.push(_),ne.length>POINTS&&ne.shift()}const MonitorCanvas=reactExports.forwardRef(function({initialValue:ne},_){const K=useTh("colors","highlight3"),Z=useTh("colors","elevation2"),te=useTh("colors","highlight1"),[ie,se]=reactExports.useMemo(()=>[w(te).alpha(.4).toRgbString(),w(te).alpha(.1).toRgbString()],[te]),oe=reactExports.useRef([ne]),ae=reactExports.useRef(ne),le=reactExports.useRef(ne),ue=reactExports.useRef(),fe=reactExports.useCallback((_e,Se)=>{if(!_e)return;const{width:Ee,height:ye}=_e,be=new Path2D,we=Ee/POINTS,Pe=ye*.05;for(let Ue=0;Ue<oe.current.length;Ue++){const $e=range(oe.current[Ue],ae.current,le.current),De=we*Ue,ke=ye-$e*(ye-Pe*2)-Pe;be.lineTo(De,ke)}Se.clearRect(0,0,Ee,ye);const Oe=new Path2D(be);Oe.lineTo(we*(oe.current.length+1),ye),Oe.lineTo(0,ye),Oe.lineTo(0,0);const Be=Se.createLinearGradient(0,0,0,ye);Be.addColorStop(0,ie),Be.addColorStop(1,se),Se.fillStyle=Be,Se.fill(Oe),Se.strokeStyle=Z,Se.lineJoin="round",Se.lineWidth=14,Se.stroke(be),Se.strokeStyle=K,Se.lineWidth=2,Se.stroke(be)},[K,Z,ie,se]),[he,ge]=useCanvas2d(fe);return reactExports.useImperativeHandle(_,()=>({frame:_e=>{(ae.current===void 0||_e<ae.current)&&(ae.current=_e),(le.current===void 0||_e>le.current)&&(le.current=_e),push(oe.current,_e),ue.current=requestAnimationFrame(()=>fe(he.current,ge.current))}}),[he,ge,fe]),reactExports.useEffect(()=>()=>cancelAnimationFrame(ue.current),[]),React.createElement(Canvas,{ref:he})}),parse=ne=>Number.isFinite(ne)?ne.toPrecision(2):ne.toString(),MonitorLog=reactExports.forwardRef(function({initialValue:ne},_){const[K,Z]=reactExports.useState(parse(ne));return reactExports.useImperativeHandle(_,()=>({frame:te=>Z(parse(te))}),[]),React.createElement("div",null,K)});function getValue(ne){return typeof ne=="function"?ne():ne.current}function Monitor({label:ne,objectOrFn:_,settings:K}){const Z=reactExports.useRef(),te=reactExports.useRef(getValue(_));return reactExports.useEffect(()=>{const ie=window.setInterval(()=>{var se;document.hidden||(se=Z.current)===null||se===void 0||se.frame(getValue(_))},K.interval);return()=>window.clearInterval(ie)},[_,K.interval]),React.createElement(Row,{input:!0},React.createElement(Label,{align:"top"},ne),K.graph?React.createElement(MonitorCanvas,{ref:Z,initialValue:te.current}):React.createElement(MonitorLog,{ref:Z,initialValue:te.current}))}const _excluded$3=["type","label","key"],specialComponents={[SpecialInputs.BUTTON]:Button,[SpecialInputs.BUTTON_GROUP]:ButtonGroup,[SpecialInputs.MONITOR]:Monitor},Control=React.memo(({path:ne})=>{const[_,{set:K,setSettings:Z,disable:te,storeId:ie,emitOnEditStart:se,emitOnEditEnd:oe}]=useInput(ne);if(!_)return null;const{type:ae,label:le,key:ue}=_,fe=_objectWithoutProperties$1(_,_excluded$3);if(ae in SpecialInputs){const he=specialComponents[ae];return React.createElement(he,_extends({label:le,path:ne},fe))}return ae in Plugins?React.createElement(ControlInput,_extends({key:ie+ne,type:ae,label:le,storeId:ie,path:ne,valueKey:ue,setValue:K,setSettings:Z,disable:te,emitOnEditStart:se,emitOnEditEnd:oe},fe)):(log(LevaErrors.UNSUPPORTED_INPUT,ae,ne),null)});function FolderTitle({toggle:ne,toggled:_,name:K}){return React.createElement(StyledTitle,{onClick:()=>ne()},React.createElement(Chevron,{toggled:_}),React.createElement("div",null,K))}const Folder=({name:ne,path:_,tree:K})=>{const Z=useStoreContext(),te=join(_,ne),{collapsed:ie,color:se}=Z.getFolderSettings(te),[oe,ae]=reactExports.useState(!ie),le=reactExports.useRef(null),ue=useTh("colors","folderWidgetColor"),fe=useTh("colors","folderTextColor");return reactExports.useLayoutEffect(()=>{le.current.style.setProperty("--leva-colors-folderWidgetColor",se||ue),le.current.style.setProperty("--leva-colors-folderTextColor",se||fe)},[se,ue,fe]),React.createElement(StyledFolder,{ref:le},React.createElement(FolderTitle,{name:ne,toggled:oe,toggle:()=>ae(he=>!he)}),React.createElement(TreeWrapper,{parent:te,tree:K,toggled:oe}))},TreeWrapper=React.memo(({isRoot:ne=!1,fill:_=!1,flat:K=!1,parent:Z,tree:te,toggled:ie})=>{const{wrapperRef:se,contentRef:oe}=useToggle(ie),ae=useStoreContext(),le=([fe,he])=>{var ge;return(isInput(he)?(ge=ae.getInput(he.path))===null||ge===void 0?void 0:ge.order:ae.getFolderSettings(join(Z,fe)).order)||0},ue=Object.entries(te).sort((fe,he)=>le(fe)-le(he));return React.createElement(StyledWrapper,{ref:se,isRoot:ne,fill:_,flat:K},React.createElement(StyledContent,{ref:oe,isRoot:ne,toggled:ie},ue.map(([fe,he])=>isInput(he)?React.createElement(Control,{key:he.path,valueKey:he.valueKey,path:he.path}):React.createElement(Folder,{key:fe,name:fe,path:Z,tree:he}))))}),StyledRoot=styled("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${StyledInputRow}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),iconWidth=40,Icon=styled("i",{$flexCenter:"",width:iconWidth,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),StyledTitleWithFilter=styled("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),FilterWrapper=styled("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Icon}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),StyledFilterInput=styled("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),TitleContainer=styled("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:iconWidth}}}}),FilterInput=React.forwardRef(({setFilter:ne,toggle:_},K)=>{const[Z,te]=reactExports.useState(""),ie=reactExports.useMemo(()=>debounce(ne,250),[ne]),se=()=>{ne(""),te("")},oe=ae=>{const le=ae.currentTarget.value;_(!0),te(le)};return reactExports.useEffect(()=>{ie(Z)},[Z,ie]),React.createElement(React.Fragment,null,React.createElement(StyledFilterInput,{ref:K,value:Z,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:ae=>ae.stopPropagation(),onChange:oe}),React.createElement(Icon,{onClick:()=>se(),style:{visibility:Z?"visible":"hidden"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function TitleWithFilter({setFilter:ne,onDrag:_,onDragStart:K,onDragEnd:Z,toggle:te,toggled:ie,title:se,drag:oe,filterEnabled:ae,from:le}){const[ue,fe]=reactExports.useState(!1),he=reactExports.useRef(null);reactExports.useEffect(()=>{var _e,Se;ue?(_e=he.current)===null||_e===void 0||_e.focus():(Se=he.current)===null||Se===void 0||Se.blur()},[ue]);const ge=useDrag(({offset:[_e,Se],first:Ee,last:ye})=>{_({x:_e,y:Se}),Ee&&K({x:_e,y:Se}),ye&&Z({x:_e,y:Se})},{filterTaps:!0,from:({offset:[_e,Se]})=>[le?.x||_e,le?.y||Se]});return reactExports.useEffect(()=>{const _e=Se=>{Se.key==="L"&&Se.shiftKey&&Se.metaKey&&fe(Ee=>!Ee)};return window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)},[]),React.createElement(React.Fragment,null,React.createElement(StyledTitleWithFilter,{mode:oe?"drag":void 0},React.createElement(Icon,{active:!ie,onClick:()=>te()},React.createElement(Chevron,{toggled:ie,width:12,height:8})),React.createElement(TitleContainer,_extends({},oe?ge():{},{drag:oe,filterEnabled:ae}),se===void 0&&oe?React.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},React.createElement("circle",{cx:"2",cy:"2",r:"2"}),React.createElement("circle",{cx:"14",cy:"2",r:"2"}),React.createElement("circle",{cx:"26",cy:"2",r:"2"}),React.createElement("circle",{cx:"2",cy:"12",r:"2"}),React.createElement("circle",{cx:"14",cy:"12",r:"2"}),React.createElement("circle",{cx:"26",cy:"12",r:"2"})):se),ae&&React.createElement(Icon,{active:ue,onClick:()=>fe(_e=>!_e)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},React.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),React.createElement(FilterWrapper,{toggled:ue},React.createElement(FilterInput,{ref:he,setFilter:ne,toggle:te})))}const _excluded$2=["store","hidden","theme","collapsed"];function LevaRoot(ne){let{store:_,hidden:K=!1,theme:Z,collapsed:te=!1}=ne,ie=_objectWithoutProperties$1(ne,_excluded$2);const se=useDeepMemo(()=>mergeTheme(Z),[Z]),[oe,ae]=reactExports.useState(!te),le=typeof te=="object"?!te.collapsed:oe,ue=reactExports.useMemo(()=>typeof te=="object"?fe=>{typeof fe=="function"?te.onChange(!fe(!te.collapsed)):te.onChange(!fe)}:ae,[te]);return!_||K?null:React.createElement(ThemeContext.Provider,{value:se},React.createElement(LevaCore,_extends({store:_},ie,{toggled:le,setToggle:ue,rootClass:se.className})))}const LevaCore=React.memo(({store:ne,rootClass:_,fill:K=!1,flat:Z=!1,neverHide:te=!1,oneLineLabels:ie=!1,titleBar:se={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:oe=!1,toggled:ae,setToggle:le})=>{var ue,fe;const he=useVisiblePaths(ne),[ge,_e]=reactExports.useState(""),Se=reactExports.useMemo(()=>buildTree(he,ge),[he,ge]),[Ee,ye]=useTransform(),be=te||he.length>0,we=typeof se=="object"&&se.title||void 0,Pe=typeof se=="object"&&(ue=se.drag)!==null&&ue!==void 0?ue:!0,Oe=typeof se=="object"&&(fe=se.filter)!==null&&fe!==void 0?fe:!0,Be=typeof se=="object"&&se.position||void 0,Ue=typeof se=="object"&&se.onDrag||void 0,$e=typeof se=="object"&&se.onDragStart||void 0,De=typeof se=="object"&&se.onDragEnd||void 0;return React.useEffect(()=>{ye({x:Be?.x,y:Be?.y})},[Be,ye]),globalStyles(),React.createElement(PanelSettingsContext.Provider,{value:{hideCopyButton:oe}},React.createElement(StyledRoot,{ref:Ee,className:_,fill:K,flat:Z,oneLineLabels:ie,hideTitleBar:!se,style:{display:be?"block":"none"}},se&&React.createElement(TitleWithFilter,{onDrag:ke=>{ye(ke),Ue?.(ke)},onDragStart:ke=>$e?.(ke),onDragEnd:ke=>De?.(ke),setFilter:_e,toggle:ke=>le(Ge=>ke??!Ge),toggled:ae,title:we,drag:Pe,filterEnabled:Oe,from:Be}),be&&React.createElement(StoreContext.Provider,{value:ne},React.createElement(TreeWrapper,{isRoot:!0,fill:K,flat:Z,tree:Se,toggled:ae}))))}),_excluded$1=["isRoot"];let rootInitialized=!1,rootEl=null;function Leva(ne){let{isRoot:_=!1}=ne,K=_objectWithoutProperties$1(ne,_excluded$1);return reactExports.useEffect(()=>(rootInitialized=!0,!_&&rootEl&&(rootEl.remove(),rootEl=null),()=>{_||(rootInitialized=!1)}),[_]),React.createElement(LevaRoot,_extends({store:levaStore},K))}function useRenderRoot(ne){reactExports.useEffect(()=>{rootInitialized||(rootEl||(rootEl=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(rootEl),render(React.createElement(Leva,{isRoot:!0}),rootEl))),rootInitialized=!0)},[ne])}function parseArgs(ne,_,K,Z,te){let ie,se,oe,ae,le;return se=ne,ie=_,Array.isArray(K)&&(le=K),{schema:ie,folderName:se,folderSettings:oe,hookSettings:ae,deps:le||[]}}function useControls(ne,_,K,Z,te){const{folderName:ie,schema:se,folderSettings:oe,deps:ae}=parseArgs(ne,_,K),le=typeof se=="function",ue=reactExports.useRef(!1),fe=reactExports.useRef(!0),he=useDeepMemo(()=>{ue.current=!0;const ke=typeof se=="function"?se():se;return ie?{[ie]:folder(ke,oe)}:ke},ae);useRenderRoot(!0);const[_e]=reactExports.useState(()=>levaStore),[Se,Ee]=reactExports.useMemo(()=>_e.getDataFromSchema(he),[_e,he]),[ye,be,we,Pe,Oe]=reactExports.useMemo(()=>{const ke=[],Ge=[],Je={},Ye={},Qe={};return Object.values(Ee).forEach(({path:rt,onChange:ot,onEditStart:ct,onEditEnd:je,transient:st})=>{ke.push(rt),ot?(Je[rt]=ot,st||Ge.push(rt)):Ge.push(rt),ct&&(Ye[rt]=ct),je&&(Qe[rt]=je)}),[ke,Ge,Je,Ye,Qe]},[Ee]),Be=reactExports.useMemo(()=>_e.orderPaths(ye),[ye,_e]),Ue=useValuesForPath(_e,be,Se),$e=reactExports.useCallback(ke=>{const Ge=Object.entries(ke).reduce((Je,[Ye,Qe])=>Object.assign(Je,{[Ee[Ye].path]:Qe}),{});_e.set(Ge,!1)},[_e,Ee]),De=reactExports.useCallback(ke=>_e.get(Ee[ke].path),[_e,Ee]);return reactExports.useEffect(()=>{const ke=!fe.current&&ue.current;return _e.addData(Se,ke),fe.current=!1,ue.current=!1,()=>_e.disposePaths(Be)},[_e,Be,Se]),reactExports.useEffect(()=>{const ke=[];return Object.entries(we).forEach(([Ge,Je])=>{Je(_e.get(Ge),Ge,_objectSpread2({initial:!0,get:_e.get},_e.getInput(Ge)));const Ye=_e.useStore.subscribe(Qe=>{const rt=Qe.data[Ge];return[rt.disabled?void 0:rt.value,rt]},([Qe,rt])=>Je(Qe,Ge,_objectSpread2({initial:!1,get:_e.get},rt)),{equalityFn:shallow});ke.push(Ye)}),()=>ke.forEach(Ge=>Ge())},[_e,we]),reactExports.useEffect(()=>{const ke=[];return Object.entries(Pe).forEach(([Ge,Je])=>ke.push(_e.subscribeToEditStart(Ge,Je))),Object.entries(Oe).forEach(([Ge,Je])=>ke.push(_e.subscribeToEditEnd(Ge,Je))),()=>ke.forEach(Ge=>Ge())},[Pe,Oe,_e]),le?[Ue,$e,De]:Ue}register(LevaInputs.SELECT,select);register(LevaInputs.IMAGE,image);register(LevaInputs.NUMBER,number$1);register(LevaInputs.COLOR,color);register(LevaInputs.STRING,string);register(LevaInputs.BOOLEAN,boolean);register(LevaInputs.INTERVAL,interval);register(LevaInputs.VECTOR3D,vector3d);register(LevaInputs.VECTOR2D,vector2d);function RoomPoints({pos:ne,onClick:_,isActive:K,isClicked:Z,animteLoad:te}){const ie=reactExports.useRef(),[se,oe]=reactExports.useState(!1),{gl:ae}=useThree(),le=useLoader(TextureLoader,"/images/point.png"),ue=useControls("Room Markers",{showMarkers:{value:!0,label:"Show Markers"},markerSize:{value:.55,min:.05,max:1,label:"Marker Size"},hoverScale:{value:1.3,min:1,max:2,label:"Hover Scale"},activeScale:{value:1.8,min:1,max:2,label:"Active Scale"},defaultOpacity:{value:.65,min:.1,max:1,label:"Default Opacity"},hoverOpacity:{value:1,min:.1,max:1,label:"Hover Opacity"}});reactExports.useEffect(()=>{const ge=se?ue.hoverScale:K?ue.activeScale:1;ie.current&&ie.current.scale.setScalar(ge),ae.domElement.style.cursor=se?"pointer":"auto"},[se,K,ue.hoverScale,ue.activeScale]);const fe=ge=>{_&&_(ge)};if(!ne||!ue.showMarkers||Z)return null;const he=se?ue.hoverOpacity:ue.defaultOpacity;return jsxRuntimeExports.jsx("group",{position:[ne.x,ne.y-1.5,ne.z],children:jsxRuntimeExports.jsxs("mesh",{ref:ie,name:"room-point",userData:{isRoomPoint:!0},onClick:fe,onPointerEnter:()=>oe(!0),onPointerLeave:()=>oe(!1),rotation:[Math.PI/2,0,0],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[ue.markerSize,ue.markerSize]}),jsxRuntimeExports.jsx("meshBasicMaterial",{map:le,transparent:!0,opacity:he,depthWrite:!1,alphaTest:.5,side:DoubleSide})]})})}function _assertThisInitialized(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function _inheritsLoose(ne,_){ne.prototype=Object.create(_.prototype),ne.prototype.constructor=ne,ne.__proto__=_}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function(_){return typeof _=="string"},_isFunction=function(_){return typeof _=="function"},_isNumber=function(_){return typeof _=="number"},_isUndefined=function(_){return typeof _>"u"},_isObject=function(_){return typeof _=="object"},_isNotFalse=function(_){return _!==!1},_windowExists$1=function(){return typeof window<"u"},_isFuncOrString=function(_){return _isFunction(_)||_isString(_)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function(_){return(_installScope=_merge(_,_globals))&&gsap},_missingPlugin=function(_,K){return console.warn("Invalid property",_,"set to",K,"Missing plugin? gsap.registerPlugin()")},_warn=function(_,K){return!K&&console.warn(_)},_addGlobal=function(_,K){return _&&(_globals[_]=K)&&_installScope&&(_installScope[_]=K)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(_){var K=_[0],Z,te;if(_isObject(K)||_isFunction(K)||(_=[_]),!(Z=(K._gsap||{}).harness)){for(te=_harnessPlugins.length;te--&&!_harnessPlugins[te].targetTest(K););Z=_harnessPlugins[te]}for(te=_.length;te--;)_[te]&&(_[te]._gsap||(_[te]._gsap=new GSCache(_[te],Z)))||_.splice(te,1);return _},_getCache=function(_){return _._gsap||_harness(toArray(_))[0]._gsap},_getProperty=function(_,K,Z){return(Z=_[K])&&_isFunction(Z)?_[K]():_isUndefined(Z)&&_.getAttribute&&_.getAttribute(K)||Z},_forEachName=function(_,K){return(_=_.split(",")).forEach(K)||_},_round=function(_){return Math.round(_*1e5)/1e5||0},_roundPrecise=function(_){return Math.round(_*1e7)/1e7||0},_parseRelative=function(_,K){var Z=K.charAt(0),te=parseFloat(K.substr(2));return _=parseFloat(_),Z==="+"?_+te:Z==="-"?_-te:Z==="*"?_*te:_/te},_arrayContainsAny=function(_,K){for(var Z=K.length,te=0;_.indexOf(K[te])<0&&++te<Z;);return te<Z},_lazyRender=function(){var _=_lazyTweens.length,K=_lazyTweens.slice(0),Z,te;for(_lazyLookup={},_lazyTweens.length=0,Z=0;Z<_;Z++)te=K[Z],te&&te._lazy&&(te.render(te._lazy[0],te._lazy[1],!0)._lazy=0)},_isRevertWorthy=function(_){return!!(_._initted||_._startAt||_.add)},_lazySafeRender=function(_,K,Z,te){_lazyTweens.length&&!_reverting$1&&_lazyRender(),_.render(K,Z,!!(_reverting$1&&K<0&&_isRevertWorthy(_))),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(_){var K=parseFloat(_);return(K||K===0)&&(_+"").match(_delimitedValueExp).length<2?K:_isString(_)?_.trim():_},_passThrough=function(_){return _},_setDefaults=function(_,K){for(var Z in K)Z in _||(_[Z]=K[Z]);return _},_setKeyframeDefaults=function(_){return function(K,Z){for(var te in Z)te in K||te==="duration"&&_||te==="ease"||(K[te]=Z[te])}},_merge=function(_,K){for(var Z in K)_[Z]=K[Z];return _},_mergeDeep=function ne(_,K){for(var Z in K)Z!=="__proto__"&&Z!=="constructor"&&Z!=="prototype"&&(_[Z]=_isObject(K[Z])?ne(_[Z]||(_[Z]={}),K[Z]):K[Z]);return _},_copyExcluding=function(_,K){var Z={},te;for(te in _)te in K||(Z[te]=_[te]);return Z},_inheritDefaults=function(_){var K=_.parent||_globalTimeline,Z=_.keyframes?_setKeyframeDefaults(_isArray(_.keyframes)):_setDefaults;if(_isNotFalse(_.inherit))for(;K;)Z(_,K.vars.defaults),K=K.parent||K._dp;return _},_arraysMatch=function(_,K){for(var Z=_.length,te=Z===K.length;te&&Z--&&_[Z]===K[Z];);return Z<0},_addLinkedListItem=function(_,K,Z,te,ie){var se=_[te],oe;if(ie)for(oe=K[ie];se&&se[ie]>oe;)se=se._prev;return se?(K._next=se._next,se._next=K):(K._next=_[Z],_[Z]=K),K._next?K._next._prev=K:_[te]=K,K._prev=se,K.parent=K._dp=_,K},_removeLinkedListItem=function(_,K,Z,te){Z===void 0&&(Z="_first"),te===void 0&&(te="_last");var ie=K._prev,se=K._next;ie?ie._next=se:_[Z]===K&&(_[Z]=se),se?se._prev=ie:_[te]===K&&(_[te]=ie),K._next=K._prev=K.parent=null},_removeFromParent=function(_,K){_.parent&&(!K||_.parent.autoRemoveChildren)&&_.parent.remove&&_.parent.remove(_),_._act=0},_uncache=function(_,K){if(_&&(!K||K._end>_._dur||K._start<0))for(var Z=_;Z;)Z._dirty=1,Z=Z.parent;return _},_recacheAncestors=function(_){for(var K=_.parent;K&&K.parent;)K._dirty=1,K.totalDuration(),K=K.parent;return _},_rewindStartAt=function(_,K,Z,te){return _._startAt&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_.vars.immediateRender&&!_.vars.autoRevert||_._startAt.render(K,!0,te))},_hasNoPausedAncestors=function ne(_){return!_||_._ts&&ne(_.parent)},_elapsedCycleDuration=function(_){return _._repeat?_animationCycle(_._tTime,_=_.duration()+_._rDelay)*_:0},_animationCycle=function(_,K){var Z=Math.floor(_=_roundPrecise(_/K));return _&&Z===_?Z-1:Z},_parentToChildTotalTime=function(_,K){return(_-K._start)*K._ts+(K._ts>=0?0:K._dirty?K.totalDuration():K._tDur)},_setEnd=function(_){return _._end=_roundPrecise(_._start+(_._tDur/Math.abs(_._ts||_._rts||_tinyNum)||0))},_alignPlayhead=function(_,K){var Z=_._dp;return Z&&Z.smoothChildTiming&&_._ts&&(_._start=_roundPrecise(Z._time-(_._ts>0?K/_._ts:((_._dirty?_.totalDuration():_._tDur)-K)/-_._ts)),_setEnd(_),Z._dirty||_uncache(Z,_)),_},_postAddChecks=function(_,K){var Z;if((K._time||!K._dur&&K._initted||K._start<_._time&&(K._dur||!K.add))&&(Z=_parentToChildTotalTime(_.rawTime(),K),(!K._dur||_clamp(0,K.totalDuration(),Z)-K._tTime>_tinyNum)&&K.render(Z,!0)),_uncache(_,K)._dp&&_._initted&&_._time>=_._dur&&_._ts){if(_._dur<_.duration())for(Z=_;Z._dp;)Z.rawTime()>=0&&Z.totalTime(Z._tTime),Z=Z._dp;_._zTime=-_tinyNum}},_addToTimeline=function(_,K,Z,te){return K.parent&&_removeFromParent(K),K._start=_roundPrecise((_isNumber(Z)?Z:Z||_!==_globalTimeline?_parsePosition(_,Z,K):_._time)+K._delay),K._end=_roundPrecise(K._start+(K.totalDuration()/Math.abs(K.timeScale())||0)),_addLinkedListItem(_,K,"_first","_last",_._sort?"_start":0),_isFromOrFromStart(K)||(_._recent=K),te||_postAddChecks(_,K),_._ts<0&&_alignPlayhead(_,_._tTime),_},_scrollTrigger=function(_,K){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",K))&&_globals.ScrollTrigger.create(K,_)},_attemptInitTween=function(_,K,Z,te,ie){if(_initTween(_,K,ie),!_._initted)return 1;if(!Z&&_._pt&&!_reverting$1&&(_._dur&&_.vars.lazy!==!1||!_._dur&&_.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(_),_._lazy=[ie,te],1},_parentPlayheadIsBeforeStart=function ne(_){var K=_.parent;return K&&K._ts&&K._initted&&!K._lock&&(K.rawTime()<0||ne(K))},_isFromOrFromStart=function(_){var K=_.data;return K==="isFromStart"||K==="isStart"},_renderZeroDurationTween=function(_,K,Z,te){var ie=_.ratio,se=K<0||!K&&(!_._start&&_parentPlayheadIsBeforeStart(_)&&!(!_._initted&&_isFromOrFromStart(_))||(_._ts<0||_._dp._ts<0)&&!_isFromOrFromStart(_))?0:1,oe=_._rDelay,ae=0,le,ue,fe;if(oe&&_._repeat&&(ae=_clamp(0,_._tDur,K),ue=_animationCycle(ae,oe),_._yoyo&&ue&1&&(se=1-se),ue!==_animationCycle(_._tTime,oe)&&(ie=1-se,_.vars.repeatRefresh&&_._initted&&_.invalidate())),se!==ie||_reverting$1||te||_._zTime===_tinyNum||!K&&_._zTime){if(!_._initted&&_attemptInitTween(_,K,te,Z,ae))return;for(fe=_._zTime,_._zTime=K||(Z?_tinyNum:0),Z||(Z=K&&!fe),_.ratio=se,_._from&&(se=1-se),_._time=0,_._tTime=ae,le=_._pt;le;)le.r(se,le.d),le=le._next;K<0&&_rewindStartAt(_,K,Z,!0),_._onUpdate&&!Z&&_callback(_,"onUpdate"),ae&&_._repeat&&!Z&&_.parent&&_callback(_,"onRepeat"),(K>=_._tDur||K<0)&&_.ratio===se&&(se&&_removeFromParent(_,1),!Z&&!_reverting$1&&(_callback(_,se?"onComplete":"onReverseComplete",!0),_._prom&&_._prom()))}else _._zTime||(_._zTime=K)},_findNextPauseTween=function(_,K,Z){var te;if(Z>K)for(te=_._first;te&&te._start<=Z;){if(te.data==="isPause"&&te._start>K)return te;te=te._next}else for(te=_._last;te&&te._start>=Z;){if(te.data==="isPause"&&te._start<K)return te;te=te._prev}},_setDuration=function(_,K,Z,te){var ie=_._repeat,se=_roundPrecise(K)||0,oe=_._tTime/_._tDur;return oe&&!te&&(_._time*=se/_._dur),_._dur=se,_._tDur=ie?ie<0?1e10:_roundPrecise(se*(ie+1)+_._rDelay*ie):se,oe>0&&!te&&_alignPlayhead(_,_._tTime=_._tDur*oe),_.parent&&_setEnd(_),Z||_uncache(_.parent,_),_},_onUpdateTotalDuration=function(_){return _ instanceof Timeline?_uncache(_):_setDuration(_,_._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function ne(_,K,Z){var te=_.labels,ie=_._recent||_zeroPosition,se=_.duration()>=_bigNum$1?ie.endTime(!1):_._dur,oe,ae,le;return _isString(K)&&(isNaN(K)||K in te)?(ae=K.charAt(0),le=K.substr(-1)==="%",oe=K.indexOf("="),ae==="<"||ae===">"?(oe>=0&&(K=K.replace(/=/,"")),(ae==="<"?ie._start:ie.endTime(ie._repeat>=0))+(parseFloat(K.substr(1))||0)*(le?(oe<0?ie:Z).totalDuration()/100:1)):oe<0?(K in te||(te[K]=se),te[K]):(ae=parseFloat(K.charAt(oe-1)+K.substr(oe+1)),le&&Z&&(ae=ae/100*(_isArray(Z)?Z[0]:Z).totalDuration()),oe>1?ne(_,K.substr(0,oe-1),Z)+ae:se+ae)):K==null?se:+K},_createTweenType=function(_,K,Z){var te=_isNumber(K[1]),ie=(te?2:1)+(_<2?0:1),se=K[ie],oe,ae;if(te&&(se.duration=K[1]),se.parent=Z,_){for(oe=se,ae=Z;ae&&!("immediateRender"in oe);)oe=ae.vars.defaults||{},ae=_isNotFalse(ae.vars.inherit)&&ae.parent;se.immediateRender=_isNotFalse(oe.immediateRender),_<2?se.runBackwards=1:se.startAt=K[ie-1]}return new Tween(K[0],se,K[ie+1])},_conditionalReturn=function(_,K){return _||_===0?K(_):K},_clamp=function(_,K,Z){return Z<_?_:Z>K?K:Z},getUnit=function(_,K){return!_isString(_)||!(K=_unitExp.exec(_))?"":K[1]},clamp=function(_,K,Z){return _conditionalReturn(Z,function(te){return _clamp(_,K,te)})},_slice=[].slice,_isArrayLike=function(_,K){return _&&_isObject(_)&&"length"in _&&(!K&&!_.length||_.length-1 in _&&_isObject(_[0]))&&!_.nodeType&&_!==_win$1},_flatten=function(_,K,Z){return Z===void 0&&(Z=[]),_.forEach(function(te){var ie;return _isString(te)&&!K||_isArrayLike(te,1)?(ie=Z).push.apply(ie,toArray(te)):Z.push(te)})||Z},toArray=function(_,K,Z){return _context&&!K&&_context.selector?_context.selector(_):_isString(_)&&!Z&&(_coreInitted||!_wake())?_slice.call((K||_doc$1).querySelectorAll(_),0):_isArray(_)?_flatten(_,Z):_isArrayLike(_)?_slice.call(_,0):_?[_]:[]},selector=function(_){return _=toArray(_)[0]||_warn("Invalid scope")||{},function(K){var Z=_.current||_.nativeElement||_;return toArray(K,Z.querySelectorAll?Z:Z===_?_warn("Invalid scope")||_doc$1.createElement("div"):_)}},shuffle=function(_){return _.sort(function(){return .5-Math.random()})},distribute=function(_){if(_isFunction(_))return _;var K=_isObject(_)?_:{each:_},Z=_parseEase(K.ease),te=K.from||0,ie=parseFloat(K.base)||0,se={},oe=te>0&&te<1,ae=isNaN(te)||oe,le=K.axis,ue=te,fe=te;return _isString(te)?ue=fe={center:.5,edges:.5,end:1}[te]||0:!oe&&ae&&(ue=te[0],fe=te[1]),function(he,ge,_e){var Se=(_e||K).length,Ee=se[Se],ye,be,we,Pe,Oe,Be,Ue,$e,De;if(!Ee){if(De=K.grid==="auto"?0:(K.grid||[1,_bigNum$1])[1],!De){for(Ue=-_bigNum$1;Ue<(Ue=_e[De++].getBoundingClientRect().left)&&De<Se;);De<Se&&De--}for(Ee=se[Se]=[],ye=ae?Math.min(De,Se)*ue-.5:te%De,be=De===_bigNum$1?0:ae?Se*fe/De-.5:te/De|0,Ue=0,$e=_bigNum$1,Be=0;Be<Se;Be++)we=Be%De-ye,Pe=be-(Be/De|0),Ee[Be]=Oe=le?Math.abs(le==="y"?Pe:we):_sqrt(we*we+Pe*Pe),Oe>Ue&&(Ue=Oe),Oe<$e&&($e=Oe);te==="random"&&shuffle(Ee),Ee.max=Ue-$e,Ee.min=$e,Ee.v=Se=(parseFloat(K.amount)||parseFloat(K.each)*(De>Se?Se-1:le?le==="y"?Se/De:De:Math.max(De,Se/De))||0)*(te==="edges"?-1:1),Ee.b=Se<0?ie-Se:ie,Ee.u=getUnit(K.amount||K.each)||0,Z=Z&&Se<0?_invertEase(Z):Z}return Se=(Ee[he]-Ee.min)/Ee.max||0,_roundPrecise(Ee.b+(Z?Z(Se):Se)*Ee.v)+Ee.u}},_roundModifier=function(_){var K=Math.pow(10,((_+"").split(".")[1]||"").length);return function(Z){var te=_roundPrecise(Math.round(parseFloat(Z)/_)*_*K);return(te-te%1)/K+(_isNumber(Z)?0:getUnit(Z))}},snap=function(_,K){var Z=_isArray(_),te,ie;return!Z&&_isObject(_)&&(te=Z=_.radius||_bigNum$1,_.values?(_=toArray(_.values),(ie=!_isNumber(_[0]))&&(te*=te)):_=_roundModifier(_.increment)),_conditionalReturn(K,Z?_isFunction(_)?function(se){return ie=_(se),Math.abs(ie-se)<=te?ie:se}:function(se){for(var oe=parseFloat(ie?se.x:se),ae=parseFloat(ie?se.y:0),le=_bigNum$1,ue=0,fe=_.length,he,ge;fe--;)ie?(he=_[fe].x-oe,ge=_[fe].y-ae,he=he*he+ge*ge):he=Math.abs(_[fe]-oe),he<le&&(le=he,ue=fe);return ue=!te||le<=te?_[ue]:se,ie||ue===se||_isNumber(se)?ue:ue+getUnit(se)}:_roundModifier(_))},random=function(_,K,Z,te){return _conditionalReturn(_isArray(_)?!K:Z===!0?!!(Z=0):!te,function(){return _isArray(_)?_[~~(Math.random()*_.length)]:(Z=Z||1e-5)&&(te=Z<1?Math.pow(10,(Z+"").length-2):1)&&Math.floor(Math.round((_-Z/2+Math.random()*(K-_+Z*.99))/Z)*Z*te)/te})},pipe=function(){for(var _=arguments.length,K=new Array(_),Z=0;Z<_;Z++)K[Z]=arguments[Z];return function(te){return K.reduce(function(ie,se){return se(ie)},te)}},unitize=function(_,K){return function(Z){return _(parseFloat(Z))+(K||getUnit(Z))}},normalize=function(_,K,Z){return mapRange(_,K,0,1,Z)},_wrapArray=function(_,K,Z){return _conditionalReturn(Z,function(te){return _[~~K(te)]})},wrap=function ne(_,K,Z){var te=K-_;return _isArray(_)?_wrapArray(_,ne(0,_.length),K):_conditionalReturn(Z,function(ie){return(te+(ie-_)%te)%te+_})},wrapYoyo=function ne(_,K,Z){var te=K-_,ie=te*2;return _isArray(_)?_wrapArray(_,ne(0,_.length-1),K):_conditionalReturn(Z,function(se){return se=(ie+(se-_)%ie)%ie||0,_+(se>te?ie-se:se)})},_replaceRandom=function(_){for(var K=0,Z="",te,ie,se,oe;~(te=_.indexOf("random(",K));)se=_.indexOf(")",te),oe=_.charAt(te+7)==="[",ie=_.substr(te+7,se-te-7).match(oe?_delimitedValueExp:_strictNumExp),Z+=_.substr(K,te-K)+random(oe?ie:+ie[0],oe?0:+ie[1],+ie[2]||1e-5),K=se+1;return Z+_.substr(K,_.length-K)},mapRange=function(_,K,Z,te,ie){var se=K-_,oe=te-Z;return _conditionalReturn(ie,function(ae){return Z+((ae-_)/se*oe||0)})},interpolate=function ne(_,K,Z,te){var ie=isNaN(_+K)?0:function(ge){return(1-ge)*_+ge*K};if(!ie){var se=_isString(_),oe={},ae,le,ue,fe,he;if(Z===!0&&(te=1)&&(Z=null),se)_={p:_},K={p:K};else if(_isArray(_)&&!_isArray(K)){for(ue=[],fe=_.length,he=fe-2,le=1;le<fe;le++)ue.push(ne(_[le-1],_[le]));fe--,ie=function(_e){_e*=fe;var Se=Math.min(he,~~_e);return ue[Se](_e-Se)},Z=K}else te||(_=_merge(_isArray(_)?[]:{},_));if(!ue){for(ae in K)_addPropTween.call(oe,_,ae,"get",K[ae]);ie=function(_e){return _renderPropTweens(_e,oe)||(se?_.p:_)}}}return _conditionalReturn(Z,ie)},_getLabelInDirection=function(_,K,Z){var te=_.labels,ie=_bigNum$1,se,oe,ae;for(se in te)oe=te[se]-K,oe<0==!!Z&&oe&&ie>(oe=Math.abs(oe))&&(ae=se,ie=oe);return ae},_callback=function(_,K,Z){var te=_.vars,ie=te[K],se=_context,oe=_._ctx,ae,le,ue;if(ie)return ae=te[K+"Params"],le=te.callbackScope||_,Z&&_lazyTweens.length&&_lazyRender(),oe&&(_context=oe),ue=ae?ie.apply(le,ae):ie.call(le),_context=se,ue},_interrupt=function(_){return _removeFromParent(_),_.scrollTrigger&&_.scrollTrigger.kill(!!_reverting$1),_.progress()<1&&_callback(_,"onInterrupt"),_},_quickTween,_registerPluginQueue=[],_createPlugin=function(_){if(_)if(_=!_.name&&_.default||_,_windowExists$1()||_.headless){var K=_.name,Z=_isFunction(_),te=K&&!Z&&_.init?function(){this._props=[]}:_,ie={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},se={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),_!==te){if(_plugins[K])return;_setDefaults(te,_setDefaults(_copyExcluding(_,ie),se)),_merge(te.prototype,_merge(ie,_copyExcluding(_,se))),_plugins[te.prop=K]=te,_.targetTest&&(_harnessPlugins.push(te),_reservedProps[K]=1),K=(K==="css"?"CSS":K.charAt(0).toUpperCase()+K.substr(1))+"Plugin"}_addGlobal(K,te),_.register&&_.register(gsap,te,PropTween)}else _registerPluginQueue.push(_)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(_,K,Z){return _+=_<0?1:_>1?-1:0,(_*6<1?K+(Z-K)*_*6:_<.5?Z:_*3<2?K+(Z-K)*(2/3-_)*6:K)*_255+.5|0},splitColor=function(_,K,Z){var te=_?_isNumber(_)?[_>>16,_>>8&_255,_&_255]:0:_colorLookup.black,ie,se,oe,ae,le,ue,fe,he,ge,_e;if(!te){if(_.substr(-1)===","&&(_=_.substr(0,_.length-1)),_colorLookup[_])te=_colorLookup[_];else if(_.charAt(0)==="#"){if(_.length<6&&(ie=_.charAt(1),se=_.charAt(2),oe=_.charAt(3),_="#"+ie+ie+se+se+oe+oe+(_.length===5?_.charAt(4)+_.charAt(4):"")),_.length===9)return te=parseInt(_.substr(1,6),16),[te>>16,te>>8&_255,te&_255,parseInt(_.substr(7),16)/255];_=parseInt(_.substr(1),16),te=[_>>16,_>>8&_255,_&_255]}else if(_.substr(0,3)==="hsl"){if(te=_e=_.match(_strictNumExp),!K)ae=+te[0]%360/360,le=+te[1]/100,ue=+te[2]/100,se=ue<=.5?ue*(le+1):ue+le-ue*le,ie=ue*2-se,te.length>3&&(te[3]*=1),te[0]=_hue(ae+1/3,ie,se),te[1]=_hue(ae,ie,se),te[2]=_hue(ae-1/3,ie,se);else if(~_.indexOf("="))return te=_.match(_numExp),Z&&te.length<4&&(te[3]=1),te}else te=_.match(_strictNumExp)||_colorLookup.transparent;te=te.map(Number)}return K&&!_e&&(ie=te[0]/_255,se=te[1]/_255,oe=te[2]/_255,fe=Math.max(ie,se,oe),he=Math.min(ie,se,oe),ue=(fe+he)/2,fe===he?ae=le=0:(ge=fe-he,le=ue>.5?ge/(2-fe-he):ge/(fe+he),ae=fe===ie?(se-oe)/ge+(se<oe?6:0):fe===se?(oe-ie)/ge+2:(ie-se)/ge+4,ae*=60),te[0]=~~(ae+.5),te[1]=~~(le*100+.5),te[2]=~~(ue*100+.5)),Z&&te.length<4&&(te[3]=1),te},_colorOrderData=function(_){var K=[],Z=[],te=-1;return _.split(_colorExp).forEach(function(ie){var se=ie.match(_numWithUnitExp)||[];K.push.apply(K,se),Z.push(te+=se.length+1)}),K.c=Z,K},_formatColors=function(_,K,Z){var te="",ie=(_+te).match(_colorExp),se=K?"hsla(":"rgba(",oe=0,ae,le,ue,fe;if(!ie)return _;if(ie=ie.map(function(he){return(he=splitColor(he,K,1))&&se+(K?he[0]+","+he[1]+"%,"+he[2]+"%,"+he[3]:he.join(","))+")"}),Z&&(ue=_colorOrderData(_),ae=Z.c,ae.join(te)!==ue.c.join(te)))for(le=_.replace(_colorExp,"1").split(_numWithUnitExp),fe=le.length-1;oe<fe;oe++)te+=le[oe]+(~ae.indexOf(oe)?ie.shift()||se+"0,0,0,0)":(ue.length?ue:ie.length?ie:Z).shift());if(!le)for(le=_.split(_colorExp),fe=le.length-1;oe<fe;oe++)te+=le[oe]+ie[oe];return te+le[fe]},_colorExp=(function(){var ne="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",_;for(_ in _colorLookup)ne+="|"+_+"\\b";return new RegExp(ne+")","gi")})(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(_){var K=_.join(" "),Z;if(_colorExp.lastIndex=0,_colorExp.test(K))return Z=_hslExp.test(K),_[1]=_formatColors(_[1],Z),_[0]=_formatColors(_[0],Z,_colorOrderData(_[1])),!0},_tickerActive,_ticker=(function(){var ne=Date.now,_=500,K=33,Z=ne(),te=Z,ie=1e3/240,se=ie,oe=[],ae,le,ue,fe,he,ge,_e=function Se(Ee){var ye=ne()-te,be=Ee===!0,we,Pe,Oe,Be;if((ye>_||ye<0)&&(Z+=ye-K),te+=ye,Oe=te-Z,we=Oe-se,(we>0||be)&&(Be=++fe.frame,he=Oe-fe.time*1e3,fe.time=Oe=Oe/1e3,se+=we+(we>=ie?4:ie-we),Pe=1),be||(ae=le(Se)),Pe)for(ge=0;ge<oe.length;ge++)oe[ge](Oe,he,Be,Ee)};return fe={time:0,frame:0,tick:function(){_e(!0)},deltaRatio:function(Ee){return he/(1e3/(Ee||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),_registerPluginQueue.forEach(_createPlugin)),ue=typeof requestAnimationFrame<"u"&&requestAnimationFrame,ae&&fe.sleep(),le=ue||function(Ee){return setTimeout(Ee,se-fe.time*1e3+1|0)},_tickerActive=1,_e(2))},sleep:function(){(ue?cancelAnimationFrame:clearTimeout)(ae),_tickerActive=0,le=_emptyFunc},lagSmoothing:function(Ee,ye){_=Ee||1/0,K=Math.min(ye||33,_)},fps:function(Ee){ie=1e3/(Ee||240),se=fe.time*1e3+ie},add:function(Ee,ye,be){var we=ye?function(Pe,Oe,Be,Ue){Ee(Pe,Oe,Be,Ue),fe.remove(we)}:Ee;return fe.remove(Ee),oe[be?"unshift":"push"](we),_wake(),we},remove:function(Ee,ye){~(ye=oe.indexOf(Ee))&&oe.splice(ye,1)&&ge>=ye&&ge--},_listeners:oe},fe})(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(_){for(var K={},Z=_.substr(1,_.length-3).split(":"),te=Z[0],ie=1,se=Z.length,oe,ae,le;ie<se;ie++)ae=Z[ie],oe=ie!==se-1?ae.lastIndexOf(","):ae.length,le=ae.substr(0,oe),K[te]=isNaN(le)?le.replace(_quotesExp,"").trim():+le,te=ae.substr(oe+1).trim();return K},_valueInParentheses=function(_){var K=_.indexOf("(")+1,Z=_.indexOf(")"),te=_.indexOf("(",K);return _.substring(K,~te&&te<Z?_.indexOf(")",Z+1):Z)},_configEaseFromString=function(_){var K=(_+"").split("("),Z=_easeMap[K[0]];return Z&&K.length>1&&Z.config?Z.config.apply(null,~_.indexOf("{")?[_parseObjectInString(K[1])]:_valueInParentheses(_).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(_)?_easeMap._CE("",_):Z},_invertEase=function(_){return function(K){return 1-_(1-K)}},_propagateYoyoEase=function ne(_,K){for(var Z=_._first,te;Z;)Z instanceof Timeline?ne(Z,K):Z.vars.yoyoEase&&(!Z._yoyo||!Z._repeat)&&Z._yoyo!==K&&(Z.timeline?ne(Z.timeline,K):(te=Z._ease,Z._ease=Z._yEase,Z._yEase=te,Z._yoyo=K)),Z=Z._next},_parseEase=function(_,K){return _&&(_isFunction(_)?_:_easeMap[_]||_configEaseFromString(_))||K},_insertEase=function(_,K,Z,te){Z===void 0&&(Z=function(ae){return 1-K(1-ae)}),te===void 0&&(te=function(ae){return ae<.5?K(ae*2)/2:1-K((1-ae)*2)/2});var ie={easeIn:K,easeOut:Z,easeInOut:te},se;return _forEachName(_,function(oe){_easeMap[oe]=_globals[oe]=ie,_easeMap[se=oe.toLowerCase()]=Z;for(var ae in ie)_easeMap[se+(ae==="easeIn"?".in":ae==="easeOut"?".out":".inOut")]=_easeMap[oe+"."+ae]=ie[ae]}),ie},_easeInOutFromOut=function(_){return function(K){return K<.5?(1-_(1-K*2))/2:.5+_((K-.5)*2)/2}},_configElastic=function ne(_,K,Z){var te=K>=1?K:1,ie=(Z||(_?.3:.45))/(K<1?K:1),se=ie/_2PI*(Math.asin(1/te)||0),oe=function(ue){return ue===1?1:te*Math.pow(2,-10*ue)*_sin((ue-se)*ie)+1},ae=_==="out"?oe:_==="in"?function(le){return 1-oe(1-le)}:_easeInOutFromOut(oe);return ie=_2PI/ie,ae.config=function(le,ue){return ne(_,le,ue)},ae},_configBack=function ne(_,K){K===void 0&&(K=1.70158);var Z=function(se){return se?--se*se*((K+1)*se+K)+1:0},te=_==="out"?Z:_==="in"?function(ie){return 1-Z(1-ie)}:_easeInOutFromOut(Z);return te.config=function(ie){return ne(_,ie)},te};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(ne,_){var K=_<5?_+1:_;_insertEase(ne+",Power"+(K-1),_?function(Z){return Math.pow(Z,K)}:function(Z){return Z},function(Z){return 1-Math.pow(1-Z,K)},function(Z){return Z<.5?Math.pow(Z*2,K)/2:1-Math.pow((1-Z)*2,K)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(ne,_){var K=1/_,Z=2*K,te=2.5*K,ie=function(oe){return oe<K?ne*oe*oe:oe<Z?ne*Math.pow(oe-1.5/_,2)+.75:oe<te?ne*(oe-=2.25/_)*oe+.9375:ne*Math.pow(oe-2.625/_,2)+.984375};_insertEase("Bounce",function(se){return 1-ie(1-se)},ie)})(7.5625,2.75);_insertEase("Expo",function(ne){return Math.pow(2,10*(ne-1))*ne+ne*ne*ne*ne*ne*ne*(1-ne)});_insertEase("Circ",function(ne){return-(_sqrt(1-ne*ne)-1)});_insertEase("Sine",function(ne){return ne===1?1:-_cos(ne*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(_,K){_===void 0&&(_=1);var Z=1/_,te=_+(K?0:1),ie=K?1:0,se=1-_tinyNum;return function(oe){return((te*_clamp(0,se,oe)|0)+ie)*Z}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(ne){return _callbackNames+=ne+","+ne+"Params,"});var GSCache=function(_,K){this.id=_gsID++,_._gsap=this,this.target=_,this.harness=K,this.get=K?K.get:_getProperty,this.set=K?K.getSetter:_getSetter},Animation=(function(){function ne(K){this.vars=K,this._delay=+K.delay||0,(this._repeat=K.repeat===1/0?-2:K.repeat||0)&&(this._rDelay=K.repeatDelay||0,this._yoyo=!!K.yoyo||!!K.yoyoEase),this._ts=1,_setDuration(this,+K.duration,1,1),this.data=K.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var _=ne.prototype;return _.delay=function(Z){return Z||Z===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+Z-this._delay),this._delay=Z,this):this._delay},_.duration=function(Z){return arguments.length?this.totalDuration(this._repeat>0?Z+(Z+this._rDelay)*this._repeat:Z):this.totalDuration()&&this._dur},_.totalDuration=function(Z){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?Z:(Z-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},_.totalTime=function(Z,te){if(_wake(),!arguments.length)return this._tTime;var ie=this._dp;if(ie&&ie.smoothChildTiming&&this._ts){for(_alignPlayhead(this,Z),!ie._dp||ie.parent||_postAddChecks(ie,this);ie&&ie.parent;)ie.parent._time!==ie._start+(ie._ts>=0?ie._tTime/ie._ts:(ie.totalDuration()-ie._tTime)/-ie._ts)&&ie.totalTime(ie._tTime,!0),ie=ie.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&Z<this._tDur||this._ts<0&&Z>0||!this._tDur&&!Z)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==Z||!this._dur&&!te||this._initted&&Math.abs(this._zTime)===_tinyNum||!Z&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=Z),_lazySafeRender(this,Z,te)),this},_.time=function(Z,te){return arguments.length?this.totalTime(Math.min(this.totalDuration(),Z+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(Z?this._dur:0),te):this._time},_.totalProgress=function(Z,te){return arguments.length?this.totalTime(this.totalDuration()*Z,te):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},_.progress=function(Z,te){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-Z:Z)+_elapsedCycleDuration(this),te):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},_.iteration=function(Z,te){var ie=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(Z-1)*ie,te):this._repeat?_animationCycle(this._tTime,ie)+1:1},_.timeScale=function(Z,te){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===Z)return this;var ie=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+Z||0,this._ts=this._ps||Z===-_tinyNum?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this.totalDuration(),ie),te!==!1),_setEnd(this),_recacheAncestors(this)},_.paused=function(Z){return arguments.length?(this._ps!==Z&&(this._ps=Z,Z?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},_.startTime=function(Z){if(arguments.length){this._start=Z;var te=this.parent||this._dp;return te&&(te._sort||!this.parent)&&_addToTimeline(te,this,Z-this._delay),this}return this._start},_.endTime=function(Z){return this._start+(_isNotFalse(Z)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},_.rawTime=function(Z){var te=this.parent||this._dp;return te?Z&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(te.rawTime(Z),this):this._tTime:this._tTime},_.revert=function(Z){Z===void 0&&(Z=_revertConfig);var te=_reverting$1;return _reverting$1=Z,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(Z),this.totalTime(-.01,Z.suppressEvents)),this.data!=="nested"&&Z.kill!==!1&&this.kill(),_reverting$1=te,this},_.globalTime=function(Z){for(var te=this,ie=arguments.length?Z:te.rawTime();te;)ie=te._start+ie/(Math.abs(te._ts)||1),te=te._dp;return!this.parent&&this._sat?this._sat.globalTime(Z):ie},_.repeat=function(Z){return arguments.length?(this._repeat=Z===1/0?-2:Z,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},_.repeatDelay=function(Z){if(arguments.length){var te=this._time;return this._rDelay=Z,_onUpdateTotalDuration(this),te?this.time(te):this}return this._rDelay},_.yoyo=function(Z){return arguments.length?(this._yoyo=Z,this):this._yoyo},_.seek=function(Z,te){return this.totalTime(_parsePosition(this,Z),_isNotFalse(te))},_.restart=function(Z,te){return this.play().totalTime(Z?-this._delay:0,_isNotFalse(te)),this._dur||(this._zTime=-_tinyNum),this},_.play=function(Z,te){return Z!=null&&this.seek(Z,te),this.reversed(!1).paused(!1)},_.reverse=function(Z,te){return Z!=null&&this.seek(Z||this.totalDuration(),te),this.reversed(!0).paused(!1)},_.pause=function(Z,te){return Z!=null&&this.seek(Z,te),this.paused(!0)},_.resume=function(){return this.paused(!1)},_.reversed=function(Z){return arguments.length?(!!Z!==this.reversed()&&this.timeScale(-this._rts||(Z?-_tinyNum:0)),this):this._rts<0},_.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},_.isActive=function(){var Z=this.parent||this._dp,te=this._start,ie;return!!(!Z||this._ts&&this._initted&&Z.isActive()&&(ie=Z.rawTime(!0))>=te&&ie<this.endTime(!0)-_tinyNum)},_.eventCallback=function(Z,te,ie){var se=this.vars;return arguments.length>1?(te?(se[Z]=te,ie&&(se[Z+"Params"]=ie),Z==="onUpdate"&&(this._onUpdate=te)):delete se[Z],this):se[Z]},_.then=function(Z){var te=this;return new Promise(function(ie){var se=_isFunction(Z)?Z:_passThrough,oe=function(){var le=te.then;te.then=null,_isFunction(se)&&(se=se(te))&&(se.then||se===te)&&(te.then=le),ie(se),te.then=le};te._initted&&te.totalProgress()===1&&te._ts>=0||!te._tTime&&te._ts<0?oe():te._prom=oe})},_.kill=function(){_interrupt(this)},ne})();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=(function(ne){_inheritsLoose(_,ne);function _(Z,te){var ie;return Z===void 0&&(Z={}),ie=ne.call(this,Z)||this,ie.labels={},ie.smoothChildTiming=!!Z.smoothChildTiming,ie.autoRemoveChildren=!!Z.autoRemoveChildren,ie._sort=_isNotFalse(Z.sortChildren),_globalTimeline&&_addToTimeline(Z.parent||_globalTimeline,_assertThisInitialized(ie),te),Z.reversed&&ie.reverse(),Z.paused&&ie.paused(!0),Z.scrollTrigger&&_scrollTrigger(_assertThisInitialized(ie),Z.scrollTrigger),ie}var K=_.prototype;return K.to=function(te,ie,se){return _createTweenType(0,arguments,this),this},K.from=function(te,ie,se){return _createTweenType(1,arguments,this),this},K.fromTo=function(te,ie,se,oe){return _createTweenType(2,arguments,this),this},K.set=function(te,ie,se){return ie.duration=0,ie.parent=this,_inheritDefaults(ie).repeatDelay||(ie.repeat=0),ie.immediateRender=!!ie.immediateRender,new Tween(te,ie,_parsePosition(this,se),1),this},K.call=function(te,ie,se){return _addToTimeline(this,Tween.delayedCall(0,te,ie),se)},K.staggerTo=function(te,ie,se,oe,ae,le,ue){return se.duration=ie,se.stagger=se.stagger||oe,se.onComplete=le,se.onCompleteParams=ue,se.parent=this,new Tween(te,se,_parsePosition(this,ae)),this},K.staggerFrom=function(te,ie,se,oe,ae,le,ue){return se.runBackwards=1,_inheritDefaults(se).immediateRender=_isNotFalse(se.immediateRender),this.staggerTo(te,ie,se,oe,ae,le,ue)},K.staggerFromTo=function(te,ie,se,oe,ae,le,ue,fe){return oe.startAt=se,_inheritDefaults(oe).immediateRender=_isNotFalse(oe.immediateRender),this.staggerTo(te,ie,oe,ae,le,ue,fe)},K.render=function(te,ie,se){var oe=this._time,ae=this._dirty?this.totalDuration():this._tDur,le=this._dur,ue=te<=0?0:_roundPrecise(te),fe=this._zTime<0!=te<0&&(this._initted||!le),he,ge,_e,Se,Ee,ye,be,we,Pe,Oe,Be,Ue;if(this!==_globalTimeline&&ue>ae&&te>=0&&(ue=ae),ue!==this._tTime||se||fe){if(oe!==this._time&&le&&(ue+=this._time-oe,te+=this._time-oe),he=ue,Pe=this._start,we=this._ts,ye=!we,fe&&(le||(oe=this._zTime),(te||!ie)&&(this._zTime=te)),this._repeat){if(Be=this._yoyo,Ee=le+this._rDelay,this._repeat<-1&&te<0)return this.totalTime(Ee*100+te,ie,se);if(he=_roundPrecise(ue%Ee),ue===ae?(Se=this._repeat,he=le):(Oe=_roundPrecise(ue/Ee),Se=~~Oe,Se&&Se===Oe&&(he=le,Se--),he>le&&(he=le)),Oe=_animationCycle(this._tTime,Ee),!oe&&this._tTime&&Oe!==Se&&this._tTime-Oe*Ee-this._dur<=0&&(Oe=Se),Be&&Se&1&&(he=le-he,Ue=1),Se!==Oe&&!this._lock){var $e=Be&&Oe&1,De=$e===(Be&&Se&1);if(Se<Oe&&($e=!$e),oe=$e?0:ue%le?le:ue,this._lock=1,this.render(oe||(Ue?0:_roundPrecise(Se*Ee)),ie,!le)._lock=0,this._tTime=ue,!ie&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!Ue&&(this.invalidate()._lock=1),oe&&oe!==this._time||ye!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(le=this._dur,ae=this._tDur,De&&(this._lock=2,oe=$e?le:-1e-4,this.render(oe,!0),this.vars.repeatRefresh&&!Ue&&this.invalidate()),this._lock=0,!this._ts&&!ye)return this;_propagateYoyoEase(this,Ue)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(be=_findNextPauseTween(this,_roundPrecise(oe),_roundPrecise(he)),be&&(ue-=he-(he=be._start))),this._tTime=ue,this._time=he,this._act=!we,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=te,oe=0),!oe&&ue&&!ie&&!Oe&&(_callback(this,"onStart"),this._tTime!==ue))return this;if(he>=oe&&te>=0)for(ge=this._first;ge;){if(_e=ge._next,(ge._act||he>=ge._start)&&ge._ts&&be!==ge){if(ge.parent!==this)return this.render(te,ie,se);if(ge.render(ge._ts>0?(he-ge._start)*ge._ts:(ge._dirty?ge.totalDuration():ge._tDur)+(he-ge._start)*ge._ts,ie,se),he!==this._time||!this._ts&&!ye){be=0,_e&&(ue+=this._zTime=-_tinyNum);break}}ge=_e}else{ge=this._last;for(var ke=te<0?te:he;ge;){if(_e=ge._prev,(ge._act||ke<=ge._end)&&ge._ts&&be!==ge){if(ge.parent!==this)return this.render(te,ie,se);if(ge.render(ge._ts>0?(ke-ge._start)*ge._ts:(ge._dirty?ge.totalDuration():ge._tDur)+(ke-ge._start)*ge._ts,ie,se||_reverting$1&&_isRevertWorthy(ge)),he!==this._time||!this._ts&&!ye){be=0,_e&&(ue+=this._zTime=ke?-_tinyNum:_tinyNum);break}}ge=_e}}if(be&&!ie&&(this.pause(),be.render(he>=oe?0:-_tinyNum)._zTime=he>=oe?1:-1,this._ts))return this._start=Pe,_setEnd(this),this.render(te,ie,se);this._onUpdate&&!ie&&_callback(this,"onUpdate",!0),(ue===ae&&this._tTime>=this.totalDuration()||!ue&&oe)&&(Pe===this._start||Math.abs(we)!==Math.abs(this._ts))&&(this._lock||((te||!le)&&(ue===ae&&this._ts>0||!ue&&this._ts<0)&&_removeFromParent(this,1),!ie&&!(te<0&&!oe)&&(ue||oe||!ae)&&(_callback(this,ue===ae&&te>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(ue<ae&&this.timeScale()>0)&&this._prom())))}return this},K.add=function(te,ie){var se=this;if(_isNumber(ie)||(ie=_parsePosition(this,ie,te)),!(te instanceof Animation)){if(_isArray(te))return te.forEach(function(oe){return se.add(oe,ie)}),this;if(_isString(te))return this.addLabel(te,ie);if(_isFunction(te))te=Tween.delayedCall(0,te);else return this}return this!==te?_addToTimeline(this,te,ie):this},K.getChildren=function(te,ie,se,oe){te===void 0&&(te=!0),ie===void 0&&(ie=!0),se===void 0&&(se=!0),oe===void 0&&(oe=-_bigNum$1);for(var ae=[],le=this._first;le;)le._start>=oe&&(le instanceof Tween?ie&&ae.push(le):(se&&ae.push(le),te&&ae.push.apply(ae,le.getChildren(!0,ie,se)))),le=le._next;return ae},K.getById=function(te){for(var ie=this.getChildren(1,1,1),se=ie.length;se--;)if(ie[se].vars.id===te)return ie[se]},K.remove=function(te){return _isString(te)?this.removeLabel(te):_isFunction(te)?this.killTweensOf(te):(te.parent===this&&_removeLinkedListItem(this,te),te===this._recent&&(this._recent=this._last),_uncache(this))},K.totalTime=function(te,ie){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?te/this._ts:(this.totalDuration()-te)/-this._ts))),ne.prototype.totalTime.call(this,te,ie),this._forcing=0,this):this._tTime},K.addLabel=function(te,ie){return this.labels[te]=_parsePosition(this,ie),this},K.removeLabel=function(te){return delete this.labels[te],this},K.addPause=function(te,ie,se){var oe=Tween.delayedCall(0,ie||_emptyFunc,se);return oe.data="isPause",this._hasPause=1,_addToTimeline(this,oe,_parsePosition(this,te))},K.removePause=function(te){var ie=this._first;for(te=_parsePosition(this,te);ie;)ie._start===te&&ie.data==="isPause"&&_removeFromParent(ie),ie=ie._next},K.killTweensOf=function(te,ie,se){for(var oe=this.getTweensOf(te,se),ae=oe.length;ae--;)_overwritingTween!==oe[ae]&&oe[ae].kill(te,ie);return this},K.getTweensOf=function(te,ie){for(var se=[],oe=toArray(te),ae=this._first,le=_isNumber(ie),ue;ae;)ae instanceof Tween?_arrayContainsAny(ae._targets,oe)&&(le?(!_overwritingTween||ae._initted&&ae._ts)&&ae.globalTime(0)<=ie&&ae.globalTime(ae.totalDuration())>ie:!ie||ae.isActive())&&se.push(ae):(ue=ae.getTweensOf(oe,ie)).length&&se.push.apply(se,ue),ae=ae._next;return se},K.tweenTo=function(te,ie){ie=ie||{};var se=this,oe=_parsePosition(se,te),ae=ie,le=ae.startAt,ue=ae.onStart,fe=ae.onStartParams,he=ae.immediateRender,ge,_e=Tween.to(se,_setDefaults({ease:ie.ease||"none",lazy:!1,immediateRender:!1,time:oe,overwrite:"auto",duration:ie.duration||Math.abs((oe-(le&&"time"in le?le.time:se._time))/se.timeScale())||_tinyNum,onStart:function(){if(se.pause(),!ge){var Ee=ie.duration||Math.abs((oe-(le&&"time"in le?le.time:se._time))/se.timeScale());_e._dur!==Ee&&_setDuration(_e,Ee,0,1).render(_e._time,!0,!0),ge=1}ue&&ue.apply(_e,fe||[])}},ie));return he?_e.render(0):_e},K.tweenFromTo=function(te,ie,se){return this.tweenTo(ie,_setDefaults({startAt:{time:_parsePosition(this,te)}},se))},K.recent=function(){return this._recent},K.nextLabel=function(te){return te===void 0&&(te=this._time),_getLabelInDirection(this,_parsePosition(this,te))},K.previousLabel=function(te){return te===void 0&&(te=this._time),_getLabelInDirection(this,_parsePosition(this,te),1)},K.currentLabel=function(te){return arguments.length?this.seek(te,!0):this.previousLabel(this._time+_tinyNum)},K.shiftChildren=function(te,ie,se){se===void 0&&(se=0);for(var oe=this._first,ae=this.labels,le;oe;)oe._start>=se&&(oe._start+=te,oe._end+=te),oe=oe._next;if(ie)for(le in ae)ae[le]>=se&&(ae[le]+=te);return _uncache(this)},K.invalidate=function(te){var ie=this._first;for(this._lock=0;ie;)ie.invalidate(te),ie=ie._next;return ne.prototype.invalidate.call(this,te)},K.clear=function(te){te===void 0&&(te=!0);for(var ie=this._first,se;ie;)se=ie._next,this.remove(ie),ie=se;return this._dp&&(this._time=this._tTime=this._pTime=0),te&&(this.labels={}),_uncache(this)},K.totalDuration=function(te){var ie=0,se=this,oe=se._last,ae=_bigNum$1,le,ue,fe;if(arguments.length)return se.timeScale((se._repeat<0?se.duration():se.totalDuration())/(se.reversed()?-te:te));if(se._dirty){for(fe=se.parent;oe;)le=oe._prev,oe._dirty&&oe.totalDuration(),ue=oe._start,ue>ae&&se._sort&&oe._ts&&!se._lock?(se._lock=1,_addToTimeline(se,oe,ue-oe._delay,1)._lock=0):ae=ue,ue<0&&oe._ts&&(ie-=ue,(!fe&&!se._dp||fe&&fe.smoothChildTiming)&&(se._start+=ue/se._ts,se._time-=ue,se._tTime-=ue),se.shiftChildren(-ue,!1,-1/0),ae=0),oe._end>ie&&oe._ts&&(ie=oe._end),oe=le;_setDuration(se,se===_globalTimeline&&se._time>ie?se._time:ie,1,1),se._dirty=0}return se._tDur},_.updateRoot=function(te){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(te,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var ie=_globalTimeline._first;if((!ie||!ie._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;ie&&!ie._ts;)ie=ie._next;ie||_ticker.sleep()}}},_})(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(_,K,Z,te,ie,se,oe){var ae=new PropTween(this._pt,_,K,0,1,_renderComplexString,null,ie),le=0,ue=0,fe,he,ge,_e,Se,Ee,ye,be;for(ae.b=Z,ae.e=te,Z+="",te+="",(ye=~te.indexOf("random("))&&(te=_replaceRandom(te)),se&&(be=[Z,te],se(be,_,K),Z=be[0],te=be[1]),he=Z.match(_complexStringNumExp)||[];fe=_complexStringNumExp.exec(te);)_e=fe[0],Se=te.substring(le,fe.index),ge?ge=(ge+1)%5:Se.substr(-5)==="rgba("&&(ge=1),_e!==he[ue++]&&(Ee=parseFloat(he[ue-1])||0,ae._pt={_next:ae._pt,p:Se||ue===1?Se:",",s:Ee,c:_e.charAt(1)==="="?_parseRelative(Ee,_e)-Ee:parseFloat(_e)-Ee,m:ge&&ge<4?Math.round:0},le=_complexStringNumExp.lastIndex);return ae.c=le<te.length?te.substring(le,te.length):"",ae.fp=oe,(_relExp.test(te)||ye)&&(ae.e=0),this._pt=ae,ae},_addPropTween=function(_,K,Z,te,ie,se,oe,ae,le,ue){_isFunction(te)&&(te=te(ie||0,_,se));var fe=_[K],he=Z!=="get"?Z:_isFunction(fe)?le?_[K.indexOf("set")||!_isFunction(_["get"+K.substr(3)])?K:"get"+K.substr(3)](le):_[K]():fe,ge=_isFunction(fe)?le?_setterFuncWithParam:_setterFunc:_setterPlain,_e;if(_isString(te)&&(~te.indexOf("random(")&&(te=_replaceRandom(te)),te.charAt(1)==="="&&(_e=_parseRelative(he,te)+(getUnit(he)||0),(_e||_e===0)&&(te=_e))),!ue||he!==te||_forceAllPropTweens)return!isNaN(he*te)&&te!==""?(_e=new PropTween(this._pt,_,K,+he||0,te-(he||0),typeof fe=="boolean"?_renderBoolean:_renderPlain,0,ge),le&&(_e.fp=le),oe&&_e.modifier(oe,this,_),this._pt=_e):(!fe&&!(K in _)&&_missingPlugin(K,te),_addComplexStringPropTween.call(this,_,K,he,te,ge,ae||_config.stringFilter,le))},_processVars=function(_,K,Z,te,ie){if(_isFunction(_)&&(_=_parseFuncOrString(_,ie,K,Z,te)),!_isObject(_)||_.style&&_.nodeType||_isArray(_)||_isTypedArray(_))return _isString(_)?_parseFuncOrString(_,ie,K,Z,te):_;var se={},oe;for(oe in _)se[oe]=_parseFuncOrString(_[oe],ie,K,Z,te);return se},_checkPlugin=function(_,K,Z,te,ie,se){var oe,ae,le,ue;if(_plugins[_]&&(oe=new _plugins[_]).init(ie,oe.rawVars?K[_]:_processVars(K[_],te,ie,se,Z),Z,te,se)!==!1&&(Z._pt=ae=new PropTween(Z._pt,ie,_,0,1,oe.render,oe,0,oe.priority),Z!==_quickTween))for(le=Z._ptLookup[Z._targets.indexOf(ie)],ue=oe._props.length;ue--;)le[oe._props[ue]]=ae;return oe},_overwritingTween,_forceAllPropTweens,_initTween=function ne(_,K,Z){var te=_.vars,ie=te.ease,se=te.startAt,oe=te.immediateRender,ae=te.lazy,le=te.onUpdate,ue=te.runBackwards,fe=te.yoyoEase,he=te.keyframes,ge=te.autoRevert,_e=_._dur,Se=_._startAt,Ee=_._targets,ye=_.parent,be=ye&&ye.data==="nested"?ye.vars.targets:Ee,we=_._overwrite==="auto"&&!_suppressOverwrites,Pe=_.timeline,Oe,Be,Ue,$e,De,ke,Ge,Je,Ye,Qe,rt,ot,ct;if(Pe&&(!he||!ie)&&(ie="none"),_._ease=_parseEase(ie,_defaults.ease),_._yEase=fe?_invertEase(_parseEase(fe===!0?ie:fe,_defaults.ease)):0,fe&&_._yoyo&&!_._repeat&&(fe=_._yEase,_._yEase=_._ease,_._ease=fe),_._from=!Pe&&!!te.runBackwards,!Pe||he&&!te.stagger){if(Je=Ee[0]?_getCache(Ee[0]).harness:0,ot=Je&&te[Je.prop],Oe=_copyExcluding(te,_reservedProps),Se&&(Se._zTime<0&&Se.progress(1),K<0&&ue&&oe&&!ge?Se.render(-1,!0):Se.revert(ue&&_e?_revertConfigNoKill:_startAtRevertConfig),Se._lazy=0),se){if(_removeFromParent(_._startAt=Tween.set(Ee,_setDefaults({data:"isStart",overwrite:!1,parent:ye,immediateRender:!0,lazy:!Se&&_isNotFalse(ae),startAt:null,delay:0,onUpdate:le&&function(){return _callback(_,"onUpdate")},stagger:0},se))),_._startAt._dp=0,_._startAt._sat=_,K<0&&(_reverting$1||!oe&&!ge)&&_._startAt.revert(_revertConfigNoKill),oe&&_e&&K<=0&&Z<=0){K&&(_._zTime=K);return}}else if(ue&&_e&&!Se){if(K&&(oe=!1),Ue=_setDefaults({overwrite:!1,data:"isFromStart",lazy:oe&&!Se&&_isNotFalse(ae),immediateRender:oe,stagger:0,parent:ye},Oe),ot&&(Ue[Je.prop]=ot),_removeFromParent(_._startAt=Tween.set(Ee,Ue)),_._startAt._dp=0,_._startAt._sat=_,K<0&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_._startAt.render(-1,!0)),_._zTime=K,!oe)ne(_._startAt,_tinyNum,_tinyNum);else if(!K)return}for(_._pt=_._ptCache=0,ae=_e&&_isNotFalse(ae)||ae&&!_e,Be=0;Be<Ee.length;Be++){if(De=Ee[Be],Ge=De._gsap||_harness(Ee)[Be]._gsap,_._ptLookup[Be]=Qe={},_lazyLookup[Ge.id]&&_lazyTweens.length&&_lazyRender(),rt=be===Ee?Be:be.indexOf(De),Je&&(Ye=new Je).init(De,ot||Oe,_,rt,be)!==!1&&(_._pt=$e=new PropTween(_._pt,De,Ye.name,0,1,Ye.render,Ye,0,Ye.priority),Ye._props.forEach(function(je){Qe[je]=$e}),Ye.priority&&(ke=1)),!Je||ot)for(Ue in Oe)_plugins[Ue]&&(Ye=_checkPlugin(Ue,Oe,_,rt,De,be))?Ye.priority&&(ke=1):Qe[Ue]=$e=_addPropTween.call(_,De,Ue,"get",Oe[Ue],rt,be,0,te.stringFilter);_._op&&_._op[Be]&&_.kill(De,_._op[Be]),we&&_._pt&&(_overwritingTween=_,_globalTimeline.killTweensOf(De,Qe,_.globalTime(K)),ct=!_.parent,_overwritingTween=0),_._pt&&ae&&(_lazyLookup[Ge.id]=1)}ke&&_sortPropTweensByPriority(_),_._onInit&&_._onInit(_)}_._onUpdate=le,_._initted=(!_._op||_._pt)&&!ct,he&&K<=0&&Pe.render(_bigNum$1,!0,!0)},_updatePropTweens=function(_,K,Z,te,ie,se,oe,ae){var le=(_._pt&&_._ptCache||(_._ptCache={}))[K],ue,fe,he,ge;if(!le)for(le=_._ptCache[K]=[],he=_._ptLookup,ge=_._targets.length;ge--;){if(ue=he[ge][K],ue&&ue.d&&ue.d._pt)for(ue=ue.d._pt;ue&&ue.p!==K&&ue.fp!==K;)ue=ue._next;if(!ue)return _forceAllPropTweens=1,_.vars[K]="+=0",_initTween(_,oe),_forceAllPropTweens=0,ae?_warn(K+" not eligible for reset"):1;le.push(ue)}for(ge=le.length;ge--;)fe=le[ge],ue=fe._pt||fe,ue.s=(te||te===0)&&!ie?te:ue.s+(te||0)+se*ue.c,ue.c=Z-ue.s,fe.e&&(fe.e=_round(Z)+getUnit(fe.e)),fe.b&&(fe.b=ue.s+getUnit(fe.b))},_addAliasesToVars=function(_,K){var Z=_[0]?_getCache(_[0]).harness:0,te=Z&&Z.aliases,ie,se,oe,ae;if(!te)return K;ie=_merge({},K);for(se in te)if(se in ie)for(ae=te[se].split(","),oe=ae.length;oe--;)ie[ae[oe]]=ie[se];return ie},_parseKeyframe=function(_,K,Z,te){var ie=K.ease||te||"power1.inOut",se,oe;if(_isArray(K))oe=Z[_]||(Z[_]=[]),K.forEach(function(ae,le){return oe.push({t:le/(K.length-1)*100,v:ae,e:ie})});else for(se in K)oe=Z[se]||(Z[se]=[]),se==="ease"||oe.push({t:parseFloat(_),v:K[se],e:ie})},_parseFuncOrString=function(_,K,Z,te,ie){return _isFunction(_)?_.call(K,Z,te,ie):_isString(_)&&~_.indexOf("random(")?_replaceRandom(_):_},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(ne){return _staggerPropsToSkip[ne]=1});var Tween=(function(ne){_inheritsLoose(_,ne);function _(Z,te,ie,se){var oe;typeof te=="number"&&(ie.duration=te,te=ie,ie=null),oe=ne.call(this,se?te:_inheritDefaults(te))||this;var ae=oe.vars,le=ae.duration,ue=ae.delay,fe=ae.immediateRender,he=ae.stagger,ge=ae.overwrite,_e=ae.keyframes,Se=ae.defaults,Ee=ae.scrollTrigger,ye=ae.yoyoEase,be=te.parent||_globalTimeline,we=(_isArray(Z)||_isTypedArray(Z)?_isNumber(Z[0]):"length"in te)?[Z]:toArray(Z),Pe,Oe,Be,Ue,$e,De,ke,Ge;if(oe._targets=we.length?_harness(we):_warn("GSAP target "+Z+" not found. https://gsap.com",!_config.nullTargetWarn)||[],oe._ptLookup=[],oe._overwrite=ge,_e||he||_isFuncOrString(le)||_isFuncOrString(ue)){if(te=oe.vars,Pe=oe.timeline=new Timeline({data:"nested",defaults:Se||{},targets:be&&be.data==="nested"?be.vars.targets:we}),Pe.kill(),Pe.parent=Pe._dp=_assertThisInitialized(oe),Pe._start=0,he||_isFuncOrString(le)||_isFuncOrString(ue)){if(Ue=we.length,ke=he&&distribute(he),_isObject(he))for($e in he)~_staggerTweenProps.indexOf($e)&&(Ge||(Ge={}),Ge[$e]=he[$e]);for(Oe=0;Oe<Ue;Oe++)Be=_copyExcluding(te,_staggerPropsToSkip),Be.stagger=0,ye&&(Be.yoyoEase=ye),Ge&&_merge(Be,Ge),De=we[Oe],Be.duration=+_parseFuncOrString(le,_assertThisInitialized(oe),Oe,De,we),Be.delay=(+_parseFuncOrString(ue,_assertThisInitialized(oe),Oe,De,we)||0)-oe._delay,!he&&Ue===1&&Be.delay&&(oe._delay=ue=Be.delay,oe._start+=ue,Be.delay=0),Pe.to(De,Be,ke?ke(Oe,De,we):0),Pe._ease=_easeMap.none;Pe.duration()?le=ue=0:oe.timeline=0}else if(_e){_inheritDefaults(_setDefaults(Pe.vars.defaults,{ease:"none"})),Pe._ease=_parseEase(_e.ease||te.ease||"none");var Je=0,Ye,Qe,rt;if(_isArray(_e))_e.forEach(function(ot){return Pe.to(we,ot,">")}),Pe.duration();else{Be={};for($e in _e)$e==="ease"||$e==="easeEach"||_parseKeyframe($e,_e[$e],Be,_e.easeEach);for($e in Be)for(Ye=Be[$e].sort(function(ot,ct){return ot.t-ct.t}),Je=0,Oe=0;Oe<Ye.length;Oe++)Qe=Ye[Oe],rt={ease:Qe.e,duration:(Qe.t-(Oe?Ye[Oe-1].t:0))/100*le},rt[$e]=Qe.v,Pe.to(we,rt,Je),Je+=rt.duration;Pe.duration()<le&&Pe.to({},{duration:le-Pe.duration()})}}le||oe.duration(le=Pe.duration())}else oe.timeline=0;return ge===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(oe),_globalTimeline.killTweensOf(we),_overwritingTween=0),_addToTimeline(be,_assertThisInitialized(oe),ie),te.reversed&&oe.reverse(),te.paused&&oe.paused(!0),(fe||!le&&!_e&&oe._start===_roundPrecise(be._time)&&_isNotFalse(fe)&&_hasNoPausedAncestors(_assertThisInitialized(oe))&&be.data!=="nested")&&(oe._tTime=-_tinyNum,oe.render(Math.max(0,-ue)||0)),Ee&&_scrollTrigger(_assertThisInitialized(oe),Ee),oe}var K=_.prototype;return K.render=function(te,ie,se){var oe=this._time,ae=this._tDur,le=this._dur,ue=te<0,fe=te>ae-_tinyNum&&!ue?ae:te<_tinyNum?0:te,he,ge,_e,Se,Ee,ye,be,we,Pe;if(!le)_renderZeroDurationTween(this,te,ie,se);else if(fe!==this._tTime||!te||se||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==ue||this._lazy){if(he=fe,we=this.timeline,this._repeat){if(Se=le+this._rDelay,this._repeat<-1&&ue)return this.totalTime(Se*100+te,ie,se);if(he=_roundPrecise(fe%Se),fe===ae?(_e=this._repeat,he=le):(Ee=_roundPrecise(fe/Se),_e=~~Ee,_e&&_e===Ee?(he=le,_e--):he>le&&(he=le)),ye=this._yoyo&&_e&1,ye&&(Pe=this._yEase,he=le-he),Ee=_animationCycle(this._tTime,Se),he===oe&&!se&&this._initted&&_e===Ee)return this._tTime=fe,this;_e!==Ee&&(we&&this._yEase&&_propagateYoyoEase(we,ye),this.vars.repeatRefresh&&!ye&&!this._lock&&he!==Se&&this._initted&&(this._lock=se=1,this.render(_roundPrecise(Se*_e),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,ue?te:he,se,ie,fe))return this._tTime=0,this;if(oe!==this._time&&!(se&&this.vars.repeatRefresh&&_e!==Ee))return this;if(le!==this._dur)return this.render(te,ie,se)}if(this._tTime=fe,this._time=he,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=be=(Pe||this._ease)(he/le),this._from&&(this.ratio=be=1-be),!oe&&fe&&!ie&&!Ee&&(_callback(this,"onStart"),this._tTime!==fe))return this;for(ge=this._pt;ge;)ge.r(be,ge.d),ge=ge._next;we&&we.render(te<0?te:we._dur*we._ease(he/this._dur),ie,se)||this._startAt&&(this._zTime=te),this._onUpdate&&!ie&&(ue&&_rewindStartAt(this,te,ie,se),_callback(this,"onUpdate")),this._repeat&&_e!==Ee&&this.vars.onRepeat&&!ie&&this.parent&&_callback(this,"onRepeat"),(fe===this._tDur||!fe)&&this._tTime===fe&&(ue&&!this._onUpdate&&_rewindStartAt(this,te,!0,!0),(te||!le)&&(fe===this._tDur&&this._ts>0||!fe&&this._ts<0)&&_removeFromParent(this,1),!ie&&!(ue&&!oe)&&(fe||oe||ye)&&(_callback(this,fe===ae?"onComplete":"onReverseComplete",!0),this._prom&&!(fe<ae&&this.timeScale()>0)&&this._prom()))}return this},K.targets=function(){return this._targets},K.invalidate=function(te){return(!te||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(te),ne.prototype.invalidate.call(this,te)},K.resetTo=function(te,ie,se,oe,ae){_tickerActive||_ticker.wake(),this._ts||this.play();var le=Math.min(this._dur,(this._dp._time-this._start)*this._ts),ue;return this._initted||_initTween(this,le),ue=this._ease(le/this._dur),_updatePropTweens(this,te,ie,se,oe,ue,le,ae)?this.resetTo(te,ie,se,oe,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},K.kill=function(te,ie){if(ie===void 0&&(ie="all"),!te&&(!ie||ie==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_reverting$1),this;if(this.timeline){var se=this.timeline.totalDuration();return this.timeline.killTweensOf(te,ie,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&se!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/se,0,1),this}var oe=this._targets,ae=te?toArray(te):oe,le=this._ptLookup,ue=this._pt,fe,he,ge,_e,Se,Ee,ye;if((!ie||ie==="all")&&_arraysMatch(oe,ae))return ie==="all"&&(this._pt=0),_interrupt(this);for(fe=this._op=this._op||[],ie!=="all"&&(_isString(ie)&&(Se={},_forEachName(ie,function(be){return Se[be]=1}),ie=Se),ie=_addAliasesToVars(oe,ie)),ye=oe.length;ye--;)if(~ae.indexOf(oe[ye])){he=le[ye],ie==="all"?(fe[ye]=ie,_e=he,ge={}):(ge=fe[ye]=fe[ye]||{},_e=ie);for(Se in _e)Ee=he&&he[Se],Ee&&((!("kill"in Ee.d)||Ee.d.kill(Se)===!0)&&_removeLinkedListItem(this,Ee,"_pt"),delete he[Se]),ge!=="all"&&(ge[Se]=1)}return this._initted&&!this._pt&&ue&&_interrupt(this),this},_.to=function(te,ie){return new _(te,ie,arguments[2])},_.from=function(te,ie){return _createTweenType(1,arguments)},_.delayedCall=function(te,ie,se,oe){return new _(ie,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:te,onComplete:ie,onReverseComplete:ie,onCompleteParams:se,onReverseCompleteParams:se,callbackScope:oe})},_.fromTo=function(te,ie,se){return _createTweenType(2,arguments)},_.set=function(te,ie){return ie.duration=0,ie.repeatDelay||(ie.repeat=0),new _(te,ie)},_.killTweensOf=function(te,ie,se){return _globalTimeline.killTweensOf(te,ie,se)},_})(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(ne){Tween[ne]=function(){var _=new Timeline,K=_slice.call(arguments,0);return K.splice(ne==="staggerFromTo"?5:4,0,0),_[ne].apply(_,K)}});var _setterPlain=function(_,K,Z){return _[K]=Z},_setterFunc=function(_,K,Z){return _[K](Z)},_setterFuncWithParam=function(_,K,Z,te){return _[K](te.fp,Z)},_setterAttribute=function(_,K,Z){return _.setAttribute(K,Z)},_getSetter=function(_,K){return _isFunction(_[K])?_setterFunc:_isUndefined(_[K])&&_.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(_,K){return K.set(K.t,K.p,Math.round((K.s+K.c*_)*1e6)/1e6,K)},_renderBoolean=function(_,K){return K.set(K.t,K.p,!!(K.s+K.c*_),K)},_renderComplexString=function(_,K){var Z=K._pt,te="";if(!_&&K.b)te=K.b;else if(_===1&&K.e)te=K.e;else{for(;Z;)te=Z.p+(Z.m?Z.m(Z.s+Z.c*_):Math.round((Z.s+Z.c*_)*1e4)/1e4)+te,Z=Z._next;te+=K.c}K.set(K.t,K.p,te,K)},_renderPropTweens=function(_,K){for(var Z=K._pt;Z;)Z.r(_,Z.d),Z=Z._next},_addPluginModifier=function(_,K,Z,te){for(var ie=this._pt,se;ie;)se=ie._next,ie.p===te&&ie.modifier(_,K,Z),ie=se},_killPropTweensOf=function(_){for(var K=this._pt,Z,te;K;)te=K._next,K.p===_&&!K.op||K.op===_?_removeLinkedListItem(this,K,"_pt"):K.dep||(Z=1),K=te;return!Z},_setterWithModifier=function(_,K,Z,te){te.mSet(_,K,te.m.call(te.tween,Z,te.mt),te)},_sortPropTweensByPriority=function(_){for(var K=_._pt,Z,te,ie,se;K;){for(Z=K._next,te=ie;te&&te.pr>K.pr;)te=te._next;(K._prev=te?te._prev:se)?K._prev._next=K:ie=K,(K._next=te)?te._prev=K:se=K,K=Z}_._pt=ie},PropTween=(function(){function ne(K,Z,te,ie,se,oe,ae,le,ue){this.t=Z,this.s=ie,this.c=se,this.p=te,this.r=oe||_renderPlain,this.d=ae||this,this.set=le||_setterPlain,this.pr=ue||0,this._next=K,K&&(K._prev=this)}var _=ne.prototype;return _.modifier=function(Z,te,ie){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=Z,this.mt=ie,this.tween=te},ne})();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(ne){return _reservedProps[ne]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function(_){return(_listeners[_]||_emptyArray).map(function(K){return K()})},_onMediaChange=function(){var _=Date.now(),K=[];_-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(Z){var te=Z.queries,ie=Z.conditions,se,oe,ae,le;for(oe in te)se=_win$1.matchMedia(te[oe]).matches,se&&(ae=1),se!==ie[oe]&&(ie[oe]=se,le=1);le&&(Z.revert(),ae&&K.push(Z))}),_dispatch("matchMediaRevert"),K.forEach(function(Z){return Z.onMatch(Z,function(te){return Z.add(null,te)})}),_lastMediaTime=_,_dispatch("matchMedia"))},Context=(function(){function ne(K,Z){this.selector=Z&&selector(Z),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,K&&this.add(K)}var _=ne.prototype;return _.add=function(Z,te,ie){_isFunction(Z)&&(ie=te,te=Z,Z=_isFunction);var se=this,oe=function(){var le=_context,ue=se.selector,fe;return le&&le!==se&&le.data.push(se),ie&&(se.selector=selector(ie)),_context=se,fe=te.apply(se,arguments),_isFunction(fe)&&se._r.push(fe),_context=le,se.selector=ue,se.isReverted=!1,fe};return se.last=oe,Z===_isFunction?oe(se,function(ae){return se.add(null,ae)}):Z?se[Z]=oe:oe},_.ignore=function(Z){var te=_context;_context=null,Z(this),_context=te},_.getTweens=function(){var Z=[];return this.data.forEach(function(te){return te instanceof ne?Z.push.apply(Z,te.getTweens()):te instanceof Tween&&!(te.parent&&te.parent.data==="nested")&&Z.push(te)}),Z},_.clear=function(){this._r.length=this.data.length=0},_.kill=function(Z,te){var ie=this;if(Z?(function(){for(var oe=ie.getTweens(),ae=ie.data.length,le;ae--;)le=ie.data[ae],le.data==="isFlip"&&(le.revert(),le.getChildren(!0,!0,!1).forEach(function(ue){return oe.splice(oe.indexOf(ue),1)}));for(oe.map(function(ue){return{g:ue._dur||ue._delay||ue._sat&&!ue._sat.vars.immediateRender?ue.globalTime(0):-1/0,t:ue}}).sort(function(ue,fe){return fe.g-ue.g||-1/0}).forEach(function(ue){return ue.t.revert(Z)}),ae=ie.data.length;ae--;)le=ie.data[ae],le instanceof Timeline?le.data!=="nested"&&(le.scrollTrigger&&le.scrollTrigger.revert(),le.kill()):!(le instanceof Tween)&&le.revert&&le.revert(Z);ie._r.forEach(function(ue){return ue(Z,ie)}),ie.isReverted=!0})():this.data.forEach(function(oe){return oe.kill&&oe.kill()}),this.clear(),te)for(var se=_media.length;se--;)_media[se].id===this.id&&_media.splice(se,1)},_.revert=function(Z){this.kill(Z||{})},ne})(),MatchMedia=(function(){function ne(K){this.contexts=[],this.scope=K,_context&&_context.data.push(this)}var _=ne.prototype;return _.add=function(Z,te,ie){_isObject(Z)||(Z={matches:Z});var se=new Context(0,ie||this.scope),oe=se.conditions={},ae,le,ue;_context&&!se.selector&&(se.selector=_context.selector),this.contexts.push(se),te=se.add("onMatch",te),se.queries=Z;for(le in Z)le==="all"?ue=1:(ae=_win$1.matchMedia(Z[le]),ae&&(_media.indexOf(se)<0&&_media.push(se),(oe[le]=ae.matches)&&(ue=1),ae.addListener?ae.addListener(_onMediaChange):ae.addEventListener("change",_onMediaChange)));return ue&&te(se,function(fe){return se.add(null,fe)}),this},_.revert=function(Z){this.kill(Z||{})},_.kill=function(Z){this.contexts.forEach(function(te){return te.kill(Z,!0)})},ne})(),_gsap={registerPlugin:function(){for(var _=arguments.length,K=new Array(_),Z=0;Z<_;Z++)K[Z]=arguments[Z];K.forEach(function(te){return _createPlugin(te)})},timeline:function(_){return new Timeline(_)},getTweensOf:function(_,K){return _globalTimeline.getTweensOf(_,K)},getProperty:function(_,K,Z,te){_isString(_)&&(_=toArray(_)[0]);var ie=_getCache(_||{}).get,se=Z?_passThrough:_numericIfPossible;return Z==="native"&&(Z=""),_&&(K?se((_plugins[K]&&_plugins[K].get||ie)(_,K,Z,te)):function(oe,ae,le){return se((_plugins[oe]&&_plugins[oe].get||ie)(_,oe,ae,le))})},quickSetter:function(_,K,Z){if(_=toArray(_),_.length>1){var te=_.map(function(ue){return gsap.quickSetter(ue,K,Z)}),ie=te.length;return function(ue){for(var fe=ie;fe--;)te[fe](ue)}}_=_[0]||{};var se=_plugins[K],oe=_getCache(_),ae=oe.harness&&(oe.harness.aliases||{})[K]||K,le=se?function(ue){var fe=new se;_quickTween._pt=0,fe.init(_,Z?ue+Z:ue,_quickTween,0,[_]),fe.render(1,fe),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:oe.set(_,ae);return se?le:function(ue){return le(_,ae,Z?ue+Z:ue,oe,1)}},quickTo:function(_,K,Z){var te,ie=gsap.to(_,_setDefaults((te={},te[K]="+=0.1",te.paused=!0,te.stagger=0,te),Z||{})),se=function(ae,le,ue){return ie.resetTo(K,ae,le,ue)};return se.tween=ie,se},isTweening:function(_){return _globalTimeline.getTweensOf(_,!0).length>0},defaults:function(_){return _&&_.ease&&(_.ease=_parseEase(_.ease,_defaults.ease)),_mergeDeep(_defaults,_||{})},config:function(_){return _mergeDeep(_config,_||{})},registerEffect:function(_){var K=_.name,Z=_.effect,te=_.plugins,ie=_.defaults,se=_.extendTimeline;(te||"").split(",").forEach(function(oe){return oe&&!_plugins[oe]&&!_globals[oe]&&_warn(K+" effect requires "+oe+" plugin.")}),_effects[K]=function(oe,ae,le){return Z(toArray(oe),_setDefaults(ae||{},ie),le)},se&&(Timeline.prototype[K]=function(oe,ae,le){return this.add(_effects[K](oe,_isObject(ae)?ae:(le=ae)&&{},this),le)})},registerEase:function(_,K){_easeMap[_]=_parseEase(K)},parseEase:function(_,K){return arguments.length?_parseEase(_,K):_easeMap},getById:function(_){return _globalTimeline.getById(_)},exportRoot:function(_,K){_===void 0&&(_={});var Z=new Timeline(_),te,ie;for(Z.smoothChildTiming=_isNotFalse(_.smoothChildTiming),_globalTimeline.remove(Z),Z._dp=0,Z._time=Z._tTime=_globalTimeline._time,te=_globalTimeline._first;te;)ie=te._next,(K||!(!te._dur&&te instanceof Tween&&te.vars.onComplete===te._targets[0]))&&_addToTimeline(Z,te,te._start-te._delay),te=ie;return _addToTimeline(_globalTimeline,Z,0),Z},context:function(_,K){return _?new Context(_,K):_context},matchMedia:function(_){return new MatchMedia(_)},matchMediaRefresh:function(){return _media.forEach(function(_){var K=_.conditions,Z,te;for(te in K)K[te]&&(K[te]=!1,Z=1);Z&&_.revert()})||_onMediaChange()},addEventListener:function(_,K){var Z=_listeners[_]||(_listeners[_]=[]);~Z.indexOf(K)||Z.push(K)},removeEventListener:function(_,K){var Z=_listeners[_],te=Z&&Z.indexOf(K);te>=0&&Z.splice(te,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(_){return _&&_context&&(_context.data.push(_),_._ctx=_context),_context},suppressOverwrites:function(_){return _suppressOverwrites=_}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(ne){return _gsap[ne]=Tween[ne]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(_,K){for(var Z=_._pt;Z&&Z.p!==K&&Z.op!==K&&Z.fp!==K;)Z=Z._next;return Z},_addModifiers=function(_,K){var Z=_._targets,te,ie,se;for(te in K)for(ie=Z.length;ie--;)se=_._ptLookup[ie][te],se&&(se=se.d)&&(se._pt&&(se=_getPluginPropTween(se,te)),se&&se.modifier&&se.modifier(K[te],_,Z[ie],te))},_buildModifierPlugin=function(_,K){return{name:_,headless:1,rawVars:1,init:function(te,ie,se){se._onInit=function(oe){var ae,le;if(_isString(ie)&&(ae={},_forEachName(ie,function(ue){return ae[ue]=1}),ie=ae),K){ae={};for(le in ie)ae[le]=K(ie[le]);ie=ae}_addModifiers(oe,ie)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function(_,K,Z,te,ie){var se,oe,ae;this.tween=Z;for(se in K)ae=_.getAttribute(se)||"",oe=this.add(_,"setAttribute",(ae||0)+"",K[se],te,ie,0,0,se),oe.op=se,oe.b=ae,this._props.push(se)},render:function(_,K){for(var Z=K._pt;Z;)_reverting$1?Z.set(Z.t,Z.p,Z.b,Z):Z.r(_,Z.d),Z=Z._next}},{name:"endArray",headless:1,init:function(_,K){for(var Z=K.length;Z--;)this.add(_,Z,_[Z]||0,K[Z],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.13.0";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(_,K){return K.set(K.t,K.p,Math.round((K.s+K.c*_)*1e4)/1e4+K.u,K)},_renderPropWithEnd=function(_,K){return K.set(K.t,K.p,_===1?K.e:Math.round((K.s+K.c*_)*1e4)/1e4+K.u,K)},_renderCSSPropWithBeginning=function(_,K){return K.set(K.t,K.p,_?Math.round((K.s+K.c*_)*1e4)/1e4+K.u:K.b,K)},_renderRoundedCSSProp=function(_,K){var Z=K.s+K.c*_;K.set(K.t,K.p,~~(Z+(Z<0?-.5:.5))+K.u,K)},_renderNonTweeningValue=function(_,K){return K.set(K.t,K.p,_?K.e:K.b,K)},_renderNonTweeningValueOnlyAtEnd=function(_,K){return K.set(K.t,K.p,_!==1?K.b:K.e,K)},_setterCSSStyle=function(_,K,Z){return _.style[K]=Z},_setterCSSProp=function(_,K,Z){return _.style.setProperty(K,Z)},_setterTransform=function(_,K,Z){return _._gsap[K]=Z},_setterScale=function(_,K,Z){return _._gsap.scaleX=_._gsap.scaleY=Z},_setterScaleWithRender=function(_,K,Z,te,ie){var se=_._gsap;se.scaleX=se.scaleY=Z,se.renderTransform(ie,se)},_setterTransformWithRender=function(_,K,Z,te,ie){var se=_._gsap;se[K]=Z,se.renderTransform(ie,se)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function ne(_,K){var Z=this,te=this.target,ie=te.style,se=te._gsap;if(_ in _transformProps&&ie){if(this.tfm=this.tfm||{},_!=="transform")_=_propertyAliases[_]||_,~_.indexOf(",")?_.split(",").forEach(function(oe){return Z.tfm[oe]=_get(te,oe)}):this.tfm[_]=se.x?se[_]:_get(te,_),_===_transformOriginProp&&(this.tfm.zOrigin=se.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(oe){return ne.call(Z,oe,K)});if(this.props.indexOf(_transformProp)>=0)return;se.svg&&(this.svgo=te.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,K,"")),_=_transformProp}(ie||K)&&this.props.push(_,K,ie[_])},_removeIndependentTransforms=function(_){_.translate&&(_.removeProperty("translate"),_.removeProperty("scale"),_.removeProperty("rotate"))},_revertStyle=function(){var _=this.props,K=this.target,Z=K.style,te=K._gsap,ie,se;for(ie=0;ie<_.length;ie+=3)_[ie+1]?_[ie+1]===2?K[_[ie]](_[ie+2]):K[_[ie]]=_[ie+2]:_[ie+2]?Z[_[ie]]=_[ie+2]:Z.removeProperty(_[ie].substr(0,2)==="--"?_[ie]:_[ie].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(se in this.tfm)te[se]=this.tfm[se];te.svg&&(te.renderTransform(),K.setAttribute("data-svg-origin",this.svgo||"")),ie=_reverting(),(!ie||!ie.isStart)&&!Z[_transformProp]&&(_removeIndependentTransforms(Z),te.zOrigin&&Z[_transformOriginProp]&&(Z[_transformOriginProp]+=" "+te.zOrigin+"px",te.zOrigin=0,te.renderTransform()),te.uncache=1)}},_getStyleSaver=function(_,K){var Z={target:_,props:[],revert:_revertStyle,save:_saveStyle};return _._gsap||gsap.core.getCache(_),K&&_.style&&_.nodeType&&K.split(",").forEach(function(te){return Z.save(te)}),Z},_supports3D,_createElement=function(_,K){var Z=_doc.createElementNS?_doc.createElementNS((K||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),_):_doc.createElement(_);return Z&&Z.style?Z:_doc.createElement(_)},_getComputedProperty=function ne(_,K,Z){var te=getComputedStyle(_);return te[K]||te.getPropertyValue(K.replace(_capsExp,"-$1").toLowerCase())||te.getPropertyValue(K)||!Z&&ne(_,_checkPropPrefix(K)||K,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(_,K,Z){var te=K||_tempDiv,ie=te.style,se=5;if(_ in ie&&!Z)return _;for(_=_.charAt(0).toUpperCase()+_.substr(1);se--&&!(_prefixes[se]+_ in ie););return se<0?null:(se===3?"ms":se>=0?_prefixes[se]:"")+_},_initCore=function(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap.core.reverting,_pluginInitted=1)},_getReparentedCloneBBox=function(_){var K=_.ownerSVGElement,Z=_createElement("svg",K&&K.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),te=_.cloneNode(!0),ie;te.style.display="block",Z.appendChild(te),_docElement.appendChild(Z);try{ie=te.getBBox()}catch{}return Z.removeChild(te),_docElement.removeChild(Z),ie},_getAttributeFallbacks=function(_,K){for(var Z=K.length;Z--;)if(_.hasAttribute(K[Z]))return _.getAttribute(K[Z])},_getBBox=function(_){var K,Z;try{K=_.getBBox()}catch{K=_getReparentedCloneBBox(_),Z=1}return K&&(K.width||K.height)||Z||(K=_getReparentedCloneBBox(_)),K&&!K.width&&!K.x&&!K.y?{x:+_getAttributeFallbacks(_,["x","cx","x1"])||0,y:+_getAttributeFallbacks(_,["y","cy","y1"])||0,width:0,height:0}:K},_isSVG=function(_){return!!(_.getCTM&&(!_.parentNode||_.ownerSVGElement)&&_getBBox(_))},_removeProperty=function(_,K){if(K){var Z=_.style,te;K in _transformProps&&K!==_transformOriginProp&&(K=_transformProp),Z.removeProperty?(te=K.substr(0,2),(te==="ms"||K.substr(0,6)==="webkit")&&(K="-"+K),Z.removeProperty(te==="--"?K:K.replace(_capsExp,"-$1").toLowerCase())):Z.removeAttribute(K)}},_addNonTweeningPT=function(_,K,Z,te,ie,se){var oe=new PropTween(_._pt,K,Z,0,1,se?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return _._pt=oe,oe.b=te,oe.e=ie,_._props.push(Z),oe},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function ne(_,K,Z,te){var ie=parseFloat(Z)||0,se=(Z+"").trim().substr((ie+"").length)||"px",oe=_tempDiv.style,ae=_horizontalExp.test(K),le=_.tagName.toLowerCase()==="svg",ue=(le?"client":"offset")+(ae?"Width":"Height"),fe=100,he=te==="px",ge=te==="%",_e,Se,Ee,ye;if(te===se||!ie||_nonConvertibleUnits[te]||_nonConvertibleUnits[se])return ie;if(se!=="px"&&!he&&(ie=ne(_,K,Z,"px")),ye=_.getCTM&&_isSVG(_),(ge||se==="%")&&(_transformProps[K]||~K.indexOf("adius")))return _e=ye?_.getBBox()[ae?"width":"height"]:_[ue],_round(ge?ie/_e*fe:ie/100*_e);if(oe[ae?"width":"height"]=fe+(he?se:te),Se=te!=="rem"&&~K.indexOf("adius")||te==="em"&&_.appendChild&&!le?_:_.parentNode,ye&&(Se=(_.ownerSVGElement||{}).parentNode),(!Se||Se===_doc||!Se.appendChild)&&(Se=_doc.body),Ee=Se._gsap,Ee&&ge&&Ee.width&&ae&&Ee.time===_ticker.time&&!Ee.uncache)return _round(ie/Ee.width*fe);if(ge&&(K==="height"||K==="width")){var be=_.style[K];_.style[K]=fe+te,_e=_[ue],be?_.style[K]=be:_removeProperty(_,K)}else(ge||se==="%")&&!_nonStandardLayouts[_getComputedProperty(Se,"display")]&&(oe.position=_getComputedProperty(_,"position")),Se===_&&(oe.position="static"),Se.appendChild(_tempDiv),_e=_tempDiv[ue],Se.removeChild(_tempDiv),oe.position="absolute";return ae&&ge&&(Ee=_getCache(Se),Ee.time=_ticker.time,Ee.width=Se[ue]),_round(he?_e*ie/fe:_e&&ie?fe/_e*ie:0)},_get=function(_,K,Z,te){var ie;return _pluginInitted||_initCore(),K in _propertyAliases&&K!=="transform"&&(K=_propertyAliases[K],~K.indexOf(",")&&(K=K.split(",")[0])),_transformProps[K]&&K!=="transform"?(ie=_parseTransform(_,te),ie=K!=="transformOrigin"?ie[K]:ie.svg?ie.origin:_firstTwoOnly(_getComputedProperty(_,_transformOriginProp))+" "+ie.zOrigin+"px"):(ie=_.style[K],(!ie||ie==="auto"||te||~(ie+"").indexOf("calc("))&&(ie=_specialProps[K]&&_specialProps[K](_,K,Z)||_getComputedProperty(_,K)||_getProperty(_,K)||(K==="opacity"?1:0))),Z&&!~(ie+"").trim().indexOf(" ")?_convertToUnit(_,K,ie,Z)+Z:ie},_tweenComplexCSSString=function(_,K,Z,te){if(!Z||Z==="none"){var ie=_checkPropPrefix(K,_,1),se=ie&&_getComputedProperty(_,ie,1);se&&se!==Z?(K=ie,Z=se):K==="borderColor"&&(Z=_getComputedProperty(_,"borderTopColor"))}var oe=new PropTween(this._pt,_.style,K,0,1,_renderComplexString),ae=0,le=0,ue,fe,he,ge,_e,Se,Ee,ye,be,we,Pe,Oe;if(oe.b=Z,oe.e=te,Z+="",te+="",te.substring(0,6)==="var(--"&&(te=_getComputedProperty(_,te.substring(4,te.indexOf(")")))),te==="auto"&&(Se=_.style[K],_.style[K]=te,te=_getComputedProperty(_,K)||te,Se?_.style[K]=Se:_removeProperty(_,K)),ue=[Z,te],_colorStringFilter(ue),Z=ue[0],te=ue[1],he=Z.match(_numWithUnitExp)||[],Oe=te.match(_numWithUnitExp)||[],Oe.length){for(;fe=_numWithUnitExp.exec(te);)Ee=fe[0],be=te.substring(ae,fe.index),_e?_e=(_e+1)%5:(be.substr(-5)==="rgba("||be.substr(-5)==="hsla(")&&(_e=1),Ee!==(Se=he[le++]||"")&&(ge=parseFloat(Se)||0,Pe=Se.substr((ge+"").length),Ee.charAt(1)==="="&&(Ee=_parseRelative(ge,Ee)+Pe),ye=parseFloat(Ee),we=Ee.substr((ye+"").length),ae=_numWithUnitExp.lastIndex-we.length,we||(we=we||_config.units[K]||Pe,ae===te.length&&(te+=we,oe.e+=we)),Pe!==we&&(ge=_convertToUnit(_,K,Se,we)||0),oe._pt={_next:oe._pt,p:be||le===1?be:",",s:ge,c:ye-ge,m:_e&&_e<4||K==="zIndex"?Math.round:0});oe.c=ae<te.length?te.substring(ae,te.length):""}else oe.r=K==="display"&&te==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(te)&&(oe.e=0),this._pt=oe,oe},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(_){var K=_.split(" "),Z=K[0],te=K[1]||"50%";return(Z==="top"||Z==="bottom"||te==="left"||te==="right")&&(_=Z,Z=te,te=_),K[0]=_keywordToPercent[Z]||Z,K[1]=_keywordToPercent[te]||te,K.join(" ")},_renderClearProps=function(_,K){if(K.tween&&K.tween._time===K.tween._dur){var Z=K.t,te=Z.style,ie=K.u,se=Z._gsap,oe,ae,le;if(ie==="all"||ie===!0)te.cssText="",ae=1;else for(ie=ie.split(","),le=ie.length;--le>-1;)oe=ie[le],_transformProps[oe]&&(ae=1,oe=oe==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(Z,oe);ae&&(_removeProperty(Z,_transformProp),se&&(se.svg&&Z.removeAttribute("transform"),te.scale=te.rotate=te.translate="none",_parseTransform(Z,1),se.uncache=1,_removeIndependentTransforms(te)))}},_specialProps={clearProps:function(_,K,Z,te,ie){if(ie.data!=="isFromStart"){var se=_._pt=new PropTween(_._pt,K,Z,0,0,_renderClearProps);return se.u=te,se.pr=-10,se.tween=ie,_._props.push(Z),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(_){return _==="matrix(1, 0, 0, 1, 0, 0)"||_==="none"||!_},_getComputedTransformMatrixAsArray=function(_){var K=_getComputedProperty(_,_transformProp);return _isNullTransform(K)?_identity2DMatrix:K.substr(7).match(_numExp).map(_round)},_getMatrix=function(_,K){var Z=_._gsap||_getCache(_),te=_.style,ie=_getComputedTransformMatrixAsArray(_),se,oe,ae,le;return Z.svg&&_.getAttribute("transform")?(ae=_.transform.baseVal.consolidate().matrix,ie=[ae.a,ae.b,ae.c,ae.d,ae.e,ae.f],ie.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:ie):(ie===_identity2DMatrix&&!_.offsetParent&&_!==_docElement&&!Z.svg&&(ae=te.display,te.display="block",se=_.parentNode,(!se||!_.offsetParent&&!_.getBoundingClientRect().width)&&(le=1,oe=_.nextElementSibling,_docElement.appendChild(_)),ie=_getComputedTransformMatrixAsArray(_),ae?te.display=ae:_removeProperty(_,"display"),le&&(oe?se.insertBefore(_,oe):se?se.appendChild(_):_docElement.removeChild(_))),K&&ie.length>6?[ie[0],ie[1],ie[4],ie[5],ie[12],ie[13]]:ie)},_applySVGOrigin=function(_,K,Z,te,ie,se){var oe=_._gsap,ae=ie||_getMatrix(_,!0),le=oe.xOrigin||0,ue=oe.yOrigin||0,fe=oe.xOffset||0,he=oe.yOffset||0,ge=ae[0],_e=ae[1],Se=ae[2],Ee=ae[3],ye=ae[4],be=ae[5],we=K.split(" "),Pe=parseFloat(we[0])||0,Oe=parseFloat(we[1])||0,Be,Ue,$e,De;Z?ae!==_identity2DMatrix&&(Ue=ge*Ee-_e*Se)&&($e=Pe*(Ee/Ue)+Oe*(-Se/Ue)+(Se*be-Ee*ye)/Ue,De=Pe*(-_e/Ue)+Oe*(ge/Ue)-(ge*be-_e*ye)/Ue,Pe=$e,Oe=De):(Be=_getBBox(_),Pe=Be.x+(~we[0].indexOf("%")?Pe/100*Be.width:Pe),Oe=Be.y+(~(we[1]||we[0]).indexOf("%")?Oe/100*Be.height:Oe)),te||te!==!1&&oe.smooth?(ye=Pe-le,be=Oe-ue,oe.xOffset=fe+(ye*ge+be*Se)-ye,oe.yOffset=he+(ye*_e+be*Ee)-be):oe.xOffset=oe.yOffset=0,oe.xOrigin=Pe,oe.yOrigin=Oe,oe.smooth=!!te,oe.origin=K,oe.originIsAbsolute=!!Z,_.style[_transformOriginProp]="0px 0px",se&&(_addNonTweeningPT(se,oe,"xOrigin",le,Pe),_addNonTweeningPT(se,oe,"yOrigin",ue,Oe),_addNonTweeningPT(se,oe,"xOffset",fe,oe.xOffset),_addNonTweeningPT(se,oe,"yOffset",he,oe.yOffset)),_.setAttribute("data-svg-origin",Pe+" "+Oe)},_parseTransform=function(_,K){var Z=_._gsap||new GSCache(_);if("x"in Z&&!K&&!Z.uncache)return Z;var te=_.style,ie=Z.scaleX<0,se="px",oe="deg",ae=getComputedStyle(_),le=_getComputedProperty(_,_transformOriginProp)||"0",ue,fe,he,ge,_e,Se,Ee,ye,be,we,Pe,Oe,Be,Ue,$e,De,ke,Ge,Je,Ye,Qe,rt,ot,ct,je,st,nt,qe,lt,Pt,Gt,pt;return ue=fe=he=Se=Ee=ye=be=we=Pe=0,ge=_e=1,Z.svg=!!(_.getCTM&&_isSVG(_)),ae.translate&&((ae.translate!=="none"||ae.scale!=="none"||ae.rotate!=="none")&&(te[_transformProp]=(ae.translate!=="none"?"translate3d("+(ae.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(ae.rotate!=="none"?"rotate("+ae.rotate+") ":"")+(ae.scale!=="none"?"scale("+ae.scale.split(" ").join(",")+") ":"")+(ae[_transformProp]!=="none"?ae[_transformProp]:"")),te.scale=te.rotate=te.translate="none"),Ue=_getMatrix(_,Z.svg),Z.svg&&(Z.uncache?(je=_.getBBox(),le=Z.xOrigin-je.x+"px "+(Z.yOrigin-je.y)+"px",ct=""):ct=!K&&_.getAttribute("data-svg-origin"),_applySVGOrigin(_,ct||le,!!ct||Z.originIsAbsolute,Z.smooth!==!1,Ue)),Oe=Z.xOrigin||0,Be=Z.yOrigin||0,Ue!==_identity2DMatrix&&(Ge=Ue[0],Je=Ue[1],Ye=Ue[2],Qe=Ue[3],ue=rt=Ue[4],fe=ot=Ue[5],Ue.length===6?(ge=Math.sqrt(Ge*Ge+Je*Je),_e=Math.sqrt(Qe*Qe+Ye*Ye),Se=Ge||Je?_atan2(Je,Ge)*_RAD2DEG:0,be=Ye||Qe?_atan2(Ye,Qe)*_RAD2DEG+Se:0,be&&(_e*=Math.abs(Math.cos(be*_DEG2RAD))),Z.svg&&(ue-=Oe-(Oe*Ge+Be*Ye),fe-=Be-(Oe*Je+Be*Qe))):(pt=Ue[6],Pt=Ue[7],nt=Ue[8],qe=Ue[9],lt=Ue[10],Gt=Ue[11],ue=Ue[12],fe=Ue[13],he=Ue[14],$e=_atan2(pt,lt),Ee=$e*_RAD2DEG,$e&&(De=Math.cos(-$e),ke=Math.sin(-$e),ct=rt*De+nt*ke,je=ot*De+qe*ke,st=pt*De+lt*ke,nt=rt*-ke+nt*De,qe=ot*-ke+qe*De,lt=pt*-ke+lt*De,Gt=Pt*-ke+Gt*De,rt=ct,ot=je,pt=st),$e=_atan2(-Ye,lt),ye=$e*_RAD2DEG,$e&&(De=Math.cos(-$e),ke=Math.sin(-$e),ct=Ge*De-nt*ke,je=Je*De-qe*ke,st=Ye*De-lt*ke,Gt=Qe*ke+Gt*De,Ge=ct,Je=je,Ye=st),$e=_atan2(Je,Ge),Se=$e*_RAD2DEG,$e&&(De=Math.cos($e),ke=Math.sin($e),ct=Ge*De+Je*ke,je=rt*De+ot*ke,Je=Je*De-Ge*ke,ot=ot*De-rt*ke,Ge=ct,rt=je),Ee&&Math.abs(Ee)+Math.abs(Se)>359.9&&(Ee=Se=0,ye=180-ye),ge=_round(Math.sqrt(Ge*Ge+Je*Je+Ye*Ye)),_e=_round(Math.sqrt(ot*ot+pt*pt)),$e=_atan2(rt,ot),be=Math.abs($e)>2e-4?$e*_RAD2DEG:0,Pe=Gt?1/(Gt<0?-Gt:Gt):0),Z.svg&&(ct=_.getAttribute("transform"),Z.forceCSS=_.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(_,_transformProp)),ct&&_.setAttribute("transform",ct))),Math.abs(be)>90&&Math.abs(be)<270&&(ie?(ge*=-1,be+=Se<=0?180:-180,Se+=Se<=0?180:-180):(_e*=-1,be+=be<=0?180:-180)),K=K||Z.uncache,Z.x=ue-((Z.xPercent=ue&&(!K&&Z.xPercent||(Math.round(_.offsetWidth/2)===Math.round(-ue)?-50:0)))?_.offsetWidth*Z.xPercent/100:0)+se,Z.y=fe-((Z.yPercent=fe&&(!K&&Z.yPercent||(Math.round(_.offsetHeight/2)===Math.round(-fe)?-50:0)))?_.offsetHeight*Z.yPercent/100:0)+se,Z.z=he+se,Z.scaleX=_round(ge),Z.scaleY=_round(_e),Z.rotation=_round(Se)+oe,Z.rotationX=_round(Ee)+oe,Z.rotationY=_round(ye)+oe,Z.skewX=be+oe,Z.skewY=we+oe,Z.transformPerspective=Pe+se,(Z.zOrigin=parseFloat(le.split(" ")[2])||!K&&Z.zOrigin||0)&&(te[_transformOriginProp]=_firstTwoOnly(le)),Z.xOffset=Z.yOffset=0,Z.force3D=_config.force3D,Z.renderTransform=Z.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,Z.uncache=0,Z},_firstTwoOnly=function(_){return(_=_.split(" "))[0]+" "+_[1]},_addPxTranslate=function(_,K,Z){var te=getUnit(K);return _round(parseFloat(K)+parseFloat(_convertToUnit(_,"x",Z+"px",te)))+te},_renderNon3DTransforms=function(_,K){K.z="0px",K.rotationY=K.rotationX="0deg",K.force3D=0,_renderCSSTransforms(_,K)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(_,K){var Z=K||this,te=Z.xPercent,ie=Z.yPercent,se=Z.x,oe=Z.y,ae=Z.z,le=Z.rotation,ue=Z.rotationY,fe=Z.rotationX,he=Z.skewX,ge=Z.skewY,_e=Z.scaleX,Se=Z.scaleY,Ee=Z.transformPerspective,ye=Z.force3D,be=Z.target,we=Z.zOrigin,Pe="",Oe=ye==="auto"&&_&&_!==1||ye===!0;if(we&&(fe!==_zeroDeg||ue!==_zeroDeg)){var Be=parseFloat(ue)*_DEG2RAD,Ue=Math.sin(Be),$e=Math.cos(Be),De;Be=parseFloat(fe)*_DEG2RAD,De=Math.cos(Be),se=_addPxTranslate(be,se,Ue*De*-we),oe=_addPxTranslate(be,oe,-Math.sin(Be)*-we),ae=_addPxTranslate(be,ae,$e*De*-we+we)}Ee!==_zeroPx&&(Pe+="perspective("+Ee+_endParenthesis),(te||ie)&&(Pe+="translate("+te+"%, "+ie+"%) "),(Oe||se!==_zeroPx||oe!==_zeroPx||ae!==_zeroPx)&&(Pe+=ae!==_zeroPx||Oe?"translate3d("+se+", "+oe+", "+ae+") ":"translate("+se+", "+oe+_endParenthesis),le!==_zeroDeg&&(Pe+="rotate("+le+_endParenthesis),ue!==_zeroDeg&&(Pe+="rotateY("+ue+_endParenthesis),fe!==_zeroDeg&&(Pe+="rotateX("+fe+_endParenthesis),(he!==_zeroDeg||ge!==_zeroDeg)&&(Pe+="skew("+he+", "+ge+_endParenthesis),(_e!==1||Se!==1)&&(Pe+="scale("+_e+", "+Se+_endParenthesis),be.style[_transformProp]=Pe||"translate(0, 0)"},_renderSVGTransforms=function(_,K){var Z=K||this,te=Z.xPercent,ie=Z.yPercent,se=Z.x,oe=Z.y,ae=Z.rotation,le=Z.skewX,ue=Z.skewY,fe=Z.scaleX,he=Z.scaleY,ge=Z.target,_e=Z.xOrigin,Se=Z.yOrigin,Ee=Z.xOffset,ye=Z.yOffset,be=Z.forceCSS,we=parseFloat(se),Pe=parseFloat(oe),Oe,Be,Ue,$e,De;ae=parseFloat(ae),le=parseFloat(le),ue=parseFloat(ue),ue&&(ue=parseFloat(ue),le+=ue,ae+=ue),ae||le?(ae*=_DEG2RAD,le*=_DEG2RAD,Oe=Math.cos(ae)*fe,Be=Math.sin(ae)*fe,Ue=Math.sin(ae-le)*-he,$e=Math.cos(ae-le)*he,le&&(ue*=_DEG2RAD,De=Math.tan(le-ue),De=Math.sqrt(1+De*De),Ue*=De,$e*=De,ue&&(De=Math.tan(ue),De=Math.sqrt(1+De*De),Oe*=De,Be*=De)),Oe=_round(Oe),Be=_round(Be),Ue=_round(Ue),$e=_round($e)):(Oe=fe,$e=he,Be=Ue=0),(we&&!~(se+"").indexOf("px")||Pe&&!~(oe+"").indexOf("px"))&&(we=_convertToUnit(ge,"x",se,"px"),Pe=_convertToUnit(ge,"y",oe,"px")),(_e||Se||Ee||ye)&&(we=_round(we+_e-(_e*Oe+Se*Ue)+Ee),Pe=_round(Pe+Se-(_e*Be+Se*$e)+ye)),(te||ie)&&(De=ge.getBBox(),we=_round(we+te/100*De.width),Pe=_round(Pe+ie/100*De.height)),De="matrix("+Oe+","+Be+","+Ue+","+$e+","+we+","+Pe+")",ge.setAttribute("transform",De),be&&(ge.style[_transformProp]=De)},_addRotationalPropTween=function(_,K,Z,te,ie){var se=360,oe=_isString(ie),ae=parseFloat(ie)*(oe&&~ie.indexOf("rad")?_RAD2DEG:1),le=ae-te,ue=te+le+"deg",fe,he;return oe&&(fe=ie.split("_")[1],fe==="short"&&(le%=se,le!==le%(se/2)&&(le+=le<0?se:-se)),fe==="cw"&&le<0?le=(le+se*_bigNum)%se-~~(le/se)*se:fe==="ccw"&&le>0&&(le=(le-se*_bigNum)%se-~~(le/se)*se)),_._pt=he=new PropTween(_._pt,K,Z,te,le,_renderPropWithEnd),he.e=ue,he.u="deg",_._props.push(Z),he},_assign=function(_,K){for(var Z in K)_[Z]=K[Z];return _},_addRawTransformPTs=function(_,K,Z){var te=_assign({},Z._gsap),ie="perspective,force3D,transformOrigin,svgOrigin",se=Z.style,oe,ae,le,ue,fe,he,ge,_e;te.svg?(le=Z.getAttribute("transform"),Z.setAttribute("transform",""),se[_transformProp]=K,oe=_parseTransform(Z,1),_removeProperty(Z,_transformProp),Z.setAttribute("transform",le)):(le=getComputedStyle(Z)[_transformProp],se[_transformProp]=K,oe=_parseTransform(Z,1),se[_transformProp]=le);for(ae in _transformProps)le=te[ae],ue=oe[ae],le!==ue&&ie.indexOf(ae)<0&&(ge=getUnit(le),_e=getUnit(ue),fe=ge!==_e?_convertToUnit(Z,ae,le,_e):parseFloat(le),he=parseFloat(ue),_._pt=new PropTween(_._pt,oe,ae,fe,he-fe,_renderCSSProp),_._pt.u=_e||0,_._props.push(ae));_assign(oe,te)};_forEachName("padding,margin,Width,Radius",function(ne,_){var K="Top",Z="Right",te="Bottom",ie="Left",se=(_<3?[K,Z,te,ie]:[K+ie,K+Z,te+Z,te+ie]).map(function(oe){return _<2?ne+oe:"border"+oe+ne});_specialProps[_>1?"border"+ne:ne]=function(oe,ae,le,ue,fe){var he,ge;if(arguments.length<4)return he=se.map(function(_e){return _get(oe,_e,le)}),ge=he.join(" "),ge.split(he[0]).length===5?he[0]:ge;he=(ue+"").split(" "),ge={},se.forEach(function(_e,Se){return ge[_e]=he[Se]=he[Se]||he[(Se-1)/2|0]}),oe.init(ae,ge,fe)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function(_){return _.style&&_.nodeType},init:function(_,K,Z,te,ie){var se=this._props,oe=_.style,ae=Z.vars.startAt,le,ue,fe,he,ge,_e,Se,Ee,ye,be,we,Pe,Oe,Be,Ue,$e;_pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(_),$e=this.styles.props,this.tween=Z;for(Se in K)if(Se!=="autoRound"&&(ue=K[Se],!(_plugins[Se]&&_checkPlugin(Se,K,Z,te,_,ie)))){if(ge=typeof ue,_e=_specialProps[Se],ge==="function"&&(ue=ue.call(Z,te,_,ie),ge=typeof ue),ge==="string"&&~ue.indexOf("random(")&&(ue=_replaceRandom(ue)),_e)_e(this,_,Se,ue,Z)&&(Ue=1);else if(Se.substr(0,2)==="--")le=(getComputedStyle(_).getPropertyValue(Se)+"").trim(),ue+="",_colorExp.lastIndex=0,_colorExp.test(le)||(Ee=getUnit(le),ye=getUnit(ue)),ye?Ee!==ye&&(le=_convertToUnit(_,Se,le,ye)+ye):Ee&&(ue+=Ee),this.add(oe,"setProperty",le,ue,te,ie,0,0,Se),se.push(Se),$e.push(Se,0,oe[Se]);else if(ge!=="undefined"){if(ae&&Se in ae?(le=typeof ae[Se]=="function"?ae[Se].call(Z,te,_,ie):ae[Se],_isString(le)&&~le.indexOf("random(")&&(le=_replaceRandom(le)),getUnit(le+"")||le==="auto"||(le+=_config.units[Se]||getUnit(_get(_,Se))||""),(le+"").charAt(1)==="="&&(le=_get(_,Se))):le=_get(_,Se),he=parseFloat(le),be=ge==="string"&&ue.charAt(1)==="="&&ue.substr(0,2),be&&(ue=ue.substr(2)),fe=parseFloat(ue),Se in _propertyAliases&&(Se==="autoAlpha"&&(he===1&&_get(_,"visibility")==="hidden"&&fe&&(he=0),$e.push("visibility",0,oe.visibility),_addNonTweeningPT(this,oe,"visibility",he?"inherit":"hidden",fe?"inherit":"hidden",!fe)),Se!=="scale"&&Se!=="transform"&&(Se=_propertyAliases[Se],~Se.indexOf(",")&&(Se=Se.split(",")[0]))),we=Se in _transformProps,we){if(this.styles.save(Se),ge==="string"&&ue.substring(0,6)==="var(--"&&(ue=_getComputedProperty(_,ue.substring(4,ue.indexOf(")"))),fe=parseFloat(ue)),Pe||(Oe=_._gsap,Oe.renderTransform&&!K.parseTransform||_parseTransform(_,K.parseTransform),Be=K.smoothOrigin!==!1&&Oe.smooth,Pe=this._pt=new PropTween(this._pt,oe,_transformProp,0,1,Oe.renderTransform,Oe,0,-1),Pe.dep=1),Se==="scale")this._pt=new PropTween(this._pt,Oe,"scaleY",Oe.scaleY,(be?_parseRelative(Oe.scaleY,be+fe):fe)-Oe.scaleY||0,_renderCSSProp),this._pt.u=0,se.push("scaleY",Se),Se+="X";else if(Se==="transformOrigin"){$e.push(_transformOriginProp,0,oe[_transformOriginProp]),ue=_convertKeywordsToPercentages(ue),Oe.svg?_applySVGOrigin(_,ue,0,Be,0,this):(ye=parseFloat(ue.split(" ")[2])||0,ye!==Oe.zOrigin&&_addNonTweeningPT(this,Oe,"zOrigin",Oe.zOrigin,ye),_addNonTweeningPT(this,oe,Se,_firstTwoOnly(le),_firstTwoOnly(ue)));continue}else if(Se==="svgOrigin"){_applySVGOrigin(_,ue,1,Be,0,this);continue}else if(Se in _rotationalProperties){_addRotationalPropTween(this,Oe,Se,he,be?_parseRelative(he,be+ue):ue);continue}else if(Se==="smoothOrigin"){_addNonTweeningPT(this,Oe,"smooth",Oe.smooth,ue);continue}else if(Se==="force3D"){Oe[Se]=ue;continue}else if(Se==="transform"){_addRawTransformPTs(this,ue,_);continue}}else Se in oe||(Se=_checkPropPrefix(Se)||Se);if(we||(fe||fe===0)&&(he||he===0)&&!_complexExp.test(ue)&&Se in oe)Ee=(le+"").substr((he+"").length),fe||(fe=0),ye=getUnit(ue)||(Se in _config.units?_config.units[Se]:Ee),Ee!==ye&&(he=_convertToUnit(_,Se,le,ye)),this._pt=new PropTween(this._pt,we?Oe:oe,Se,he,(be?_parseRelative(he,be+fe):fe)-he,!we&&(ye==="px"||Se==="zIndex")&&K.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=ye||0,Ee!==ye&&ye!=="%"&&(this._pt.b=le,this._pt.r=_renderCSSPropWithBeginning);else if(Se in oe)_tweenComplexCSSString.call(this,_,Se,le,be?be+ue:ue);else if(Se in _)this.add(_,Se,le||_[Se],be?be+ue:ue,te,ie);else if(Se!=="parseTransform"){_missingPlugin(Se,ue);continue}we||(Se in oe?$e.push(Se,0,oe[Se]):typeof _[Se]=="function"?$e.push(Se,2,_[Se]()):$e.push(Se,1,le||_[Se])),se.push(Se)}}Ue&&_sortPropTweensByPriority(this)},render:function(_,K){if(K.tween._time||!_reverting())for(var Z=K._pt;Z;)Z.r(_,Z.d),Z=Z._next;else K.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(_,K,Z){var te=_propertyAliases[K];return te&&te.indexOf(",")<0&&(K=te),K in _transformProps&&K!==_transformOriginProp&&(_._gsap.x||_get(_,"x"))?Z&&_recentSetterPlugin===Z?K==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=Z||{})&&(K==="scale"?_setterScaleWithRender:_setterTransformWithRender):_.style&&!_isUndefined(_.style[K])?_setterCSSStyle:~K.indexOf("-")?_setterCSSProp:_getSetter(_,K)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;gsap.core.getStyleSaver=_getStyleSaver;(function(ne,_,K,Z){var te=_forEachName(ne+","+_+","+K,function(ie){_transformProps[ie]=1});_forEachName(_,function(ie){_config.units[ie]="deg",_rotationalProperties[ie]=1}),_propertyAliases[te[13]]=ne+","+_,_forEachName(Z,function(ie){var se=ie.split(":");_propertyAliases[se[1]]=te[se[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(ne){_config.units[ne]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;function Camera({animateTo:ne}){const _=reactExports.useRef(),K=reactExports.useRef(null),Z=reactExports.useRef(null),{camera:te,gl:ie}=useThree();return useFrame(()=>{_.current&&_.current.update()}),reactExports.useEffect(()=>{if(ne&&_.current){const se=_.current,oe=new Vector3().subVectors(te.position,se.target);K.current=new Spherical().setFromVector3(oe),Z.current&&Z.current.kill(),Z.current=gsapWithCSS.to(se.target,{x:ne.x,y:ne.y+0,z:ne.z+0,duration:1.3,ease:"power2.inOut",onUpdate:()=>{if(K.current){const ae=new Vector3().setFromSpherical(K.current).add(se.target);te.position.copy(ae)}se.update()},onComplete:()=>{Z.current=null}})}},[ne]),reactExports.useEffect(()=>{if(!_.current)return;const se=_.current,oe=()=>{const ae=new Vector3().subVectors(te.position,se.target);K.current=new Spherical().setFromVector3(ae)};return se.addEventListener("change",oe),()=>{se.removeEventListener("change",oe)}},[te]),reactExports.useEffect(()=>{const se=oe=>{oe.preventDefault();const ae=oe.deltaY>0?1:-1;te.fov=MathUtils.clamp(te.fov+ae*2,45,110),te.updateProjectionMatrix()};return ie.domElement.addEventListener("wheel",se,{passive:!1}),()=>ie.domElement.removeEventListener("wheel",se)},[te,ie]),jsxRuntimeExports.jsx(OrbitControls,{makeDefault:!0,ref:_,reverseOrbit:!0,enablePan:!0,minDistance:0,maxDistance:.01,enableZoom:!1,rotateSpeed:.5})}const panoVertex=`
  varying vec3 vWorldPos;
  void main() {
    vec4 worldPos = modelMatrix * vec4(position, 1.0);
    vWorldPos = worldPos.xyz;
    gl_Position = projectionMatrix * viewMatrix * worldPos;
  }
`,panoFragment=`
uniform sampler2D uEnvMapOld; // equirectangular or baked to 2D
uniform sampler2D uEnvMapNew;
uniform float uMix;          // 0 = fully old, 1 = fully new

uniform vec3 uPanoPos;
uniform vec3 uPanoPos2;

uniform vec4 uPanoQuat;
uniform vec4 uPanoQuat2;

varying vec3 vWorldPos;

vec3 quatRotate(vec3 v, vec4 q) {
    return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}

// direction  equirectangular uv
vec2 dirToEquirectUv(vec3 dir) {
    dir = normalize(dir);
    // Use convention that +Z is forward, +X is right; flip X to match standard pano layout
    float yaw = atan(dir.z, -dir.x);
    float pitch = asin(clamp(dir.y, -1.0, 1.0));
    float u = (yaw / (2.0 * 3.14159265358979323846)) + 0.5; // [-pi,pi] -> [0,1]
    float v = 0.5 - (pitch / 3.14159265358979323846);       // [-pi/2,pi/2] -> [0,1]
    return vec2(u, v);
}

void main() {
    vec3 dirOld = normalize(vWorldPos - uPanoPos );
    vec3 dirNew = normalize(vWorldPos - uPanoPos2);

    dirOld = quatRotate(dirOld, uPanoQuat);
    dirNew = quatRotate(dirNew, uPanoQuat2);

    vec2 uvOld = dirToEquirectUv(dirOld);
    vec2 uvNew = dirToEquirectUv(dirNew);

    vec3 colorOld = texture2D(uEnvMapOld, uvOld).rgb;
    vec3 colorNew = texture2D(uEnvMapNew, uvNew).rgb;

    gl_FragColor = vec4(mix(colorOld, colorNew, uMix), 1.0);
}
`;function ProjectedPanoMesh({modelUrl:ne="./models/ss2.glb",cubeFaces:_,panoPosition:K=null,mpQuaternion:Z=null,faceOrder:te=[2,4,0,5,1,3],updateAnimation:ie,onMeshClick:se}){const oe=reactExports.useRef(),{nodes:ae,scene:le}=useGLTF(ne),ue=reactExports.useRef(),fe=reactExports.useMemo(()=>Array.isArray(_)?_.length===1?_:te.map(ge=>_[ge]):[],[_,te]),he=reactExports.useMemo(()=>{const ge=new Texture,_e=new ShaderMaterial({uniforms:{uEnvMapOld:{value:ge},uEnvMapNew:{value:ge},uMix:{value:0},uPanoPos:{value:new Vector3},uPanoPos2:{value:new Vector3},uPanoQuat:{value:new Quaternion},uPanoQuat2:{value:new Quaternion}},vertexShader:panoVertex,fragmentShader:panoFragment,side:DoubleSide,wireframe:!1});return ue.current=_e,_e},[]);return reactExports.useEffect(()=>{if(!fe||fe.length===0)return;new TextureLoader().load(fe[0],_e=>{_e.flipY=!1,_e.generateMipmaps=!0,_e.minFilter=LinearMipMapLinearFilter,_e.magFilter=LinearFilter,_e.wrapS=RepeatWrapping,_e.wrapT=ClampToEdgeWrapping,_e.encoding=void 0,ue.current.uniforms.uEnvMapOld.value=_e})},[]),reactExports.useEffect(()=>{if(!ue.current||!fe||fe.length===0)return;const ge=ue.current.uniforms,_e=Ee=>{Ee.flipY=!0,Ee.generateMipmaps=!0,Ee.minFilter=LinearMipMapLinearFilter,Ee.magFilter=LinearFilter,Ee.encoding=void 0,ge.uEnvMapNew.value=Ee;const ye=new Quaternion(Z?.x??0,Z?.y??0,Z?.z??0,Z?.w??1);ge.uPanoQuat2.value.copy(ye);const be=Array.isArray(K)?new Vector3(K[0]??0,K[1]??0,K[2]??0):K||new Vector3;ge.uPanoPos2.value.copy(be),gsapWithCSS.killTweensOf(ge.uMix),gsapWithCSS.to(ge.uMix,{value:1,duration:1.3,ease:"power2.inOut",onInterrupt:()=>{ge.uMix.value=0},onComplete:()=>{ge.uEnvMapOld.value=ge.uEnvMapNew.value,ge.uPanoPos.value.copy(ge.uPanoPos2.value),ge.uPanoQuat.value.copy(ge.uPanoQuat2.value),ge.uMix.value=0,ie(!1)}})};new TextureLoader().load(fe[0],_e)},[fe,Z,K]),jsxRuntimeExports.jsxs("group",{ref:oe,scale:le?.scale,position:le?.position,rotation:le?.rotation,children:[jsxRuntimeExports.jsx("mesh",{material:he,position:K,children:jsxRuntimeExports.jsx("sphereGeometry",{args:[20,15,15]})}),Object.entries(ae).map(([ge,_e])=>_e?.isMesh?jsxRuntimeExports.jsx("mesh",{geometry:_e.geometry,material:he,position:[_e.position.x,_e.position.y,-_e.position.z],rotation:_e.rotation,scale:_e.scale,frustumCulled:!1},ge):null)]})}function LoaderManager({isLoading:ne,progress:_}){return ne?jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(20, 20, 30, 1)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[jsxRuntimeExports.jsx("div",{className:"loader-spinner",style:{width:60,height:60,border:"8px solid #eee",borderTop:"8px solid #3a86ff",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:24}}),jsxRuntimeExports.jsx("div",{style:{width:240,height:12,background:"#222",borderRadius:6,overflow:"hidden",marginBottom:8},children:jsxRuntimeExports.jsx("div",{style:{width:`${Math.round(_*100)}%`,height:"100%",background:"linear-gradient(90deg, #3a86ff, #00b4d8)",transition:"width 0.3s"}})}),jsxRuntimeExports.jsxs("div",{style:{color:"#fff",fontSize:18,fontWeight:500},children:["Loading... ",Math.round(_*100),"%"]}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}):null}function toTrianglesDrawMode(ne,_){if(_===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),ne;if(_===TriangleFanDrawMode||_===TriangleStripDrawMode){let K=ne.getIndex();if(K===null){const se=[],oe=ne.getAttribute("position");if(oe!==void 0){for(let ae=0;ae<oe.count;ae++)se.push(ae);ne.setIndex(se),K=ne.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ne}const Z=K.count-2,te=[];if(_===TriangleFanDrawMode)for(let se=1;se<=Z;se++)te.push(K.getX(0)),te.push(K.getX(se)),te.push(K.getX(se+1));else for(let se=0;se<Z;se++)se%2===0?(te.push(K.getX(se)),te.push(K.getX(se+1)),te.push(K.getX(se+2))):(te.push(K.getX(se+2)),te.push(K.getX(se+1)),te.push(K.getX(se)));te.length/3!==Z&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const ie=ne.clone();return ie.setIndex(te),ie.clearGroups(),ie}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",_),ne}class GLTFLoader extends Loader{constructor(_){super(_),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(K){return new GLTFMaterialsClearcoatExtension(K)}),this.register(function(K){return new GLTFMaterialsDispersionExtension(K)}),this.register(function(K){return new GLTFTextureBasisUExtension(K)}),this.register(function(K){return new GLTFTextureWebPExtension(K)}),this.register(function(K){return new GLTFTextureAVIFExtension(K)}),this.register(function(K){return new GLTFMaterialsSheenExtension(K)}),this.register(function(K){return new GLTFMaterialsTransmissionExtension(K)}),this.register(function(K){return new GLTFMaterialsVolumeExtension(K)}),this.register(function(K){return new GLTFMaterialsIorExtension(K)}),this.register(function(K){return new GLTFMaterialsEmissiveStrengthExtension(K)}),this.register(function(K){return new GLTFMaterialsSpecularExtension(K)}),this.register(function(K){return new GLTFMaterialsIridescenceExtension(K)}),this.register(function(K){return new GLTFMaterialsAnisotropyExtension(K)}),this.register(function(K){return new GLTFMaterialsBumpExtension(K)}),this.register(function(K){return new GLTFLightsExtension(K)}),this.register(function(K){return new GLTFMeshoptCompression(K)}),this.register(function(K){return new GLTFMeshGpuInstancing(K)})}load(_,K,Z,te){const ie=this;let se;if(this.resourcePath!=="")se=this.resourcePath;else if(this.path!==""){const le=LoaderUtils.extractUrlBase(_);se=LoaderUtils.resolveURL(le,this.path)}else se=LoaderUtils.extractUrlBase(_);this.manager.itemStart(_);const oe=function(le){te?te(le):console.error(le),ie.manager.itemError(_),ie.manager.itemEnd(_)},ae=new FileLoader(this.manager);ae.setPath(this.path),ae.setResponseType("arraybuffer"),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(this.withCredentials),ae.load(_,function(le){try{ie.parse(le,se,function(ue){K(ue),ie.manager.itemEnd(_)},oe)}catch(ue){oe(ue)}},Z,oe)}setDRACOLoader(_){return this.dracoLoader=_,this}setKTX2Loader(_){return this.ktx2Loader=_,this}setMeshoptDecoder(_){return this.meshoptDecoder=_,this}register(_){return this.pluginCallbacks.indexOf(_)===-1&&this.pluginCallbacks.push(_),this}unregister(_){return this.pluginCallbacks.indexOf(_)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_),1),this}parse(_,K,Z,te){let ie;const se={},oe={},ae=new TextDecoder;if(typeof _=="string")ie=JSON.parse(_);else if(_ instanceof ArrayBuffer)if(ae.decode(new Uint8Array(_,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{se[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(_)}catch(fe){te&&te(fe);return}ie=JSON.parse(se[EXTENSIONS.KHR_BINARY_GLTF].content)}else ie=JSON.parse(ae.decode(_));else ie=_;if(ie.asset===void 0||ie.asset.version[0]<2){te&&te(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const le=new GLTFParser(ie,{path:K||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});le.fileLoader.setRequestHeader(this.requestHeader);for(let ue=0;ue<this.pluginCallbacks.length;ue++){const fe=this.pluginCallbacks[ue](le);fe.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),oe[fe.name]=fe,se[fe.name]=!0}if(ie.extensionsUsed)for(let ue=0;ue<ie.extensionsUsed.length;++ue){const fe=ie.extensionsUsed[ue],he=ie.extensionsRequired||[];switch(fe){case EXTENSIONS.KHR_MATERIALS_UNLIT:se[fe]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:se[fe]=new GLTFDracoMeshCompressionExtension(ie,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:se[fe]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:se[fe]=new GLTFMeshQuantizationExtension;break;default:he.indexOf(fe)>=0&&oe[fe]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+fe+'".')}}le.setExtensions(se),le.setPlugins(oe),le.parse(Z,te)}parseAsync(_,K){const Z=this;return new Promise(function(te,ie){Z.parse(_,K,te,ie)})}}function GLTFRegistry(){let ne={};return{get:function(_){return ne[_]},add:function(_,K){ne[_]=K},remove:function(_){delete ne[_]},removeAll:function(){ne={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const _=this.parser,K=this.parser.json.nodes||[];for(let Z=0,te=K.length;Z<te;Z++){const ie=K[Z];ie.extensions&&ie.extensions[this.name]&&ie.extensions[this.name].light!==void 0&&_._addNodeRef(this.cache,ie.extensions[this.name].light)}}_loadLight(_){const K=this.parser,Z="light:"+_;let te=K.cache.get(Z);if(te)return te;const ie=K.json,ae=((ie.extensions&&ie.extensions[this.name]||{}).lights||[])[_];let le;const ue=new Color$1(16777215);ae.color!==void 0&&ue.setRGB(ae.color[0],ae.color[1],ae.color[2],LinearSRGBColorSpace$1);const fe=ae.range!==void 0?ae.range:0;switch(ae.type){case"directional":le=new DirectionalLight(ue),le.target.position.set(0,0,-1),le.add(le.target);break;case"point":le=new PointLight(ue),le.distance=fe;break;case"spot":le=new SpotLight(ue),le.distance=fe,ae.spot=ae.spot||{},ae.spot.innerConeAngle=ae.spot.innerConeAngle!==void 0?ae.spot.innerConeAngle:0,ae.spot.outerConeAngle=ae.spot.outerConeAngle!==void 0?ae.spot.outerConeAngle:Math.PI/4,le.angle=ae.spot.outerConeAngle,le.penumbra=1-ae.spot.innerConeAngle/ae.spot.outerConeAngle,le.target.position.set(0,0,-1),le.add(le.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ae.type)}return le.position.set(0,0,0),assignExtrasToUserData(le,ae),ae.intensity!==void 0&&(le.intensity=ae.intensity),le.name=K.createUniqueName(ae.name||"light_"+_),te=Promise.resolve(le),K.cache.add(Z,te),te}getDependency(_,K){if(_==="light")return this._loadLight(K)}createNodeAttachment(_){const K=this,Z=this.parser,ie=Z.json.nodes[_],oe=(ie.extensions&&ie.extensions[this.name]||{}).light;return oe===void 0?null:this._loadLight(oe).then(function(ae){return Z._getNodeRef(K.cache,oe,ae)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(_,K,Z){const te=[];_.color=new Color$1(1,1,1),_.opacity=1;const ie=K.pbrMetallicRoughness;if(ie){if(Array.isArray(ie.baseColorFactor)){const se=ie.baseColorFactor;_.color.setRGB(se[0],se[1],se[2],LinearSRGBColorSpace$1),_.opacity=se[3]}ie.baseColorTexture!==void 0&&te.push(Z.assignTexture(_,"map",ie.baseColorTexture,SRGBColorSpace$1))}return Promise.all(te)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(_,K){const te=this.parser.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=te.extensions[this.name].emissiveStrength;return ie!==void 0&&(K.emissiveIntensity=ie),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];if(se.clearcoatFactor!==void 0&&(K.clearcoat=se.clearcoatFactor),se.clearcoatTexture!==void 0&&ie.push(Z.assignTexture(K,"clearcoatMap",se.clearcoatTexture)),se.clearcoatRoughnessFactor!==void 0&&(K.clearcoatRoughness=se.clearcoatRoughnessFactor),se.clearcoatRoughnessTexture!==void 0&&ie.push(Z.assignTexture(K,"clearcoatRoughnessMap",se.clearcoatRoughnessTexture)),se.clearcoatNormalTexture!==void 0&&(ie.push(Z.assignTexture(K,"clearcoatNormalMap",se.clearcoatNormalTexture)),se.clearcoatNormalTexture.scale!==void 0)){const oe=se.clearcoatNormalTexture.scale;K.clearcoatNormalScale=new Vector2(oe,oe)}return Promise.all(ie)}}class GLTFMaterialsDispersionExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const te=this.parser.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=te.extensions[this.name];return K.dispersion=ie.dispersion!==void 0?ie.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return se.iridescenceFactor!==void 0&&(K.iridescence=se.iridescenceFactor),se.iridescenceTexture!==void 0&&ie.push(Z.assignTexture(K,"iridescenceMap",se.iridescenceTexture)),se.iridescenceIor!==void 0&&(K.iridescenceIOR=se.iridescenceIor),K.iridescenceThicknessRange===void 0&&(K.iridescenceThicknessRange=[100,400]),se.iridescenceThicknessMinimum!==void 0&&(K.iridescenceThicknessRange[0]=se.iridescenceThicknessMinimum),se.iridescenceThicknessMaximum!==void 0&&(K.iridescenceThicknessRange[1]=se.iridescenceThicknessMaximum),se.iridescenceThicknessTexture!==void 0&&ie.push(Z.assignTexture(K,"iridescenceThicknessMap",se.iridescenceThicknessTexture)),Promise.all(ie)}}class GLTFMaterialsSheenExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[];K.sheenColor=new Color$1(0,0,0),K.sheenRoughness=0,K.sheen=1;const se=te.extensions[this.name];if(se.sheenColorFactor!==void 0){const oe=se.sheenColorFactor;K.sheenColor.setRGB(oe[0],oe[1],oe[2],LinearSRGBColorSpace$1)}return se.sheenRoughnessFactor!==void 0&&(K.sheenRoughness=se.sheenRoughnessFactor),se.sheenColorTexture!==void 0&&ie.push(Z.assignTexture(K,"sheenColorMap",se.sheenColorTexture,SRGBColorSpace$1)),se.sheenRoughnessTexture!==void 0&&ie.push(Z.assignTexture(K,"sheenRoughnessMap",se.sheenRoughnessTexture)),Promise.all(ie)}}class GLTFMaterialsTransmissionExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return se.transmissionFactor!==void 0&&(K.transmission=se.transmissionFactor),se.transmissionTexture!==void 0&&ie.push(Z.assignTexture(K,"transmissionMap",se.transmissionTexture)),Promise.all(ie)}}class GLTFMaterialsVolumeExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];K.thickness=se.thicknessFactor!==void 0?se.thicknessFactor:0,se.thicknessTexture!==void 0&&ie.push(Z.assignTexture(K,"thicknessMap",se.thicknessTexture)),K.attenuationDistance=se.attenuationDistance||1/0;const oe=se.attenuationColor||[1,1,1];return K.attenuationColor=new Color$1().setRGB(oe[0],oe[1],oe[2],LinearSRGBColorSpace$1),Promise.all(ie)}}class GLTFMaterialsIorExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const te=this.parser.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=te.extensions[this.name];return K.ior=ie.ior!==void 0?ie.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];K.specularIntensity=se.specularFactor!==void 0?se.specularFactor:1,se.specularTexture!==void 0&&ie.push(Z.assignTexture(K,"specularIntensityMap",se.specularTexture));const oe=se.specularColorFactor||[1,1,1];return K.specularColor=new Color$1().setRGB(oe[0],oe[1],oe[2],LinearSRGBColorSpace$1),se.specularColorTexture!==void 0&&ie.push(Z.assignTexture(K,"specularColorMap",se.specularColorTexture,SRGBColorSpace$1)),Promise.all(ie)}}class GLTFMaterialsBumpExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return K.bumpScale=se.bumpFactor!==void 0?se.bumpFactor:1,se.bumpTexture!==void 0&&ie.push(Z.assignTexture(K,"bumpMap",se.bumpTexture)),Promise.all(ie)}}class GLTFMaterialsAnisotropyExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(_){const Z=this.parser.json.materials[_];return!Z.extensions||!Z.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,K){const Z=this.parser,te=Z.json.materials[_];if(!te.extensions||!te.extensions[this.name])return Promise.resolve();const ie=[],se=te.extensions[this.name];return se.anisotropyStrength!==void 0&&(K.anisotropy=se.anisotropyStrength),se.anisotropyRotation!==void 0&&(K.anisotropyRotation=se.anisotropyRotation),se.anisotropyTexture!==void 0&&ie.push(Z.assignTexture(K,"anisotropyMap",se.anisotropyTexture)),Promise.all(ie)}}class GLTFTextureBasisUExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(_){const K=this.parser,Z=K.json,te=Z.textures[_];if(!te.extensions||!te.extensions[this.name])return null;const ie=te.extensions[this.name],se=K.options.ktx2Loader;if(!se){if(Z.extensionsRequired&&Z.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return K.loadTextureImage(_,ie.source,se)}}class GLTFTextureWebPExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_WEBP}loadTexture(_){const K=this.name,Z=this.parser,te=Z.json,ie=te.textures[_];if(!ie.extensions||!ie.extensions[K])return null;const se=ie.extensions[K],oe=te.images[se.source];let ae=Z.textureLoader;if(oe.uri){const le=Z.options.manager.getHandler(oe.uri);le!==null&&(ae=le)}return Z.loadTextureImage(_,se.source,ae)}}class GLTFTextureAVIFExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_AVIF}loadTexture(_){const K=this.name,Z=this.parser,te=Z.json,ie=te.textures[_];if(!ie.extensions||!ie.extensions[K])return null;const se=ie.extensions[K],oe=te.images[se.source];let ae=Z.textureLoader;if(oe.uri){const le=Z.options.manager.getHandler(oe.uri);le!==null&&(ae=le)}return Z.loadTextureImage(_,se.source,ae)}}class GLTFMeshoptCompression{constructor(_){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=_}loadBufferView(_){const K=this.parser.json,Z=K.bufferViews[_];if(Z.extensions&&Z.extensions[this.name]){const te=Z.extensions[this.name],ie=this.parser.getDependency("buffer",te.buffer),se=this.parser.options.meshoptDecoder;if(!se||!se.supported){if(K.extensionsRequired&&K.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return ie.then(function(oe){const ae=te.byteOffset||0,le=te.byteLength||0,ue=te.count,fe=te.byteStride,he=new Uint8Array(oe,ae,le);return se.decodeGltfBufferAsync?se.decodeGltfBufferAsync(ue,fe,he,te.mode,te.filter).then(function(ge){return ge.buffer}):se.ready.then(function(){const ge=new ArrayBuffer(ue*fe);return se.decodeGltfBuffer(new Uint8Array(ge),ue,fe,he,te.mode,te.filter),ge})})}else return null}}class GLTFMeshGpuInstancing{constructor(_){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=_}createNodeMesh(_){const K=this.parser.json,Z=K.nodes[_];if(!Z.extensions||!Z.extensions[this.name]||Z.mesh===void 0)return null;const te=K.meshes[Z.mesh];for(const le of te.primitives)if(le.mode!==WEBGL_CONSTANTS.TRIANGLES&&le.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&le.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&le.mode!==void 0)return null;const se=Z.extensions[this.name].attributes,oe=[],ae={};for(const le in se)oe.push(this.parser.getDependency("accessor",se[le]).then(ue=>(ae[le]=ue,ae[le])));return oe.length<1?null:(oe.push(this.parser.createNodeMesh(_)),Promise.all(oe).then(le=>{const ue=le.pop(),fe=ue.isGroup?ue.children:[ue],he=le[0].count,ge=[];for(const _e of fe){const Se=new Matrix4,Ee=new Vector3,ye=new Quaternion,be=new Vector3(1,1,1),we=new InstancedMesh(_e.geometry,_e.material,he);for(let Pe=0;Pe<he;Pe++)ae.TRANSLATION&&Ee.fromBufferAttribute(ae.TRANSLATION,Pe),ae.ROTATION&&ye.fromBufferAttribute(ae.ROTATION,Pe),ae.SCALE&&be.fromBufferAttribute(ae.SCALE,Pe),we.setMatrixAt(Pe,Se.compose(Ee,ye,be));for(const Pe in ae)if(Pe==="_COLOR_0"){const Oe=ae[Pe];we.instanceColor=new InstancedBufferAttribute(Oe.array,Oe.itemSize,Oe.normalized)}else Pe!=="TRANSLATION"&&Pe!=="ROTATION"&&Pe!=="SCALE"&&_e.geometry.setAttribute(Pe,ae[Pe]);Object3D.prototype.copy.call(we,_e),this.parser.assignFinalMaterial(we),ge.push(we)}return ue.isGroup?(ue.clear(),ue.add(...ge),ue):ge[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(_){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const K=new DataView(_,0,BINARY_EXTENSION_HEADER_LENGTH),Z=new TextDecoder;if(this.header={magic:Z.decode(new Uint8Array(_.slice(0,4))),version:K.getUint32(4,!0),length:K.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const te=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,ie=new DataView(_,BINARY_EXTENSION_HEADER_LENGTH);let se=0;for(;se<te;){const oe=ie.getUint32(se,!0);se+=4;const ae=ie.getUint32(se,!0);if(se+=4,ae===BINARY_EXTENSION_CHUNK_TYPES.JSON){const le=new Uint8Array(_,BINARY_EXTENSION_HEADER_LENGTH+se,oe);this.content=Z.decode(le)}else if(ae===BINARY_EXTENSION_CHUNK_TYPES.BIN){const le=BINARY_EXTENSION_HEADER_LENGTH+se;this.body=_.slice(le,le+oe)}se+=oe}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(_,K){if(!K)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=K,this.dracoLoader.preload()}decodePrimitive(_,K){const Z=this.json,te=this.dracoLoader,ie=_.extensions[this.name].bufferView,se=_.extensions[this.name].attributes,oe={},ae={},le={};for(const ue in se){const fe=ATTRIBUTES[ue]||ue.toLowerCase();oe[fe]=se[ue]}for(const ue in _.attributes){const fe=ATTRIBUTES[ue]||ue.toLowerCase();if(se[ue]!==void 0){const he=Z.accessors[_.attributes[ue]],ge=WEBGL_COMPONENT_TYPES[he.componentType];le[fe]=ge.name,ae[fe]=he.normalized===!0}}return K.getDependency("bufferView",ie).then(function(ue){return new Promise(function(fe,he){te.decodeDracoFile(ue,function(ge){for(const _e in ge.attributes){const Se=ge.attributes[_e],Ee=ae[_e];Ee!==void 0&&(Se.normalized=Ee)}fe(ge)},oe,le,LinearSRGBColorSpace$1,he)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(_,K){return(K.texCoord===void 0||K.texCoord===_.channel)&&K.offset===void 0&&K.rotation===void 0&&K.scale===void 0||(_=_.clone(),K.texCoord!==void 0&&(_.channel=K.texCoord),K.offset!==void 0&&_.offset.fromArray(K.offset),K.rotation!==void 0&&(_.rotation=K.rotation),K.scale!==void 0&&_.repeat.fromArray(K.scale),_.needsUpdate=!0),_}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(_,K,Z,te){super(_,K,Z,te)}copySampleValue_(_){const K=this.resultBuffer,Z=this.sampleValues,te=this.valueSize,ie=_*te*3+te;for(let se=0;se!==te;se++)K[se]=Z[ie+se];return K}interpolate_(_,K,Z,te){const ie=this.resultBuffer,se=this.sampleValues,oe=this.valueSize,ae=oe*2,le=oe*3,ue=te-K,fe=(Z-K)/ue,he=fe*fe,ge=he*fe,_e=_*le,Se=_e-le,Ee=-2*ge+3*he,ye=ge-he,be=1-Ee,we=ye-he+fe;for(let Pe=0;Pe!==oe;Pe++){const Oe=se[Se+Pe+oe],Be=se[Se+Pe+ae]*ue,Ue=se[_e+Pe+oe],$e=se[_e+Pe]*ue;ie[Pe]=be*Oe+we*Be+Ee*Ue+ye*$e}return ie}}const _quaternion=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(_,K,Z,te){const ie=super.interpolate_(_,K,Z,te);return _quaternion.fromArray(ie).normalize().toArray(ie),ie}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(ne){return ne.DefaultMaterial===void 0&&(ne.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),ne.DefaultMaterial}function addUnknownExtensionsToUserData(ne,_,K){for(const Z in K.extensions)ne[Z]===void 0&&(_.userData.gltfExtensions=_.userData.gltfExtensions||{},_.userData.gltfExtensions[Z]=K.extensions[Z])}function assignExtrasToUserData(ne,_){_.extras!==void 0&&(typeof _.extras=="object"?Object.assign(ne.userData,_.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_.extras))}function addMorphTargets(ne,_,K){let Z=!1,te=!1,ie=!1;for(let le=0,ue=_.length;le<ue;le++){const fe=_[le];if(fe.POSITION!==void 0&&(Z=!0),fe.NORMAL!==void 0&&(te=!0),fe.COLOR_0!==void 0&&(ie=!0),Z&&te&&ie)break}if(!Z&&!te&&!ie)return Promise.resolve(ne);const se=[],oe=[],ae=[];for(let le=0,ue=_.length;le<ue;le++){const fe=_[le];if(Z){const he=fe.POSITION!==void 0?K.getDependency("accessor",fe.POSITION):ne.attributes.position;se.push(he)}if(te){const he=fe.NORMAL!==void 0?K.getDependency("accessor",fe.NORMAL):ne.attributes.normal;oe.push(he)}if(ie){const he=fe.COLOR_0!==void 0?K.getDependency("accessor",fe.COLOR_0):ne.attributes.color;ae.push(he)}}return Promise.all([Promise.all(se),Promise.all(oe),Promise.all(ae)]).then(function(le){const ue=le[0],fe=le[1],he=le[2];return Z&&(ne.morphAttributes.position=ue),te&&(ne.morphAttributes.normal=fe),ie&&(ne.morphAttributes.color=he),ne.morphTargetsRelative=!0,ne})}function updateMorphTargets(ne,_){if(ne.updateMorphTargets(),_.weights!==void 0)for(let K=0,Z=_.weights.length;K<Z;K++)ne.morphTargetInfluences[K]=_.weights[K];if(_.extras&&Array.isArray(_.extras.targetNames)){const K=_.extras.targetNames;if(ne.morphTargetInfluences.length===K.length){ne.morphTargetDictionary={};for(let Z=0,te=K.length;Z<te;Z++)ne.morphTargetDictionary[K[Z]]=Z}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(ne){let _;const K=ne.extensions&&ne.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(K?_="draco:"+K.bufferView+":"+K.indices+":"+createAttributesKey(K.attributes):_=ne.indices+":"+createAttributesKey(ne.attributes)+":"+ne.mode,ne.targets!==void 0)for(let Z=0,te=ne.targets.length;Z<te;Z++)_+=":"+createAttributesKey(ne.targets[Z]);return _}function createAttributesKey(ne){let _="";const K=Object.keys(ne).sort();for(let Z=0,te=K.length;Z<te;Z++)_+=K[Z]+":"+ne[K[Z]]+";";return _}function getNormalizedComponentScale(ne){switch(ne){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(ne){return ne.search(/\.jpe?g($|\?)/i)>0||ne.search(/^data\:image\/jpeg/)===0?"image/jpeg":ne.search(/\.webp($|\?)/i)>0||ne.search(/^data\:image\/webp/)===0?"image/webp":ne.search(/\.ktx2($|\?)/i)>0||ne.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(_={},K={}){this.json=_,this.extensions={},this.plugins={},this.options=K,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Z=!1,te=-1,ie=!1,se=-1;if(typeof navigator<"u"){const oe=navigator.userAgent;Z=/^((?!chrome|android).)*safari/i.test(oe)===!0;const ae=oe.match(/Version\/(\d+)/);te=Z&&ae?parseInt(ae[1],10):-1,ie=oe.indexOf("Firefox")>-1,se=ie?oe.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||Z&&te<17||ie&&se<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(_){this.extensions=_}setPlugins(_){this.plugins=_}parse(_,K){const Z=this,te=this.json,ie=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(se){return se._markDefs&&se._markDefs()}),Promise.all(this._invokeAll(function(se){return se.beforeRoot&&se.beforeRoot()})).then(function(){return Promise.all([Z.getDependencies("scene"),Z.getDependencies("animation"),Z.getDependencies("camera")])}).then(function(se){const oe={scene:se[0][te.scene||0],scenes:se[0],animations:se[1],cameras:se[2],asset:te.asset,parser:Z,userData:{}};return addUnknownExtensionsToUserData(ie,oe,te),assignExtrasToUserData(oe,te),Promise.all(Z._invokeAll(function(ae){return ae.afterRoot&&ae.afterRoot(oe)})).then(function(){for(const ae of oe.scenes)ae.updateMatrixWorld();_(oe)})}).catch(K)}_markDefs(){const _=this.json.nodes||[],K=this.json.skins||[],Z=this.json.meshes||[];for(let te=0,ie=K.length;te<ie;te++){const se=K[te].joints;for(let oe=0,ae=se.length;oe<ae;oe++)_[se[oe]].isBone=!0}for(let te=0,ie=_.length;te<ie;te++){const se=_[te];se.mesh!==void 0&&(this._addNodeRef(this.meshCache,se.mesh),se.skin!==void 0&&(Z[se.mesh].isSkinnedMesh=!0)),se.camera!==void 0&&this._addNodeRef(this.cameraCache,se.camera)}}_addNodeRef(_,K){K!==void 0&&(_.refs[K]===void 0&&(_.refs[K]=_.uses[K]=0),_.refs[K]++)}_getNodeRef(_,K,Z){if(_.refs[K]<=1)return Z;const te=Z.clone(),ie=(se,oe)=>{const ae=this.associations.get(se);ae!=null&&this.associations.set(oe,ae);for(const[le,ue]of se.children.entries())ie(ue,oe.children[le])};return ie(Z,te),te.name+="_instance_"+_.uses[K]++,te}_invokeOne(_){const K=Object.values(this.plugins);K.push(this);for(let Z=0;Z<K.length;Z++){const te=_(K[Z]);if(te)return te}return null}_invokeAll(_){const K=Object.values(this.plugins);K.unshift(this);const Z=[];for(let te=0;te<K.length;te++){const ie=_(K[te]);ie&&Z.push(ie)}return Z}getDependency(_,K){const Z=_+":"+K;let te=this.cache.get(Z);if(!te){switch(_){case"scene":te=this.loadScene(K);break;case"node":te=this._invokeOne(function(ie){return ie.loadNode&&ie.loadNode(K)});break;case"mesh":te=this._invokeOne(function(ie){return ie.loadMesh&&ie.loadMesh(K)});break;case"accessor":te=this.loadAccessor(K);break;case"bufferView":te=this._invokeOne(function(ie){return ie.loadBufferView&&ie.loadBufferView(K)});break;case"buffer":te=this.loadBuffer(K);break;case"material":te=this._invokeOne(function(ie){return ie.loadMaterial&&ie.loadMaterial(K)});break;case"texture":te=this._invokeOne(function(ie){return ie.loadTexture&&ie.loadTexture(K)});break;case"skin":te=this.loadSkin(K);break;case"animation":te=this._invokeOne(function(ie){return ie.loadAnimation&&ie.loadAnimation(K)});break;case"camera":te=this.loadCamera(K);break;default:if(te=this._invokeOne(function(ie){return ie!=this&&ie.getDependency&&ie.getDependency(_,K)}),!te)throw new Error("Unknown type: "+_);break}this.cache.add(Z,te)}return te}getDependencies(_){let K=this.cache.get(_);if(!K){const Z=this,te=this.json[_+(_==="mesh"?"es":"s")]||[];K=Promise.all(te.map(function(ie,se){return Z.getDependency(_,se)})),this.cache.add(_,K)}return K}loadBuffer(_){const K=this.json.buffers[_],Z=this.fileLoader;if(K.type&&K.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+K.type+" buffer type is not supported.");if(K.uri===void 0&&_===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const te=this.options;return new Promise(function(ie,se){Z.load(LoaderUtils.resolveURL(K.uri,te.path),ie,void 0,function(){se(new Error('THREE.GLTFLoader: Failed to load buffer "'+K.uri+'".'))})})}loadBufferView(_){const K=this.json.bufferViews[_];return this.getDependency("buffer",K.buffer).then(function(Z){const te=K.byteLength||0,ie=K.byteOffset||0;return Z.slice(ie,ie+te)})}loadAccessor(_){const K=this,Z=this.json,te=this.json.accessors[_];if(te.bufferView===void 0&&te.sparse===void 0){const se=WEBGL_TYPE_SIZES[te.type],oe=WEBGL_COMPONENT_TYPES[te.componentType],ae=te.normalized===!0,le=new oe(te.count*se);return Promise.resolve(new BufferAttribute(le,se,ae))}const ie=[];return te.bufferView!==void 0?ie.push(this.getDependency("bufferView",te.bufferView)):ie.push(null),te.sparse!==void 0&&(ie.push(this.getDependency("bufferView",te.sparse.indices.bufferView)),ie.push(this.getDependency("bufferView",te.sparse.values.bufferView))),Promise.all(ie).then(function(se){const oe=se[0],ae=WEBGL_TYPE_SIZES[te.type],le=WEBGL_COMPONENT_TYPES[te.componentType],ue=le.BYTES_PER_ELEMENT,fe=ue*ae,he=te.byteOffset||0,ge=te.bufferView!==void 0?Z.bufferViews[te.bufferView].byteStride:void 0,_e=te.normalized===!0;let Se,Ee;if(ge&&ge!==fe){const ye=Math.floor(he/ge),be="InterleavedBuffer:"+te.bufferView+":"+te.componentType+":"+ye+":"+te.count;let we=K.cache.get(be);we||(Se=new le(oe,ye*ge,te.count*ge/ue),we=new InterleavedBuffer(Se,ge/ue),K.cache.add(be,we)),Ee=new InterleavedBufferAttribute(we,ae,he%ge/ue,_e)}else oe===null?Se=new le(te.count*ae):Se=new le(oe,he,te.count*ae),Ee=new BufferAttribute(Se,ae,_e);if(te.sparse!==void 0){const ye=WEBGL_TYPE_SIZES.SCALAR,be=WEBGL_COMPONENT_TYPES[te.sparse.indices.componentType],we=te.sparse.indices.byteOffset||0,Pe=te.sparse.values.byteOffset||0,Oe=new be(se[1],we,te.sparse.count*ye),Be=new le(se[2],Pe,te.sparse.count*ae);oe!==null&&(Ee=new BufferAttribute(Ee.array.slice(),Ee.itemSize,Ee.normalized)),Ee.normalized=!1;for(let Ue=0,$e=Oe.length;Ue<$e;Ue++){const De=Oe[Ue];if(Ee.setX(De,Be[Ue*ae]),ae>=2&&Ee.setY(De,Be[Ue*ae+1]),ae>=3&&Ee.setZ(De,Be[Ue*ae+2]),ae>=4&&Ee.setW(De,Be[Ue*ae+3]),ae>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Ee.normalized=_e}return Ee})}loadTexture(_){const K=this.json,Z=this.options,ie=K.textures[_].source,se=K.images[ie];let oe=this.textureLoader;if(se.uri){const ae=Z.manager.getHandler(se.uri);ae!==null&&(oe=ae)}return this.loadTextureImage(_,ie,oe)}loadTextureImage(_,K,Z){const te=this,ie=this.json,se=ie.textures[_],oe=ie.images[K],ae=(oe.uri||oe.bufferView)+":"+se.sampler;if(this.textureCache[ae])return this.textureCache[ae];const le=this.loadImageSource(K,Z).then(function(ue){ue.flipY=!1,ue.name=se.name||oe.name||"",ue.name===""&&typeof oe.uri=="string"&&oe.uri.startsWith("data:image/")===!1&&(ue.name=oe.uri);const he=(ie.samplers||{})[se.sampler]||{};return ue.magFilter=WEBGL_FILTERS[he.magFilter]||LinearFilter,ue.minFilter=WEBGL_FILTERS[he.minFilter]||LinearMipmapLinearFilter,ue.wrapS=WEBGL_WRAPPINGS[he.wrapS]||RepeatWrapping,ue.wrapT=WEBGL_WRAPPINGS[he.wrapT]||RepeatWrapping,ue.generateMipmaps=!ue.isCompressedTexture&&ue.minFilter!==NearestFilter&&ue.minFilter!==LinearFilter,te.associations.set(ue,{textures:_}),ue}).catch(function(){return null});return this.textureCache[ae]=le,le}loadImageSource(_,K){const Z=this,te=this.json,ie=this.options;if(this.sourceCache[_]!==void 0)return this.sourceCache[_].then(fe=>fe.clone());const se=te.images[_],oe=self.URL||self.webkitURL;let ae=se.uri||"",le=!1;if(se.bufferView!==void 0)ae=Z.getDependency("bufferView",se.bufferView).then(function(fe){le=!0;const he=new Blob([fe],{type:se.mimeType});return ae=oe.createObjectURL(he),ae});else if(se.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+_+" is missing URI and bufferView");const ue=Promise.resolve(ae).then(function(fe){return new Promise(function(he,ge){let _e=he;K.isImageBitmapLoader===!0&&(_e=function(Se){const Ee=new Texture(Se);Ee.needsUpdate=!0,he(Ee)}),K.load(LoaderUtils.resolveURL(fe,ie.path),_e,void 0,ge)})}).then(function(fe){return le===!0&&oe.revokeObjectURL(ae),assignExtrasToUserData(fe,se),fe.userData.mimeType=se.mimeType||getImageURIMimeType(se.uri),fe}).catch(function(fe){throw console.error("THREE.GLTFLoader: Couldn't load texture",ae),fe});return this.sourceCache[_]=ue,ue}assignTexture(_,K,Z,te){const ie=this;return this.getDependency("texture",Z.index).then(function(se){if(!se)return null;if(Z.texCoord!==void 0&&Z.texCoord>0&&(se=se.clone(),se.channel=Z.texCoord),ie.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const oe=Z.extensions!==void 0?Z.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(oe){const ae=ie.associations.get(se);se=ie.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(se,oe),ie.associations.set(se,ae)}}return te!==void 0&&(se.colorSpace=te),_[K]=se,se})}assignFinalMaterial(_){const K=_.geometry;let Z=_.material;const te=K.attributes.tangent===void 0,ie=K.attributes.color!==void 0,se=K.attributes.normal===void 0;if(_.isPoints){const oe="PointsMaterial:"+Z.uuid;let ae=this.cache.get(oe);ae||(ae=new PointsMaterial,Material.prototype.copy.call(ae,Z),ae.color.copy(Z.color),ae.map=Z.map,ae.sizeAttenuation=!1,this.cache.add(oe,ae)),Z=ae}else if(_.isLine){const oe="LineBasicMaterial:"+Z.uuid;let ae=this.cache.get(oe);ae||(ae=new LineBasicMaterial,Material.prototype.copy.call(ae,Z),ae.color.copy(Z.color),ae.map=Z.map,this.cache.add(oe,ae)),Z=ae}if(te||ie||se){let oe="ClonedMaterial:"+Z.uuid+":";te&&(oe+="derivative-tangents:"),ie&&(oe+="vertex-colors:"),se&&(oe+="flat-shading:");let ae=this.cache.get(oe);ae||(ae=Z.clone(),ie&&(ae.vertexColors=!0),se&&(ae.flatShading=!0),te&&(ae.normalScale&&(ae.normalScale.y*=-1),ae.clearcoatNormalScale&&(ae.clearcoatNormalScale.y*=-1)),this.cache.add(oe,ae),this.associations.set(ae,this.associations.get(Z))),Z=ae}_.material=Z}getMaterialType(){return MeshStandardMaterial}loadMaterial(_){const K=this,Z=this.json,te=this.extensions,ie=Z.materials[_];let se;const oe={},ae=ie.extensions||{},le=[];if(ae[EXTENSIONS.KHR_MATERIALS_UNLIT]){const fe=te[EXTENSIONS.KHR_MATERIALS_UNLIT];se=fe.getMaterialType(),le.push(fe.extendParams(oe,ie,K))}else{const fe=ie.pbrMetallicRoughness||{};if(oe.color=new Color$1(1,1,1),oe.opacity=1,Array.isArray(fe.baseColorFactor)){const he=fe.baseColorFactor;oe.color.setRGB(he[0],he[1],he[2],LinearSRGBColorSpace$1),oe.opacity=he[3]}fe.baseColorTexture!==void 0&&le.push(K.assignTexture(oe,"map",fe.baseColorTexture,SRGBColorSpace$1)),oe.metalness=fe.metallicFactor!==void 0?fe.metallicFactor:1,oe.roughness=fe.roughnessFactor!==void 0?fe.roughnessFactor:1,fe.metallicRoughnessTexture!==void 0&&(le.push(K.assignTexture(oe,"metalnessMap",fe.metallicRoughnessTexture)),le.push(K.assignTexture(oe,"roughnessMap",fe.metallicRoughnessTexture))),se=this._invokeOne(function(he){return he.getMaterialType&&he.getMaterialType(_)}),le.push(Promise.all(this._invokeAll(function(he){return he.extendMaterialParams&&he.extendMaterialParams(_,oe)})))}ie.doubleSided===!0&&(oe.side=DoubleSide);const ue=ie.alphaMode||ALPHA_MODES.OPAQUE;if(ue===ALPHA_MODES.BLEND?(oe.transparent=!0,oe.depthWrite=!1):(oe.transparent=!1,ue===ALPHA_MODES.MASK&&(oe.alphaTest=ie.alphaCutoff!==void 0?ie.alphaCutoff:.5)),ie.normalTexture!==void 0&&se!==MeshBasicMaterial&&(le.push(K.assignTexture(oe,"normalMap",ie.normalTexture)),oe.normalScale=new Vector2(1,1),ie.normalTexture.scale!==void 0)){const fe=ie.normalTexture.scale;oe.normalScale.set(fe,fe)}if(ie.occlusionTexture!==void 0&&se!==MeshBasicMaterial&&(le.push(K.assignTexture(oe,"aoMap",ie.occlusionTexture)),ie.occlusionTexture.strength!==void 0&&(oe.aoMapIntensity=ie.occlusionTexture.strength)),ie.emissiveFactor!==void 0&&se!==MeshBasicMaterial){const fe=ie.emissiveFactor;oe.emissive=new Color$1().setRGB(fe[0],fe[1],fe[2],LinearSRGBColorSpace$1)}return ie.emissiveTexture!==void 0&&se!==MeshBasicMaterial&&le.push(K.assignTexture(oe,"emissiveMap",ie.emissiveTexture,SRGBColorSpace$1)),Promise.all(le).then(function(){const fe=new se(oe);return ie.name&&(fe.name=ie.name),assignExtrasToUserData(fe,ie),K.associations.set(fe,{materials:_}),ie.extensions&&addUnknownExtensionsToUserData(te,fe,ie),fe})}createUniqueName(_){const K=PropertyBinding.sanitizeNodeName(_||"");return K in this.nodeNamesUsed?K+"_"+ ++this.nodeNamesUsed[K]:(this.nodeNamesUsed[K]=0,K)}loadGeometries(_){const K=this,Z=this.extensions,te=this.primitiveCache;function ie(oe){return Z[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(oe,K).then(function(ae){return addPrimitiveAttributes(ae,oe,K)})}const se=[];for(let oe=0,ae=_.length;oe<ae;oe++){const le=_[oe],ue=createPrimitiveKey(le),fe=te[ue];if(fe)se.push(fe.promise);else{let he;le.extensions&&le.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?he=ie(le):he=addPrimitiveAttributes(new BufferGeometry,le,K),te[ue]={primitive:le,promise:he},se.push(he)}}return Promise.all(se)}loadMesh(_){const K=this,Z=this.json,te=this.extensions,ie=Z.meshes[_],se=ie.primitives,oe=[];for(let ae=0,le=se.length;ae<le;ae++){const ue=se[ae].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",se[ae].material);oe.push(ue)}return oe.push(K.loadGeometries(se)),Promise.all(oe).then(function(ae){const le=ae.slice(0,ae.length-1),ue=ae[ae.length-1],fe=[];for(let ge=0,_e=ue.length;ge<_e;ge++){const Se=ue[ge],Ee=se[ge];let ye;const be=le[ge];if(Ee.mode===WEBGL_CONSTANTS.TRIANGLES||Ee.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||Ee.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||Ee.mode===void 0)ye=ie.isSkinnedMesh===!0?new SkinnedMesh(Se,be):new Mesh(Se,be),ye.isSkinnedMesh===!0&&ye.normalizeSkinWeights(),Ee.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?ye.geometry=toTrianglesDrawMode(ye.geometry,TriangleStripDrawMode):Ee.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(ye.geometry=toTrianglesDrawMode(ye.geometry,TriangleFanDrawMode));else if(Ee.mode===WEBGL_CONSTANTS.LINES)ye=new LineSegments(Se,be);else if(Ee.mode===WEBGL_CONSTANTS.LINE_STRIP)ye=new Line(Se,be);else if(Ee.mode===WEBGL_CONSTANTS.LINE_LOOP)ye=new LineLoop(Se,be);else if(Ee.mode===WEBGL_CONSTANTS.POINTS)ye=new Points(Se,be);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ee.mode);Object.keys(ye.geometry.morphAttributes).length>0&&updateMorphTargets(ye,ie),ye.name=K.createUniqueName(ie.name||"mesh_"+_),assignExtrasToUserData(ye,ie),Ee.extensions&&addUnknownExtensionsToUserData(te,ye,Ee),K.assignFinalMaterial(ye),fe.push(ye)}for(let ge=0,_e=fe.length;ge<_e;ge++)K.associations.set(fe[ge],{meshes:_,primitives:ge});if(fe.length===1)return ie.extensions&&addUnknownExtensionsToUserData(te,fe[0],ie),fe[0];const he=new Group;ie.extensions&&addUnknownExtensionsToUserData(te,he,ie),K.associations.set(he,{meshes:_});for(let ge=0,_e=fe.length;ge<_e;ge++)he.add(fe[ge]);return he})}loadCamera(_){let K;const Z=this.json.cameras[_],te=Z[Z.type];if(!te){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Z.type==="perspective"?K=new PerspectiveCamera(MathUtils.radToDeg(te.yfov),te.aspectRatio||1,te.znear||1,te.zfar||2e6):Z.type==="orthographic"&&(K=new OrthographicCamera(-te.xmag,te.xmag,te.ymag,-te.ymag,te.znear,te.zfar)),Z.name&&(K.name=this.createUniqueName(Z.name)),assignExtrasToUserData(K,Z),Promise.resolve(K)}loadSkin(_){const K=this.json.skins[_],Z=[];for(let te=0,ie=K.joints.length;te<ie;te++)Z.push(this._loadNodeShallow(K.joints[te]));return K.inverseBindMatrices!==void 0?Z.push(this.getDependency("accessor",K.inverseBindMatrices)):Z.push(null),Promise.all(Z).then(function(te){const ie=te.pop(),se=te,oe=[],ae=[];for(let le=0,ue=se.length;le<ue;le++){const fe=se[le];if(fe){oe.push(fe);const he=new Matrix4;ie!==null&&he.fromArray(ie.array,le*16),ae.push(he)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',K.joints[le])}return new Skeleton(oe,ae)})}loadAnimation(_){const K=this.json,Z=this,te=K.animations[_],ie=te.name?te.name:"animation_"+_,se=[],oe=[],ae=[],le=[],ue=[];for(let fe=0,he=te.channels.length;fe<he;fe++){const ge=te.channels[fe],_e=te.samplers[ge.sampler],Se=ge.target,Ee=Se.node,ye=te.parameters!==void 0?te.parameters[_e.input]:_e.input,be=te.parameters!==void 0?te.parameters[_e.output]:_e.output;Se.node!==void 0&&(se.push(this.getDependency("node",Ee)),oe.push(this.getDependency("accessor",ye)),ae.push(this.getDependency("accessor",be)),le.push(_e),ue.push(Se))}return Promise.all([Promise.all(se),Promise.all(oe),Promise.all(ae),Promise.all(le),Promise.all(ue)]).then(function(fe){const he=fe[0],ge=fe[1],_e=fe[2],Se=fe[3],Ee=fe[4],ye=[];for(let be=0,we=he.length;be<we;be++){const Pe=he[be],Oe=ge[be],Be=_e[be],Ue=Se[be],$e=Ee[be];if(Pe===void 0)continue;Pe.updateMatrix&&Pe.updateMatrix();const De=Z._createAnimationTracks(Pe,Oe,Be,Ue,$e);if(De)for(let ke=0;ke<De.length;ke++)ye.push(De[ke])}return new AnimationClip(ie,void 0,ye)})}createNodeMesh(_){const K=this.json,Z=this,te=K.nodes[_];return te.mesh===void 0?null:Z.getDependency("mesh",te.mesh).then(function(ie){const se=Z._getNodeRef(Z.meshCache,te.mesh,ie);return te.weights!==void 0&&se.traverse(function(oe){if(oe.isMesh)for(let ae=0,le=te.weights.length;ae<le;ae++)oe.morphTargetInfluences[ae]=te.weights[ae]}),se})}loadNode(_){const K=this.json,Z=this,te=K.nodes[_],ie=Z._loadNodeShallow(_),se=[],oe=te.children||[];for(let le=0,ue=oe.length;le<ue;le++)se.push(Z.getDependency("node",oe[le]));const ae=te.skin===void 0?Promise.resolve(null):Z.getDependency("skin",te.skin);return Promise.all([ie,Promise.all(se),ae]).then(function(le){const ue=le[0],fe=le[1],he=le[2];he!==null&&ue.traverse(function(ge){ge.isSkinnedMesh&&ge.bind(he,_identityMatrix)});for(let ge=0,_e=fe.length;ge<_e;ge++)ue.add(fe[ge]);return ue})}_loadNodeShallow(_){const K=this.json,Z=this.extensions,te=this;if(this.nodeCache[_]!==void 0)return this.nodeCache[_];const ie=K.nodes[_],se=ie.name?te.createUniqueName(ie.name):"",oe=[],ae=te._invokeOne(function(le){return le.createNodeMesh&&le.createNodeMesh(_)});return ae&&oe.push(ae),ie.camera!==void 0&&oe.push(te.getDependency("camera",ie.camera).then(function(le){return te._getNodeRef(te.cameraCache,ie.camera,le)})),te._invokeAll(function(le){return le.createNodeAttachment&&le.createNodeAttachment(_)}).forEach(function(le){oe.push(le)}),this.nodeCache[_]=Promise.all(oe).then(function(le){let ue;if(ie.isBone===!0?ue=new Bone:le.length>1?ue=new Group:le.length===1?ue=le[0]:ue=new Object3D,ue!==le[0])for(let fe=0,he=le.length;fe<he;fe++)ue.add(le[fe]);if(ie.name&&(ue.userData.name=ie.name,ue.name=se),assignExtrasToUserData(ue,ie),ie.extensions&&addUnknownExtensionsToUserData(Z,ue,ie),ie.matrix!==void 0){const fe=new Matrix4;fe.fromArray(ie.matrix),ue.applyMatrix4(fe)}else ie.translation!==void 0&&ue.position.fromArray(ie.translation),ie.rotation!==void 0&&ue.quaternion.fromArray(ie.rotation),ie.scale!==void 0&&ue.scale.fromArray(ie.scale);if(!te.associations.has(ue))te.associations.set(ue,{});else if(ie.mesh!==void 0&&te.meshCache.refs[ie.mesh]>1){const fe=te.associations.get(ue);te.associations.set(ue,{...fe})}return te.associations.get(ue).nodes=_,ue}),this.nodeCache[_]}loadScene(_){const K=this.extensions,Z=this.json.scenes[_],te=this,ie=new Group;Z.name&&(ie.name=te.createUniqueName(Z.name)),assignExtrasToUserData(ie,Z),Z.extensions&&addUnknownExtensionsToUserData(K,ie,Z);const se=Z.nodes||[],oe=[];for(let ae=0,le=se.length;ae<le;ae++)oe.push(te.getDependency("node",se[ae]));return Promise.all(oe).then(function(ae){for(let ue=0,fe=ae.length;ue<fe;ue++)ie.add(ae[ue]);const le=ue=>{const fe=new Map;for(const[he,ge]of te.associations)(he instanceof Material||he instanceof Texture)&&fe.set(he,ge);return ue.traverse(he=>{const ge=te.associations.get(he);ge!=null&&fe.set(he,ge)}),fe};return te.associations=le(ie),ie})}_createAnimationTracks(_,K,Z,te,ie){const se=[],oe=_.name?_.name:_.uuid,ae=[];PATH_PROPERTIES[ie.path]===PATH_PROPERTIES.weights?_.traverse(function(he){he.morphTargetInfluences&&ae.push(he.name?he.name:he.uuid)}):ae.push(oe);let le;switch(PATH_PROPERTIES[ie.path]){case PATH_PROPERTIES.weights:le=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:le=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.translation:case PATH_PROPERTIES.scale:le=VectorKeyframeTrack;break;default:switch(Z.itemSize){case 1:le=NumberKeyframeTrack;break;case 2:case 3:default:le=VectorKeyframeTrack;break}break}const ue=te.interpolation!==void 0?INTERPOLATION[te.interpolation]:InterpolateLinear,fe=this._getArrayFromAccessor(Z);for(let he=0,ge=ae.length;he<ge;he++){const _e=new le(ae[he]+"."+PATH_PROPERTIES[ie.path],K.array,fe,ue);te.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_e),se.push(_e)}return se}_getArrayFromAccessor(_){let K=_.array;if(_.normalized){const Z=getNormalizedComponentScale(K.constructor),te=new Float32Array(K.length);for(let ie=0,se=K.length;ie<se;ie++)te[ie]=K[ie]*Z;K=te}return K}_createCubicSplineTrackInterpolant(_){_.createInterpolant=function(Z){const te=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new te(this.times,this.values,this.getValueSize()/3,Z)},_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(ne,_,K){const Z=_.attributes,te=new Box3;if(Z.POSITION!==void 0){const oe=K.json.accessors[Z.POSITION],ae=oe.min,le=oe.max;if(ae!==void 0&&le!==void 0){if(te.set(new Vector3(ae[0],ae[1],ae[2]),new Vector3(le[0],le[1],le[2])),oe.normalized){const ue=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[oe.componentType]);te.min.multiplyScalar(ue),te.max.multiplyScalar(ue)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const ie=_.targets;if(ie!==void 0){const oe=new Vector3,ae=new Vector3;for(let le=0,ue=ie.length;le<ue;le++){const fe=ie[le];if(fe.POSITION!==void 0){const he=K.json.accessors[fe.POSITION],ge=he.min,_e=he.max;if(ge!==void 0&&_e!==void 0){if(ae.setX(Math.max(Math.abs(ge[0]),Math.abs(_e[0]))),ae.setY(Math.max(Math.abs(ge[1]),Math.abs(_e[1]))),ae.setZ(Math.max(Math.abs(ge[2]),Math.abs(_e[2]))),he.normalized){const Se=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[he.componentType]);ae.multiplyScalar(Se)}oe.max(ae)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}te.expandByVector(oe)}ne.boundingBox=te;const se=new Sphere;te.getCenter(se.center),se.radius=te.min.distanceTo(te.max)/2,ne.boundingSphere=se}function addPrimitiveAttributes(ne,_,K){const Z=_.attributes,te=[];function ie(se,oe){return K.getDependency("accessor",se).then(function(ae){ne.setAttribute(oe,ae)})}for(const se in Z){const oe=ATTRIBUTES[se]||se.toLowerCase();oe in ne.attributes||te.push(ie(Z[se],oe))}if(_.indices!==void 0&&!ne.index){const se=K.getDependency("accessor",_.indices).then(function(oe){ne.setIndex(oe)});te.push(se)}return ColorManagement.workingColorSpace!==LinearSRGBColorSpace$1&&"COLOR_0"in Z&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ColorManagement.workingColorSpace}" not supported.`),assignExtrasToUserData(ne,_),computeBounds(ne,_,K),Promise.all(te).then(function(){return _.targets!==void 0?addMorphTargets(ne,_.targets,K):ne})}const cache=new Map;function loadImage(ne){return new Promise((_,K)=>{new TextureLoader().load(ne,te=>{cache.set(ne,te),_(te)},void 0,te=>K(te))})}function loadGLB(ne){return new Promise((_,K)=>{new GLTFLoader().load(ne,te=>{cache.set(ne,te),_(te)},void 0,te=>K(te))})}function isImage(ne){return ne.match(/\.(jpg|jpeg|png|webp|bmp)$/i)}function isGLB(ne){return ne.match(/\.(glb|gltf)$/i)}function useTextureCache(ne=[]){const[_,K]=reactExports.useState(0),[Z,te]=reactExports.useState(!0),[ie,se]=reactExports.useState(null),[oe,ae]=reactExports.useState({}),le=ne.length;reactExports.useEffect(()=>{let fe=!1;if(!ne.length){te(!1),K(1);return}te(!0),K(0),se(null);let he=0;const ge={};return Promise.all(ne.map(async _e=>{if(cache.has(_e))return ge[_e]=cache.get(_e),he++,K(he/le),cache.get(_e);try{let Se;if(isImage(_e))Se=await loadImage(_e);else if(isGLB(_e))Se=await loadGLB(_e);else throw new Error("Unsupported asset type: "+_e);return ge[_e]=Se,he++,K(he/le),Se}catch(Se){se(Se),he++,K(he/le)}})).then(()=>{fe||(ae(ge),te(!1))}),()=>{fe=!0}},[JSON.stringify(ne)]);const ue=reactExports.useCallback(fe=>cache.get(fe),[]);return{isLoading:Z,progress:_,error:ie,assets:oe,get:ue}}function MatterTag({position:ne=[0,1,0],label:_,description:K,color:Z="#03687d"}){const[te,ie]=reactExports.useState(!1),[se,oe]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("group",{position:[ne[0],ne[1],ne[2]-.01],children:[jsxRuntimeExports.jsxs("mesh",{onClick:()=>ie(ae=>!ae),onPointerEnter:()=>oe(!0),onPointerLeave:()=>oe(!1),rotation:[0,Math.PI,0],children:[jsxRuntimeExports.jsx("circleGeometry",{args:[.08,32]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:Z,opacity:se?1:.8,transparent:!0})]}),(se||te)&&jsxRuntimeExports.jsx(Html,{position:[0,.35,0],center:!0,children:jsxRuntimeExports.jsxs("div",{style:{background:"white",padding:"8px 12px",borderRadius:"10px",boxShadow:"0px 2px 8px rgba(0,0,0,0.25)",border:`2px solid ${Z}`,minWidth:"180px",maxWidth:"240px",fontFamily:"sans-serif",textAlign:"left",cursor:"pointer",pointerEvents:"auto"},onClick:()=>ie(ae=>!ae),children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:Z,marginBottom:"4px"},children:_}),te&&jsxRuntimeExports.jsx("div",{style:{fontSize:"12px",color:"#333",lineHeight:"1.4em"},children:K})]})})]})}var src={exports:{}},indexLight={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=ne;function ne(_,K){for(var Z=new Array(arguments.length-1),te=0,ie=2,se=!0;ie<arguments.length;)Z[te++]=arguments[ie++];return new Promise(function(ae,le){Z[te]=function(fe){if(se)if(se=!1,fe)le(fe);else{for(var he=new Array(arguments.length-1),ge=0;ge<he.length;)he[ge++]=arguments[ge];ae.apply(null,he)}};try{_.apply(K||null,Z)}catch(ue){se&&(se=!1,le(ue))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,(function(ne){var _=ne;_.length=function(oe){var ae=oe.length;if(!ae)return 0;for(var le=0;--ae%4>1&&oe.charAt(ae)==="=";)++le;return Math.ceil(oe.length*3)/4-le};for(var K=new Array(64),Z=new Array(123),te=0;te<64;)Z[K[te]=te<26?te+65:te<52?te+71:te<62?te-4:te-59|43]=te++;_.encode=function(oe,ae,le){for(var ue=null,fe=[],he=0,ge=0,_e;ae<le;){var Se=oe[ae++];switch(ge){case 0:fe[he++]=K[Se>>2],_e=(Se&3)<<4,ge=1;break;case 1:fe[he++]=K[_e|Se>>4],_e=(Se&15)<<2,ge=2;break;case 2:fe[he++]=K[_e|Se>>6],fe[he++]=K[Se&63],ge=0;break}he>8191&&((ue||(ue=[])).push(String.fromCharCode.apply(String,fe)),he=0)}return ge&&(fe[he++]=K[_e],fe[he++]=61,ge===1&&(fe[he++]=61)),ue?(he&&ue.push(String.fromCharCode.apply(String,fe.slice(0,he))),ue.join("")):String.fromCharCode.apply(String,fe.slice(0,he))};var ie="invalid encoding";_.decode=function(oe,ae,le){for(var ue=le,fe=0,he,ge=0;ge<oe.length;){var _e=oe.charCodeAt(ge++);if(_e===61&&fe>1)break;if((_e=Z[_e])===void 0)throw Error(ie);switch(fe){case 0:he=_e,fe=1;break;case 1:ae[le++]=he<<2|(_e&48)>>4,he=_e,fe=2;break;case 2:ae[le++]=(he&15)<<4|(_e&60)>>2,he=_e,fe=3;break;case 3:ae[le++]=(he&3)<<6|_e,fe=0;break}}if(fe===1)throw Error(ie);return le-ue},_.test=function(oe){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(oe)}})(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=ne;function ne(){this._listeners={}}return ne.prototype.on=function(K,Z,te){return(this._listeners[K]||(this._listeners[K]=[])).push({fn:Z,ctx:te||this}),this},ne.prototype.off=function(K,Z){if(K===void 0)this._listeners={};else if(Z===void 0)this._listeners[K]=[];else for(var te=this._listeners[K],ie=0;ie<te.length;)te[ie].fn===Z?te.splice(ie,1):++ie;return this},ne.prototype.emit=function(K){var Z=this._listeners[K];if(Z){for(var te=[],ie=1;ie<arguments.length;)te.push(arguments[ie++]);for(ie=0;ie<Z.length;)Z[ie].fn.apply(Z[ie++].ctx,te)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=ne(ne);function ne(ie){return typeof Float32Array<"u"?(function(){var se=new Float32Array([-0]),oe=new Uint8Array(se.buffer),ae=oe[3]===128;function le(ge,_e,Se){se[0]=ge,_e[Se]=oe[0],_e[Se+1]=oe[1],_e[Se+2]=oe[2],_e[Se+3]=oe[3]}function ue(ge,_e,Se){se[0]=ge,_e[Se]=oe[3],_e[Se+1]=oe[2],_e[Se+2]=oe[1],_e[Se+3]=oe[0]}ie.writeFloatLE=ae?le:ue,ie.writeFloatBE=ae?ue:le;function fe(ge,_e){return oe[0]=ge[_e],oe[1]=ge[_e+1],oe[2]=ge[_e+2],oe[3]=ge[_e+3],se[0]}function he(ge,_e){return oe[3]=ge[_e],oe[2]=ge[_e+1],oe[1]=ge[_e+2],oe[0]=ge[_e+3],se[0]}ie.readFloatLE=ae?fe:he,ie.readFloatBE=ae?he:fe})():(function(){function se(ae,le,ue,fe){var he=le<0?1:0;if(he&&(le=-le),le===0)ae(1/le>0?0:2147483648,ue,fe);else if(isNaN(le))ae(2143289344,ue,fe);else if(le>34028234663852886e22)ae((he<<31|2139095040)>>>0,ue,fe);else if(le<11754943508222875e-54)ae((he<<31|Math.round(le/1401298464324817e-60))>>>0,ue,fe);else{var ge=Math.floor(Math.log(le)/Math.LN2),_e=Math.round(le*Math.pow(2,-ge)*8388608)&8388607;ae((he<<31|ge+127<<23|_e)>>>0,ue,fe)}}ie.writeFloatLE=se.bind(null,_),ie.writeFloatBE=se.bind(null,K);function oe(ae,le,ue){var fe=ae(le,ue),he=(fe>>31)*2+1,ge=fe>>>23&255,_e=fe&8388607;return ge===255?_e?NaN:he*(1/0):ge===0?he*1401298464324817e-60*_e:he*Math.pow(2,ge-150)*(_e+8388608)}ie.readFloatLE=oe.bind(null,Z),ie.readFloatBE=oe.bind(null,te)})(),typeof Float64Array<"u"?(function(){var se=new Float64Array([-0]),oe=new Uint8Array(se.buffer),ae=oe[7]===128;function le(ge,_e,Se){se[0]=ge,_e[Se]=oe[0],_e[Se+1]=oe[1],_e[Se+2]=oe[2],_e[Se+3]=oe[3],_e[Se+4]=oe[4],_e[Se+5]=oe[5],_e[Se+6]=oe[6],_e[Se+7]=oe[7]}function ue(ge,_e,Se){se[0]=ge,_e[Se]=oe[7],_e[Se+1]=oe[6],_e[Se+2]=oe[5],_e[Se+3]=oe[4],_e[Se+4]=oe[3],_e[Se+5]=oe[2],_e[Se+6]=oe[1],_e[Se+7]=oe[0]}ie.writeDoubleLE=ae?le:ue,ie.writeDoubleBE=ae?ue:le;function fe(ge,_e){return oe[0]=ge[_e],oe[1]=ge[_e+1],oe[2]=ge[_e+2],oe[3]=ge[_e+3],oe[4]=ge[_e+4],oe[5]=ge[_e+5],oe[6]=ge[_e+6],oe[7]=ge[_e+7],se[0]}function he(ge,_e){return oe[7]=ge[_e],oe[6]=ge[_e+1],oe[5]=ge[_e+2],oe[4]=ge[_e+3],oe[3]=ge[_e+4],oe[2]=ge[_e+5],oe[1]=ge[_e+6],oe[0]=ge[_e+7],se[0]}ie.readDoubleLE=ae?fe:he,ie.readDoubleBE=ae?he:fe})():(function(){function se(ae,le,ue,fe,he,ge){var _e=fe<0?1:0;if(_e&&(fe=-fe),fe===0)ae(0,he,ge+le),ae(1/fe>0?0:2147483648,he,ge+ue);else if(isNaN(fe))ae(0,he,ge+le),ae(2146959360,he,ge+ue);else if(fe>17976931348623157e292)ae(0,he,ge+le),ae((_e<<31|2146435072)>>>0,he,ge+ue);else{var Se;if(fe<22250738585072014e-324)Se=fe/5e-324,ae(Se>>>0,he,ge+le),ae((_e<<31|Se/4294967296)>>>0,he,ge+ue);else{var Ee=Math.floor(Math.log(fe)/Math.LN2);Ee===1024&&(Ee=1023),Se=fe*Math.pow(2,-Ee),ae(Se*4503599627370496>>>0,he,ge+le),ae((_e<<31|Ee+1023<<20|Se*1048576&1048575)>>>0,he,ge+ue)}}}ie.writeDoubleLE=se.bind(null,_,0,4),ie.writeDoubleBE=se.bind(null,K,4,0);function oe(ae,le,ue,fe,he){var ge=ae(fe,he+le),_e=ae(fe,he+ue),Se=(_e>>31)*2+1,Ee=_e>>>20&2047,ye=4294967296*(_e&1048575)+ge;return Ee===2047?ye?NaN:Se*(1/0):Ee===0?Se*5e-324*ye:Se*Math.pow(2,Ee-1075)*(ye+4503599627370496)}ie.readDoubleLE=oe.bind(null,Z,0,4),ie.readDoubleBE=oe.bind(null,te,4,0)})(),ie}function _(ie,se,oe){se[oe]=ie&255,se[oe+1]=ie>>>8&255,se[oe+2]=ie>>>16&255,se[oe+3]=ie>>>24}function K(ie,se,oe){se[oe]=ie>>>24,se[oe+1]=ie>>>16&255,se[oe+2]=ie>>>8&255,se[oe+3]=ie&255}function Z(ie,se){return(ie[se]|ie[se+1]<<8|ie[se+2]<<16|ie[se+3]<<24)>>>0}function te(ie,se){return(ie[se]<<24|ie[se+1]<<16|ie[se+2]<<8|ie[se+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ne){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,(function(ne){var _=ne;_.length=function(Z){for(var te=0,ie=0,se=0;se<Z.length;++se)ie=Z.charCodeAt(se),ie<128?te+=1:ie<2048?te+=2:(ie&64512)===55296&&(Z.charCodeAt(se+1)&64512)===56320?(++se,te+=4):te+=3;return te},_.read=function(Z,te,ie){var se=ie-te;if(se<1)return"";for(var oe=null,ae=[],le=0,ue;te<ie;)ue=Z[te++],ue<128?ae[le++]=ue:ue>191&&ue<224?ae[le++]=(ue&31)<<6|Z[te++]&63:ue>239&&ue<365?(ue=((ue&7)<<18|(Z[te++]&63)<<12|(Z[te++]&63)<<6|Z[te++]&63)-65536,ae[le++]=55296+(ue>>10),ae[le++]=56320+(ue&1023)):ae[le++]=(ue&15)<<12|(Z[te++]&63)<<6|Z[te++]&63,le>8191&&((oe||(oe=[])).push(String.fromCharCode.apply(String,ae)),le=0);return oe?(le&&oe.push(String.fromCharCode.apply(String,ae.slice(0,le))),oe.join("")):String.fromCharCode.apply(String,ae.slice(0,le))},_.write=function(Z,te,ie){for(var se=ie,oe,ae,le=0;le<Z.length;++le)oe=Z.charCodeAt(le),oe<128?te[ie++]=oe:oe<2048?(te[ie++]=oe>>6|192,te[ie++]=oe&63|128):(oe&64512)===55296&&((ae=Z.charCodeAt(le+1))&64512)===56320?(oe=65536+((oe&1023)<<10)+(ae&1023),++le,te[ie++]=oe>>18|240,te[ie++]=oe>>12&63|128,te[ie++]=oe>>6&63|128,te[ie++]=oe&63|128):(te[ie++]=oe>>12|224,te[ie++]=oe>>6&63|128,te[ie++]=oe&63|128);return ie-se}})(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=ne;function ne(_,K,Z){var te=Z||8192,ie=te>>>1,se=null,oe=te;return function(le){if(le<1||le>ie)return _(le);oe+le>te&&(se=_(te),oe=0);var ue=K.call(se,oe,oe+=le);return oe&7&&(oe=(oe|7)+1),ue}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=_;var ne=requireMinimal();function _(ie,se){this.lo=ie>>>0,this.hi=se>>>0}var K=_.zero=new _(0,0);K.toNumber=function(){return 0},K.zzEncode=K.zzDecode=function(){return this},K.length=function(){return 1};var Z=_.zeroHash="\0\0\0\0\0\0\0\0";_.fromNumber=function(se){if(se===0)return K;var oe=se<0;oe&&(se=-se);var ae=se>>>0,le=(se-ae)/4294967296>>>0;return oe&&(le=~le>>>0,ae=~ae>>>0,++ae>4294967295&&(ae=0,++le>4294967295&&(le=0))),new _(ae,le)},_.from=function(se){if(typeof se=="number")return _.fromNumber(se);if(ne.isString(se))if(ne.Long)se=ne.Long.fromString(se);else return _.fromNumber(parseInt(se,10));return se.low||se.high?new _(se.low>>>0,se.high>>>0):K},_.prototype.toNumber=function(se){if(!se&&this.hi>>>31){var oe=~this.lo+1>>>0,ae=~this.hi>>>0;return oe||(ae=ae+1>>>0),-(oe+ae*4294967296)}return this.lo+this.hi*4294967296},_.prototype.toLong=function(se){return ne.Long?new ne.Long(this.lo|0,this.hi|0,!!se):{low:this.lo|0,high:this.hi|0,unsigned:!!se}};var te=String.prototype.charCodeAt;return _.fromHash=function(se){return se===Z?K:new _((te.call(se,0)|te.call(se,1)<<8|te.call(se,2)<<16|te.call(se,3)<<24)>>>0,(te.call(se,4)|te.call(se,5)<<8|te.call(se,6)<<16|te.call(se,7)<<24)>>>0)},_.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},_.prototype.zzEncode=function(){var se=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^se)>>>0,this.lo=(this.lo<<1^se)>>>0,this},_.prototype.zzDecode=function(){var se=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^se)>>>0,this.hi=(this.hi>>>1^se)>>>0,this},_.prototype.length=function(){var se=this.lo,oe=(this.lo>>>28|this.hi<<4)>>>0,ae=this.hi>>>24;return ae===0?oe===0?se<16384?se<128?1:2:se<2097152?3:4:oe<16384?oe<128?5:6:oe<2097152?7:8:ae<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,(function(ne){var _=ne;_.asPromise=requireAspromise(),_.base64=requireBase64(),_.EventEmitter=requireEventemitter(),_.float=requireFloat(),_.inquire=requireInquire(),_.utf8=requireUtf8(),_.pool=requirePool(),_.LongBits=requireLongbits(),_.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),_.global=_.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal,_.emptyArray=Object.freeze?Object.freeze([]):[],_.emptyObject=Object.freeze?Object.freeze({}):{},_.isInteger=Number.isInteger||function(ie){return typeof ie=="number"&&isFinite(ie)&&Math.floor(ie)===ie},_.isString=function(ie){return typeof ie=="string"||ie instanceof String},_.isObject=function(ie){return ie&&typeof ie=="object"},_.isset=_.isSet=function(ie,se){var oe=ie[se];return oe!=null&&ie.hasOwnProperty(se)?typeof oe!="object"||(Array.isArray(oe)?oe.length:Object.keys(oe).length)>0:!1},_.Buffer=(function(){try{var te=_.inquire("buffer").Buffer;return te.prototype.utf8Write?te:null}catch{return null}})(),_._Buffer_from=null,_._Buffer_allocUnsafe=null,_.newBuffer=function(ie){return typeof ie=="number"?_.Buffer?_._Buffer_allocUnsafe(ie):new _.Array(ie):_.Buffer?_._Buffer_from(ie):typeof Uint8Array>"u"?ie:new Uint8Array(ie)},_.Array=typeof Uint8Array<"u"?Uint8Array:Array,_.Long=_.global.dcodeIO&&_.global.dcodeIO.Long||_.global.Long||_.inquire("long"),_.key2Re=/^true|false|0|1$/,_.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_.longToHash=function(ie){return ie?_.LongBits.from(ie).toHash():_.LongBits.zeroHash},_.longFromHash=function(ie,se){var oe=_.LongBits.fromHash(ie);return _.Long?_.Long.fromBits(oe.lo,oe.hi,se):oe.toNumber(!!se)};function K(te,ie,se){for(var oe=Object.keys(ie),ae=0;ae<oe.length;++ae)(te[oe[ae]]===void 0||!se)&&(te[oe[ae]]=ie[oe[ae]]);return te}_.merge=K,_.lcFirst=function(ie){return ie.charAt(0).toLowerCase()+ie.substring(1)};function Z(te){function ie(se,oe){if(!(this instanceof ie))return new ie(se,oe);Object.defineProperty(this,"message",{get:function(){return se}}),Error.captureStackTrace?Error.captureStackTrace(this,ie):Object.defineProperty(this,"stack",{value:new Error().stack||""}),oe&&K(this,oe)}return ie.prototype=Object.create(Error.prototype,{constructor:{value:ie,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return te},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),ie}_.newError=Z,_.ProtocolError=Z("ProtocolError"),_.oneOfGetter=function(ie){for(var se={},oe=0;oe<ie.length;++oe)se[ie[oe]]=1;return function(){for(var ae=Object.keys(this),le=ae.length-1;le>-1;--le)if(se[ae[le]]===1&&this[ae[le]]!==void 0&&this[ae[le]]!==null)return ae[le]}},_.oneOfSetter=function(ie){return function(se){for(var oe=0;oe<ie.length;++oe)ie[oe]!==se&&delete this[ie[oe]]}},_.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_._configure=function(){var te=_.Buffer;if(!te){_._Buffer_from=_._Buffer_allocUnsafe=null;return}_._Buffer_from=te.from!==Uint8Array.from&&te.from||function(se,oe){return new te(se,oe)},_._Buffer_allocUnsafe=te.allocUnsafe||function(se){return new te(se)}}})(minimal)),minimal}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=ae;var ne=requireMinimal(),_,K=ne.LongBits,Z=ne.base64,te=ne.utf8;function ie(Ee,ye,be){this.fn=Ee,this.len=ye,this.next=void 0,this.val=be}function se(){}function oe(Ee){this.head=Ee.head,this.tail=Ee.tail,this.len=Ee.len,this.next=Ee.states}function ae(){this.len=0,this.head=new ie(se,0,0),this.tail=this.head,this.states=null}var le=function(){return ne.Buffer?function(){return(ae.create=function(){return new _})()}:function(){return new ae}};ae.create=le(),ae.alloc=function(ye){return new ne.Array(ye)},ne.Array!==Array&&(ae.alloc=ne.pool(ae.alloc,ne.Array.prototype.subarray)),ae.prototype._push=function(ye,be,we){return this.tail=this.tail.next=new ie(ye,be,we),this.len+=be,this};function ue(Ee,ye,be){ye[be]=Ee&255}function fe(Ee,ye,be){for(;Ee>127;)ye[be++]=Ee&127|128,Ee>>>=7;ye[be]=Ee}function he(Ee,ye){this.len=Ee,this.next=void 0,this.val=ye}he.prototype=Object.create(ie.prototype),he.prototype.fn=fe,ae.prototype.uint32=function(ye){return this.len+=(this.tail=this.tail.next=new he((ye=ye>>>0)<128?1:ye<16384?2:ye<2097152?3:ye<268435456?4:5,ye)).len,this},ae.prototype.int32=function(ye){return ye<0?this._push(ge,10,K.fromNumber(ye)):this.uint32(ye)},ae.prototype.sint32=function(ye){return this.uint32((ye<<1^ye>>31)>>>0)};function ge(Ee,ye,be){for(;Ee.hi;)ye[be++]=Ee.lo&127|128,Ee.lo=(Ee.lo>>>7|Ee.hi<<25)>>>0,Ee.hi>>>=7;for(;Ee.lo>127;)ye[be++]=Ee.lo&127|128,Ee.lo=Ee.lo>>>7;ye[be++]=Ee.lo}ae.prototype.uint64=function(ye){var be=K.from(ye);return this._push(ge,be.length(),be)},ae.prototype.int64=ae.prototype.uint64,ae.prototype.sint64=function(ye){var be=K.from(ye).zzEncode();return this._push(ge,be.length(),be)},ae.prototype.bool=function(ye){return this._push(ue,1,ye?1:0)};function _e(Ee,ye,be){ye[be]=Ee&255,ye[be+1]=Ee>>>8&255,ye[be+2]=Ee>>>16&255,ye[be+3]=Ee>>>24}ae.prototype.fixed32=function(ye){return this._push(_e,4,ye>>>0)},ae.prototype.sfixed32=ae.prototype.fixed32,ae.prototype.fixed64=function(ye){var be=K.from(ye);return this._push(_e,4,be.lo)._push(_e,4,be.hi)},ae.prototype.sfixed64=ae.prototype.fixed64,ae.prototype.float=function(ye){return this._push(ne.float.writeFloatLE,4,ye)},ae.prototype.double=function(ye){return this._push(ne.float.writeDoubleLE,8,ye)};var Se=ne.Array.prototype.set?function(ye,be,we){be.set(ye,we)}:function(ye,be,we){for(var Pe=0;Pe<ye.length;++Pe)be[we+Pe]=ye[Pe]};return ae.prototype.bytes=function(ye){var be=ye.length>>>0;if(!be)return this._push(ue,1,0);if(ne.isString(ye)){var we=ae.alloc(be=Z.length(ye));Z.decode(ye,we,0),ye=we}return this.uint32(be)._push(Se,be,ye)},ae.prototype.string=function(ye){var be=te.length(ye);return be?this.uint32(be)._push(te.write,be,ye):this._push(ue,1,0)},ae.prototype.fork=function(){return this.states=new oe(this),this.head=this.tail=new ie(se,0,0),this.len=0,this},ae.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ie(se,0,0),this.len=0),this},ae.prototype.ldelim=function(){var ye=this.head,be=this.tail,we=this.len;return this.reset().uint32(we),we&&(this.tail.next=ye.next,this.tail=be,this.len+=we),this},ae.prototype.finish=function(){for(var ye=this.head.next,be=this.constructor.alloc(this.len),we=0;ye;)ye.fn(ye.val,be,we),we+=ye.len,ye=ye.next;return be},ae._configure=function(Ee){_=Ee,ae.create=le(),_._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=K;var ne=requireWriter();(K.prototype=Object.create(ne.prototype)).constructor=K;var _=requireMinimal();function K(){ne.call(this)}K._configure=function(){K.alloc=_._Buffer_allocUnsafe,K.writeBytesBuffer=_.Buffer&&_.Buffer.prototype instanceof Uint8Array&&_.Buffer.prototype.set.name==="set"?function(ie,se,oe){se.set(ie,oe)}:function(ie,se,oe){if(ie.copy)ie.copy(se,oe,0,ie.length);else for(var ae=0;ae<ie.length;)se[oe++]=ie[ae++]}},K.prototype.bytes=function(ie){_.isString(ie)&&(ie=_._Buffer_from(ie,"base64"));var se=ie.length>>>0;return this.uint32(se),se&&this._push(K.writeBytesBuffer,se,ie),this};function Z(te,ie,se){te.length<40?_.utf8.write(te,ie,se):ie.utf8Write?ie.utf8Write(te,se):ie.write(te,se)}return K.prototype.string=function(ie){var se=_.Buffer.byteLength(ie);return this.uint32(se),se&&this._push(Z,se,ie),this},K._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=ie;var ne=requireMinimal(),_,K=ne.LongBits,Z=ne.utf8;function te(fe,he){return RangeError("index out of range: "+fe.pos+" + "+(he||1)+" > "+fe.len)}function ie(fe){this.buf=fe,this.pos=0,this.len=fe.length}var se=typeof Uint8Array<"u"?function(he){if(he instanceof Uint8Array||Array.isArray(he))return new ie(he);throw Error("illegal buffer")}:function(he){if(Array.isArray(he))return new ie(he);throw Error("illegal buffer")},oe=function(){return ne.Buffer?function(ge){return(ie.create=function(Se){return ne.Buffer.isBuffer(Se)?new _(Se):se(Se)})(ge)}:se};ie.create=oe(),ie.prototype._slice=ne.Array.prototype.subarray||ne.Array.prototype.slice,ie.prototype.uint32=(function(){var he=4294967295;return function(){if(he=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(he=(he|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(he=(he|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(he=(he|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(he=(he|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return he;if((this.pos+=5)>this.len)throw this.pos=this.len,te(this,10);return he}})(),ie.prototype.int32=function(){return this.uint32()|0},ie.prototype.sint32=function(){var he=this.uint32();return he>>>1^-(he&1)|0};function ae(){var fe=new K(0,0),he=0;if(this.len-this.pos>4){for(;he<4;++he)if(fe.lo=(fe.lo|(this.buf[this.pos]&127)<<he*7)>>>0,this.buf[this.pos++]<128)return fe;if(fe.lo=(fe.lo|(this.buf[this.pos]&127)<<28)>>>0,fe.hi=(fe.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return fe;he=0}else{for(;he<3;++he){if(this.pos>=this.len)throw te(this);if(fe.lo=(fe.lo|(this.buf[this.pos]&127)<<he*7)>>>0,this.buf[this.pos++]<128)return fe}return fe.lo=(fe.lo|(this.buf[this.pos++]&127)<<he*7)>>>0,fe}if(this.len-this.pos>4){for(;he<5;++he)if(fe.hi=(fe.hi|(this.buf[this.pos]&127)<<he*7+3)>>>0,this.buf[this.pos++]<128)return fe}else for(;he<5;++he){if(this.pos>=this.len)throw te(this);if(fe.hi=(fe.hi|(this.buf[this.pos]&127)<<he*7+3)>>>0,this.buf[this.pos++]<128)return fe}throw Error("invalid varint encoding")}ie.prototype.bool=function(){return this.uint32()!==0};function le(fe,he){return(fe[he-4]|fe[he-3]<<8|fe[he-2]<<16|fe[he-1]<<24)>>>0}ie.prototype.fixed32=function(){if(this.pos+4>this.len)throw te(this,4);return le(this.buf,this.pos+=4)},ie.prototype.sfixed32=function(){if(this.pos+4>this.len)throw te(this,4);return le(this.buf,this.pos+=4)|0};function ue(){if(this.pos+8>this.len)throw te(this,8);return new K(le(this.buf,this.pos+=4),le(this.buf,this.pos+=4))}return ie.prototype.float=function(){if(this.pos+4>this.len)throw te(this,4);var he=ne.float.readFloatLE(this.buf,this.pos);return this.pos+=4,he},ie.prototype.double=function(){if(this.pos+8>this.len)throw te(this,4);var he=ne.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,he},ie.prototype.bytes=function(){var he=this.uint32(),ge=this.pos,_e=this.pos+he;if(_e>this.len)throw te(this,he);if(this.pos+=he,Array.isArray(this.buf))return this.buf.slice(ge,_e);if(ge===_e){var Se=ne.Buffer;return Se?Se.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,ge,_e)},ie.prototype.string=function(){var he=this.bytes();return Z.read(he,0,he.length)},ie.prototype.skip=function(he){if(typeof he=="number"){if(this.pos+he>this.len)throw te(this,he);this.pos+=he}else do if(this.pos>=this.len)throw te(this);while(this.buf[this.pos++]&128);return this},ie.prototype.skipType=function(fe){switch(fe){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(fe=this.uint32()&7)!==4;)this.skipType(fe);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+fe+" at offset "+this.pos)}return this},ie._configure=function(fe){_=fe,ie.create=oe(),_._configure();var he=ne.Long?"toLong":"toNumber";ne.merge(ie.prototype,{int64:function(){return ae.call(this)[he](!1)},uint64:function(){return ae.call(this)[he](!0)},sint64:function(){return ae.call(this).zzDecode()[he](!1)},fixed64:function(){return ue.call(this)[he](!0)},sfixed64:function(){return ue.call(this)[he](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=K;var ne=requireReader();(K.prototype=Object.create(ne.prototype)).constructor=K;var _=requireMinimal();function K(Z){ne.call(this,Z)}return K._configure=function(){_.Buffer&&(K.prototype._slice=_.Buffer.prototype.slice)},K.prototype.string=function(){var te=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+te,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+te,this.len))},K._configure(),reader_buffer}var rpc={},service$1,hasRequiredService$1;function requireService$1(){if(hasRequiredService$1)return service$1;hasRequiredService$1=1,service$1=_;var ne=requireMinimal();(_.prototype=Object.create(ne.EventEmitter.prototype)).constructor=_;function _(K,Z,te){if(typeof K!="function")throw TypeError("rpcImpl must be a function");ne.EventEmitter.call(this),this.rpcImpl=K,this.requestDelimited=!!Z,this.responseDelimited=!!te}return _.prototype.rpcCall=function K(Z,te,ie,se,oe){if(!se)throw TypeError("request must be specified");var ae=this;if(!oe)return ne.asPromise(K,ae,Z,te,ie,se);if(!ae.rpcImpl){setTimeout(function(){oe(Error("already ended"))},0);return}try{return ae.rpcImpl(Z,te[ae.requestDelimited?"encodeDelimited":"encode"](se).finish(),function(ue,fe){if(ue)return ae.emit("error",ue,Z),oe(ue);if(fe===null){ae.end(!0);return}if(!(fe instanceof ie))try{fe=ie[ae.responseDelimited?"decodeDelimited":"decode"](fe)}catch(he){return ae.emit("error",he,Z),oe(he)}return ae.emit("data",fe,Z),oe(null,fe)})}catch(le){ae.emit("error",le,Z),setTimeout(function(){oe(le)},0);return}},_.prototype.end=function(Z){return this.rpcImpl&&(Z||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service$1}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,(function(ne){var _=ne;_.Service=requireService$1()})(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,(function(ne){var _=ne;_.build="minimal",_.Writer=requireWriter(),_.BufferWriter=requireWriter_buffer(),_.Reader=requireReader(),_.BufferReader=requireReader_buffer(),_.util=requireMinimal(),_.rpc=requireRpc(),_.roots=requireRoots(),_.configure=K;function K(){_.util._configure(),_.Writer._configure(_.BufferWriter),_.Reader._configure(_.BufferReader)}K()})(indexMinimal)),indexMinimal}var types={},util={exports:{}},codegen_1,hasRequiredCodegen;function requireCodegen(){if(hasRequiredCodegen)return codegen_1;hasRequiredCodegen=1,codegen_1=ne;function ne(_,K){typeof _=="string"&&(K=_,_=void 0);var Z=[];function te(se){if(typeof se!="string"){var oe=ie();if(ne.verbose&&console.log("codegen: "+oe),oe="return "+oe,se){for(var ae=Object.keys(se),le=new Array(ae.length+1),ue=new Array(ae.length),fe=0;fe<ae.length;)le[fe]=ae[fe],ue[fe]=se[ae[fe++]];return le[fe]=oe,Function.apply(null,le).apply(null,ue)}return Function(oe)()}for(var he=new Array(arguments.length-1),ge=0;ge<he.length;)he[ge]=arguments[++ge];if(ge=0,se=se.replace(/%([%dfijs])/g,function(Se,Ee){var ye=he[ge++];switch(Ee){case"d":case"f":return String(Number(ye));case"i":return String(Math.floor(ye));case"j":return JSON.stringify(ye);case"s":return String(ye)}return"%"}),ge!==he.length)throw Error("parameter count mismatch");return Z.push(se),te}function ie(se){return"function "+(se||K||"")+"("+(_&&_.join(",")||"")+`){
  `+Z.join(`
  `)+`
}`}return te.toString=ie,te}return ne.verbose=!1,codegen_1}var fetch_1,hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch_1;hasRequiredFetch=1,fetch_1=Z;var ne=requireAspromise(),_=requireInquire(),K=_("fs");function Z(te,ie,se){return typeof ie=="function"?(se=ie,ie={}):ie||(ie={}),se?!ie.xhr&&K&&K.readFile?K.readFile(te,function(ae,le){return ae&&typeof XMLHttpRequest<"u"?Z.xhr(te,ie,se):ae?se(ae):se(null,ie.binary?le:le.toString("utf8"))}):Z.xhr(te,ie,se):ne(Z,this,te,ie)}return Z.xhr=function(ie,se,oe){var ae=new XMLHttpRequest;ae.onreadystatechange=function(){if(ae.readyState===4){if(ae.status!==0&&ae.status!==200)return oe(Error("status "+ae.status));if(se.binary){var ue=ae.response;if(!ue){ue=[];for(var fe=0;fe<ae.responseText.length;++fe)ue.push(ae.responseText.charCodeAt(fe)&255)}return oe(null,typeof Uint8Array<"u"?new Uint8Array(ue):ue)}return oe(null,ae.responseText)}},se.binary&&("overrideMimeType"in ae&&ae.overrideMimeType("text/plain; charset=x-user-defined"),ae.responseType="arraybuffer"),ae.open("GET",ie),ae.send()},fetch_1}var path={},hasRequiredPath;function requirePath(){return hasRequiredPath||(hasRequiredPath=1,(function(ne){var _=ne,K=_.isAbsolute=function(ie){return/^(?:\/|\w+:)/.test(ie)},Z=_.normalize=function(ie){ie=ie.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var se=ie.split("/"),oe=K(ie),ae="";oe&&(ae=se.shift()+"/");for(var le=0;le<se.length;)se[le]===".."?le>0&&se[le-1]!==".."?se.splice(--le,2):oe?se.splice(le,1):++le:se[le]==="."?se.splice(le,1):++le;return ae+se.join("/")};_.resolve=function(ie,se,oe){return oe||(se=Z(se)),K(se)?se:(oe||(ie=Z(ie)),(ie=ie.replace(/(?:\/|^)[^/]+$/,"")).length?Z(ie+"/"+se):se)}})(path)),path}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=ae;var ne=requireObject();((ae.prototype=Object.create(ne.prototype)).constructor=ae).className="Namespace";var _=requireField(),K=requireUtil(),Z=requireOneof(),te,ie,se;ae.fromJSON=function(fe,he){return new ae(fe,he.options).addJSON(he.nested)};function oe(ue,fe){if(ue&&ue.length){for(var he={},ge=0;ge<ue.length;++ge)he[ue[ge].name]=ue[ge].toJSON(fe);return he}}ae.arrayToJSON=oe,ae.isReservedId=function(fe,he){if(fe){for(var ge=0;ge<fe.length;++ge)if(typeof fe[ge]!="string"&&fe[ge][0]<=he&&fe[ge][1]>he)return!0}return!1},ae.isReservedName=function(fe,he){if(fe){for(var ge=0;ge<fe.length;++ge)if(fe[ge]===he)return!0}return!1};function ae(ue,fe){ne.call(this,ue,fe),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function le(ue){ue._nestedArray=null,ue._lookupCache={};for(var fe=ue;fe=fe.parent;)fe._lookupCache={};return ue}return Object.defineProperty(ae.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=K.toArray(this.nested))}}),ae.prototype.toJSON=function(fe){return K.toObject(["options",this.options,"nested",oe(this.nestedArray,fe)])},ae.prototype.addJSON=function(fe){var he=this;if(fe)for(var ge=Object.keys(fe),_e=0,Se;_e<ge.length;++_e)Se=fe[ge[_e]],he.add((Se.fields!==void 0?te.fromJSON:Se.values!==void 0?se.fromJSON:Se.methods!==void 0?ie.fromJSON:Se.id!==void 0?_.fromJSON:ae.fromJSON)(ge[_e],Se));return this},ae.prototype.get=function(fe){return this.nested&&this.nested[fe]||null},ae.prototype.getEnum=function(fe){if(this.nested&&this.nested[fe]instanceof se)return this.nested[fe].values;throw Error("no such enum: "+fe)},ae.prototype.add=function(fe){if(!(fe instanceof _&&fe.extend!==void 0||fe instanceof te||fe instanceof Z||fe instanceof se||fe instanceof ie||fe instanceof ae))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var he=this.get(fe.name);if(he)if(he instanceof ae&&fe instanceof ae&&!(he instanceof te||he instanceof ie)){for(var ge=he.nestedArray,_e=0;_e<ge.length;++_e)fe.add(ge[_e]);this.remove(he),this.nested||(this.nested={}),fe.setOptions(he.options,!0)}else throw Error("duplicate name '"+fe.name+"' in "+this)}this.nested[fe.name]=fe,this instanceof te||this instanceof ie||this instanceof se||this instanceof _||fe._edition||(fe._edition=fe._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var Se=this;Se=Se.parent;)Se._needsRecursiveFeatureResolution=!0,Se._needsRecursiveResolve=!0;return fe.onAdd(this),le(this)},ae.prototype.remove=function(fe){if(!(fe instanceof ne))throw TypeError("object must be a ReflectionObject");if(fe.parent!==this)throw Error(fe+" is not a member of "+this);return delete this.nested[fe.name],Object.keys(this.nested).length||(this.nested=void 0),fe.onRemove(this),le(this)},ae.prototype.define=function(fe,he){if(K.isString(fe))fe=fe.split(".");else if(!Array.isArray(fe))throw TypeError("illegal path");if(fe&&fe.length&&fe[0]==="")throw Error("path must be relative");for(var ge=this;fe.length>0;){var _e=fe.shift();if(ge.nested&&ge.nested[_e]){if(ge=ge.nested[_e],!(ge instanceof ae))throw Error("path conflicts with non-namespace objects")}else ge.add(ge=new ae(_e))}return he&&ge.addJSON(he),ge},ae.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var fe=this.nestedArray,he=0;for(this.resolve();he<fe.length;)fe[he]instanceof ae?fe[he++].resolveAll():fe[he++].resolve();return this._needsRecursiveResolve=!1,this},ae.prototype._resolveFeaturesRecursive=function(fe){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,fe=this._edition||fe,ne.prototype._resolveFeaturesRecursive.call(this,fe),this.nestedArray.forEach(he=>{he._resolveFeaturesRecursive(fe)}),this):this},ae.prototype.lookup=function(fe,he,ge){if(typeof he=="boolean"?(ge=he,he=void 0):he&&!Array.isArray(he)&&(he=[he]),K.isString(fe)&&fe.length){if(fe===".")return this.root;fe=fe.split(".")}else if(!fe.length)return this;var _e=fe.join(".");if(fe[0]==="")return this.root.lookup(fe.slice(1),he);var Se=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+_e];if(Se&&(!he||he.indexOf(Se.constructor)>-1)||(Se=this._lookupImpl(fe,_e),Se&&(!he||he.indexOf(Se.constructor)>-1)))return Se;if(ge)return null;for(var Ee=this;Ee.parent;){if(Se=Ee.parent._lookupImpl(fe,_e),Se&&(!he||he.indexOf(Se.constructor)>-1))return Se;Ee=Ee.parent}return null},ae.prototype._lookupImpl=function(fe,he){if(Object.prototype.hasOwnProperty.call(this._lookupCache,he))return this._lookupCache[he];var ge=this.get(fe[0]),_e=null;if(ge)fe.length===1?_e=ge:ge instanceof ae&&(fe=fe.slice(1),_e=ge._lookupImpl(fe,fe.join(".")));else for(var Se=0;Se<this.nestedArray.length;++Se)this._nestedArray[Se]instanceof ae&&(ge=this._nestedArray[Se]._lookupImpl(fe,he))&&(_e=ge);return this._lookupCache[he]=_e,_e},ae.prototype.lookupType=function(fe){var he=this.lookup(fe,[te]);if(!he)throw Error("no such type: "+fe);return he},ae.prototype.lookupEnum=function(fe){var he=this.lookup(fe,[se]);if(!he)throw Error("no such Enum '"+fe+"' in "+this);return he},ae.prototype.lookupTypeOrEnum=function(fe){var he=this.lookup(fe,[te,se]);if(!he)throw Error("no such Type or Enum '"+fe+"' in "+this);return he},ae.prototype.lookupService=function(fe){var he=this.lookup(fe,[ie]);if(!he)throw Error("no such Service '"+fe+"' in "+this);return he},ae._configure=function(ue,fe,he){te=ue,ie=fe,se=he},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=Z;var ne=requireField();((Z.prototype=Object.create(ne.prototype)).constructor=Z).className="MapField";var _=requireTypes(),K=requireUtil();function Z(te,ie,se,oe,ae,le){if(ne.call(this,te,ie,oe,void 0,void 0,ae,le),!K.isString(se))throw TypeError("keyType must be a string");this.keyType=se,this.resolvedKeyType=null,this.map=!0}return Z.fromJSON=function(ie,se){return new Z(ie,se.id,se.keyType,se.type,se.options,se.comment)},Z.prototype.toJSON=function(ie){var se=ie?!!ie.keepComments:!1;return K.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",se?this.comment:void 0])},Z.prototype.resolve=function(){if(this.resolved)return this;if(_.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return ne.prototype.resolve.call(this)},Z.d=function(ie,se,oe){return typeof oe=="function"?oe=K.decorateType(oe).name:oe&&typeof oe=="object"&&(oe=K.decorateEnum(oe).name),function(le,ue){K.decorateType(le.constructor).add(new Z(ue,ie,se,oe))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=K;var ne=requireObject();((K.prototype=Object.create(ne.prototype)).constructor=K).className="Method";var _=requireUtil();function K(Z,te,ie,se,oe,ae,le,ue,fe){if(_.isObject(oe)?(le=oe,oe=ae=void 0):_.isObject(ae)&&(le=ae,ae=void 0),!(te===void 0||_.isString(te)))throw TypeError("type must be a string");if(!_.isString(ie))throw TypeError("requestType must be a string");if(!_.isString(se))throw TypeError("responseType must be a string");ne.call(this,Z,le),this.type=te||"rpc",this.requestType=ie,this.requestStream=oe?!0:void 0,this.responseType=se,this.responseStream=ae?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=ue,this.parsedOptions=fe}return K.fromJSON=function(te,ie){return new K(te,ie.type,ie.requestType,ie.responseType,ie.requestStream,ie.responseStream,ie.options,ie.comment,ie.parsedOptions)},K.prototype.toJSON=function(te){var ie=te?!!te.keepComments:!1;return _.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",ie?this.comment:void 0,"parsedOptions",this.parsedOptions])},K.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),ne.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=te;var ne=requireNamespace();((te.prototype=Object.create(ne.prototype)).constructor=te).className="Service";var _=requireMethod(),K=requireUtil(),Z=requireRpc();function te(se,oe){ne.call(this,se,oe),this.methods={},this._methodsArray=null}te.fromJSON=function(oe,ae){var le=new te(oe,ae.options);if(ae.methods)for(var ue=Object.keys(ae.methods),fe=0;fe<ue.length;++fe)le.add(_.fromJSON(ue[fe],ae.methods[ue[fe]]));return ae.nested&&le.addJSON(ae.nested),ae.edition&&(le._edition=ae.edition),le.comment=ae.comment,le._defaultEdition="proto3",le},te.prototype.toJSON=function(oe){var ae=ne.prototype.toJSON.call(this,oe),le=oe?!!oe.keepComments:!1;return K.toObject(["edition",this._editionToJSON(),"options",ae&&ae.options||void 0,"methods",ne.arrayToJSON(this.methodsArray,oe)||{},"nested",ae&&ae.nested||void 0,"comment",le?this.comment:void 0])},Object.defineProperty(te.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=K.toArray(this.methods))}});function ie(se){return se._methodsArray=null,se}return te.prototype.get=function(oe){return this.methods[oe]||ne.prototype.get.call(this,oe)},te.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;ne.prototype.resolve.call(this);for(var oe=this.methodsArray,ae=0;ae<oe.length;++ae)oe[ae].resolve();return this},te.prototype._resolveFeaturesRecursive=function(oe){return this._needsRecursiveFeatureResolution?(oe=this._edition||oe,ne.prototype._resolveFeaturesRecursive.call(this,oe),this.methodsArray.forEach(ae=>{ae._resolveFeaturesRecursive(oe)}),this):this},te.prototype.add=function(oe){if(this.get(oe.name))throw Error("duplicate name '"+oe.name+"' in "+this);return oe instanceof _?(this.methods[oe.name]=oe,oe.parent=this,ie(this)):ne.prototype.add.call(this,oe)},te.prototype.remove=function(oe){if(oe instanceof _){if(this.methods[oe.name]!==oe)throw Error(oe+" is not a member of "+this);return delete this.methods[oe.name],oe.parent=null,ie(this)}return ne.prototype.remove.call(this,oe)},te.prototype.create=function(oe,ae,le){for(var ue=new Z.Service(oe,ae,le),fe=0,he;fe<this.methodsArray.length;++fe){var ge=K.lcFirst((he=this._methodsArray[fe]).resolve().name).replace(/[^$\w_]/g,"");ue[ge]=K.codegen(["r","c"],K.isReserved(ge)?ge+"_":ge)("return this.rpcCall(m,q,s,r,c)")({m:he,q:he.resolvedRequestType.ctor,s:he.resolvedResponseType.ctor})}return ue},service}var message,hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message;hasRequiredMessage=1,message=_;var ne=requireMinimal();function _(K){if(K)for(var Z=Object.keys(K),te=0;te<Z.length;++te)this[Z[te]]=K[Z[te]]}return _.create=function(Z){return this.$type.create(Z)},_.encode=function(Z,te){return this.$type.encode(Z,te)},_.encodeDelimited=function(Z,te){return this.$type.encodeDelimited(Z,te)},_.decode=function(Z){return this.$type.decode(Z)},_.decodeDelimited=function(Z){return this.$type.decodeDelimited(Z)},_.verify=function(Z){return this.$type.verify(Z)},_.fromObject=function(Z){return this.$type.fromObject(Z)},_.toObject=function(Z,te){return this.$type.toObject(Z,te)},_.prototype.toJSON=function(){return this.$type.toObject(this,ne.toJSONOptions)},message}var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=te;var ne=require_enum(),_=requireTypes(),K=requireUtil();function Z(ie){return"missing required '"+ie.name+"'"}function te(ie){for(var se=K.codegen(["r","l","e"],ie.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(ie.fieldsArray.filter(function(he){return he.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),oe=0;oe<ie.fieldsArray.length;++oe){var ae=ie._fieldsArray[oe].resolve(),le=ae.resolvedType instanceof ne?"int32":ae.type,ue="m"+K.safeProp(ae.name);se("case %i: {",ae.id),ae.map?(se("if(%s===util.emptyObject)",ue)("%s={}",ue)("var c2 = r.uint32()+r.pos"),_.defaults[ae.keyType]!==void 0?se("k=%j",_.defaults[ae.keyType]):se("k=null"),_.defaults[le]!==void 0?se("value=%j",_.defaults[le]):se("value=null"),se("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",ae.keyType)("case 2:"),_.basic[le]===void 0?se("value=types[%i].decode(r,r.uint32())",oe):se("value=r.%s()",le),se("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),_.long[ae.keyType]!==void 0?se('%s[typeof k==="object"?util.longToHash(k):k]=value',ue):se("%s[k]=value",ue)):ae.repeated?(se("if(!(%s&&%s.length))",ue,ue)("%s=[]",ue),_.packed[le]!==void 0&&se("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",ue,le)("}else"),_.basic[le]===void 0?se(ae.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",ue,oe):se("%s.push(r.%s())",ue,le)):_.basic[le]===void 0?se(ae.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",ue,oe):se("%s=r.%s()",ue,le),se("break")("}")}for(se("default:")("r.skipType(t&7)")("break")("}")("}"),oe=0;oe<ie._fieldsArray.length;++oe){var fe=ie._fieldsArray[oe];fe.required&&se("if(!m.hasOwnProperty(%j))",fe.name)("throw util.ProtocolError(%j,{instance:m})",Z(fe))}return se("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=ie;var ne=require_enum(),_=requireUtil();function K(se,oe){return se.name+": "+oe+(se.repeated&&oe!=="array"?"[]":se.map&&oe!=="object"?"{k:"+se.keyType+"}":"")+" expected"}function Z(se,oe,ae,le){if(oe.resolvedType)if(oe.resolvedType instanceof ne){se("switch(%s){",le)("default:")("return%j",K(oe,"enum value"));for(var ue=Object.keys(oe.resolvedType.values),fe=0;fe<ue.length;++fe)se("case %i:",oe.resolvedType.values[ue[fe]]);se("break")("}")}else se("{")("var e=types[%i].verify(%s);",ae,le)("if(e)")("return%j+e",oe.name+".")("}");else switch(oe.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":se("if(!util.isInteger(%s))",le)("return%j",K(oe,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":se("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",le,le,le,le)("return%j",K(oe,"integer|Long"));break;case"float":case"double":se('if(typeof %s!=="number")',le)("return%j",K(oe,"number"));break;case"bool":se('if(typeof %s!=="boolean")',le)("return%j",K(oe,"boolean"));break;case"string":se("if(!util.isString(%s))",le)("return%j",K(oe,"string"));break;case"bytes":se('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',le,le,le)("return%j",K(oe,"buffer"));break}return se}function te(se,oe,ae){switch(oe.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":se("if(!util.key32Re.test(%s))",ae)("return%j",K(oe,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":se("if(!util.key64Re.test(%s))",ae)("return%j",K(oe,"integer|Long key"));break;case"bool":se("if(!util.key2Re.test(%s))",ae)("return%j",K(oe,"boolean key"));break}return se}function ie(se){var oe=_.codegen(["m"],se.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),ae=se.oneofsArray,le={};ae.length&&oe("var p={}");for(var ue=0;ue<se.fieldsArray.length;++ue){var fe=se._fieldsArray[ue].resolve(),he="m"+_.safeProp(fe.name);if(fe.optional&&oe("if(%s!=null&&m.hasOwnProperty(%j)){",he,fe.name),fe.map)oe("if(!util.isObject(%s))",he)("return%j",K(fe,"object"))("var k=Object.keys(%s)",he)("for(var i=0;i<k.length;++i){"),te(oe,fe,"k[i]"),Z(oe,fe,ue,he+"[k[i]]")("}");else if(fe.repeated)oe("if(!Array.isArray(%s))",he)("return%j",K(fe,"array"))("for(var i=0;i<%s.length;++i){",he),Z(oe,fe,ue,he+"[i]")("}");else{if(fe.partOf){var ge=_.safeProp(fe.partOf.name);le[fe.partOf.name]===1&&oe("if(p%s===1)",ge)("return%j",fe.partOf.name+": multiple values"),le[fe.partOf.name]=1,oe("p%s=1",ge)}Z(oe,fe,ue,he)}fe.optional&&oe("}")}return oe("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,(function(ne){var _=ne,K=require_enum(),Z=requireUtil();function te(se,oe,ae,le){var ue=!1;if(oe.resolvedType)if(oe.resolvedType instanceof K){se("switch(d%s){",le);for(var fe=oe.resolvedType.values,he=Object.keys(fe),ge=0;ge<he.length;++ge)fe[he[ge]]===oe.typeDefault&&!ue&&(se("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',le,le,le),oe.repeated||se("break"),ue=!0),se("case%j:",he[ge])("case %i:",fe[he[ge]])("m%s=%j",le,fe[he[ge]])("break");se("}")}else se('if(typeof d%s!=="object")',le)("throw TypeError(%j)",oe.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",le,ae,le);else{var _e=!1;switch(oe.type){case"double":case"float":se("m%s=Number(d%s)",le,le);break;case"uint32":case"fixed32":se("m%s=d%s>>>0",le,le);break;case"int32":case"sint32":case"sfixed32":se("m%s=d%s|0",le,le);break;case"uint64":_e=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":se("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",le,le,_e)('else if(typeof d%s==="string")',le)("m%s=parseInt(d%s,10)",le,le)('else if(typeof d%s==="number")',le)("m%s=d%s",le,le)('else if(typeof d%s==="object")',le)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",le,le,le,_e?"true":"");break;case"bytes":se('if(typeof d%s==="string")',le)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",le,le,le)("else if(d%s.length >= 0)",le)("m%s=d%s",le,le);break;case"string":se("m%s=String(d%s)",le,le);break;case"bool":se("m%s=Boolean(d%s)",le,le);break}}return se}_.fromObject=function(oe){var ae=oe.fieldsArray,le=Z.codegen(["d"],oe.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!ae.length)return le("return new this.ctor");le("var m=new this.ctor");for(var ue=0;ue<ae.length;++ue){var fe=ae[ue].resolve(),he=Z.safeProp(fe.name);fe.map?(le("if(d%s){",he)('if(typeof d%s!=="object")',he)("throw TypeError(%j)",fe.fullName+": object expected")("m%s={}",he)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",he),te(le,fe,ue,he+"[ks[i]]")("}")("}")):fe.repeated?(le("if(d%s){",he)("if(!Array.isArray(d%s))",he)("throw TypeError(%j)",fe.fullName+": array expected")("m%s=[]",he)("for(var i=0;i<d%s.length;++i){",he),te(le,fe,ue,he+"[i]")("}")("}")):(fe.resolvedType instanceof K||le("if(d%s!=null){",he),te(le,fe,ue,he),fe.resolvedType instanceof K||le("}"))}return le("return m")};function ie(se,oe,ae,le){if(oe.resolvedType)oe.resolvedType instanceof K?se("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",le,ae,le,le,ae,le,le):se("d%s=types[%i].toObject(m%s,o)",le,ae,le);else{var ue=!1;switch(oe.type){case"double":case"float":se("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",le,le,le,le);break;case"uint64":ue=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":se('if(typeof m%s==="number")',le)("d%s=o.longs===String?String(m%s):m%s",le,le,le)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",le,le,le,le,ue?"true":"",le);break;case"bytes":se("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",le,le,le,le,le);break;default:se("d%s=m%s",le,le);break}}return se}_.toObject=function(oe){var ae=oe.fieldsArray.slice().sort(Z.compareFieldsById);if(!ae.length)return Z.codegen()("return {}");for(var le=Z.codegen(["m","o"],oe.name+"$toObject")("if(!o)")("o={}")("var d={}"),ue=[],fe=[],he=[],ge=0;ge<ae.length;++ge)ae[ge].partOf||(ae[ge].resolve().repeated?ue:ae[ge].map?fe:he).push(ae[ge]);if(ue.length){for(le("if(o.arrays||o.defaults){"),ge=0;ge<ue.length;++ge)le("d%s=[]",Z.safeProp(ue[ge].name));le("}")}if(fe.length){for(le("if(o.objects||o.defaults){"),ge=0;ge<fe.length;++ge)le("d%s={}",Z.safeProp(fe[ge].name));le("}")}if(he.length){for(le("if(o.defaults){"),ge=0;ge<he.length;++ge){var _e=he[ge],Se=Z.safeProp(_e.name);if(_e.resolvedType instanceof K)le("d%s=o.enums===String?%j:%j",Se,_e.resolvedType.valuesById[_e.typeDefault],_e.typeDefault);else if(_e.long)le("if(util.Long){")("var n=new util.Long(%i,%i,%j)",_e.typeDefault.low,_e.typeDefault.high,_e.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",Se)("}else")("d%s=o.longs===String?%j:%i",Se,_e.typeDefault.toString(),_e.typeDefault.toNumber());else if(_e.bytes){var Ee="["+Array.prototype.slice.call(_e.typeDefault).join(",")+"]";le("if(o.bytes===String)d%s=%j",Se,String.fromCharCode.apply(String,_e.typeDefault))("else{")("d%s=%s",Se,Ee)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",Se,Se)("}")}else le("d%s=%j",Se,_e.typeDefault)}le("}")}var ye=!1;for(ge=0;ge<ae.length;++ge){var _e=ae[ge],be=oe._fieldsArray.indexOf(_e),Se=Z.safeProp(_e.name);_e.map?(ye||(ye=!0,le("var ks2")),le("if(m%s&&(ks2=Object.keys(m%s)).length){",Se,Se)("d%s={}",Se)("for(var j=0;j<ks2.length;++j){"),ie(le,_e,be,Se+"[ks2[j]]")("}")):_e.repeated?(le("if(m%s&&m%s.length){",Se,Se)("d%s=[]",Se)("for(var j=0;j<m%s.length;++j){",Se),ie(le,_e,be,Se+"[j]")("}")):(le("if(m%s!=null&&m.hasOwnProperty(%j)){",Se,_e.name),ie(le,_e,be,Se),_e.partOf&&le("if(o.oneofs)")("d%s=%j",Z.safeProp(_e.partOf.name),_e.name)),le("}")}return le("return d")}})(converter)),converter}var wrappers={},hasRequiredWrappers;function requireWrappers(){return hasRequiredWrappers||(hasRequiredWrappers=1,(function(ne){var _=ne,K=requireMessage();_[".google.protobuf.Any"]={fromObject:function(Z){if(Z&&Z["@type"]){var te=Z["@type"].substring(Z["@type"].lastIndexOf("/")+1),ie=this.lookup(te);if(ie){var se=Z["@type"].charAt(0)==="."?Z["@type"].slice(1):Z["@type"];return se.indexOf("/")===-1&&(se="/"+se),this.create({type_url:se,value:ie.encode(ie.fromObject(Z)).finish()})}}return this.fromObject(Z)},toObject:function(Z,te){var ie="type.googleapis.com/",se="",oe="";if(te&&te.json&&Z.type_url&&Z.value){oe=Z.type_url.substring(Z.type_url.lastIndexOf("/")+1),se=Z.type_url.substring(0,Z.type_url.lastIndexOf("/")+1);var ae=this.lookup(oe);ae&&(Z=ae.decode(Z.value))}if(!(Z instanceof this.ctor)&&Z instanceof K){var le=Z.$type.toObject(Z,te),ue=Z.$type.fullName[0]==="."?Z.$type.fullName.slice(1):Z.$type.fullName;return se===""&&(se=ie),oe=se+ue,le["@type"]=oe,le}return this.toObject(Z,te)}}})(wrappers)),wrappers}var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=Se;var ne=requireNamespace();((Se.prototype=Object.create(ne.prototype)).constructor=Se).className="Type";var _=require_enum(),K=requireOneof(),Z=requireField(),te=requireMapfield(),ie=requireService(),se=requireMessage(),oe=requireReader(),ae=requireWriter(),le=requireUtil(),ue=requireEncoder(),fe=requireDecoder(),he=requireVerifier(),ge=requireConverter(),_e=requireWrappers();function Se(ye,be){ne.call(this,ye,be),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Se.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var ye=Object.keys(this.fields),be=0;be<ye.length;++be){var we=this.fields[ye[be]],Pe=we.id;if(this._fieldsById[Pe])throw Error("duplicate id "+Pe+" in "+this);this._fieldsById[Pe]=we}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=le.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=le.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Se.generateConstructor(this)())},set:function(ye){var be=ye.prototype;be instanceof se||((ye.prototype=new se).constructor=ye,le.merge(ye.prototype,be)),ye.$type=ye.prototype.$type=this,le.merge(ye,se,!0),this._ctor=ye;for(var we=0;we<this.fieldsArray.length;++we)this._fieldsArray[we].resolve();var Pe={};for(we=0;we<this.oneofsArray.length;++we)Pe[this._oneofsArray[we].resolve().name]={get:le.oneOfGetter(this._oneofsArray[we].oneof),set:le.oneOfSetter(this._oneofsArray[we].oneof)};we&&Object.defineProperties(ye.prototype,Pe)}}}),Se.generateConstructor=function(be){for(var we=le.codegen(["p"],be.name),Pe=0,Oe;Pe<be.fieldsArray.length;++Pe)(Oe=be._fieldsArray[Pe]).map?we("this%s={}",le.safeProp(Oe.name)):Oe.repeated&&we("this%s=[]",le.safeProp(Oe.name));return we("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Ee(ye){return ye._fieldsById=ye._fieldsArray=ye._oneofsArray=null,delete ye.encode,delete ye.decode,delete ye.verify,ye}return Se.fromJSON=function(be,we){var Pe=new Se(be,we.options);Pe.extensions=we.extensions,Pe.reserved=we.reserved;for(var Oe=Object.keys(we.fields),Be=0;Be<Oe.length;++Be)Pe.add((typeof we.fields[Oe[Be]].keyType<"u"?te.fromJSON:Z.fromJSON)(Oe[Be],we.fields[Oe[Be]]));if(we.oneofs)for(Oe=Object.keys(we.oneofs),Be=0;Be<Oe.length;++Be)Pe.add(K.fromJSON(Oe[Be],we.oneofs[Oe[Be]]));if(we.nested)for(Oe=Object.keys(we.nested),Be=0;Be<Oe.length;++Be){var Ue=we.nested[Oe[Be]];Pe.add((Ue.id!==void 0?Z.fromJSON:Ue.fields!==void 0?Se.fromJSON:Ue.values!==void 0?_.fromJSON:Ue.methods!==void 0?ie.fromJSON:ne.fromJSON)(Oe[Be],Ue))}return we.extensions&&we.extensions.length&&(Pe.extensions=we.extensions),we.reserved&&we.reserved.length&&(Pe.reserved=we.reserved),we.group&&(Pe.group=!0),we.comment&&(Pe.comment=we.comment),we.edition&&(Pe._edition=we.edition),Pe._defaultEdition="proto3",Pe},Se.prototype.toJSON=function(be){var we=ne.prototype.toJSON.call(this,be),Pe=be?!!be.keepComments:!1;return le.toObject(["edition",this._editionToJSON(),"options",we&&we.options||void 0,"oneofs",ne.arrayToJSON(this.oneofsArray,be),"fields",ne.arrayToJSON(this.fieldsArray.filter(function(Oe){return!Oe.declaringField}),be)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",we&&we.nested||void 0,"comment",Pe?this.comment:void 0])},Se.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;ne.prototype.resolveAll.call(this);var be=this.oneofsArray;for(Pe=0;Pe<be.length;)be[Pe++].resolve();for(var we=this.fieldsArray,Pe=0;Pe<we.length;)we[Pe++].resolve();return this},Se.prototype._resolveFeaturesRecursive=function(be){return this._needsRecursiveFeatureResolution?(be=this._edition||be,ne.prototype._resolveFeaturesRecursive.call(this,be),this.oneofsArray.forEach(we=>{we._resolveFeatures(be)}),this.fieldsArray.forEach(we=>{we._resolveFeatures(be)}),this):this},Se.prototype.get=function(be){return this.fields[be]||this.oneofs&&this.oneofs[be]||this.nested&&this.nested[be]||null},Se.prototype.add=function(be){if(this.get(be.name))throw Error("duplicate name '"+be.name+"' in "+this);if(be instanceof Z&&be.extend===void 0){if(this._fieldsById?this._fieldsById[be.id]:this.fieldsById[be.id])throw Error("duplicate id "+be.id+" in "+this);if(this.isReservedId(be.id))throw Error("id "+be.id+" is reserved in "+this);if(this.isReservedName(be.name))throw Error("name '"+be.name+"' is reserved in "+this);return be.parent&&be.parent.remove(be),this.fields[be.name]=be,be.message=this,be.onAdd(this),Ee(this)}return be instanceof K?(this.oneofs||(this.oneofs={}),this.oneofs[be.name]=be,be.onAdd(this),Ee(this)):ne.prototype.add.call(this,be)},Se.prototype.remove=function(be){if(be instanceof Z&&be.extend===void 0){if(!this.fields||this.fields[be.name]!==be)throw Error(be+" is not a member of "+this);return delete this.fields[be.name],be.parent=null,be.onRemove(this),Ee(this)}if(be instanceof K){if(!this.oneofs||this.oneofs[be.name]!==be)throw Error(be+" is not a member of "+this);return delete this.oneofs[be.name],be.parent=null,be.onRemove(this),Ee(this)}return ne.prototype.remove.call(this,be)},Se.prototype.isReservedId=function(be){return ne.isReservedId(this.reserved,be)},Se.prototype.isReservedName=function(be){return ne.isReservedName(this.reserved,be)},Se.prototype.create=function(be){return new this.ctor(be)},Se.prototype.setup=function(){for(var be=this.fullName,we=[],Pe=0;Pe<this.fieldsArray.length;++Pe)we.push(this._fieldsArray[Pe].resolve().resolvedType);this.encode=ue(this)({Writer:ae,types:we,util:le}),this.decode=fe(this)({Reader:oe,types:we,util:le}),this.verify=he(this)({types:we,util:le}),this.fromObject=ge.fromObject(this)({types:we,util:le}),this.toObject=ge.toObject(this)({types:we,util:le});var Oe=_e[be];if(Oe){var Be=Object.create(this);Be.fromObject=this.fromObject,this.fromObject=Oe.fromObject.bind(Be),Be.toObject=this.toObject,this.toObject=Oe.toObject.bind(Be)}return this},Se.prototype.encode=function(be,we){return this.setup().encode(be,we)},Se.prototype.encodeDelimited=function(be,we){return this.encode(be,we&&we.len?we.fork():we).ldelim()},Se.prototype.decode=function(be,we){return this.setup().decode(be,we)},Se.prototype.decodeDelimited=function(be){return be instanceof oe||(be=oe.create(be)),this.decode(be,be.uint32())},Se.prototype.verify=function(be){return this.setup().verify(be)},Se.prototype.fromObject=function(be){return this.setup().fromObject(be)},Se.prototype.toObject=function(be,we){return this.setup().toObject(be,we)},Se.d=function(be){return function(Pe){le.decorateType(Pe,be)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=ae;var ne=requireNamespace();((ae.prototype=Object.create(ne.prototype)).constructor=ae).className="Root";var _=requireField(),K=require_enum(),Z=requireOneof(),te=requireUtil(),ie,se,oe;function ae(he){ne.call(this,"",he),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}ae.fromJSON=function(ge,_e){return _e||(_e=new ae),ge.options&&_e.setOptions(ge.options),_e.addJSON(ge.nested).resolveAll()},ae.prototype.resolvePath=te.path.resolve,ae.prototype.fetch=te.fetch;function le(){}ae.prototype.load=function he(ge,_e,Se){typeof _e=="function"&&(Se=_e,_e=void 0);var Ee=this;if(!Se)return te.asPromise(he,Ee,ge,_e);var ye=Se===le;function be(De,ke){if(Se){if(ye)throw De;ke&&ke.resolveAll();var Ge=Se;Se=null,Ge(De,ke)}}function we(De){var ke=De.lastIndexOf("google/protobuf/");if(ke>-1){var Ge=De.substring(ke);if(Ge in oe)return Ge}return null}function Pe(De,ke){try{if(te.isString(ke)&&ke.charAt(0)==="{"&&(ke=JSON.parse(ke)),!te.isString(ke))Ee.setOptions(ke.options).addJSON(ke.nested);else{se.filename=De;var Ge=se(ke,Ee,_e),Je,Ye=0;if(Ge.imports)for(;Ye<Ge.imports.length;++Ye)(Je=we(Ge.imports[Ye])||Ee.resolvePath(De,Ge.imports[Ye]))&&Oe(Je);if(Ge.weakImports)for(Ye=0;Ye<Ge.weakImports.length;++Ye)(Je=we(Ge.weakImports[Ye])||Ee.resolvePath(De,Ge.weakImports[Ye]))&&Oe(Je,!0)}}catch(Qe){be(Qe)}!ye&&!Be&&be(null,Ee)}function Oe(De,ke){if(De=we(De)||De,!(Ee.files.indexOf(De)>-1)){if(Ee.files.push(De),De in oe){ye?Pe(De,oe[De]):(++Be,setTimeout(function(){--Be,Pe(De,oe[De])}));return}if(ye){var Ge;try{Ge=te.fs.readFileSync(De).toString("utf8")}catch(Je){ke||be(Je);return}Pe(De,Ge)}else++Be,Ee.fetch(De,function(Je,Ye){if(--Be,!!Se){if(Je){ke?Be||be(null,Ee):be(Je);return}Pe(De,Ye)}})}}var Be=0;te.isString(ge)&&(ge=[ge]);for(var Ue=0,$e;Ue<ge.length;++Ue)($e=Ee.resolvePath("",ge[Ue]))&&Oe($e);return ye?(Ee.resolveAll(),Ee):(Be||be(null,Ee),Ee)},ae.prototype.loadSync=function(ge,_e){if(!te.isNode)throw Error("not supported");return this.load(ge,_e,le)},ae.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(ge){return"'extend "+ge.extend+"' in "+ge.parent.fullName}).join(", "));return ne.prototype.resolveAll.call(this)};var ue=/^[A-Z]/;function fe(he,ge){var _e=ge.parent.lookup(ge.extend);if(_e){var Se=new _(ge.fullName,ge.id,ge.type,ge.rule,void 0,ge.options);return _e.get(Se.name)||(Se.declaringField=ge,ge.extensionField=Se,_e.add(Se)),!0}return!1}return ae.prototype._handleAdd=function(ge){if(ge instanceof _)ge.extend!==void 0&&!ge.extensionField&&(fe(this,ge)||this.deferred.push(ge));else if(ge instanceof K)ue.test(ge.name)&&(ge.parent[ge.name]=ge.values);else if(!(ge instanceof Z)){if(ge instanceof ie)for(var _e=0;_e<this.deferred.length;)fe(this,this.deferred[_e])?this.deferred.splice(_e,1):++_e;for(var Se=0;Se<ge.nestedArray.length;++Se)this._handleAdd(ge._nestedArray[Se]);ue.test(ge.name)&&(ge.parent[ge.name]=ge)}(ge instanceof ie||ge instanceof K||ge instanceof _)&&(this._fullyQualifiedObjects[ge.fullName]=ge)},ae.prototype._handleRemove=function(ge){if(ge instanceof _){if(ge.extend!==void 0)if(ge.extensionField)ge.extensionField.parent.remove(ge.extensionField),ge.extensionField=null;else{var _e=this.deferred.indexOf(ge);_e>-1&&this.deferred.splice(_e,1)}}else if(ge instanceof K)ue.test(ge.name)&&delete ge.parent[ge.name];else if(ge instanceof ne){for(var Se=0;Se<ge.nestedArray.length;++Se)this._handleRemove(ge._nestedArray[Se]);ue.test(ge.name)&&delete ge.parent[ge.name]}delete this._fullyQualifiedObjects[ge.fullName]},ae._configure=function(he,ge,_e){ie=he,se=ge,oe=_e},root}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util.exports;hasRequiredUtil=1;var ne=util.exports=requireMinimal(),_=requireRoots(),K,Z;ne.codegen=requireCodegen(),ne.fetch=requireFetch(),ne.path=requirePath(),ne.fs=ne.inquire("fs"),ne.toArray=function(le){if(le){for(var ue=Object.keys(le),fe=new Array(ue.length),he=0;he<ue.length;)fe[he]=le[ue[he++]];return fe}return[]},ne.toObject=function(le){for(var ue={},fe=0;fe<le.length;){var he=le[fe++],ge=le[fe++];ge!==void 0&&(ue[he]=ge)}return ue};var te=/\\/g,ie=/"/g;ne.isReserved=function(le){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(le)},ne.safeProp=function(le){return!/^[$\w_]+$/.test(le)||ne.isReserved(le)?'["'+le.replace(te,"\\\\").replace(ie,'\\"')+'"]':"."+le},ne.ucFirst=function(le){return le.charAt(0).toUpperCase()+le.substring(1)};var se=/_([a-z])/g;ne.camelCase=function(le){return le.substring(0,1)+le.substring(1).replace(se,function(ue,fe){return fe.toUpperCase()})},ne.compareFieldsById=function(le,ue){return le.id-ue.id},ne.decorateType=function(le,ue){if(le.$type)return ue&&le.$type.name!==ue&&(ne.decorateRoot.remove(le.$type),le.$type.name=ue,ne.decorateRoot.add(le.$type)),le.$type;K||(K=requireType());var fe=new K(ue||le.name);return ne.decorateRoot.add(fe),fe.ctor=le,Object.defineProperty(le,"$type",{value:fe,enumerable:!1}),Object.defineProperty(le.prototype,"$type",{value:fe,enumerable:!1}),fe};var oe=0;return ne.decorateEnum=function(le){if(le.$type)return le.$type;Z||(Z=require_enum());var ue=new Z("Enum"+oe++,le);return ne.decorateRoot.add(ue),Object.defineProperty(le,"$type",{value:ue,enumerable:!1}),ue},ne.setProperty=function(le,ue,fe,he){function ge(_e,Se,Ee){var ye=Se.shift();if(ye==="__proto__"||ye==="prototype")return _e;if(Se.length>0)_e[ye]=ge(_e[ye]||{},Se,Ee);else{var be=_e[ye];if(be&&he)return _e;be&&(Ee=[].concat(be).concat(Ee)),_e[ye]=Ee}return _e}if(typeof le!="object")throw TypeError("dst must be an object");if(!ue)throw TypeError("path must be specified");return ue=ue.split("."),ge(le,ue,fe)},Object.defineProperty(ne,"decorateRoot",{get:function(){return _.decorated||(_.decorated=new(requireRoot()))}}),util.exports}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(ne){var _=ne,K=requireUtil(),Z=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function te(ie,se){var oe=0,ae={};for(se|=0;oe<ie.length;)ae[Z[oe+se]]=ie[oe++];return ae}_.basic=te([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),_.defaults=te([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",K.emptyArray,null]),_.long=te([0,0,0,1,1],7),_.mapKey=te([0,0,0,5,5,0,0,0,1,1,0,2],2),_.packed=te([1,5,0,0,0,5,5,0,0,0,1,1,0])})(types)),types}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=se;var ne=requireObject();((se.prototype=Object.create(ne.prototype)).constructor=se).className="Field";var _=require_enum(),K=requireTypes(),Z=requireUtil(),te,ie=/^required|optional|repeated$/;se.fromJSON=function(ae,le){var ue=new se(ae,le.id,le.type,le.rule,le.extend,le.options,le.comment);return le.edition&&(ue._edition=le.edition),ue._defaultEdition="proto3",ue};function se(oe,ae,le,ue,fe,he,ge){if(Z.isObject(ue)?(ge=fe,he=ue,ue=fe=void 0):Z.isObject(fe)&&(ge=he,he=fe,fe=void 0),ne.call(this,oe,he),!Z.isInteger(ae)||ae<0)throw TypeError("id must be a non-negative integer");if(!Z.isString(le))throw TypeError("type must be a string");if(ue!==void 0&&!ie.test(ue=ue.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(fe!==void 0&&!Z.isString(fe))throw TypeError("extend must be a string");ue==="proto3_optional"&&(ue="optional"),this.rule=ue&&ue!=="optional"?ue:void 0,this.type=le,this.id=ae,this.extend=fe||void 0,this.repeated=ue==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=Z.Long?K.long[le]!==void 0:!1,this.bytes=le==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=ge}return Object.defineProperty(se.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}}),Object.defineProperty(se.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(se.prototype,"delimited",{get:function(){return this.resolvedType instanceof te&&this._features.message_encoding==="DELIMITED"}}),Object.defineProperty(se.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}}),Object.defineProperty(se.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}}),se.prototype.setOption=function(ae,le,ue){return ne.prototype.setOption.call(this,ae,le,ue)},se.prototype.toJSON=function(ae){var le=ae?!!ae.keepComments:!1;return Z.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",le?this.comment:void 0])},se.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=K.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof te?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof _&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof _)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=Z.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var ae;Z.base64.test(this.typeDefault)?Z.base64.decode(this.typeDefault,ae=Z.newBuffer(Z.base64.length(this.typeDefault)),0):Z.utf8.write(this.typeDefault,ae=Z.newBuffer(Z.utf8.length(this.typeDefault)),0),this.typeDefault=ae}return this.map?this.defaultValue=Z.emptyObject:this.repeated?this.defaultValue=Z.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof te&&(this.parent.ctor.prototype[this.name]=this.defaultValue),ne.prototype.resolve.call(this)},se.prototype._inferLegacyProtoFeatures=function(ae){if(ae!=="proto2"&&ae!=="proto3")return{};var le={};if(this.rule==="required"&&(le.field_presence="LEGACY_REQUIRED"),this.parent&&K.defaults[this.type]===void 0){var ue=this.parent.get(this.type.split(".").pop());ue&&ue instanceof te&&ue.group&&(le.message_encoding="DELIMITED")}return this.getOption("packed")===!0?le.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(le.repeated_field_encoding="EXPANDED"),le},se.prototype._resolveFeatures=function(ae){return ne.prototype._resolveFeatures.call(this,this._edition||ae)},se.d=function(ae,le,ue,fe){return typeof le=="function"?le=Z.decorateType(le).name:le&&typeof le=="object"&&(le=Z.decorateEnum(le).name),function(ge,_e){Z.decorateType(ge.constructor).add(new se(_e,ae,le,ue,{default:fe}))}},se._configure=function(ae){te=ae},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=Z;var ne=requireObject();((Z.prototype=Object.create(ne.prototype)).constructor=Z).className="OneOf";var _=requireField(),K=requireUtil();function Z(ie,se,oe,ae){if(Array.isArray(se)||(oe=se,se=void 0),ne.call(this,ie,oe),!(se===void 0||Array.isArray(se)))throw TypeError("fieldNames must be an Array");this.oneof=se||[],this.fieldsArray=[],this.comment=ae}Z.fromJSON=function(se,oe){return new Z(se,oe.oneof,oe.options,oe.comment)},Z.prototype.toJSON=function(se){var oe=se?!!se.keepComments:!1;return K.toObject(["options",this.options,"oneof",this.oneof,"comment",oe?this.comment:void 0])};function te(ie){if(ie.parent)for(var se=0;se<ie.fieldsArray.length;++se)ie.fieldsArray[se].parent||ie.parent.add(ie.fieldsArray[se])}return Z.prototype.add=function(se){if(!(se instanceof _))throw TypeError("field must be a Field");return se.parent&&se.parent!==this.parent&&se.parent.remove(se),this.oneof.push(se.name),this.fieldsArray.push(se),se.partOf=this,te(this),this},Z.prototype.remove=function(se){if(!(se instanceof _))throw TypeError("field must be a Field");var oe=this.fieldsArray.indexOf(se);if(oe<0)throw Error(se+" is not a member of "+this);return this.fieldsArray.splice(oe,1),oe=this.oneof.indexOf(se.name),oe>-1&&this.oneof.splice(oe,1),se.partOf=null,this},Z.prototype.onAdd=function(se){ne.prototype.onAdd.call(this,se);for(var oe=this,ae=0;ae<this.oneof.length;++ae){var le=se.get(this.oneof[ae]);le&&!le.partOf&&(le.partOf=oe,oe.fieldsArray.push(le))}te(this)},Z.prototype.onRemove=function(se){for(var oe=0,ae;oe<this.fieldsArray.length;++oe)(ae=this.fieldsArray[oe]).parent&&ae.parent.remove(ae);ne.prototype.onRemove.call(this,se)},Object.defineProperty(Z.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var ie=this.fieldsArray[0];return ie.options!=null&&ie.options.proto3_optional===!0}}),Z.d=function(){for(var se=new Array(arguments.length),oe=0;oe<arguments.length;)se[oe]=arguments[oe++];return function(le,ue){K.decorateType(le.constructor).add(new Z(ue,se)),Object.defineProperty(le,ue,{get:K.oneOfGetter(se),set:K.oneOfSetter(se)})}},oneof}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=se,se.className="ReflectionObject";const ne=requireOneof();var _=requireUtil(),K,Z={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},te={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},ie={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function se(oe,ae){if(!_.isString(oe))throw TypeError("name must be a string");if(ae&&!_.isObject(ae))throw TypeError("options must be an object");this.options=ae,this.parsedOptions=null,this.name=oe,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(se.prototype,{root:{get:function(){for(var oe=this;oe.parent!==null;)oe=oe.parent;return oe}},fullName:{get:function(){for(var oe=[this.name],ae=this.parent;ae;)oe.unshift(ae.name),ae=ae.parent;return oe.join(".")}}}),se.prototype.toJSON=function(){throw Error()},se.prototype.onAdd=function(ae){this.parent&&this.parent!==ae&&this.parent.remove(this),this.parent=ae,this.resolved=!1;var le=ae.root;le instanceof K&&le._handleAdd(this)},se.prototype.onRemove=function(ae){var le=ae.root;le instanceof K&&le._handleRemove(this),this.parent=null,this.resolved=!1},se.prototype.resolve=function(){return this.resolved?this:(this.root instanceof K&&(this.resolved=!0),this)},se.prototype._resolveFeaturesRecursive=function(ae){return this._resolveFeatures(this._edition||ae)},se.prototype._resolveFeatures=function(ae){if(!this._featuresResolved){var le={};if(!ae)throw new Error("Unknown edition for "+this.fullName);var ue=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(ae));if(this._edition){if(ae==="proto2")le=Object.assign({},te);else if(ae==="proto3")le=Object.assign({},ie);else if(ae==="2023")le=Object.assign({},Z);else throw new Error("Unknown edition: "+ae);this._features=Object.assign(le,ue||{}),this._featuresResolved=!0;return}if(this.partOf instanceof ne){var fe=Object.assign({},this.partOf._features);this._features=Object.assign(fe,ue||{})}else if(!this.declaringField)if(this.parent){var he=Object.assign({},this.parent._features);this._features=Object.assign(he,ue||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},se.prototype._inferLegacyProtoFeatures=function(){return{}},se.prototype.getOption=function(ae){if(this.options)return this.options[ae]},se.prototype.setOption=function(ae,le,ue){return this.options||(this.options={}),/^features\./.test(ae)?_.setProperty(this.options,ae,le,ue):(!ue||this.options[ae]===void 0)&&(this.getOption(ae)!==le&&(this.resolved=!1),this.options[ae]=le),this},se.prototype.setParsedOption=function(ae,le,ue){this.parsedOptions||(this.parsedOptions=[]);var fe=this.parsedOptions;if(ue){var he=fe.find(function(Se){return Object.prototype.hasOwnProperty.call(Se,ae)});if(he){var ge=he[ae];_.setProperty(ge,ue,le)}else he={},he[ae]=_.setProperty({},ue,le),fe.push(he)}else{var _e={};_e[ae]=le,fe.push(_e)}return this},se.prototype.setOptions=function(ae,le){if(ae)for(var ue=Object.keys(ae),fe=0;fe<ue.length;++fe)this.setOption(ue[fe],ae[ue[fe]],le);return this},se.prototype.toString=function(){var ae=this.constructor.className,le=this.fullName;return le.length?ae+" "+le:ae},se.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition},se._configure=function(oe){K=oe},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=Z;var ne=requireObject();((Z.prototype=Object.create(ne.prototype)).constructor=Z).className="Enum";var _=requireNamespace(),K=requireUtil();function Z(te,ie,se,oe,ae,le){if(ne.call(this,te,se),ie&&typeof ie!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=oe,this.comments=ae||{},this.valuesOptions=le,this._valuesFeatures={},this.reserved=void 0,ie)for(var ue=Object.keys(ie),fe=0;fe<ue.length;++fe)typeof ie[ue[fe]]=="number"&&(this.valuesById[this.values[ue[fe]]=ie[ue[fe]]]=ue[fe])}return Z.prototype._resolveFeatures=function(ie){return ie=this._edition||ie,ne.prototype._resolveFeatures.call(this,ie),Object.keys(this.values).forEach(se=>{var oe=Object.assign({},this._features);this._valuesFeatures[se]=Object.assign(oe,this.valuesOptions&&this.valuesOptions[se]&&this.valuesOptions[se].features)}),this},Z.fromJSON=function(ie,se){var oe=new Z(ie,se.values,se.options,se.comment,se.comments);return oe.reserved=se.reserved,se.edition&&(oe._edition=se.edition),oe._defaultEdition="proto3",oe},Z.prototype.toJSON=function(ie){var se=ie?!!ie.keepComments:!1;return K.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",se?this.comment:void 0,"comments",se?this.comments:void 0])},Z.prototype.add=function(ie,se,oe,ae){if(!K.isString(ie))throw TypeError("name must be a string");if(!K.isInteger(se))throw TypeError("id must be an integer");if(this.values[ie]!==void 0)throw Error("duplicate name '"+ie+"' in "+this);if(this.isReservedId(se))throw Error("id "+se+" is reserved in "+this);if(this.isReservedName(ie))throw Error("name '"+ie+"' is reserved in "+this);if(this.valuesById[se]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+se+" in "+this);this.values[ie]=se}else this.valuesById[this.values[ie]=se]=ie;return ae&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[ie]=ae||null),this.comments[ie]=oe||null,this},Z.prototype.remove=function(ie){if(!K.isString(ie))throw TypeError("name must be a string");var se=this.values[ie];if(se==null)throw Error("name '"+ie+"' does not exist in "+this);return delete this.valuesById[se],delete this.values[ie],delete this.comments[ie],this.valuesOptions&&delete this.valuesOptions[ie],this},Z.prototype.isReservedId=function(ie){return _.isReservedId(this.reserved,ie)},Z.prototype.isReservedName=function(ie){return _.isReservedName(this.reserved,ie)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=te;var ne=require_enum(),_=requireTypes(),K=requireUtil();function Z(ie,se,oe,ae){return se.delimited?ie("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",oe,ae,(se.id<<3|3)>>>0,(se.id<<3|4)>>>0):ie("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",oe,ae,(se.id<<3|2)>>>0)}function te(ie){for(var se=K.codegen(["m","w"],ie.name+"$encode")("if(!w)")("w=Writer.create()"),oe,ae,le=ie.fieldsArray.slice().sort(K.compareFieldsById),oe=0;oe<le.length;++oe){var ue=le[oe].resolve(),fe=ie._fieldsArray.indexOf(ue),he=ue.resolvedType instanceof ne?"int32":ue.type,ge=_.basic[he];ae="m"+K.safeProp(ue.name),ue.map?(se("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",ae,ue.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",ae)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(ue.id<<3|2)>>>0,8|_.mapKey[ue.keyType],ue.keyType),ge===void 0?se("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",fe,ae):se(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ge,he,ae),se("}")("}")):ue.repeated?(se("if(%s!=null&&%s.length){",ae,ae),ue.packed&&_.packed[he]!==void 0?se("w.uint32(%i).fork()",(ue.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",ae)("w.%s(%s[i])",he,ae)("w.ldelim()"):(se("for(var i=0;i<%s.length;++i)",ae),ge===void 0?Z(se,ue,fe,ae+"[i]"):se("w.uint32(%i).%s(%s[i])",(ue.id<<3|ge)>>>0,he,ae)),se("}")):(ue.optional&&se("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",ae,ue.name),ge===void 0?Z(se,ue,fe,ae):se("w.uint32(%i).%s(%s)",(ue.id<<3|ge)>>>0,he,ae))}return se("return w")}return encoder_1}var hasRequiredIndexLight;function requireIndexLight(){if(hasRequiredIndexLight)return indexLight.exports;hasRequiredIndexLight=1;var ne=indexLight.exports=requireIndexMinimal();ne.build="light";function _(Z,te,ie){return typeof te=="function"?(ie=te,te=new ne.Root):te||(te=new ne.Root),te.load(Z,ie)}ne.load=_;function K(Z,te){return te||(te=new ne.Root),te.loadSync(Z)}return ne.loadSync=K,ne.encoder=requireEncoder(),ne.decoder=requireDecoder(),ne.verifier=requireVerifier(),ne.converter=requireConverter(),ne.ReflectionObject=requireObject(),ne.Namespace=requireNamespace(),ne.Root=requireRoot(),ne.Enum=require_enum(),ne.Type=requireType(),ne.Field=requireField(),ne.OneOf=requireOneof(),ne.MapField=requireMapfield(),ne.Service=requireService(),ne.Method=requireMethod(),ne.Message=requireMessage(),ne.wrappers=requireWrappers(),ne.types=requireTypes(),ne.util=requireUtil(),ne.ReflectionObject._configure(ne.Root),ne.Namespace._configure(ne.Type,ne.Service,ne.Enum),ne.Root._configure(ne.Type),ne.Field._configure(ne.Type),indexLight.exports}var tokenize_1,hasRequiredTokenize;function requireTokenize(){if(hasRequiredTokenize)return tokenize_1;hasRequiredTokenize=1,tokenize_1=ue;var ne=/[\s{}=;:[\],'"()<>]/g,_=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,K=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,Z=/^ *[*/]+ */,te=/^\s*\*?\/*/,ie=/\n/g,se=/\s/,oe=/\\(.?)/g,ae={0:"\0",r:"\r",n:`
`,t:"	"};function le(fe){return fe.replace(oe,function(he,ge){switch(ge){case"\\":case"":return ge;default:return ae[ge]||""}})}ue.unescape=le;function ue(fe,he){fe=fe.toString();var ge=0,_e=fe.length,Se=1,Ee=0,ye={},be=[],we=null;function Pe(rt){return Error("illegal "+rt+" (line "+Se+")")}function Oe(){var rt=we==="'"?K:_;rt.lastIndex=ge-1;var ot=rt.exec(fe);if(!ot)throw Pe("string");return ge=rt.lastIndex,Ge(we),we=null,le(ot[1])}function Be(rt){return fe.charAt(rt)}function Ue(rt,ot,ct){var je={type:fe.charAt(rt++),lineEmpty:!1,leading:ct},st;he?st=2:st=3;var nt=rt-st,qe;do if(--nt<0||(qe=fe.charAt(nt))===`
`){je.lineEmpty=!0;break}while(qe===" "||qe==="	");for(var lt=fe.substring(rt,ot).split(ie),Pt=0;Pt<lt.length;++Pt)lt[Pt]=lt[Pt].replace(he?te:Z,"").trim();je.text=lt.join(`
`).trim(),ye[Se]=je,Ee=Se}function $e(rt){var ot=De(rt),ct=fe.substring(rt,ot),je=/^\s*\/\//.test(ct);return je}function De(rt){for(var ot=rt;ot<_e&&Be(ot)!==`
`;)ot++;return ot}function ke(){if(be.length>0)return be.shift();if(we)return Oe();var rt,ot,ct,je,st,nt=ge===0;do{if(ge===_e)return null;for(rt=!1;se.test(ct=Be(ge));)if(ct===`
`&&(nt=!0,++Se),++ge===_e)return null;if(Be(ge)==="/"){if(++ge===_e)throw Pe("comment");if(Be(ge)==="/")if(he){if(je=ge,st=!1,$e(ge-1)){st=!0;do if(ge=De(ge),ge===_e||(ge++,!nt))break;while($e(ge))}else ge=Math.min(_e,De(ge)+1);st&&(Ue(je,ge,nt),nt=!0),Se++,rt=!0}else{for(st=Be(je=ge+1)==="/";Be(++ge)!==`
`;)if(ge===_e)return null;++ge,st&&(Ue(je,ge-1,nt),nt=!0),++Se,rt=!0}else if((ct=Be(ge))==="*"){je=ge+1,st=he||Be(je)==="*";do{if(ct===`
`&&++Se,++ge===_e)throw Pe("comment");ot=ct,ct=Be(ge)}while(ot!=="*"||ct!=="/");++ge,st&&(Ue(je,ge-2,nt),nt=!0),rt=!0}else return"/"}}while(rt);var qe=ge;ne.lastIndex=0;var lt=ne.test(Be(qe++));if(!lt)for(;qe<_e&&!ne.test(Be(qe));)++qe;var Pt=fe.substring(ge,ge=qe);return(Pt==='"'||Pt==="'")&&(we=Pt),Pt}function Ge(rt){be.push(rt)}function Je(){if(!be.length){var rt=ke();if(rt===null)return null;Ge(rt)}return be[0]}function Ye(rt,ot){var ct=Je(),je=ct===rt;if(je)return ke(),!0;if(!ot)throw Pe("token '"+ct+"', '"+rt+"' expected");return!1}function Qe(rt){var ot=null,ct;return rt===void 0?(ct=ye[Se-1],delete ye[Se-1],ct&&(he||ct.type==="*"||ct.lineEmpty)&&(ot=ct.leading?ct.text:null)):(Ee<rt&&Je(),ct=ye[rt],delete ye[rt],ct&&!ct.lineEmpty&&(he||ct.type==="/")&&(ot=ct.leading?null:ct.text)),ot}return Object.defineProperty({next:ke,peek:Je,push:Ge,skip:Ye,cmnt:Qe},"line",{get:function(){return Se}})}return tokenize_1}var parse_1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1,parse_1=Oe,Oe.filename=null,Oe.defaults={keepCase:!1};var ne=requireTokenize(),_=requireRoot(),K=requireType(),Z=requireField(),te=requireMapfield(),ie=requireOneof(),se=require_enum(),oe=requireService(),ae=requireMethod(),le=requireObject(),ue=requireTypes(),fe=requireUtil(),he=/^[1-9][0-9]*$/,ge=/^-?[1-9][0-9]*$/,_e=/^0[x][0-9a-fA-F]+$/,Se=/^-?0[x][0-9a-fA-F]+$/,Ee=/^0[0-7]+$/,ye=/^-?0[0-7]+$/,be=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,we=/^[a-zA-Z_][a-zA-Z_0-9]*$/,Pe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function Oe(Be,Ue,$e){Ue instanceof _||($e=Ue,Ue=new _),$e||($e=Oe.defaults);var De=$e.preferTrailingComment||!1,ke=ne(Be,$e.alternateCommentMode||!1),Ge=ke.next,Je=ke.push,Ye=ke.peek,Qe=ke.skip,rt=ke.cmnt,ot=!0,ct,je,st,nt="proto2",qe=Ue,lt=[],Pt={},Gt=$e.keepCase?function(mt){return mt}:fe.camelCase;function pt(){lt.forEach(mt=>{mt._edition=nt,Object.keys(Pt).forEach(xt=>{mt.getOption(xt)===void 0&&mt.setOption(xt,Pt[xt],!0)})})}function yt(mt,xt,Xe){var at=Oe.filename;return Xe||(Oe.filename=null),Error("illegal "+(xt||"token")+" '"+mt+"' ("+(at?at+", ":"")+"line "+ke.line+")")}function Bt(){var mt=[],xt;do{if((xt=Ge())!=='"'&&xt!=="'")throw yt(xt);mt.push(Ge()),Qe(xt),xt=Ye()}while(xt==='"'||xt==="'");return mt.join("")}function Wt(mt){var xt=Ge();switch(xt){case"'":case'"':return Je(xt),Bt();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return nn(xt,!0)}catch{if(Pe.test(xt))return xt;throw yt(xt,"value")}}function jt(mt,xt){var Xe,at;do if(xt&&((Xe=Ye())==='"'||Xe==="'")){var At=Bt();if(mt.push(At),nt>=2023)throw yt(At,"id")}else try{mt.push([at=an(Ge()),Qe("to",!0)?an(Ge()):at])}catch(Ot){if(xt&&Pe.test(Xe)&&nt>=2023)mt.push(Xe);else throw Ot}while(Qe(",",!0));var Ze={options:void 0};Ze.setOption=function(Ot,Ht){this.options===void 0&&(this.options={}),this.options[Ot]=Ht},It(Ze,function(Ht){if(Ht==="option")ft(Ze,Ht),Qe(";");else throw yt(Ht)},function(){un(Ze)})}function nn(mt,xt){var Xe=1;switch(mt.charAt(0)==="-"&&(Xe=-1,mt=mt.substring(1)),mt){case"inf":case"INF":case"Inf":return Xe*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(he.test(mt))return Xe*parseInt(mt,10);if(_e.test(mt))return Xe*parseInt(mt,16);if(Ee.test(mt))return Xe*parseInt(mt,8);if(be.test(mt))return Xe*parseFloat(mt);throw yt(mt,"number",xt)}function an(mt,xt){switch(mt){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!xt&&mt.charAt(0)==="-")throw yt(mt,"id");if(ge.test(mt))return parseInt(mt,10);if(Se.test(mt))return parseInt(mt,16);if(ye.test(mt))return parseInt(mt,8);throw yt(mt,"id")}function mn(){if(ct!==void 0)throw yt("package");if(ct=Ge(),!Pe.test(ct))throw yt(ct,"name");qe=qe.define(ct),Qe(";")}function tt(){var mt=Ye(),xt;switch(mt){case"weak":xt=st||(st=[]),Ge();break;case"public":Ge();default:xt=je||(je=[]);break}mt=Bt(),Qe(";"),xt.push(mt)}function Ut(){if(Qe("="),nt=Bt(),nt<2023)throw yt(nt,"syntax");Qe(";")}function Dt(){if(Qe("="),nt=Bt(),!["2023"].includes(nt))throw yt(nt,"edition");Qe(";")}function Vt(mt,xt){switch(xt){case"option":return ft(mt,xt),Qe(";"),!0;case"message":return Qt(mt,xt),!0;case"enum":return We(mt,xt),!0;case"service":return Yt(mt,xt),!0;case"extend":return gn(mt,xt),!0}return!1}function It(mt,xt,Xe){var at=ke.line;if(mt&&(typeof mt.comment!="string"&&(mt.comment=rt()),mt.filename=Oe.filename),Qe("{",!0)){for(var At;(At=Ge())!=="}";)xt(At);Qe(";",!0)}else Xe&&Xe(),Qe(";"),mt&&(typeof mt.comment!="string"||De)&&(mt.comment=rt(at)||mt.comment)}function Qt(mt,xt){if(!we.test(xt=Ge()))throw yt(xt,"type name");var Xe=new K(xt);It(Xe,function(At){if(!Vt(Xe,At))switch(At){case"map":Tn(Xe);break;case"required":if(nt!=="proto2")throw yt(At);case"repeated":kt(Xe,At);break;case"optional":if(nt==="proto3")kt(Xe,"proto3_optional");else{if(nt!=="proto2")throw yt(At);kt(Xe,"optional")}break;case"oneof":Sn(Xe,At);break;case"extensions":jt(Xe.extensions||(Xe.extensions=[]));break;case"reserved":jt(Xe.reserved||(Xe.reserved=[]),!0);break;default:if(nt==="proto2"||!Pe.test(At))throw yt(At);Je(At),kt(Xe,"optional");break}}),mt.add(Xe),mt===qe&&lt.push(Xe)}function kt(mt,xt,Xe){var at=Ge();if(at==="group"){qt(mt,xt);return}for(;at.endsWith(".")||Ye().startsWith(".");)at+=Ge();if(!Pe.test(at))throw yt(at,"type");var At=Ge();if(!we.test(At))throw yt(At,"name");At=Gt(At),Qe("=");var Ze=new Z(At,an(Ge()),at,xt,Xe);if(It(Ze,function(en){if(en==="option")ft(Ze,en),Qe(";");else throw yt(en)},function(){un(Ze)}),xt==="proto3_optional"){var Ot=new ie("_"+At);Ze.setOption("proto3_optional",!0),Ot.add(Ze),mt.add(Ot)}else mt.add(Ze);mt===qe&&lt.push(Ze)}function qt(mt,xt){if(nt>=2023)throw yt("group");var Xe=Ge();if(!we.test(Xe))throw yt(Xe,"name");var at=fe.lcFirst(Xe);Xe===at&&(Xe=fe.ucFirst(Xe)),Qe("=");var At=an(Ge()),Ze=new K(Xe);Ze.group=!0;var Ot=new Z(at,At,Xe,xt);Ot.filename=Oe.filename,It(Ze,function(en){switch(en){case"option":ft(Ze,en),Qe(";");break;case"required":case"repeated":kt(Ze,en);break;case"optional":nt==="proto3"?kt(Ze,"proto3_optional"):kt(Ze,"optional");break;case"message":Qt(Ze,en);break;case"enum":We(Ze,en);break;case"reserved":jt(Ze.reserved||(Ze.reserved=[]),!0);break;default:throw yt(en)}}),mt.add(Ze).add(Ot)}function Tn(mt){Qe("<");var xt=Ge();if(ue.mapKey[xt]===void 0)throw yt(xt,"type");Qe(",");var Xe=Ge();if(!Pe.test(Xe))throw yt(Xe,"type");Qe(">");var at=Ge();if(!we.test(at))throw yt(at,"name");Qe("=");var At=new te(Gt(at),an(Ge()),xt,Xe);It(At,function(Ot){if(Ot==="option")ft(At,Ot),Qe(";");else throw yt(Ot)},function(){un(At)}),mt.add(At)}function Sn(mt,xt){if(!we.test(xt=Ge()))throw yt(xt,"name");var Xe=new ie(Gt(xt));It(Xe,function(At){At==="option"?(ft(Xe,At),Qe(";")):(Je(At),kt(Xe,"optional"))}),mt.add(Xe)}function We(mt,xt){if(!we.test(xt=Ge()))throw yt(xt,"name");var Xe=new se(xt);It(Xe,function(At){switch(At){case"option":ft(Xe,At),Qe(";");break;case"reserved":jt(Xe.reserved||(Xe.reserved=[]),!0),Xe.reserved===void 0&&(Xe.reserved=[]);break;default:Ve(Xe,At)}}),mt.add(Xe),mt===qe&&lt.push(Xe)}function Ve(mt,xt){if(!we.test(xt))throw yt(xt,"name");Qe("=");var Xe=an(Ge(),!0),at={options:void 0};at.getOption=function(At){return this.options[At]},at.setOption=function(At,Ze){le.prototype.setOption.call(at,At,Ze)},at.setParsedOption=function(){},It(at,function(Ze){if(Ze==="option")ft(at,Ze),Qe(";");else throw yt(Ze)},function(){un(at)}),mt.add(xt,Xe,at.comment,at.parsedOptions||at.options)}function ft(mt,xt){var Xe,at,At=!0;for(xt==="option"&&(xt=Ge());xt!=="=";){if(xt==="("){var Ze=Ge();Qe(")"),xt="("+Ze+")"}if(At){if(At=!1,xt.includes(".")&&!xt.includes("(")){var Ot=xt.split(".");Xe=Ot[0]+".",xt=Ot[1];continue}Xe=xt}else at=at?at+=xt:xt;xt=Ge()}var Ht=at?Xe.concat(at):Xe,en=Et(mt,Ht);at=at&&at[0]==="."?at.slice(1):at,Xe=Xe&&Xe[Xe.length-1]==="."?Xe.slice(0,-1):Xe,Ct(mt,Xe,en,at)}function Et(mt,xt){if(Qe("{",!0)){for(var Xe={};!Qe("}",!0);){if(!we.test($t=Ge()))throw yt($t,"name");if($t===null)throw yt($t,"end of input");var at,At=$t;if(Qe(":",!0),Ye()==="{")at=Et(mt,xt+"."+$t);else if(Ye()==="["){at=[];var Ze;if(Qe("[",!0)){do Ze=Wt(),at.push(Ze);while(Qe(",",!0));Qe("]"),typeof Ze<"u"&&Ft(mt,xt+"."+$t,Ze)}}else at=Wt(),Ft(mt,xt+"."+$t,at);var Ot=Xe[At];Ot&&(at=[].concat(Ot).concat(at)),Xe[At]=at,Qe(",",!0),Qe(";",!0)}return Xe}var Ht=Wt();return Ft(mt,xt,Ht),Ht}function Ft(mt,xt,Xe){if(qe===mt&&/^features\./.test(xt)){Pt[xt]=Xe;return}mt.setOption&&mt.setOption(xt,Xe)}function Ct(mt,xt,Xe,at){mt.setParsedOption&&mt.setParsedOption(xt,Xe,at)}function un(mt){if(Qe("[",!0)){do ft(mt,"option");while(Qe(",",!0));Qe("]")}return mt}function Yt(mt,xt){if(!we.test(xt=Ge()))throw yt(xt,"service name");var Xe=new oe(xt);It(Xe,function(At){if(!Vt(Xe,At))if(At==="rpc")fn(Xe,At);else throw yt(At)}),mt.add(Xe),mt===qe&&lt.push(Xe)}function fn(mt,xt){var Xe=rt(),at=xt;if(!we.test(xt=Ge()))throw yt(xt,"name");var At=xt,Ze,Ot,Ht,en;if(Qe("("),Qe("stream",!0)&&(Ot=!0),!Pe.test(xt=Ge())||(Ze=xt,Qe(")"),Qe("returns"),Qe("("),Qe("stream",!0)&&(en=!0),!Pe.test(xt=Ge())))throw yt(xt);Ht=xt,Qe(")");var Kt=new ae(At,at,Ze,Ht,Ot,en);Kt.comment=Xe,It(Kt,function(ln){if(ln==="option")ft(Kt,ln),Qe(";");else throw yt(ln)}),mt.add(Kt)}function gn(mt,xt){if(!Pe.test(xt=Ge()))throw yt(xt,"reference");var Xe=xt;It(null,function(At){switch(At){case"required":case"repeated":kt(mt,At,Xe);break;case"optional":nt==="proto3"?kt(mt,"proto3_optional",Xe):kt(mt,"optional",Xe);break;default:if(nt==="proto2"||!Pe.test(At))throw yt(At);Je(At),kt(mt,"optional",Xe);break}})}for(var $t;($t=Ge())!==null;)switch($t){case"package":if(!ot)throw yt($t);mn();break;case"import":if(!ot)throw yt($t);tt();break;case"syntax":if(!ot)throw yt($t);Ut();break;case"edition":if(!ot)throw yt($t);Dt();break;case"option":ft(qe,$t),Qe(";",!0);break;default:if(Vt(qe,$t)){ot=!1;continue}throw yt($t)}return pt(),Oe.filename=null,{package:ct,imports:je,weakImports:st,root:Ue}}return parse_1}var common_1,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common_1;hasRequiredCommon=1,common_1=_;var ne=/\/|\./;function _(Z,te){ne.test(Z)||(Z="google/protobuf/"+Z+".proto",te={nested:{google:{nested:{protobuf:{nested:te}}}}}),_[Z]=te}_("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var K;return _("duration",{Duration:K={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),_("timestamp",{Timestamp:K}),_("empty",{Empty:{fields:{}}}),_("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),_("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),_("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),_.get=function(te){return _[te]||null},common_1}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src.exports;hasRequiredSrc=1;var ne=src.exports=requireIndexLight();return ne.build="full",ne.tokenize=requireTokenize(),ne.parse=requireParse(),ne.common=requireCommon(),ne.Root._configure(ne.Type,ne.parse,ne.common),src.exports}var protobufjs,hasRequiredProtobufjs;function requireProtobufjs(){return hasRequiredProtobufjs||(hasRequiredProtobufjs=1,protobufjs=requireSrc()),protobufjs}requireProtobufjs();function HoverCursor({texturePath:ne="/images/point.png",size:_=.35,offset:K=.03,opacity:Z=1,exclude:te=ue=>ue?.name==="hover-cursor"||ue?.geometry?.type==="BoxGeometry",roomPoints:ie=[],onSelectRoom:se,clickToNearest:oe=!0,currentPosition:ae=null,currentRoomIndex:le=null}){const{camera:ue,scene:fe,pointer:he,raycaster:ge,size:_e,gl:Se}=useThree(),Ee=useLoader(TextureLoader,ne),ye=reactExports.useRef(),[be,we]=reactExports.useState(!1),Pe=reactExports.useRef({point:null,object:null}),Oe=reactExports.useRef(!1),Be=reactExports.useRef({x:0,y:0}),Ue=reactExports.useMemo(()=>(Ee.anisotropy=4,Ee.encoding=void 0,Ee.needsUpdate=!0,new MeshBasicMaterial({map:Ee,transparent:!0,depthWrite:!1,toneMapped:!0,opacity:Z})),[Ee,Z]);return useFrame(()=>{ge.setFromCamera(he,ue);const $e=ge.intersectObjects(fe.children,!0).filter(Qe=>Qe.object?.isMesh&&!te(Qe.object));if($e.length===0){we(!1),Pe.current={point:null,object:null};return}const De=$e[0],ke=De.point,Ge=De.face?.normal?.clone()||new Vector3(0,1,0);Ge.transformDirection(De.object.matrixWorld).normalize();const Je=new Vector3().copy(ke).addScaledVector(Ge,K),Ye=new Quaternion().setFromUnitVectors(new Vector3(0,0,1),Ge);ye.current&&(ye.current.position.copy(Je),ye.current.quaternion.copy(Ye),we(!0)),Pe.current={point:ke,object:De.object}}),reactExports.useEffect(()=>{if(!Se?.domElement)return;const $e=Ge=>{Be.current={x:Ge.clientX,y:Ge.clientY},Oe.current=!1},De=Ge=>{const Je=Ge.clientX-Be.current.x,Ye=Ge.clientY-Be.current.y;Math.hypot(Je,Ye)>5&&(Oe.current=!0)},ke=Ge=>{if(!oe||Oe.current)return;const Je=Se.domElement.getBoundingClientRect(),Ye=new Vector2((Ge.clientX-Je.left)/Je.width*2-1,-((Ge.clientY-Je.top)/Je.height*2-1));ge.setFromCamera(Ye,ue);const Qe=ge.intersectObjects(fe.children,!0).filter(st=>st.object?.isMesh&&!te(st.object));if(Qe.length===0||Qe[0].object?.userData?.isRoomPoint||!ie||ie.length===0||!se)return;const ot=ae?new Vector3(ae.x,ae.y,ae.z):ge.ray.origin.clone(),ct=ge.ray.direction.clone().normalize();let je={index:null,perpSq:1/0,t:1/0};for(const st of ie){if(!st?.position||le!==null&&st.index===le)continue;const qe=new Vector3(st.position.x,st.position.y,st.position.z).clone().sub(ot),lt=qe.dot(ct);if(lt<=0)continue;const Gt=qe.lengthSq()-lt*lt;(Gt<je.perpSq||Gt===je.perpSq&&lt<je.t)&&(je={index:st.index,perpSq:Gt,t:lt})}if(je.index===null){let st=null,nt=1/0;for(const qe of ie){if(!qe?.position||le!==null&&qe.index===le)continue;const lt=ot.x-qe.position.x,Pt=ot.y-qe.position.y,Gt=ot.z-qe.position.z,pt=lt*lt+Pt*Pt+Gt*Gt;pt<nt&&(nt=pt,st=qe.index)}st!=null&&se(st);return}se(je.index)};return Se.domElement.addEventListener("pointerdown",$e,{passive:!0}),Se.domElement.addEventListener("pointermove",De,{passive:!0}),Se.domElement.addEventListener("pointerup",ke,{passive:!0}),()=>{Se.domElement.removeEventListener("pointerdown",$e),Se.domElement.removeEventListener("pointermove",De),Se.domElement.removeEventListener("pointerup",ke)}},[Se,fe,ue,ge,te,ie,se,oe,ae,le]),jsxRuntimeExports.jsxs("mesh",{ref:ye,name:"hover-cursor",visible:be,renderOrder:999,userData:{ignoreHoverCursor:!0},children:[jsxRuntimeExports.jsx("planeGeometry",{args:[_,_]}),jsxRuntimeExports.jsx("primitive",{object:Ue,attach:"material"})]})}function App(){const[ne,_]=reactExports.useState(null),[K,Z]=reactExports.useState([]),[te,ie]=reactExports.useState([]),[se,oe]=reactExports.useState(0),[ae,le]=reactExports.useState(!1),[ue,fe]=reactExports.useState({x:0,y:0,z:0}),[he,ge]=reactExports.useState({x:0,y:0,z:0,w:1}),[_e,Se]=reactExports.useState({x:0,y:0,z:0}),Ee=reactExports.useRef(),[ye,be]=reactExports.useState([]);useLoader(TextureLoader,"/images/point.png"),reactExports.useEffect(()=>{console.log("panos updated:",K)},[K]),reactExports.useEffect(()=>{(async()=>{try{const $e=await getApiData(),De=(Array.isArray($e)?$e:[]).map((ke,Ge)=>{const Je={x:ke.pos?.[0]??0,y:ke.pos?.[1]??0,z:ke.pos?.[2]??0},Ye={x:ke.rot_quat?.[0]??0,y:ke.rot_quat?.[1]??0,z:ke.rot_quat?.[2]??0,w:ke.rot_quat?.[3]??1};return{position:convertPosition(Je),rotation:convertRotation(Ye),panos:[ke.image?.startsWith("/")?ke.image:`/${ke.image}`],index:Ge}});Z(De),De.length>0&&(le(!0),ie(De[0].panos),fe(De[0].position),ge(De[0].rotation),Se(De[0].position))}catch($e){_($e.message),console.log(ne)}})()},[]),reactExports.useEffect(()=>{if(!K.length)return;const Ue=K.flatMap(ke=>ke.panos||[]),$e=["/models/Model.glb"],De=Array.from(new Set([...Ue,...$e]));be(De)},[K]);const{isLoading:we,progress:Pe,get:Oe}=useTextureCache(ye),Be=reactExports.useCallback(Ue=>{Ue===se||ae===!0||(K.map($e=>{if($e.index===Ue)ae||(le(!0),ge($e.rotation),fe($e.position),ie($e.panos),Se($e.position));else return}),oe(Ue))},[se,ae]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderManager,{isLoading:we,progress:Pe}),jsxRuntimeExports.jsxs(Canvas$1,{camera:{position:[0,2,8],fov:75,near:.1,far:1e3},onCreated:({scene:Ue})=>{Object3D.DEFAULT_UP.set(0,0,1),Ue.up.set(0,0,1)},gl:{toneMapping:ACESFilmicToneMapping,toneMappingExposure:1.5,outputEncoding:void 0},style:{width:"100vw",height:"100vh",background:"linear-gradient(to bottom, #1a1a2e, #16213e)"},children:[jsxRuntimeExports.jsx(Camera,{animateTo:_e}),jsxRuntimeExports.jsx("ambientLight",{intensity:2}),jsxRuntimeExports.jsx("primitive",{object:new AxesHelper(35)}),jsxRuntimeExports.jsx("group",{ref:Ee,children:K.map(Ue=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(RoomPoints,{pos:Ue.position,isActive:Ue.index===se,isClicked:Ue.index===se,onClick:()=>{Be(Ue.index)}},Ue.index)}))}),jsxRuntimeExports.jsx(ProjectedPanoMesh,{modelUrl:"/models/model3.glb",cubeFaces:te,mpQuaternion:he,faceOrder:[2,4,0,5,1,3],scale:[1,1,1],panoPosition:[ue.x,ue.y,ue.z],textureCache:Oe,updateAnimation:le}),jsxRuntimeExports.jsx(MatterTag,{position:[5.365654531141063,1.6400552468899843,2.3959047743518265],label:"Savant Controls | Smart Home Technology",description:"Door locks, Shades, HVAC controls, and more controlled by user-friendly Savant technology.",color:"#03687d"}),jsxRuntimeExports.jsx(HoverCursor,{texturePath:"/images/point.png",size:.4,roomPoints:K.map(Ue=>({index:Ue.index,position:Ue.position})),onSelectRoom:Be,currentPosition:ue,currentRoomIndex:se})]})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
